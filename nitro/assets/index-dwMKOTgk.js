import{N as Gr,a as nc,H as ni,M as Ne,T as Is,R as Z,b as qe,A as ta,c as zt,G as Lh,d as X,D as Mh,C as fs,e as Uh,f as Me,g as Fh,h as Yi,i as xn,j as Ds,k as rc,l as $i,E as Vh,m as Yc,n as As,o as Va,p as lt,F as Wi,q as Ga,S as ri,r as ja,s as Gh,t as Yd,u as Ba,v as Bh,w as Hh,x as Wh,y as Ki,z as _s,B as Tn,O as $d,V as vt,I as Jo,P as ra,J as Mt,K as $s,U as qh,L as zh,Q as o,W as e,X as ac,Y as ic,Z as Yh,_ as Us,$ as oc,a0 as Zo,a1 as Kd,a2 as Hn,a3 as dr,a4 as $h,a5 as Ln,a6 as Xd,a7 as at,a8 as Kh,a9 as Xh,aa as Qh,ab as Jh,ac as Zh,ad as eg,ae as tg,af as sg,ag as ng,ah as rg,ai as ag,aj as ig,ak as Qd,al as og,am as lg,an as cg,ao as ug,ap as dg,aq as mg,ar as hg,as as gg,at as fg,au as pg,av as xg,aw as jg,ax as Ig,ay as Eg,az as Pl,aA as bg,aB as Jd,aC as Cg,aD as Ng,aE as vg,aF as _g,aG as Sg,aH as wg,aI as Tg,aJ as Rg,aK as yg,aL as Og,aM as kg,aN as Ag,aO as Dg,aP as Zd,aQ as Pg,aR as Lg,aS as Mg,aT as $c,aU as Ug,aV as Fg,aW as Vg,aX as Po,aY as Gg,aZ as Bg,a_ as em,a$ as Hg,b0 as Wg,b1 as Xi,b2 as yt,b3 as ua,b4 as tm,b5 as sm,b6 as qg,b7 as zg,b8 as Yg,b9 as $g,ba as Kg,bb as Xg,bc as Qg,bd as Jg,be as Zg,bf as lc,bg as Ea,bh as nm,bi as Kc,bj as ef,bk as tf,bl as sf,bm as nf,bn as rf,bo as af,bp as of,bq as lf,br as cf,bs as uf,bt as df,bu as mf,bv as hf,bw as gf,bx as ff,by as pf,bz as xf,bA as jf,bB as If,bC as Ef,bD as bf,bE as Cf,bF as Nf,bG as vf,bH as _f,bI as Sf,bJ as wf,bK as Tf,bL as Rf,bM as yf,bN as rm,bO as Ll,bP as Of,bQ as am,bR as kf,bS as Af,bT as Df,bU as Pf,bV as Lf,bW as Mf,bX as Uf,bY as Ff,bZ as Vf,b_ as Gf,b$ as Bf,c0 as Hf,c1 as Wf,c2 as qf,c3 as zf,c4 as Yf,c5 as $f,c6 as Kf,c7 as Xf,c8 as Qf,c9 as Jf,ca as Zf,cb as ep,cc as tp,cd as sp,ce as np,cf as rp,cg as ap,ch as ip,ci as op,cj as lp,ck as cp,cl as up,cm as dp,cn as im,co as om,cp as Qi,cq as mp,cr as hp,cs as Ha,ct as lm,cu as Je,cv as gp,cw as fp,cx as pp,cy as xp,cz as jp,cA as Ip,cB as Ep,cC as bp,cD as Cp,cE as Np,cF as vp,cG as el,cH as _p,cI as Sp,cJ as wp,cK as Tp,cL as Rp,cM as yp,cN as Op,cO as Xc,cP as kp,cQ as Ap,cR as Er,cS as Dp,cT as Pp,cU as Ns,cV as gt,cW as Lp,cX as Mp,cY as Up,cZ as fi,c_ as Ms,c$ as be,d0 as Fp,d1 as Lt,d2 as Vp,d3 as Gp,d4 as Bp,d5 as Hp,d6 as Wp,d7 as qp,d8 as zp,d9 as Yp,da as $p,db as Kp,dc as Xp,dd as Qp,de as Jp,df as Zp,dg as ex,dh as tx,di as sx,dj as Ml,dk as nx,dl as rx,dm as ax,dn as cm,dp as ix,dq as ox,dr as Qc,ds as lx,dt as cx,du as ux,dv as dx,dw as Ul,dx as mx,dy as hx,dz as gx,dA as fx,dB as pi,dC as Jc,dD as px,dE as xx,dF as jx,dG as Ix,dH as um,dI as Ex,dJ as dm,dK as bx,dL as mm,dM as Cx,dN as Nx,dO as vx,dP as _x,dQ as Zc,dR as Rs,dS as hm,dT as ba,dU as ln,dV as eu,dW as tu,dX as ft,dY as Dn,dZ as Sx,d_ as wx,d$ as Tx,e0 as Rx,e1 as tl,e2 as yx,e3 as su,e4 as nu,e5 as Ox,e6 as sl,e7 as nl,e8 as kx,e9 as Ax,ea as Dx,eb as Px,ec as Lx,ed as Mx,ee as xi,ef as Ux,eg as Fx,eh as Vx,ei as gm,ej as Gx,ek as Bx,el as cc,em as Hx,en as Wx,eo as qx,ep as zx,eq as Yx,er as $x,es as Kx,et as Xx,eu as Qx,ev as Jx,ew as Zx,ex as rl,ey as ej,ez as tj,eA as sj,eB as nj,eC as rj,eD as aj,eE as ij,eF as oj,eG as lj,eH as Es,eI as bs,eJ as cj,eK as Lo,eL as uc,eM as dc,eN as fm,eO as pm,eP as uj,eQ as dj,eR as mj,eS as hj,eT as gj,eU as Ca,eV as fj,eW as pj,eX as xj,eY as jj,eZ as Ij,e_ as ru,e$ as Ej,f0 as bj,f1 as Cj,f2 as Nj,f3 as vj,f4 as _j,f5 as au,f6 as Sj,f7 as wj,f8 as Tj,f9 as Rj,fa as yj,fb as Oj,fc as kj,fd as Aj,fe as Dj,ff as Pj,fg as Lj,fh as Mj,fi as Uj,fj as xm,fk as Fj,fl as Vj,fm as jm,fn as Im,fo as Gj,fp as Bj,fq as Em,fr as Hj,fs as Wj,ft as qj,fu as zj,fv as Yj,fw as $j,fx as Kj,fy as Xj,fz as Qj,fA as Jj,fB as Zj,fC as eI,fD as tI,fE as sI,fF as nI,fG as mc,fH as ai,fI as rI,fJ as al,fK as aI,fL as iu,fM as iI,fN as oI,fO as as,fP as lI,fQ as cI,fR as uI,fS as dI,fT as mI,fU as hI,fV as gI,fW as fI,fX as pI,fY as xI,fZ as jI,f_ as II,f$ as EI,g0 as bI,g1 as CI,g2 as NI,g3 as bm,g4 as ou,g5 as Cm,g6 as vI,g7 as _I,g8 as SI,g9 as wI,ga as TI,gb as RI,gc as yI,gd as OI,ge as kI,gf as aa,gg as Nm,gh as Xs,gi as AI,gj as DI,gk as PI,gl as LI,gm as MI,gn as UI,go as FI,gp as VI,gq as GI,gr as BI,gs as HI,gt as WI,gu as qI,gv as zI,gw as YI,gx as $I,gy as KI,gz as XI,gA as QI,gB as lu,gC as JI,gD as ZI,gE as eE,gF as tE,gG as sE,gH as nE,gI as rE,gJ as ji,gK as cu,gL as aE,gM as iE,gN as Ii,gO as vm,gP as oE,gQ as il,gR as lE,gS as cE,gT as uE,gU as _m,gV as dE,gW as mE,gX as hE,gY as gE,gZ as fE,g_ as pE,g$ as xE,h0 as jE,h1 as IE,h2 as EE,h3 as bE,h4 as CE,h5 as NE,h6 as vE,h7 as _E,h8 as wr,h9 as SE,ha as uu,hb as wE,hc as TE,hd as RE,he as Sm,hf as yE,hg as OE,hh as kE,hi as AE,hj as DE,hk as PE,hl as LE,hm as ME,hn as UE,ho as FE,hp as Mo,hq as wm,hr as VE,hs as GE,ht as BE,hu as HE,hv as WE,hw as qE,hx as zE,hy as YE,hz as $E,hA as KE,hB as Tm,hC as XE,hD as Rm,hE as QE,hF as hc,hG as gc,hH as JE,hI as ZE,hJ as eb,hK as tb,hL as wn,hM as ol,hN as sb,hO as du,hP as nb,hQ as rb,hR as fc,hS as ym,hT as Ks,hU as ab,hV as ib,hW as ob,hX as Om,hY as km,hZ as lb,h_ as cb,h$ as ub,i0 as db,i1 as mb,i2 as mu,i3 as hb,i4 as Am,i5 as gb,i6 as fb,i7 as pb,i8 as xb,i9 as jb,ia as Ib,ib as Eb,ic as bb,id as Cb,ie as Nb,ig as vb,ih as _b,ii as Sb,ij as wb,ik as Tb,il as Rb,im as yb,io as Ob,ip as Ei,iq as mt,ir as kb,is as ll,it as hu,iu as Ab,iv as Db,iw as Pb,ix as Lb,iy as Mb,iz as Ub,iA as Fb,iB as Vb,iC as Gb,iD as cl,iE as ul,iF as dl,iG as Bb,iH as Hb,iI as Wb,iJ as qb,iK as zb,iL as Yb,iM as gu,iN as $b,iO as Zs,iP as bi,iQ as Kb}from"./vendor-CQkR5q7Y.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function s(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerPolicy&&(r.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?r.credentials="include":a.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(a){if(a.ep)return;a.ep=!0;const r=s(a);fetch(a.href,r)}})();function pe(){return Gr.instance}function ct(i){pe().addLinkEventTracker(i)}function xt(){return pe().avatar}function fu(i){return xt().structureData.getPalette(i)}function pu(i){return xt().structureData.getSetType(i)}function Na(){return pe().cameraManager}function Xb(){return pe().core}function Qb(){return Xb().configuration}function Q(i){i=i.startsWith("event:")?i.substring(6):i,pe().createLinkEvent(i)}function Wa(){var i;return(i=pe())==null?void 0:i.communication}function K(i,t=null){return nc.getValue(i,t)}function Fl(){var i;return(i=Wa())==null?void 0:i.connection}function Dm(){return pe().localization}const Ar=i=>{!i||!i.length||(i.startsWith("http")?ni.openWebPage(i):Q(i))};function ut(i){pe().removeLinkEventTracker(i)}function W(){return pe().roomEngine}let ml=!1,Ci=0,Ni=0;const vi=(i,t=1)=>{const s=i.clientX,n=i.clientY;let a=i.type;switch(a===Ne.MOUSE_CLICK&&(Ci&&(Ni=1,Ci>=Date.now()-300&&Ni++),Ci=Date.now(),Ni===2&&(ml||(a=Ne.DOUBLE_CLICK),Ni=0,Ci=null)),a){case Ne.MOUSE_CLICK:break;case Ne.DOUBLE_CLICK:break;case Ne.MOUSE_MOVE:ml=!0;break;case Ne.MOUSE_DOWN:ml=!1;break;case Ne.MOUSE_UP:break;case Ne.RIGHT_CLICK:break;default:return}W().dispatchMouseEvent(t,s,n,a,i.altKey,i.ctrlKey||i.metaKey,i.shiftKey,!1)};let hl=!1,_i=0,Si=0;const wi=(i,t=1,s=!1,n=!1,a=!1,r=!1)=>{let l=0,c=0;i.touches[0]?(l=i.touches[0].clientX,c=i.touches[0].clientY):i.changedTouches[0]&&(l=i.changedTouches[0].clientX,c=i.changedTouches[0].clientY);let m=i.type;switch(s&&(m=Is.TOUCH_LONG),(m===Ne.MOUSE_CLICK||m===Is.TOUCH_END)&&(m=Ne.MOUSE_CLICK,_i&&(Si=1,_i>=Date.now()-300&&Si++),_i=Date.now(),Si===2&&(hl||(m=Ne.DOUBLE_CLICK),Si=0,_i=null)),m){case Ne.MOUSE_CLICK:break;case Ne.DOUBLE_CLICK:break;case Is.TOUCH_START:m=Ne.MOUSE_DOWN,hl=!1;break;case Is.TOUCH_MOVE:m=Ne.MOUSE_MOVE,hl=!0;break;case Is.TOUCH_END:m=Ne.MOUSE_UP;break;case Is.TOUCH_LONG:m=Ne.MOUSE_DOWN_LONG;break;default:return}m===Is.TOUCH_START&&W().dispatchMouseEvent(t,l,c,m,n,a,r,!1),W().dispatchMouseEvent(t,l,c,m,n,a,r,!1)};function Wt(i){if(!i||!i.model)return!1;const t=V().userId,s=i.model.getValue(Z.FURNITURE_OWNER_ID);return t===s}function qa(i,t,s){return i?i.isRoomOwner||i.controllerLevel>=qe.GUEST||V().isModerator||Wt(W().getRoomObject(i.roomId,t,s)):!1}function Dr(){return pe().roomSessionManager}function br(i,t=null){Dr().createSession(i,t)}function Jb(){const i=Pr();return i?i.model.getValue(Z.FIGURE_CAN_STAND_UP):ta.POSTURE_STAND}function gl(){const i=Pr();if(!i)return!1;const s=i.model.getValue(Z.FIGURE_EFFECT);return!(s===29||s===30||s===185)}function V(){return pe().sessionDataManager}function vs(){return K("hc.disabled",!1)?zt.VIP:V().clubLevel}const yn=class yn{};yn.OKAY=0,yn.MISSING_OFFER=1,yn.FURNI_LIMIT_REACHED=2,yn.NOT_IN_ROOM=3,yn.NOT_ROOM_OWNER=4,yn.GUILD_ROOM=5,yn.VISITORS_IN_ROOM=6;let Rn=yn;class Zb{constructor(t,s,n){this._depth=0,this._localization="",this._pageId=-1,this._pageName="",this._iconId=0,this._depth=s,this._parent=n,this._localization=t.localization,this._pageId=t.pageId,this._pageName=t.pageName,this._iconId=t.icon,this._children=[],this._offerIds=t.offerIds,this._isVisible=t.visible,this._isActive=!1,this._isOpen=!1}activate(){this._isActive=!0}deactivate(){this._isActive=!1}open(){this._isOpen=!0}close(){this._isOpen=!1}addChild(t){t&&this._children.push(t)}get depth(){return this._depth}get isBranch(){return this._children.length>0}get isLeaf(){return this._children.length===0}get localization(){return this._localization}get pageId(){return this._pageId}get pageName(){return this._pageName}get iconId(){return this._iconId}get children(){return this._children}get offerIds(){return this._offerIds}get parent(){return this._parent}get isVisible(){return this._isVisible}get isActive(){return this._isActive}get isOpen(){return this._isOpen}}const go=class go{constructor(t,s,n,a,r,l=-1){this._pageId=t,this._layoutCode=s,this._localization=n,this._offers=a,this._acceptSeasonCurrencyAsCredits=r;for(const c of a)c.page=this;l===-1?this._mode=go.MODE_NORMAL:this._mode=l}get pageId(){return this._pageId}get layoutCode(){return this._layoutCode}get localization(){return this._localization}get offers(){return this._offers}get acceptSeasonCurrencyAsCredits(){return this._acceptSeasonCurrencyAsCredits}get mode(){return this._mode}};go.MODE_NORMAL=0;let Ji=go;const it=class it{};it.DUCKET_INFO="ducket_info",it.CREDITS="credits",it.AVATAR_EFFECTS="avatar_effects",it.HC_MEMBERSHIP="hc_membership",it.CLUB_GIFTS="club_gifts",it.LIMITED_SOLD="limited_sold",it.PET_ACCESSORIES="pet_accessories",it.TRAX_SONGS="trax_songs",it.NEW_ADDITIONS="new_additions",it.QUEST_SHELL="quest_shell",it.QUEST_SNOWFLAKES="quest_snowflakes",it.VAL_QUESTS="val_quests",it.GUILD_CUSTOM_FURNI="guild_custom_furni",it.GIFT_SHOP="gift_shop",it.HORSE_STYLES="horse_styles",it.HORSE_SHOE="horse_shoe",it.SET_EASTER="set_easter",it.ECOTRON_TRANSFORM="ecotron_transform",it.LOYALTY_INFO="loyalty_info",it.ROOM_BUNDLES="room_bundles",it.ROOM_BUNDLES_MOBILE="room_bundles_mobile",it.HABBO_CLUB_DESKTOP="habbo_club_desktop",it.MOBILE_SUBSCRIPTIONS="mobile_subscriptions";let Zi=it;class eC{constructor(t,s){this.breed=t,this.palettes=s}}const On=class On{};On.NONE=0,On.CONFIRM=1,On.PURCHASE=2,On.NO_CREDITS=3,On.NO_POINTS=4,On.SOLD_OUT=5,On.FAILED=6;let Xe=On;const fo=class fo{};fo.NORMAL="NORMAL",fo.BUILDER="BUILDERS_CLUB";let Ls=fo;const tC=i=>"",sC=i=>"",xu=(i,t)=>{const s=i.get(t),n=[];if(s&&s.length)for(const a of s)a.isVisible&&n.push(a);return n},Pm=(i,t,s,n)=>{if(s.isVisible&&s.pageId>0){let a=!1;const r=[s.pageName,s.localization].join(" ").toLowerCase().replace(/ /gi,"");if(r.indexOf(i)>-1&&(n.push(s),a=!0),!a){for(const l of t)if(r.indexOf(l)>=0){n.push(s);break}}}for(const a of s.children)Pm(i,t,a,n)};function nC(i){if(!i.length)return 0;let t=i.length-1;for(;t>=0&&!isNaN(parseInt(i.charAt(t)));)t--;return t>0?parseInt(i.substring(t+1)):-1}function rC(i,t){switch(i){case 0:return[[16743226],[16750435],[16764339],[16094464],[16498012],[16704690],[15586304],[16115545],[16513201],[8694111],[11585939],[14413767],[6664599],[9553845],[12971486],[8358322],[10002885],[13292268],[10780600],[12623573],[14403561],[12418717],[14327229],[15517403],[14515069],[15764368],[16366271],[11250603],[13948116],[16777215],[14256481],[14656129],[15848130],[14005087],[14337152],[15918540],[15118118],[15531929],[9764857],[11258085]];case 1:return[[16743226],[16750435],[16764339],[16094464],[16498012],[16704690],[15586304],[16115545],[16513201],[8694111],[11585939],[14413767],[6664599],[9553845],[12971486],[8358322],[10002885],[13292268],[10780600],[12623573],[14403561],[12418717],[14327229],[15517403],[14515069],[15764368],[16366271],[11250603],[13948116],[16777215],[14256481],[14656129],[15848130],[14005087],[14337152],[15918540],[15118118],[15531929],[9764857],[11258085]];case 2:return[[16579283],[15378351],[8830016],[15257125],[9340985],[8949607],[6198292],[8703620],[9889626],[8972045],[12161285],[13162269],[8620113],[12616503],[8628101],[13827840],[9764857]];case 3:return[[16777215],[15658734],[14540253]];case 4:return[[16777215],[16053490],[15464440],[16248792],[15396319],[15007487]];case 5:return[[16777215],[15658734],[14540253]];case 6:return[[16777215],[15658734],[14540253],[16767177],[16770205],[16751331]];case 7:return[[13421772],[11447982],[16751331],[10149119],[16763290],[16743786]];default:{const s=[];for(const n of t){const a=W().getPetColorResult(i,n.paletteId);a&&(a.primaryColor===a.secondaryColor?s.push([a.primaryColor]):s.push([a.primaryColor,a.secondaryColor]))}return s}}}const sn=class sn{};sn.WALL="i",sn.FLOOR="s",sn.EFFECT="e",sn.HABBO_CLUB="h",sn.BADGE="b",sn.GAME_TOKEN="GAME_TOKEN",sn.PET="p",sn.ROBOT="r";let me=sn;const po=class po{constructor(t,s,n,a,r,l,c=!1,m=0,h=0){this._productType=t.toLowerCase(),this._productClassId=s,this._extraParam=n,this._productCount=a,this._productData=r,this._furnitureData=l,this._isUniqueLimitedItem=c,this._uniqueLimitedItemSeriesSize=m,this._uniqueLimitedItemsLeft=h}static stripAddonProducts(t){return t.length===1?t:t.filter(s=>s.productType!==me.BADGE&&s.productType!==me.EFFECT&&s.productClassId!==po.EFFECT_CLASSID_NINJA_DISAPPEAR)}getIconUrl(t=null,s=null){switch(this._productType){case me.FLOOR:return W().getFurnitureFloorIconUrl(this.productClassId);case me.WALL:{if(t&&this._furnitureData){let n="";switch(this._furnitureData.className){case"floor":n=["th",this._furnitureData.className,t.product.extraParam].join("_");break;case"wallpaper":n=["th","wall",t.product.extraParam].join("_");break;case"landscape":n=["th",this._furnitureData.className,(t.product.extraParam||"").replace(".","_"),"001"].join("_");break}if(n!=="")return`${K("catalog.asset.url")}/${n}.png`}return W().getFurnitureWallIconUrl(this.productClassId,this._extraParam)}case me.EFFECT:return tC(this.productClassId);case me.HABBO_CLUB:return sC(this.productClassId);case me.BADGE:return V().getBadgeUrl(this._extraParam);case me.ROBOT:return null}return null}get productType(){return this._productType}get productClassId(){return this._productClassId}get extraParam(){return this._extraParam}set extraParam(t){this._extraParam=t}get productCount(){return this._productCount}get productData(){return this._productData}get furnitureData(){return this._furnitureData}get isUniqueLimitedItem(){return this._isUniqueLimitedItem}get uniqueLimitedItemSeriesSize(){return this._uniqueLimitedItemSeriesSize}get uniqueLimitedItemsLeft(){return this._uniqueLimitedItemsLeft}set uniqueLimitedItemsLeft(t){this._uniqueLimitedItemsLeft=t}};po.EFFECT_CLASSID_NINJA_DISAPPEAR=108;let er=po;const wt=class wt{constructor(t,s,n,a,r,l,c,m,h,d){this._clubLevel=0,this._bundlePurchaseAllowed=!1,this._offerId=t,this._localizationId=s,this._isRentOffer=n,this._priceInCredits=a,this._priceInActivityPoints=r,this._activityPointType=l,this._giftable=c,this._clubLevel=m,this._products=h,this._bundlePurchaseAllowed=d,this.setPricingModelForProducts(),this.setPricingType();for(const g of h)if(g.productType===me.BADGE){this._badgeCode=g.extraParam;break}}activate(){}get clubLevel(){return this._clubLevel}get page(){return this._page}set page(t){this._page=t}get offerId(){return this._offerId}get localizationId(){return this._localizationId}get priceInCredits(){return this._priceInCredits}get priceInActivityPoints(){return this._priceInActivityPoints}get activityPointType(){return this._activityPointType}get giftable(){return this._giftable}get product(){if(!this._products||!this._products.length)return null;if(this._products.length===1)return this._products[0];const t=er.stripAddonProducts(this._products);return t.length?t[0]:null}get pricingModel(){return this._pricingModel}get priceType(){return this._priceType}get bundlePurchaseAllowed(){return this._bundlePurchaseAllowed}get isRentOffer(){return this._isRentOffer}get badgeCode(){return this._badgeCode}get localizationName(){const t=sa(this._localizationId);return t?t.name:u(this._localizationId)}get localizationDescription(){const t=sa(this._localizationId);return t?t.description:u(this._localizationId)}get isLazy(){return!1}get products(){return this._products}setPricingModelForProducts(){const t=er.stripAddonProducts(this._products);t.length===1?t[0].productCount===1?this._pricingModel=wt.PRICING_MODEL_SINGLE:this._pricingModel=wt.PRICING_MODEL_MULTI:t.length>1?this._pricingModel=wt.PRICING_MODEL_BUNDLE:this._pricingModel=wt.PRICING_MODEL_UNKNOWN}setPricingType(){this._priceInCredits>0&&this._priceInActivityPoints>0?this._priceType=wt.PRICE_TYPE_CREDITS_ACTIVITYPOINTS:this._priceInCredits>0?this._priceType=wt.PRICE_TYPE_CREDITS:this._priceInActivityPoints>0?this._priceType=wt.PRICE_TYPE_ACTIVITYPOINTS:this._priceType=wt.PRICE_TYPE_NONE}clone(){const t=[],s=sa(this.localizationId);for(const a of this._products){const r=Vl(a.productClassId,a.productType);t.push(new er(a.productType,a.productClassId,a.extraParam,a.productCount,s,r))}const n=new wt(this.offerId,this.localizationId,this.isRentOffer,this.priceInCredits,this.priceInActivityPoints,this.activityPointType,this.giftable,this.clubLevel,t,this.bundlePurchaseAllowed);return n.page=this.page,n}};wt.PRICING_MODEL_UNKNOWN="pricing_model_unknown",wt.PRICING_MODEL_SINGLE="pricing_model_single",wt.PRICING_MODEL_MULTI="pricing_model_multi",wt.PRICING_MODEL_BUNDLE="pricing_model_bundle",wt.PRICING_MODEL_FURNITURE="pricing_model_furniture",wt.PRICE_TYPE_NONE="price_type_none",wt.PRICE_TYPE_CREDITS="price_type_credits",wt.PRICE_TYPE_ACTIVITYPOINTS="price_type_activitypoints",wt.PRICE_TYPE_CREDITS_ACTIVITYPOINTS="price_type_credits_and_activitypoints";let Ut=wt;class aC{constructor(t){this._furniData=t,this._product=new er(this._furniData.type,this._furniData.id,this._furniData.customParams,1,sa(this._furniData.className),this._furniData)}activate(){D(new Lh(this._furniData.rentOfferId>-1?this._furniData.rentOfferId:this._furniData.purchaseOfferId))}get offerId(){return this.isRentOffer?this._furniData.rentOfferId:this._furniData.purchaseOfferId}get priceInActivityPoints(){return 0}get activityPointType(){return 0}get priceInCredits(){return 0}get page(){return this._page}set page(t){this._page=t}get priceType(){return""}get product(){return this._product}get products(){return[this._product]}get localizationId(){return"roomItem.name."+this._furniData.id}get bundlePurchaseAllowed(){return!1}get isRentOffer(){return this._furniData.rentOfferId>-1}get giftable(){return!1}get pricingModel(){return Ut.PRICING_MODEL_FURNITURE}get clubLevel(){return 0}get badgeCode(){return""}get localizationName(){return this._furniData.name}get localizationDescription(){return this._furniData.description}get isLazy(){return!0}}const iC=(i,t,s=null)=>{let n=null;switch(i.toLocaleLowerCase()){case me.FLOOR:n=W().getFurnitureFloorIconUrl(t);break;case me.WALL:n=W().getFurnitureWallIconUrl(t,s);break}return n};class oC{constructor(t){this._isEnabled=!1,this._price=null,this._stuffTypes=null,this._boxTypes=null,this._ribbonTypes=null,this._defaultStuffTypes=null,this._isEnabled=t.isEnabled,this._price=t.price,this._boxTypes=t.boxTypes,this._ribbonTypes=t.ribbonTypes,this._stuffTypes=t.giftWrappers,this._defaultStuffTypes=t.giftFurnis}get isEnabled(){return this._isEnabled}get price(){return this._price}get stuffTypes(){return this._stuffTypes}get boxTypes(){return this._boxTypes}get ribbonTypes(){return this._ribbonTypes}get defaultStuffTypes(){return this._defaultStuffTypes}}const xo=class xo{constructor(t,s,n,a,r,l,c,m,h=-1){this._timeLeftMinutes=-1,this._offerId=t,this._furniId=s,this._furniType=n,this._extraData=a,this._stuffData=r,this._price=l,this._status=c,this._averagePrice=m,this._offerCount=h}get offerId(){return this._offerId}set offerId(t){this._offerId=t}get furniId(){return this._furniId}get furniType(){return this._furniType}get extraData(){return this._extraData}get stuffData(){return this._stuffData}get price(){return this._price}set price(t){this._price=t}get averagePrice(){return this._averagePrice}get image(){return this._image}set image(t){this._image=t}get imageCallback(){return this._imageCallback}set imageCallback(t){this._imageCallback=t}get status(){return this._status}get timeLeftMinutes(){return this._timeLeftMinutes}set timeLeftMinutes(t){this._timeLeftMinutes=t}get offerCount(){return this._offerCount}set offerCount(t){this._offerCount=t}get isUniqueLimitedItem(){return this.stuffData&&this.stuffData.uniqueSeries>0}};xo.TYPE_FLOOR=1,xo.TYPE_WALL=2;let za=xo;const Wr=class Wr{};Wr.ONGOING=1,Wr.ONGOING_OWN=1,Wr.SOLD=2,Wr.EXPIRED=3;let Ya=Wr;const Sa=class Sa{};Sa.BY_ACTIVITY=1,Sa.BY_VALUE=2,Sa.ADVANCED=3;let Gt=Sa;class Lm{constructor(t,s){this._images=t,this._texts=s}getText(t){let s=this._texts[t]||"";return s&&s.length&&(s=s.replace(/\r\n|\r|\n/g,"<br />")),s}getImage(t){const s=this._images[t]||"";if(!s||!s.length)return null;let n=K("catalog.asset.image.url");return n=n.replace("%name%",s),n}}class lC{constructor(t,s,n,a,r,l,c,m){this.roomId=t,this.objectId=s,this.category=n,this.wallLocation=a,this.x=r,this.y=l,this.direction=c,this.offer=m}get offerId(){return this.offer.offerId}get productClassId(){return this.offer.product.productClassId}get productData(){return this.offer.product.productData}get furniData(){return this.offer.product.furnitureData}get extraParam(){return this.offer.product.extraParam}}const Hs=class Hs{constructor(){this._requestType=Hs.REQUEST_TYPE_NONE}resetRequest(){this._requestType=Hs.REQUEST_TYPE_NONE,this._requestById=-1,this._requestedByOfferId=-1,this._requestByName=null}get requestType(){return this._requestType}get requestById(){return this._requestById}set requestById(t){this._requestType=Hs.REQUEST_TYPE_ID,this._requestById=t}get requestedByOfferId(){return this._requestedByOfferId}set requestedByOfferId(t){this._requestType=Hs.REQUEST_TYPE_OFFER,this._requestedByOfferId=t}get requestByName(){return this._requestByName}set requestByName(t){this._requestType=Hs.REQUEST_TYPE_NAME,this._requestByName=t}};Hs.REQUEST_TYPE_NONE=0,Hs.REQUEST_TYPE_ID=1,Hs.REQUEST_TYPE_OFFER=2,Hs.REQUEST_TYPE_NAME=3;let fr=Hs;class cC{constructor(t,s,n){this.searchValue=t,this.offers=s,this.filteredNodes=n}}function Vl(i,t){let s=null;switch(t.toLowerCase()){case me.FLOOR:s=V().getFloorItemData(i);break;case me.WALL:s=V().getWallItemData(i);break}return s}function Uo(i,t,s){const n=W().getRoomObject(i,t,s);if(!n)return;const a=n.model.getValue(Z.FURNITURE_TYPE_ID);switch(s){case X.FLOOR:return V().getFloorItemData(a);case X.WALL:return V().getWallItemData(a)}return null}function uC(){const i=Pr();return i?i.model.getValue(Z.FIGURE_POSTURE):ta.POSTURE_STAND}function sa(i){return i?V().getProductData(i):null}function ve(){return Dr().getSession(-1)}function Gl(){D(new Mh)}function Cr(){return V().clubLevel>=zt.CLUB}function Ti(){return V().clubLevel>=zt.VIP}function dC(i){const t=W().getRoomObject(ve().roomId,i,X.FLOOR);if(!t||!t.model)return!1;const s=V().userId,n=t.model.getValue(Z.FURNITURE_OWNER_ID);return s===n}function mC(){const i=Pr();return i?i.model.getValue(Z.FIGURE_EFFECT)===77:!1}function hC(i){Dr().startSession(i)}const pc=()=>{ve()&&(Gl(),Dr().removeSession(-1))};function Pr(){const i=V().userId,t=W().activeRoomId,s=X.UNIT,n=W().getTotalObjectsForManager(t,s);let a=0;for(;a<n;){const r=W().getRoomObjectByIndex(t,a,s);if(r){const l=ve().userDataManager.getUserDataByIndex(r.id);if(l&&l.webID===i)return r}a++}return null}const xc=(i,t,s,n=1)=>{const a=W().getRoomObjectBoundingRectangle(i,t,s,n);return a?(a.x=Math.round(a.x),a.y=Math.round(a.y),a):null},Mm=(i,t,s,n=1)=>{const a=W().getRoomObjectScreenLocation(i,t,s,n);return a?(a.x=Math.round(a.x),a.y=Math.round(a.y),a):null},gC=(i,t,s=1)=>{const n=W(),a=n.activeRoomId;n.initializeRoomInstanceRenderingCanvas(a,s,i,t)};function fC(i){let t=!1;const s=W().getRoomObject(i.roomId,i.objectId,i.category);return s&&s.model.getValue(Z.FURNITURE_SELECTION_DISABLED)===1&&(t=!0,V().isModerator&&(t=!1)),t}function Nr(i,t,s){W().processRoomObjectOperation(i,t,s)}function ju(i){W().setActiveRoomId(i)}const D=i=>Fl().send(i);class ps{static getAchievementBadgeCode(t){if(!t)return null;let s=t.badgeId;return t.finalLevel||(s=Dm().getPreviousLevelBadgeId(s)),s}static getAchievementCategoryImageUrl(t,s=null,n=!1){const a=K("achievements.images.url");let r=n?"achicon_":"achcategory_";return r+=t.code,s!==null&&(r+=`_${s>0?"active":"inactive"}`),a.replace("%image%",r)}static getAchievementCategoryMaxProgress(t){if(!t)return 0;let s=0;for(const n of t.achievements)s+=n.levelCount;return s}static getAchievementCategoryProgress(t){if(!t)return 0;let s=0;for(const n of t.achievements)s+=n.finalLevel?n.level:n.level-1;return s}static getAchievementCategoryTotalUnseen(t){if(!t)return 0;let s=0;for(const n of t.achievements)n.unseen>0&&s++;return s}static getAchievementHasStarted(t){return t?!!(t.finalLevel||t.level-1>0):!1}static getAchievementIsIgnored(t){if(!t)return!1;const s=K("achievements.unseen.ignored"),n=t.badgeId.replace(/[0-9]/g,"");return s.indexOf(n)>=0}static getAchievementLevel(t){return t?t.finalLevel?t.level:t.level-1:0}}class Iu{constructor(t){this._code=t,this._achievements=[]}getProgress(){return ps.getAchievementCategoryProgress(this)}getMaxProgress(){return ps.getAchievementCategoryMaxProgress(this)}get code(){return this._code}get achievements(){return this._achievements}set achievements(t){this._achievements=t}}const qr=class qr{};qr.ACTION_SAVE="AEA_ACTION_SAVE",qr.ACTION_CLEAR="AEA_ACTION_CLEAR",qr.ACTION_RESET="AEA_ACTION_RESET",qr.ACTION_RANDOMIZE="AEA_ACTION_RANDOMIZE";let tn=qr;class pC{constructor(t,s=!1){this._partColor=t,this._isDisabled=s,this._isHC=this._partColor.clubLevel>0,this._isSelected=!1}dispose(){this._partColor=null}get partColor(){return this._partColor}get color(){return fs.int2rgb(this._partColor.rgb)}get isDisabled(){return this._isDisabled}get isHC(){return this._isHC}get isSelected(){return this._isSelected}set isSelected(t){this._isSelected=t,this.notify&&this.notify()}get notify(){return this._notifier}set notify(t){this._notifier=t}}class jc{constructor(t,s,n){this._selectedPartIndex=-1,this._name=t,this._parts=s,this._palettes=n,this._selectedPartIndex=-1}static defaultColorId(t,s){if(!t||!t.length)return-1;let n=0;for(;n<t.length;){const a=t[n];if(a.partColor&&a.partColor.clubLevel<=s)return a.partColor.id;n++}return-1}init(){for(const t of this._parts)t&&t.init()}dispose(){if(this._parts){for(const t of this._parts)t.dispose();this._parts=null}if(this._palettes){for(const t of this._palettes)for(const s of t)s.dispose();this._palettes=null}this._selectedPartIndex=-1,this._paletteIndexes=null}selectPartId(t){if(!this._parts)return;let s=0;for(;s<this._parts.length;){if(this._parts[s].id===t){this.selectPartIndex(s);return}s++}}selectColorIds(t){if(!t||!this._palettes)return;this._paletteIndexes=new Array(t.length);let s=0;for(;s<this._palettes.length;){const n=this.getPalette(s);if(n){let a=0;if(t.length>s)a=t[s];else{const l=n[0];l&&l.partColor&&(a=l.partColor.id)}let r=0;for(;r<n.length;){const l=n[r];l.partColor.id===a?(this._paletteIndexes[s]=r,l.isSelected=!0):l.isSelected=!1,r++}}s++}this.updatePartColors()}selectPartIndex(t){if(!this._parts)return null;if(this._selectedPartIndex>=0&&this._parts.length>this._selectedPartIndex){const s=this._parts[this._selectedPartIndex];s&&(s.isSelected=!1)}if(this._parts.length>t){const s=this._parts[t];if(s)return s.isSelected=!0,this._selectedPartIndex=t,s}return null}selectColorIndex(t,s){const n=this.getPalette(s);if(!n||n.length<=t)return null;this.deselectColorIndex(this._paletteIndexes[s],s),this._paletteIndexes[s]=t;const a=n[t];return a?(a.isSelected=!0,this.updatePartColors(),a):null}getCurrentColorIndex(t){return this._paletteIndexes[t]}deselectColorIndex(t,s){const n=this.getPalette(s);if(!n||n.length<=t)return;const a=n[t];a&&(a.isSelected=!1)}getSelectedColorIds(){if(!this._paletteIndexes||!this._paletteIndexes.length||!this._palettes||!this._palettes.length)return null;const t=this._palettes[0];if(!t||!t.length)return null;const s=t[0];if(!s||!s.partColor)return null;const n=s.partColor.id,a=[];let r=0;for(;r<this._paletteIndexes.length;){const c=this._palettes[r];if(!(!c||c.length<=r))if(c.length>this._paletteIndexes[r]){const m=c[this._paletteIndexes[r]];m&&m.partColor?a.push(m.partColor.id):a.push(n)}else a.push(n);r++}const l=this.getCurrentPart();return l?a.slice(0,Math.max(l.maxColorIndex,1)):null}getSelectedColors(){const t=[];let s=0;for(;s<this._paletteIndexes.length;){const n=this.getSelectedColor(s);n?t.push(n.partColor):t.push(null),s++}return t}getSelectedColor(t){const s=this.getPalette(t);return!s||s.length<=this._paletteIndexes[t]?null:s[this._paletteIndexes[t]]}getSelectedColorId(t){const s=this.getSelectedColor(t);return s&&s.partColor?s.partColor.id:0}getPalette(t){return!this._paletteIndexes||!this._palettes||this._palettes.length<=t?null:this._palettes[t]}getCurrentPart(){return this._parts[this._selectedPartIndex]}updatePartColors(){const t=this.getSelectedColors();for(const s of this._parts)s&&(s.partColors=t)}hasClubSelectionsOverLevel(t){let s=!1;const n=this.getSelectedColors();if(n){let r=0;for(;r<n.length;){const l=n[r];l&&l.clubLevel>t&&(s=!0),r++}}const a=this.getCurrentPart();if(a&&a.partSet){const r=a.partSet;r&&r.clubLevel>t&&(s=!0)}return s}hasInvalidSelectedItems(t){const s=this.getCurrentPart();if(!s)return!1;const n=s.partSet;if(!(!n||!n.isSellable))return t.indexOf(n.id)>-1}stripClubItemsOverLevel(t){const s=this.getCurrentPart();if(s&&s.partSet&&s.partSet.clubLevel>t){const a=this.selectPartIndex(0);return a&&!a.partSet&&this.selectPartIndex(1),!0}return!1}stripClubColorsOverLevel(t){const s=[],n=this.getSelectedColors(),a=this.getPalette(0);let r=!1;const l=jc.defaultColorId(a,t);if(l===-1)return!1;let c=0;for(;c<n.length;){const m=n[c];m?m.clubLevel>t?(s.push(l),r=!0):s.push(m.id):(s.push(l),r=!0),c++}return r&&this.selectColorIds(s),r}get name(){return this._name}get parts(){return this._parts}get selectedPartIndex(){return this._selectedPartIndex}}const zr=class zr{static getGender(t){switch(t){case je.MALE:case"m":case"M":t=je.MALE;break;case je.FEMALE:case"f":case"F":t=je.FEMALE;break;default:t=je.MALE}return t}static hasFigureSetId(t){return this.FIGURE_SET_IDS.indexOf(t)>=0}static createCategory(t,s){if(!t||!s||!this.CURRENT_FIGURE)return null;const n=[],a=[];let r=0;for(;r<this.MAX_PALETTES;)a.push([]),r++;const l=pu(s);if(!l)return null;const c=fu(l.paletteID);if(!c)return null;let m=this.CURRENT_FIGURE.getColorIds(s);m||(m=[]);const h=new Array(m.length),d=this.clubItemsDimmed,g=vs();for(const E of c.colors.getValues())if(E.isSelectable&&(d||g>=E.clubLevel)){let v=0;for(;v<this.MAX_PALETTES;){const b=g<E.clubLevel,w=new pC(E,b);a[v].push(w),v++}if(s!==je.FACE){let b=0;for(;b<m.length;)E.id===m[b]&&(h[b]=E),b++}}let f=[];if(d?f=xt().getMandatoryAvatarPartSetIds(this.CURRENT_FIGURE.gender,2):f=xt().getMandatoryAvatarPartSetIds(this.CURRENT_FIGURE.gender,g),f.indexOf(s)===-1){const E=new eo(null,null,!1);E.isClear=!0,n.push(E)}const p=s!==je.FACE,I=l.partSets;for(r=I.length-1;r>=0;){const E=I.getWithIndex(r);let v=!1;if((E.gender===je.UNISEX||E.gender===this.CURRENT_FIGURE.gender)&&(v=!0),E.isSelectable&&v&&(d||g>=E.clubLevel)){const b=g<E.clubLevel;let w=!0;E.isSellable&&(w=this.hasFigureSetId(E.id)),w&&n.push(new eo(E,h,p,b))}r--}for(n.sort(this.clubItemsFirst?this.clubSorter:this.noobSorter),r=0;r<this.MAX_PALETTES;)a[r].sort(this.colorSorter),r++;return new jc(s,n,a)}static clubSorter(t,s){const n=t.partSet?t.partSet.clubLevel:9999999999,a=s.partSet?s.partSet.clubLevel:9999999999,r=t.partSet?t.partSet.isSellable:!1,l=s.partSet?s.partSet.isSellable:!1;return r&&!l?1:l&&!r||n>a?-1:n<a?1:t.partSet.id>s.partSet.id?-1:t.partSet.id<s.partSet.id?1:0}static colorSorter(t,s){const n=t.partColor?t.partColor.clubLevel:-1,a=s.partColor?s.partColor.clubLevel:-1;return n<a?-1:n>a?1:t.partColor.index<s.partColor.index?-1:t.partColor.index>s.partColor.index?1:0}static noobSorter(t,s){const n=t.partSet?t.partSet.clubLevel:-1,a=s.partSet?s.partSet.clubLevel:-1,r=t.partSet?t.partSet.isSellable:!1,l=s.partSet?s.partSet.isSellable:!1;return r&&!l?1:l&&!r||n<a?-1:n>a?1:t.partSet.id<s.partSet.id?-1:t.partSet.id>s.partSet.id?1:0}static avatarSetFirstSelectableColor(t){const s=pu(t);if(!s)return-1;const n=fu(s.paletteID);if(!n)return-1;for(const a of n.colors.getValues())if(!(!a.isSelectable||vs()<a.clubLevel))return a.id;return-1}static get clubItemsFirst(){return K("avatareditor.show.clubitems.first",!0)}static get clubItemsDimmed(){return K("avatareditor.show.clubitems.dimmed",!0)}};zr.MAX_PALETTES=2,zr.CURRENT_FIGURE=null,zr.FIGURE_SET_IDS=[],zr.BOUND_FURNITURE_NAMES=[];let Ct=zr;const ie=class ie{constructor(){this._gender="M",this._direction=ie.DEFAULT_DIRECTION,this._avatarEffectType=-1,this._notifier=null}loadAvatarData(t,s){this._data=new Map,this._colors=new Map,this._gender=s,this.parseFigureString(t),this.updateView()}parseFigureString(t){if(!t)return;const s=t.split(".");if(!(!s||!s.length))for(const n of s){const a=n.split("-");if(!a.length)continue;const r=a[0],l=parseInt(a[1]),c=[];let m=2;for(;m<a.length;)c.push(parseInt(a[m])),m++;c.length||c.push(0),this.savePartSetId(r,l,!1),this.savePartSetColourId(r,c,!1)}}getPartSetId(t){const s=this._data.get(t);return s!==void 0?s:-1}getColorIds(t){const s=this._colors.get(t);return s!==void 0?s:[Ct.avatarSetFirstSelectableColor(t)]}getFigureString(){let t="";const s=[];for(const[a,r]of this._data.entries()){const l=this._colors.get(a);let c=a+"-"+r;if(l&&l.length){let m=0;for(;m<l.length;)c=c+("-"+l[m]),m++}s.push(c)}let n=0;for(;n<s.length;)t=t+s[n],n<s.length-1&&(t=t+"."),n++;return t}savePartData(t,s,n,a=!1){this.savePartSetId(t,s,a),this.savePartSetColourId(t,n,a)}savePartSetId(t,s,n=!0){switch(t){case ie.FACE:case ie.HAIR:case ie.HAT:case ie.HEAD_ACCESSORIES:case ie.EYE_ACCESSORIES:case ie.FACE_ACCESSORIES:case ie.SHIRT:case ie.JACKET:case ie.CHEST_ACCESSORIES:case ie.CHEST_PRINTS:case ie.TROUSERS:case ie.SHOES:case ie.TROUSER_ACCESSORIES:s>=0?this._data.set(t,s):this._data.delete(t);break}n&&this.updateView()}savePartSetColourId(t,s,n=!0){switch(t){case ie.FACE:case ie.HAIR:case ie.HAT:case ie.HEAD_ACCESSORIES:case ie.EYE_ACCESSORIES:case ie.FACE_ACCESSORIES:case ie.SHIRT:case ie.JACKET:case ie.CHEST_ACCESSORIES:case ie.CHEST_PRINTS:case ie.TROUSERS:case ie.SHOES:case ie.TROUSER_ACCESSORIES:this._colors.set(t,s);break}n&&this.updateView()}getFigureStringWithFace(t,s=!0){let n="";const a=[ie.FACE],r=[];for(const c of a){const m=this._colors.get(c);if(!m)continue;let h=this._data.get(c);c===ie.FACE&&s&&(h=t);let d=c+"-"+h;if(h>=0){let g=0;for(;g<m.length;)d=d+("-"+m[g]),g++}r.push(d)}let l=0;for(;l<r.length;)n=n+r[l],l<r.length-1&&(n=n+"."),l++;return n}updateView(){this.notify&&this.notify()}get gender(){return this._gender}get direction(){return this._direction}set direction(t){this._direction=t,this.updateView()}set avatarEffectType(t){this._avatarEffectType=t}get avatarEffectType(){return this._avatarEffectType}get notify(){return this._notifier}set notify(t){this._notifier=t}};ie.DEFAULT_DIRECTION=4,ie.MALE="M",ie.FEMALE="F",ie.UNISEX="U",ie.SCALE="h",ie.STD="std",ie.DEFAULT_FRAME="0",ie.FACE="hd",ie.HAIR="hr",ie.HAT="ha",ie.HEAD_ACCESSORIES="he",ie.EYE_ACCESSORIES="ea",ie.FACE_ACCESSORIES="fa",ie.JACKET="cc",ie.SHIRT="ch",ie.CHEST_ACCESSORIES="ca",ie.CHEST_PRINTS="cp",ie.TROUSERS="lg",ie.SHOES="sh",ie.TROUSER_ACCESSORIES="wa",ie.SET_TYPES=[ie.FACE,ie.HAIR,ie.HAT,ie.HEAD_ACCESSORIES,ie.EYE_ACCESSORIES,ie.FACE_ACCESSORIES,ie.JACKET,ie.SHIRT,ie.CHEST_ACCESSORIES,ie.CHEST_PRINTS,ie.TROUSERS,ie.SHOES,ie.TROUSERS];let je=ie;const nn=class nn{constructor(t,s,n=!0,a=!1){if(this._renderManager=xt(),this._partSet=t,this._partColors=s,this._useColors=n,this._isDisabled=a,this._thumbContainer=null,this._imageUrl=null,this._maxColorIndex=0,this._isValidFigure=!1,this._isHC=!1,this._isSellable=!1,this._isClear=!1,this._isSelected=!1,this._disposed=!1,this._isInitalized=!1,t){const r=t.parts;for(const l of r)this._maxColorIndex=Math.max(this._maxColorIndex,l.colorLayerIndex)}}init(){this._isInitalized||(this._isInitalized=!0,this.update())}dispose(){this._disposed||(this._renderManager=null,this._partSet=null,this._partColors=null,this._imageUrl=null,this._disposed=!0,this._isInitalized=!1,this._thumbContainer&&(this._thumbContainer.destroy(),this._thumbContainer=null))}update(){this.updateThumbVisualization()}analyzeFigure(){if(!this._renderManager||!this._partSet||!this._partSet.parts||!this._partSet.parts.length)return!1;const t=this._renderManager.createFigureContainer(this.partSet.type+"-"+this.partSet.id);return this._renderManager.isFigureContainerReady(t)?(this._isValidFigure=!0,!0):(this._renderManager.downloadAvatarFigure(t,this),!1)}renderThumb(){if(!this._renderManager||!this._partSet||!this._isValidFigure&&!this.analyzeFigure())return null;const t=this._partSet.parts.concat().sort(this.sortByDrawOrder),s=new Fh;for(const n of t){if(!n)continue;let a=null,r=0,l=!1;for(;!l&&r<nn.THUMB_DIRECTIONS.length;){const g=je.SCALE+"_"+je.STD+"_"+n.type+"_"+n.id+"_"+nn.THUMB_DIRECTIONS[r]+"_"+je.DEFAULT_FRAME;a=this._renderManager.getAssetByName(g),a&&a.texture?l=!0:r++}if(!l)continue;const c=a.offsetX,m=a.offsetY;let h=null;if(this._useColors&&n.colorLayerIndex>0){const g=this._partColors[n.colorLayerIndex-1];g&&(h=g)}const d=new Yi(a.texture);d.position.set(c,m),h&&(d.tint=h.rgb),s.addChild(d)}return s}updateThumbVisualization(){if(!this._isInitalized)return;let t=this._thumbContainer;t||(t=this.renderThumb()),t&&(this._partSet?(this._isHC=this._partSet.clubLevel>0,this._isSellable=this._partSet.isSellable):(this._isHC=!1,this._isSellable=!1),this._isDisabled&&this.setAlpha(t,.2),this._imageUrl=xn.generateImageUrl(t),this.notify&&this.notify())}setAlpha(t,s){return t.filters=[nn.ALPHA_FILTER],t}sortByDrawOrder(t,s){const n=nn.DRAW_ORDER.indexOf(t.type),a=nn.DRAW_ORDER.indexOf(s.type);return n<a?-1:n>a?1:t.index<s.index?-1:t.index>s.index?1:0}resetFigure(t){this.analyzeFigure()&&this.update()}get disposed(){return this._disposed}get id(){return this._partSet?this._partSet.id:-1}get partSet(){return this._partSet}set partColors(t){this._partColors=t,this.update()}get isDisabled(){return this._isDisabled}set thumbContainer(t){this._thumbContainer=t,this.update()}get imageUrl(){return this._imageUrl}get maxColorIndex(){return this._maxColorIndex}get isHC(){return this._isHC}get isSellable(){return this._isSellable}get isClear(){return this._isClear}set isClear(t){this._isClear=t}get isSelected(){return this._isSelected}set isSelected(t){this._isSelected=t,this.notify&&this.notify()}get notify(){return this._notifier}set notify(t){this._notifier=t}};nn.ALPHA_FILTER=new Uh(.2),nn.THUMB_DIRECTIONS=[2,6,0,4,3,1],nn.DRAW_ORDER=[Me.LEFT_HAND_ITEM,Me.LEFT_HAND,Me.LEFT_SLEEVE,Me.LEFT_COAT_SLEEVE,Me.BODY,Me.SHOES,Me.LEGS,Me.CHEST,Me.CHEST_ACCESSORY,Me.COAT_CHEST,Me.CHEST_PRINT,Me.WAIST_ACCESSORY,Me.RIGHT_HAND,Me.RIGHT_SLEEVE,Me.RIGHT_COAT_SLEEVE,Me.HEAD,Me.FACE,Me.EYES,Me.HAIR,Me.HAIR_BIG,Me.FACE_ACCESSORY,Me.EYE_ACCESSORY,Me.HEAD_ACCESSORY,Me.HEAD_ACCESSORY_EXTRA,Me.RIGHT_HAND_ITEM];let eo=nn;class Fo{constructor(){this._isInitalized=!1,this._maxPaletteCount=0}dispose(){this._categories=null,this._disposed=!0}get disposed(){return this._disposed}init(){this._categories||(this._categories=new Map)}reset(){if(this._isInitalized=!1,this._categories)for(const t of this._categories.values())t&&t.dispose();this._categories=new Map}addCategory(t){let s=this._categories.get(t);s||(s=Ct.createCategory(this,t),s&&(this._categories.set(t,s),this.updateSelectionsFromFigure(t)))}updateSelectionsFromFigure(t){const s=this._categories.get(t);if(!s)return;const n=Ct.CURRENT_FIGURE.getPartSetId(t);let a=Ct.CURRENT_FIGURE.getColorIds(t);a||(a=[]),s.selectPartId(n),s.selectColorIds(a)}hasClubSelectionsOverLevel(t){if(!this._categories)return!1;for(const s of this._categories.values())if(s&&s.hasClubSelectionsOverLevel(t))return!0;return!1}hasInvalidSelectedItems(t){if(!this._categories)return!1;for(const s of this._categories.values())if(s.hasInvalidSelectedItems(t))return!0;return!1}stripClubItemsOverLevel(t){if(!this._categories)return!1;let s=!1;for(const[n,a]of this._categories.entries()){let r=!1;if(a.stripClubItemsOverLevel(t)&&(r=!0),a.stripClubColorsOverLevel(t)&&(r=!0),r){const l=a.getCurrentPart();l&&Ct.CURRENT_FIGURE&&Ct.CURRENT_FIGURE.savePartData(n,l.id,a.getSelectedColorIds(),!0),s=!0}}return s}stripInvalidSellableItems(){if(!this._categories)return!1;let t=!1;for(const[s,n]of this._categories.entries());return t}selectPart(t,s){const n=this._categories.get(t);if(!n)return;const a=n.selectedPartIndex;n.selectPartIndex(s);const r=n.getCurrentPart();if(r){if(r.isDisabled){n.selectPartIndex(a);return}this._maxPaletteCount=r.maxColorIndex,Ct.CURRENT_FIGURE.savePartData(t,r.id,n.getSelectedColorIds(),!0)}}selectColor(t,s,n){const a=this._categories.get(t);if(!a)return;const r=a.getCurrentColorIndex(n);if(a.selectColorIndex(s,n),a.getSelectedColor(n).isDisabled){a.selectColorIndex(r,n);return}Ct.CURRENT_FIGURE.savePartSetColourId(t,a.getSelectedColorIds(),!0)}getCategoryData(t){return this._isInitalized||this.init(),this._categories?this._categories.get(t):null}get categories(){return this._categories}get canSetGender(){return!1}get maxPaletteCount(){return this._maxPaletteCount||1}set maxPaletteCount(t){this._maxPaletteCount=t}get name(){return null}}class xC extends Fo{constructor(){super(...arguments),this._imageCallBackHandled=!1}init(){super.init(),this.addCategory(je.FACE),this._isInitalized=!0}selectColor(t,s,n){super.selectColor(t,s,n),this.updateSelectionsFromFigure(je.FACE)}updateSelectionsFromFigure(t){if(!this._categories||!Ct.CURRENT_FIGURE)return;const s=this._categories.get(t);if(!s)return;const n=Ct.CURRENT_FIGURE.getPartSetId(t);let a=Ct.CURRENT_FIGURE.getColorIds(t);a||(a=[]),s.selectPartId(n),s.selectColorIds(a);for(const r of s.parts){const l=c=>{const m=Ct.CURRENT_FIGURE.getFigureStringWithFace(r.id),h=xt().createAvatarImage(m,rc.LARGE,null,{resetFigure:l,dispose:null,disposed:!1}),d=h.getImageAsSprite($i.HEAD);d&&(d.y=10,r.thumbContainer=d,setTimeout(()=>h.dispose(),0))};l()}}get canSetGender(){return!0}get name(){return Ds.GENERIC}}const ts=i=>{if(i==null||typeof i!="object")return i;const t=new i.constructor;for(const s in i)i.hasOwnProperty(s)&&(t[s]=i[s]);return t};class ls{static makeColorHex(t){return"#"+t}static makeColorNumberHex(t){return"#"+t.toString(16).padStart(6,"0")}static convertFromHex(t){return parseInt(t.replace("#",""),16)}static uintHexColor(t){const s=t>>>0;return ls.makeColorHex(s.toString(16).substring(2))}static int_to_8BitVals(t){const s=t>>24&255,n=t>>16&255,a=t>>8&255,r=t&255;return[s,n,a,r]}static eight_bitVals_to_int(t,s,n,a){return(t<<24)+(s<<16)+(n<<8)+(a|0)}static int2rgb(t){t>>>=0;const s=t&255,n=(t&65280)>>>8;return"rgba("+[(t&16711680)>>>16,n,s,1].join(",")+")"}}const mr=i=>{let t=Math.floor(i/86400),s=Math.floor(i%86400/3600),n=Math.floor(i%86400%3600/60),a=i%86400%3600%60;return t.toString().padStart(2,"0")+":"+s.toString().padStart(2,"0")+":"+n.toString().padStart(2,"0")+":"+a.toString().padStart(2,"0")},Ic=i=>{try{JSON.parse(window.localStorage.getItem(i))}catch{return null}},Ec=i=>{let t=pe().localization.getBadgeDesc(i);return(!t||!t.length)&&(t=`badge_desc_${i}`),t},da=i=>{let t=pe().localization.getBadgeName(i);return(!t||!t.length)&&(t=`badge_name_${i}`),t};function $a(i){return!i||isNaN(i)?"0":i.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}function jC(i){if(!i||isNaN(i))return"0";let t=Math.abs(i);const s=Math.pow(10,1),n=i<0;let a="";const r=[{key:"Q",value:Math.pow(10,15)},{key:"T",value:Math.pow(10,12)},{key:"B",value:Math.pow(10,9)},{key:"M",value:Math.pow(10,6)},{key:"K",value:1e3}];for(const l of r){let c=t/l.value;if(c=Math.round(c*s)/s,c>=1){t=c,a=l.key;break}}return(n?"-":"")+t+a}function u(i,t=null,s=null){return pe().getLocalizationWithParameters(i,t,s)}const jo=class jo{};jo.CATALOG_PLACE_MULTIPLE_OBJECTS="catalogPlaceMultipleObjects",jo.CATALOG_SKIP_PURCHASE_CONFIRMATION="catalogSkipPurchaseConfirmation";let Ka=jo;const Um=(i,t)=>i.dispatchEvent(t),Bl=i=>Um(pe().events,i),jn=new Vh,pt=i=>Um(jn,i);let Fm=!1;const In=i=>{Fm&&Bl(new Yc(Yc.PLAY_SOUND,i))},Eu=[Ne.MOUSE_CLICK],IC=()=>{const i=()=>Eu.forEach(s=>window.removeEventListener(s,t)),t=s=>(Fm=!0)&&i();Eu.forEach(s=>window.addEventListener(s,t))};IC();const ot=class ot{};ot.DEFAULT=1,ot.WALL_PAPER=2,ot.FLOOR=3,ot.LANDSCAPE=4,ot.POST_IT=5,ot.POSTER=6,ot.SOUND_SET=7,ot.TRAX_SONG=8,ot.PRESENT=9,ot.ECOTRON_BOX=10,ot.TROPHY=11,ot.CREDIT_FURNI=12,ot.PET_SHAMPOO=13,ot.PET_CUSTOM_PART=14,ot.PET_CUSTOM_PART_SHAMPOO=15,ot.PET_SADDLE=16,ot.GUILD_FURNI=17,ot.GAME_FURNI=18,ot.MONSTERPLANT_SEED=19,ot.MONSTERPLANT_REVIVAL=20,ot.MONSTERPLANT_REBREED=21,ot.MONSTERPLANT_FERTILIZE=22,ot.FIGURE_PURCHASABLE_SET=23;let ce=ot;class Xa{constructor(t){t&&(this._locked=!1,this._id=t.itemId,this._type=t.spriteId,this._ref=t.ref,this._category=t.category,this._groupable=t.isGroupable&&!t.rentable,this._tradeable=t.tradable,this._recyclable=t.isRecycleable,this._sellable=t.sellable,this._stuffData=t.stuffData,this._extra=t.extra,this._secondsToExpiration=t.secondsToExpiration,this._expirationTimeStamp=t.expirationTimeStamp,this._hasRentPeriodStarted=t.hasRentPeriodStarted,this._creationDay=t.creationDay,this._creationMonth=t.creationMonth,this._creationYear=t.creationYear,this._slotId=t.slotId,this._songId=t.songId,this._flatId=t.flatId,this._isRented=t.rentable,this._isWallItem=t.isWallItem)}get rentable(){return this._isRented}get id(){return this._id}get ref(){return this._ref}get category(){return this._category}get type(){return this._type}get stuffData(){return this._stuffData}set stuffData(t){this._stuffData=t}get extra(){return this._extra}get recyclable(){return this._recyclable}get isTradable(){return this._tradeable}get isGroupable(){return this._groupable}get sellable(){return this._sellable}get secondsToExpiration(){if(this._secondsToExpiration===-1)return-1;let t=-1;return this._hasRentPeriodStarted?(t=this._secondsToExpiration-(As()-this._expirationTimeStamp)/1e3,t<0&&(t=0)):t=this._secondsToExpiration,t}get creationDay(){return this._creationDay}get creationMonth(){return this._creationMonth}get creationYear(){return this._creationYear}get slotId(){return this._slotId}get songId(){return this._songId}get locked(){return this._locked}set locked(t){this._locked=t}get flatId(){return this._flatId}get isWallItem(){return this._isWallItem}get hasRentPeriodStarted(){return this._hasRentPeriodStarted}get expirationTimeStamp(){return this._expirationTimeStamp}update(t){this._type=t.spriteId,this._ref=t.ref,this._category=t.category,this._groupable=t.isGroupable&&!t.rentable,this._tradeable=t.tradable,this._recyclable=t.isRecycleable,this._sellable=t.sellable,this._stuffData=t.stuffData,this._extra=t.extra,this._secondsToExpiration=t.secondsToExpiration,this._expirationTimeStamp=t.expirationTimeStamp,this._hasRentPeriodStarted=t.hasRentPeriodStarted,this._creationDay=t.creationDay,this._creationMonth=t.creationMonth,this._creationYear=t.creationYear,this._slotId=t.slotId,this._songId=t.songId,this._flatId=t.flatId,this._isRented=t.rentable,this._isWallItem=t.isWallItem}clone(){const t=new Xa(null);return t._expirationTimeStamp=this._expirationTimeStamp,t._isWallItem=this._isWallItem,t._songId=this._songId,t._locked=this._locked,t._id=this._id,t._ref=this._ref,t._category=this._category,t._type=this._type,t._stuffData=this._stuffData,t._extra=this._extra,t._recyclable=this._recyclable,t._tradeable=this._tradeable,t._groupable=this._groupable,t._sellable=this._sellable,t._secondsToExpiration=this._secondsToExpiration,t._hasRentPeriodStarted=this._hasRentPeriodStarted,t._creationDay=this._creationDay,t._creationMonth=this._creationMonth,t._creationYear=this._creationYear,t._slotId=this._slotId,t._isRented=this._isRented,t._flatId=this._flatId,t}}class bc{constructor(t=-1,s=-1,n=null,a=null,r=-1){this._type=t,this._category=s,this._roomEngine=n,this._stuffData=a,this._extra=r,this._isWallItem=!1,this._iconUrl=null,this._name=null,this._description=null,this._locked=!1,this._selected=!1,this._hasUnseenItems=!1,this._items=[]}clone(){const t=new bc;return t._type=this._type,t._category=this._category,t._roomEngine=this._roomEngine,t._stuffData=this._stuffData,t._extra=this._extra,t._isWallItem=this._isWallItem,t._iconUrl=this._iconUrl,t._name=this._name,t._description=this._description,t._locked=this._locked,t._selected=this._selected,t._hasUnseenItems=this._hasUnseenItems,t._items=this._items,t}prepareGroup(){this.setIcon(),this.setName(),this.setDescription()}dispose(){}getItemByIndex(t){return this._items[t]}getItemById(t){for(const s of this._items)if(s.id===t)return s;return null}getTradeItems(t){const s=[],n=this.getLastItem();if(!n)return s;let a=0,r=0;for(;r<this._items.length&&!(a>=t);){const l=this.getItemByIndex(r);!l.locked&&l.isTradable&&l.type===n.type&&(s.push(l),a++),r++}return s}push(t){const s=[...this._items];let n=0;for(;n<s.length;){let a=s[n];if(a.id===t.id){a=a.clone(),a.locked=!1,s.splice(n,1),s.push(a),this._items=s;return}n++}s.push(t),this._items=s,this._items.length===1&&this.prepareGroup()}pop(){const t=[...this._items];let s=null;if(t.length>0){const n=t.length-1;s=t[n],t.splice(n,1)}return this._items=t,s}remove(t){const s=[...this._items];let n=0;for(;n<s.length;){let a=s[n];if(a.id===t)return s.splice(n,1),this._items=s,a;n++}return null}getTotalCount(){if(this._category===ce.POST_IT){let t=0,s=0;for(;s<this._items.length;){const n=this.getItemByIndex(s);t=t+parseInt(n.stuffData.getLegacyString()),s++}return t}return this._items.length}getUnlockedCount(){if(this.category===ce.POST_IT)return this.getTotalCount();let t=0,s=0;for(;s<this._items.length;)this.getItemByIndex(s).locked||t++,s++;return t}getLastItem(){return this._items.length?this.getItemByIndex(this._items.length-1):null}unlockAllItems(){const t=[...this._items];let s=0;for(;s<t.length;){const n=t[s];if(n.locked){const a=n.clone();a.locked=!1,t[s]=a}s++}this._items=t}lockItemIds(t){const s=[...this._items];let n=0,a=!1;for(;n<s.length;){const r=s[n],l=t.indexOf(r.ref)>=0;if(r.locked!==l){a=!0;const c=r.clone();c.locked=l,s[n]=c}n++}return this._items=s,a}setName(){const t=this.getLastItem();if(!t){this._name="";return}let s="";switch(this._category){case ce.POSTER:s="poster_"+t.stuffData.getLegacyString()+"_name";break;case ce.TRAX_SONG:this._name="SONG_NAME";return;default:this.isWallItem?s="wallItem.name."+t.type:s="roomItem.name."+t.type}this._name=u(s)}setDescription(){this._description=""}setIcon(){if(this._iconUrl)return;let t=null;this.isWallItem?t=this._roomEngine.getFurnitureWallIconUrl(this._type,this._stuffData.getLegacyString()):t=this._roomEngine.getFurnitureFloorIconUrl(this._type),t&&(this._iconUrl=t)}get type(){return this._type}get category(){return this._category}get stuffData(){return this._stuffData}get extra(){return this._extra}get iconUrl(){return this._iconUrl}get name(){return this._name}get description(){return this._description}get hasUnseenItems(){return this._hasUnseenItems}set hasUnseenItems(t){this._hasUnseenItems=t}get locked(){return this._locked}set locked(t){this._locked=t}get selected(){return this._selected}set selected(t){this._selected=t}get isWallItem(){const t=this.getItemByIndex(0);return t?t.isWallItem:!1}get isGroupable(){const t=this.getItemByIndex(0);return t?t.isGroupable:!1}get isSellable(){const t=this.getItemByIndex(0);return t?t.sellable:!1}get items(){return this._items}set items(t){this._items=t}}const Cc=(i,t,s,n=NaN)=>new bc(i,t,W(),s,n),EC=(i,t,s)=>{const n=[];for(const r of i)r.type===t.type&&n.push(r);for(const r of n)if(r.getItemById(t.id))return r;const a=Cc(t.type,t.category,t.stuffData,t.extra);return a.push(t),s?(a.hasUnseenItems=!0,i.unshift(a)):i.push(a),a},bC=(i,t,s)=>{let n=null;for(const a of i)if(a.type===t.type&&a.isWallItem===t.isWallItem&&a.isGroupable)if(t.category===ce.POSTER){if(a.stuffData.getLegacyString()===t.stuffData.getLegacyString()){n=a;break}}else if(t.category===ce.GUILD_FURNI){if(t.stuffData.compare(a.stuffData)){n=a;break}}else{n=a;break}if(n){if(n.push(t),s){n.hasUnseenItems=!0;const a=i.indexOf(n);a>=0&&i.splice(a,1),i.unshift(n)}return n}return n=Cc(t.type,t.category,t.stuffData,t.extra),n.push(t),s?(n.hasUnseenItems=!0,i.unshift(n)):i.push(n),n},bu=(i,t,s)=>{t.isGroupable?bC(i,t,s):EC(i,t,s)},CC=(i,t,s,n)=>{if(t===1)return i;n[s]=i;for(const r of n)if(!r)return null;const a=new Map;for(const r of n){for(const[l,c]of r)a.set(l,c);r.clear()}return n=null,a},NC=i=>{const t=[];for(const s of i){let n=s.getTotalCount();s.category===ce.POST_IT&&(n=1);let a=0;for(;a<n;)t.push(s.getItemByIndex(a).id),a++}return t};let Vm=!1,Gm=-1;const vC=()=>Vm,ii=i=>Vm=i,ia=()=>Gm,Vo=i=>Gm=i,Qa=()=>{ia()!==-1&&(W().cancelRoomObjectPlacement(),Vo(-1),ii(!1))},Hl=(i,t=!1)=>{const s=i.petData;if(!s)return!1;const n=Dr().getSession(1);return!n||!n.isRoomOwner&&!n.allowPets?!1:(Q("inventory/hide"),W().processRoomObjectPlacement(Va.INVENTORY,-s.id,X.UNIT,lt.PET,s.figureData.figuredata)&&(Vo(s.id),ii(!0)),!0)},oa=(i,t=!1)=>{if(!i||!i.getUnlockedCount())return!1;const s=i.getLastItem();if(!s)return!1;if(s.category===ce.FLOOR||s.category===ce.WALL_PAPER||s.category===ce.LANDSCAPE)return t||D(new Wi(s.id)),!1;{Q("inventory/hide");let n=0,a=!1;s.isWallItem?n=X.WALL:n=X.FLOOR,s.category===ce.POSTER?a=W().processRoomObjectPlacement(Va.INVENTORY,s.id,n,s.type,s.stuffData.getLegacyString()):a=W().processRoomObjectPlacement(Va.INVENTORY,s.id,n,s.type,s.extra.toString(),s.stuffData),a&&(Vo(s.ref),ii(!0))}return!0},Wl=(i,t=!1)=>{const s=i.botData;if(!s)return!1;const n=Dr().getSession(1);return!n||!n.isRoomOwner?!1:(Q("inventory/hide"),W().processRoomObjectPlacement(Va.INVENTORY,-s.id,X.UNIT,lt.RENTABLE_BOT,s.figure)&&(Vo(s.id),ii(!0)),!0)},zn=class zn{};zn.FURNI=1,zn.RENTABLE=2,zn.PET=3,zn.BADGE=4,zn.BOT=5,zn.GAMES=6;let et=zn;const _C=i=>i.map(t=>t.petData.id),Bm=(i,t,s=!0)=>{const n={petData:i};return s?t.unshift(n):t.push(n),n},Hm=(i,t)=>{let s=0;for(;s<t.length;){const n=t[s];if(n&&n.petData.id===i)return ia()===n.petData.id&&(Qa(),Q("inventory/open")),t.splice(s,1),n;s++}return null},SC=(i,t,s)=>{const n=_C(i),a=[],r=[];for(const l of t.keys())n.indexOf(l)===-1&&a.push(l);for(const l of n)!t.get(l)&&r.push(l);n.length;for(const l of r)Hm(l,i);for(const l of a){const c=t.get(l);c&&Bm(c,i,s(et.PET,c.id))}return i},wC=(i,t,s,n)=>{if(t===1)return i;n[s]=i;for(const r of n)if(!r)return null;const a=new Map;for(const r of n){for(const[l,c]of r)a.set(l,c);r.clear()}return n=null,a},kn=class kn{};kn.TRADING_STATE_READY=0,kn.TRADING_STATE_RUNNING=1,kn.TRADING_STATE_COUNTDOWN=2,kn.TRADING_STATE_CONFIRMING=3,kn.TRADING_STATE_CONFIRMED=4,kn.TRADING_STATE_COMPLETED=5,kn.TRADING_STATE_CANCELLED=6;let bt=kn;class Cu{constructor(t=-1,s="",n=new Ga,a=0,r=0,l=!1,c=!1){this.userId=t,this.userName=s,this.userItems=n,this.itemCount=a,this.creditsCount=r,this.accepts=l,this.canTrade=c}}const Ws=class Ws{};Ws.ALERT_SCAM=0,Ws.HOTEL_TRADING_DISABLED=1,Ws.YOU_NOT_ALLOWED=2,Ws.THEY_NOT_ALLOWED=4,Ws.ROOM_DISABLED=6,Ws.YOU_OPEN=7,Ws.THEY_OPEN=8,Ws.ERROR_WHILE_COMMIT=9,Ws.THEY_CANCELLED=10;let is=Ws;const Nu=i=>{var t;return((t=V().getWallItemData(i))==null?void 0:t.isExternalImage)||!1},vu=i=>{const t=new Ga;if(i.length)for(const n of i){const a=n.spriteId,r=n.category;let l=n.furniType+a;(!n.isGroupable||Nu(a))&&(l="itemid"+n.itemId),n.category===ce.POSTER?l=n.itemId+"poster"+n.stuffData.getLegacyString():n.category===ce.GUILD_FURNI&&(l="");let c=n.isGroupable&&!Nu(n.spriteId)?t.getValue(l):null;c||(c=Cc(a,r,n.stuffData),t.add(l,c)),c.push(new Xa(n))}return t},TC=(i,t)=>{let s=i.toString();if(!(t instanceof ri))return s;let n=1;for(;n<5;)s=s+(","+t.getValue(n)),n++;return s};class qi{static getProductImageUrl(t,s,n){let a=null;switch(t){case ja.S:a=W().getFurnitureFloorIconUrl(s);break;case ja.I:this.getProductCategory(ja.I,s)===1&&(a=W().getFurnitureWallIconUrl(s,n));break}return a}static getProductCategory(t,s){if(t===ja.S)return 1;if(t===ja.I){if(s===3001)return ce.WALL_PAPER;if(s===3002)return ce.FLOOR;if(s===4057)return ce.LANDSCAPE}return 1}}class to{static getRandomNumber(t){return Math.floor(Math.random()*t)}static getRandomElement(t){return t[this.getRandomNumber(t.length)]}static getRandomElements(t,s){const n=new Array(s);let a=t.length;const r=new Array(a);for(;s--;){var l=this.getRandomNumber(a);n[s]=t[l in r?r[l]:l],r[l]=--a in r?r[a]:a}return n}}const Y=new Map;Y.set("r","red");Y.set("b","blue");Y.set("g","green");Y.set("y","yellow");Y.set("w","white");Y.set("o","orange");Y.set("c","cyan");Y.set("br","brown");Y.set("pr","purple");Y.set("pk","pink");Y.set("black","black");Y.set("red","red");Y.set("orangered","orangered");Y.set("orange","orange");Y.set("yellow","yellow");Y.set("yellowgreen","yellowgreen");Y.set("green","green");Y.set("seagreen","seagreen");Y.set("teal","teal");Y.set("blue","blue");Y.set("darkblue","darkblue");Y.set("indigo","indigo");Y.set("purple","purple");Y.set("violet","violet");Y.set("brown","brown");Y.set("burlywood","burlywood");Y.set("rosybrown","rosybrown");Y.set("saddlebrown","saddlebrown");Y.set("maroon","maroon");Y.set("firebrick","firebrick");Y.set("darkred","darkred");Y.set("chocolate","chocolate");Y.set("sienna","sienna");Y.set("peru","peru");Y.set("darkorange","darkorange");Y.set("orange","orange");Y.set("orangered","orangered");Y.set("tomato","tomato");Y.set("coral","coral");Y.set("darkolivegreen","darkolivegreen");Y.set("olive","olive");Y.set("olivedrab","olivedrab");Y.set("greenyellow","greenyellow");Y.set("yellowgreen","yellowgreen");Y.set("darkgreen","darkgreen");Y.set("limegreen","limegreen");Y.set("lime","lime");Y.set("lawngreen","lawngreen");Y.set("palegreen","palegreen");Y.set("springgreen","springgreen");Y.set("mediumseagreen","mediumseagreen");Y.set("mediumaquamarine","mediumaquamarine");Y.set("aquamarine","aquamarine");Y.set("turquoise","turquoise");Y.set("mediumturquoise","mediumturquoise");Y.set("darkturquoise","darkturquoise");Y.set("aqua","aqua");Y.set("cyan","cyan");Y.set("lightcyan","lightcyan");Y.set("paleturquoise","paleturquoise");Y.set("azure","azure");Y.set("lightblue","lightblue");Y.set("powderblue","powderblue");Y.set("deepskyblue","deepskyblue");Y.set("skyblue","skyblue");Y.set("lightskyblue","lightskyblue");Y.set("steelblue","steelblue");Y.set("royalblue","royalblue");Y.set("mediumslateblue","mediumslateblue");Y.set("slateblue","slateblue");Y.set("darkslateblue","darkslateblue");Y.set("mediumpurple","mediumpurple");Y.set("blueviolet","blueviolet");Y.set("darkviolet","darkviolet");Y.set("darkmagenta","darkmagenta");Y.set("mediumvioletred","mediumvioletred");Y.set("violetred","violetred");Y.set("orchid","orchid");Y.set("darkorchid","darkorchid");Y.set("mediumorchid","mediumorchid");Y.set("thistle","thistle");Y.set("plum","plum");Y.set("purple","purple");Y.set("darkgrey","darkgrey");Y.set("dimgray","dimgray");Y.set("lightgrey","lightgrey");Y.set("grey","grey");Y.set("slategrey","slategrey");Y.set("lightslategrey","lightslategrey");Y.set("whitesmoke","whitesmoke");Y.set("white","white");Y.set("snow","snow");Y.set("mistyrose","mistyrose");Y.set("seashell","seashell");Y.set("antiquewhite","antiquewhite");Y.set("linen","linen");Y.set("oldlace","oldlace");Y.set("papayawhip","papayawhip");Y.set("blanchedalmond","blanchedalmond");Y.set("moccasin","moccasin");Y.set("wheat","wheat");Y.set("navajowhite","navajowhite");Y.set("burlywood","burlywood");Y.set("tan","tan");Y.set("rosybrown","rosybrown");Y.set("sandybrown","sandybrown");Y.set("goldenrod","goldenrod");Y.set("darkgoldenrod","darkgoldenrod");Y.set("peru","peru");Y.set("chocolate","chocolate");Y.set("saddlebrown","saddlebrown");Y.set("sienna","sienna");Y.set("brown","brown");const RC=i=>i.replace(/([\u00A0-\u9999<>&])(.|$)/g,(t,s,n)=>s!=="&"||n!=="#"?(/[\u00A0-\u9999<>&]/.test(n)&&(n="&#"+n.charCodeAt(0)+";"),"&#"+s.charCodeAt(0)+";"+n):t),yC=i=>{let t="";i=RC(i),i=i.replace(/\[tag\](.*?)\[\/tag\]/g,'<span class="chat-tag"><b>$1</b></span>'),K("youtube.publish.disabled",!1)||(i=i.replace(/(?:http:\/\/|https:\/\/)?(?:www\.)?(?:youtube\.com|youtu\.be)\/(?:watch\?.*v=|shorts\/)?([a-zA-Z0-9_-]{11})/g,`
            <div>
                <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEQElEQVR4nO2X7WscRRzHt+AbfeEfICK+VVTwjWhVUnI7l8SkDY3Wu5ltfbiZXBNbq8ldiZEkVbHSIAEjCtUWNLXFaNWQElOUomKwD0bxoVLtk3I+oPhUjbvZ5x2Zmb29DUlaa3fTO9gvDOzMbx5+n535zYMkJUqUKFFNKoVIK0CEyogcKZfJCO/2y3qkaldLPn+ZDLEGELYbFeVyVgYgLnGADL5GqgUBRCaYwwC1NzUq5EruPCQnpVpRGpG87/RgGhJFLB88xGzyuvxVAOGtAOIXmU2SpGWsHKzNXcfaySh/Pe9DyeVSkNxzUQDkbO4KgIjH4kBGZLuAaa/j5ZD8LmZHJBniAd4Gtj8kynCXyBNVRuRX6WIJIDLN4gBA/CNzuq5uyyWhmRllQL69VJUAMsQDlT+NR3ynHhXLKVfkkJCcAZDoVQmQyuZuLAOkYPudNQcgSdIysZ0SWq/cf20tAkgyJDMJQHXNAN7ox8WTN6/pulRG2AAI/xZeQjLEj7ATG0BsVd0Sqs/iG2REHO64f70ACL/BbKEtVpUh+VvUqzIAJqDgewEip5lNRmQfO9xYeUNm/dUAkZ8AwidkmL+tKoI40VLJeGZbv97dWdIIVLVcRtOUVlPNrrR4urvZVlvrvSClb6Fq6iaR2HfYxur67TSl1eR9Eaiyvo1nB/ticV7vL04HDsWc9P5i8EiKRObw4GNL5bzqJzbbkQHo3R0/sE7dE99Qb2ZmXnK++HRRR6zxvbyO9fru85uFro7vIwPQcFZlnXq//EwXkvvtqUUdsQ/s53Xst8fOC0DLZdToANa1Gfyv9DxIjSd6qVv6Tjh+/Gue14sPRA+wdrURGYCaXWmHO3e+/Iw75Rz8UEx3X4Far45Qvb9AtUwz/7Z27ZwLMPUeNV9+gVqju6i2GlTW+uDj1Jl6n9ofHOD9BONkW+zoANrS7tkA7Mlx4eT+fVTvWi/WlefOAQjL+Ui0M3c8P8+mFzeIcdrSbnQALSu8CwVwjx0N6nnqP9zm/fmHaPfOBHVPnwz64OO0rPCiA2hYTi8UgMWA3vuwb/Ooesftlb9e6KTWm6Oiz+lDYpyG5TQ6gPCpGhVAc10A4GkapabpAxyOASCCJXQ2gLCcQ1MxLKEIgngOAKVzAPTuDrZtUn3zRjpLYAxBfI5t9H8BhGOguIFab/kx8PHB6LfR8kF2LgD31HG+2ywE4Bz9nFp7XhI22xK70F9neJYFsHvsK2GaHI/+ICtfJRYDsF7ZWVnEtr0gQFjMWd5u7555Nr1nU/RXifJlrpzM54aoPTFGjaGnxGB3NVL73Ul+cZvdRLjNGntNnLTbtvC8uX2Y/2m258/et8bfaW6l1sgODuR8coQaW/viuczV/HWaiT0ylsp5fWDzYSkOseeeXgg9KeEqq/KkbHL++5OyyQmelHCVFTwpC50lY/jp3licT5QoUSIpDv0L7jL5ksuHFDUAAAAASUVORK5CYII="
                    alt="YouTube Icon" style="vertical-align: middle; margin-right: 5px;"><strong>Click on open video to see the YouTube video</strong>
                </div><center><a href="https://youtu.be/$1" target="_blank" style="background-color: red; color: white; padding: 5px 10px; border-radius: 5px; text-decoration: none;">Open Video</a></center>
            `));const s=i.match(/@[a-zA-Z]+@/);if(s){const n=s[0].toString(),a=n.substr(1,n.length-2),r=i.replace(n,"");Y.has(a)?t=`<span style="color: ${Y.get(a)}">${r}</span>`:t=r}else t=i;return t},Nc=(i,t)=>window.localStorage.setItem(i,JSON.stringify(t)),Yn=class Yn{};Yn.CAMERA_SHUTTER="camera_shutter",Yn.CREDITS="credits",Yn.DUCKETS="duckets",Yn.MESSENGER_NEW_THREAD="messenger_new_thread",Yn.MESSENGER_MESSAGE_RECEIVED="messenger_message_received",Yn.MODTOOLS_NEW_TICKET="modtools_new_ticket";let En=Yn;function OC(i){const t=i.parts;let s=0;for(const n of t)s=Math.max(s,n.colorLayerIndex);return s}function kC(i,t){return t=t.filter(s=>i.indexOf(s)===-1),[...i,...to.getRandomElements(t,to.getRandomNumber(t.length)+1)]}function AC(i,t,s=0,n=[]){if(!i)return null;const a=i.partSets.getValues().filter(r=>!r.isSelectable||r.gender!=="U"&&r.gender!==t||r.clubLevel>s||r.isSellable&&n.indexOf(r.id)===-1?null:r);return!a||!a.length?null:to.getRandomElement(a)}function DC(i,t,s=0){if(!i)return[];const n=i.colors.getValues().filter(a=>!a.isSelectable||a.clubLevel>s?null:a);return!n||!n.length?null:to.getRandomElements(n,OC(t))}function PC(i,t,s=0,n=[],a=[]){const r=xt().structure,l=new Gh(""),c=kC(r.getMandatorySetTypeIds(t,s),je.SET_TYPES);for(const m of a){const h=i.getPartSetId(m),d=i.getColorIds(m);l.updatePart(m,h,d)}for(const m of c){if(l.hasPartType(m))continue;const h=r.figureData.getSetType(m),d=AC(h,t,s,n);if(!d)continue;let g=[];d.isColorable&&(g=DC(r.figureData.getPalette(h.paletteID),d,s).map(f=>f.id)),l.updatePart(h.type,d.id,g)}return l.getFigureString()}class LC extends Fo{init(){super.init(),this.addCategory(je.HAIR),this.addCategory(je.HAT),this.addCategory(je.HEAD_ACCESSORIES),this.addCategory(je.EYE_ACCESSORIES),this.addCategory(je.FACE_ACCESSORIES),this._isInitalized=!0}get name(){return Ds.HEAD}}class _u extends Fo{init(){super.init(),this.addCategory(je.TROUSERS),this.addCategory(je.SHOES),this.addCategory(je.TROUSER_ACCESSORIES),this._isInitalized=!0}get name(){return Ds.LEGS}}class Su extends Fo{init(){super.init(),this.addCategory(je.SHIRT),this.addCategory(je.CHEST_PRINTS),this.addCategory(je.JACKET),this.addCategory(je.CHEST_ACCESSORIES),this._isInitalized=!0}get name(){return Ds.TORSO}}const Io=class Io{};Io.COLORMATRIX="colormatrix",Io.COMPOSITE="composite";let Ja=Io;class MC{constructor(t,s){this.texture=t,this.imageUrl=s}}class UC{constructor(t,s){this.effectName=t,this.thumbnailUrl=s}}class FC{constructor(t,s,n){this._productName=t,this._customImage=s,this._furnitureClassName=n}get productName(){return this._productName}get customImage(){return this._customImage}get furnitureClassName(){return this._furnitureClassName}}const Yr=class Yr{};Yr.STATE_UNLOCKED=1,Yr.STATE_LOCKED_AVAILABLE=2,Yr.STATE_LOCKED_EXPIRED=3,Yr.STATE_LOCKED_FUTURE=4;let Jt=Yr;const wa=class wa{};wa.TYPE_CHAT=1,wa.TYPE_ROOM_INFO=2,wa.TYPE_IM=3;let Qs=wa;const Wm=()=>{const i=new Date;return`${i.getHours().toString().padStart(2,"0")}:${i.getMinutes().toString().padStart(2,"0")}`},wu=(i=0)=>{const t=i?new Date(Date.now()-i*1e3):new Date;return`${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`},qm=i=>{if(!i||!i.length)return null;const t=i.split("/"),s=t[0],n=t[1],a=parseInt(t[2]);return{username:s,figure:n,userId:a}},$r=class $r{constructor(){this.id=-1,this.name=null,this.gender=0,this.online=!1,this.followingAllowed=!1,this.figure=null,this.categoryId=0,this.motto=null,this.realName=null,this.lastAccess=null,this.persistedMessageUser=!1,this.vipMember=!1,this.pocketHabboUser=!1,this.relationshipStatus=-1,this.unread=0}populate(t){this.id=t.id,this.name=t.name,this.gender=t.gender,this.online=t.online,this.followingAllowed=t.followingAllowed,this.figure=t.figure,this.categoryId=t.categoryId,this.motto=t.motto,this.realName=t.realName,this.lastAccess=t.lastAccess,this.persistedMessageUser=t.persistedMessageUser,this.vipMember=t.vipMember,this.pocketHabboUser=t.pocketHabboUser,this.relationshipStatus=t.relationshipStatus}};$r.RELATIONSHIP_NONE=0,$r.RELATIONSHIP_HEART=1,$r.RELATIONSHIP_SMILE=2,$r.RELATIONSHIP_BOBBA=3;let os=$r;const Eo=class Eo{};Eo.GROUP_CHAT=0,Eo.PRIVATE_CHAT=1;let _r=Eo;const Ta=class Ta{};Ta.HIDDEN=0,Ta.SHOW=1,Ta.UNREAD=2;let hn=Ta;class Tu{populate(t){return t?(this._id=t.requestId,this._name=t.requesterName,this._figureString=t.figureString,this._requesterUserId=t.requesterUserId,!0):!1}get id(){return this._id}get name(){return this._name}get requesterUserId(){return this._requesterUserId}get figureString(){return this._figureString}}class VC{constructor(t=0,s=0,n=0,a=[]){this.userFriendLimit=t,this.normalFriendLimit=s,this.extendedFriendLimit=n,this.categories=a}}const Kr=class Kr{constructor(t,s,n=0,a=null,r=0){this._type=r,this._senderId=t,this._message=s,this._secondsSinceSent=n,this._extraData=a,this._date=new Date}get type(){return this._type}get senderId(){return this._senderId}get message(){return this._message}get secondsSinceSent(){return this._secondsSinceSent}get extraData(){return this._extraData}get date(){return this._date}};Kr.CHAT=0,Kr.ROOM_INVITE=1,Kr.STATUS_NOTIFICATION=2,Kr.SECURITY_NOTIFICATION=3;let Pn=Kr;class GC{constructor(t,s=_r.PRIVATE_CHAT){this._userId=t,this._chats=[],this._type=s}addChat(t){this._chats.push(t)}get userId(){return this._userId}get chats(){return this._chats}get type(){return this._type}set type(t){this._type=t}}const Ra=class Ra{constructor(t){this._threadId=++Ra.THREAD_ID,this._participant=t,this._groups=[],this._lastUpdated=new Date,this._unreadCount=0}addMessage(t,s,n=0,a=null,r=0){const l=t<0&&a,c=l?qm(a).userId:t,m=this.getLastGroup(c);if(!m)return;l&&(m.type=_r.GROUP_CHAT);const h=new Pn(t,s,n,a,r);return m.addChat(h),this._lastUpdated=new Date,this._unreadCount++,h}getLastGroup(t){let s=this._groups[this._groups.length-1];return s&&s.userId===t||(s=new GC(t),this._groups.push(s)),s}setRead(){this._unreadCount=0}get threadId(){return this._threadId}get participant(){return this._participant}get groups(){return this._groups}get lastUpdated(){return this._lastUpdated}get unreadCount(){return this._unreadCount}get unread(){return this._unreadCount>0}};Ra.MESSAGE_RECEIVED="MT_MESSAGE_RECEIVED",Ra.THREAD_ID=0;let ql=Ra;function Go(i=0){Q(i===0?"friends-messenger/toggle":`friends-messenger/${i}`)}const BC=()=>Yd.RENDERER_VERSION,zm=()=>"2.1.1";function oi(i){D(new Ba(i,!0))}function Ym(i){Q(`groups/manage/${i}`)}function Ru(i,t){Q(t?`group-members/${i}/${t}`:`group-members/${i}`)}const Xr=class Xr{constructor(t,s,n,a){this.type=t,this.key=s||0,this.color=n||0,this.position=a||4}get code(){return this.key===0&&this.type!==Xr.BASE?null:Xr.getCode(this.type,this.key,this.color,this.position)}static getCode(t,s,n,a){return t+(s<10?"0":"")+s+(n<10?"0":"")+n+a}};Xr.BASE="b",Xr.SYMBOL="s";let Xt=Xr;const ya=class ya{};ya.NOT_MEMBER=0,ya.MEMBER=1,ya.REQUEST_PENDING=2;let Tt=ya;const Oa=class Oa{};Oa.REGULAR=0,Oa.EXCLUSIVE=1,Oa.PRIVATE=2;let Cs=Oa;const HC=i=>{D(i.favourite?new Bh(i.groupId):new Hh(i.groupId))},vc=i=>D(new Wh(i)),It=class It{};It.NONE="NONE",It.ERROR="ERROR",It.REJECTED="REJECTED",It.USER_CREATE="USER_CREATE",It.USER_PENDING="USER_PENDING",It.USER_ONGOING="USER_ONGOING",It.USER_FEEDBACK="USER_FEEDBACK",It.USER_NO_HELPERS="USER_NO_HELPERS",It.USER_SOMETHING_WRONG="USER_SOMETHING_WRONG",It.USER_THANKS="USER_THANKS",It.USER_GUIDE_DISCONNECTED="USER_GUIDE_DISCONNECTED",It.GUIDE_TOOL_MENU="GUIDE_TOOL_MENU",It.GUIDE_ACCEPT="GUIDE_ACCEPT",It.GUIDE_ONGOING="GUIDE_ONGOING",It.GUIDE_CLOSED="GUIDE_CLOSED",It.GUARDIAN_CHAT_REVIEW_ACCEPT="GUARDIAN_CHAT_REVIEW_ACCEPT",It.GUARDIAN_CHAT_REVIEW_WAIT_FOR_VOTERS="GUARDIAN_CHAT_REVIEW_WAIT_FOR_VOTERS",It.GUARDIAN_CHAT_REVIEW_VOTE="GUARDIAN_CHAT_REVIEW_VOTE",It.GUARDIAN_CHAT_REVIEW_WAIT_FOR_RESULTS="GUARDIAN_CHAT_REVIEW_WAIT_FOR_RESULTS",It.GUARDIAN_CHAT_REVIEW_RESULTS="GUARDIAN_CHAT_REVIEW_RESULTS";let Oe=It;class yu{constructor(t,s){this._message=t,this._roomId=s}get message(){return this._message}get roomId(){return this._roomId}}class Ou{constructor(t){this._userId=t,this._messages=[]}addChat(t){this._messages.push(t)}get userId(){return this._userId}get messages(){return this._messages}}const ka=class ka{};ka.ACTIVE="active",ka.NONE="none",ka.EXPIRED="expired";let un=ka;const WC="HC1",qC=["ACH_VipHC1","ACH_VipHC2","ACH_VipHC3","ACH_VipHC4","ACH_VipHC5","HC1","HC2","HC3","HC4","HC5"],zC=i=>{let t=null;return qC.forEach(s=>i.indexOf(s)>-1&&(t=s)),t||WC},bo=class bo{};bo.TOO_MANY_PENDING_CALLS_CODE=1,bo.HAS_ABUSIVE_CALL_CODE=2;let so=bo;const YC=i=>i===1?"useless":i===2?"abusive":"resolved",xr=class xr{};xr.SELECT_USER=0,xr.SELECT_CHATS=1,xr.SELECT_TOPICS=2,xr.INPUT_REPORT_MESSAGE=3,xr.REPORT_SUMMARY=4;let qt=xr;const rn=class rn{};rn.EMERGENCY=1,rn.GUIDE=2,rn.IM=3,rn.ROOM=4,rn.BULLY=6,rn.THREAD=7,rn.MESSAGE=8,rn.PHOTO=9;let Ze=rn;const $C=i=>{switch(i){case 1:case 2:return"Normal";case 3:return"Automatic";case 4:return"Automatic IM";case 5:return"Guide System";case 6:return"IM";case 7:return"Room";case 8:return"Panic";case 9:return"Guardian";case 10:return"Automatic Helper";case 11:return"Discussion";case 12:return"Selfie";case 14:return"Photo";case 15:return"Ambassador"}return"Unknown"},$n=class $n{constructor(t,s,n,a,r){this._actionId=t,this._name=s,this._actionType=n,this._sanctionTypeId=a,this._actionLengthHours=r}get actionId(){return this._actionId}get name(){return this._name}get actionType(){return this._actionType}get sanctionTypeId(){return this._sanctionTypeId}get actionLengthHours(){return this._actionLengthHours}};$n.ALERT=1,$n.MUTE=2,$n.BAN=3,$n.KICK=4,$n.TRADE_LOCK=5,$n.MESSAGE=6;let Ue=$n;const qs=class qs{};qs.NONE=0,qs.START_DOORBELL=1,qs.START_PASSWORD=2,qs.STATE_PENDING_SERVER=3,qs.UPDATE_STATE=4,qs.STATE_WAITING=5,qs.STATE_NO_ANSWER=6,qs.STATE_WRONG_PASSWORD=7,qs.STATE_ACCEPTED=8;let Ge=qs;const Aa=class Aa{};Aa.LIST=0,Aa.THUMBNAILS=1,Aa.FORCED_THUMBNAILS=2;let Wn=Aa;const KC=()=>{const i=[];for(let t=10;t<=100;t=t+10)i.push(t);return i},ku=KC(),Mr=[{name:"anything",query:null},{name:"room.name",query:"roomname"},{name:"owner",query:"owner"},{name:"tag",query:"tag"},{name:"group",query:"group"}];function ss(i){D(new Ki(i,!1,!0))}const An=class An{};An.DEFAULT="default",An.MOTD="motd",An.MODERATION="moderation",An.EVENT="event",An.NITRO="nitro",An.SEARCH="search",An.ALERT="alert";let ge=An;const Da=class Da{constructor(t,s=ge.DEFAULT,n=null,a=null,r=null,l=null){Da.ITEM_ID+=1,this._id=Da.ITEM_ID,this._messages=t,this._alertType=s,this._clickUrl=n,this._clickUrlText=a,this._title=r,this._imageUrl=l}get id(){return this._id}get messages(){return this._messages}set alertType(t){this._alertType=t}get alertType(){return this._alertType}get clickUrl(){return this._clickUrl}get clickUrlText(){return this._clickUrlText}get title(){return this._title}get imageUrl(){return this._imageUrl}};Da.ITEM_ID=-1;let no=Da;const Pt=class Pt{};Pt.FRIENDOFFLINE="friendoffline",Pt.FRIENDONLINE="friendonline",Pt.THIRDPARTYFRIENDOFFLINE="thirdpartyfriendoffline",Pt.THIRDPARTYFRIENDONLINE="thirdpartyfriendonline",Pt.ACHIEVEMENT="achievement",Pt.BADGE_RECEIVED="badge_received",Pt.INFO="info",Pt.RECYCLEROK="recyclerok",Pt.RESPECT="respect",Pt.CLUB="club",Pt.SOUNDMACHINE="soundmachine",Pt.PETLEVEL="petlevel",Pt.CLUBGIFT="clubgift",Pt.BUYFURNI="buyfurni",Pt.VIP="vip",Pt.ROOMMESSAGESPOSTED="roommessagesposted";let Qt=Pt;const Pa=class Pa{constructor(t,s=Qt.INFO,n=null,a=null){Pa.ITEM_ID+=1,this._id=Pa.ITEM_ID,this._message=t,this._notificationType=s,this._iconUrl=n,this._linkUrl=a}get id(){return this._id}get message(){return this._message}get notificationType(){return this._notificationType}get iconUrl(){return this._iconUrl}get linkUrl(){return this._linkUrl}};Pa.ITEM_ID=-1;let zl=Pa;const La=class La{constructor(t,s,n,a,r,l,c){La.ITEM_ID+=1,this._id=La.ITEM_ID,this._confirmType=t,this._message=s,this._onConfirm=n,this._onCancel=a,this._confirmText=r,this._cancelText=l,this._title=c}get id(){return this._id}get confirmType(){return this._confirmType}get message(){return this._message}get onConfirm(){return this._onConfirm}get onCancel(){return this._onCancel}get confirmText(){return this._confirmText}get cancelText(){return this._cancelText}get title(){return this._title}};La.ITEM_ID=-1;let Yl=La;class _c{constructor(){this._credits=0,this._activityPoints=new Map,this._clubDays=0,this._clubPeriods=0,this._isVIP=!1,this._pastClubDays=0,this._pastVipDays=0,this._isExpiring=!1,this._minutesUntilExpiration=0,this._minutesSinceLastModified=0,this._lastUpdated=0}static from(t){const s=new _c;return s._credits=t._credits,s._activityPoints=t._activityPoints,s._clubDays=t._clubDays,s._clubPeriods=t._clubPeriods,s._isVIP=t._isVIP,s._pastClubDays=t._pastClubDays,s._pastVipDays=t._pastVipDays,s._isExpiring=t._isExpiring,s._minutesUntilExpiration=t._minutesUntilExpiration,s._minutesSinceLastModified=t._minutesSinceLastModified,s._lastUpdated=t._lastUpdated,s}get credits(){return this._credits}set credits(t){this._lastUpdated=As(),this._credits=t}get activityPoints(){return this._activityPoints}set activityPoints(t){this._lastUpdated=As(),this._activityPoints=t}get clubDays(){return this._clubDays}set clubDays(t){this._lastUpdated=As(),this._clubDays=t}get clubPeriods(){return this._clubPeriods}set clubPeriods(t){this._lastUpdated=As(),this._clubPeriods=t}get hasClubLeft(){return this._clubDays>0||this._clubPeriods>0}get isVip(){return this._isVIP}set isVip(t){this._isVIP=t}get pastClubDays(){return this._pastClubDays}set pastClubDays(t){this._lastUpdated=As(),this._pastClubDays=t}get pastVipDays(){return this._pastVipDays}set pastVipDays(t){this._lastUpdated=As(),this._pastVipDays=t}get isExpiring(){return this._isExpiring}set isExpiring(t){this._isExpiring=t}get minutesUntilExpiration(){var t=(As()-this._lastUpdated)/6e4,s=this._minutesUntilExpiration-t;return s>0?s:0}set minutesUntilExpiration(t){this._lastUpdated=As(),this._minutesUntilExpiration=t}get minutesSinceLastModified(){return this._minutesSinceLastModified}set minutesSinceLastModified(t){this._lastUpdated=As(),this._minutesSinceLastModified=t}get lastUpdated(){return this._lastUpdated}get clubLevel(){return this.clubDays===0&&this.clubPeriods===0?zt.NO_CLUB:this.isVip?zt.VIP:zt.CLUB}}class li extends _s{}const Ma=class Ma extends li{constructor(t,s){super(t),this._id=-1,this._numQuestions=0,this._startMessage="",this._endMessage="",this._questionArray=null,this._pollType="",this._npsPoll=!1,this._id=s}get id(){return this._id}get summary(){return this._summary}set summary(t){this._summary=t}get headline(){return this._headline}set headline(t){this._headline=t}get numQuestions(){return this._numQuestions}set numQuestions(t){this._numQuestions=t}get startMessage(){return this._startMessage}set startMessage(t){this._startMessage=t}get endMessage(){return this._endMessage}set endMessage(t){this._endMessage=t}get questionArray(){return this._questionArray}set questionArray(t){this._questionArray=t}get pollType(){return this._pollType}set pollType(t){this._pollType=t}get npsPoll(){return this._npsPoll}set npsPoll(t){this._npsPoll=t}};Ma.OFFER="RWPUW_OFFER",Ma.ERROR="RWPUW_ERROR",Ma.CONTENT="RWPUW_CONTENT";let qn=Ma;const Co=class Co extends li{constructor(t,s=0,n=0,a=0){super(t),this._hue=s,this._saturation=n,this._lightness=a}get hue(){return this._hue}get saturation(){return this._saturation}get lightness(){return this._lightness}};Co.PREVIEW="RWUBCPE_PREVIEW",Co.CLEAR_PREVIEW="RWUBCPE_CLEAR_PREVIEW";let Qn=Co;const Qr=class Qr extends li{constructor(t,s){super(Qr.CHAT_INPUT_CONTENT),this._chatMode="",this._userName="",this._chatMode=t,this._userName=s}get chatMode(){return this._chatMode}get userName(){return this._userName}};Qr.CHAT_INPUT_CONTENT="RWUCICE_CHAT_INPUT_CONTENT",Qr.WHISPER="whisper",Qr.SHOUT="shout";let Sr=Qr;const No=class No extends li{constructor(t,s,n,a,r,l,c){super(No.UPDATE_CHAT),this._objectId=t,this._category=s,this._botId=n,this._chat=a,this._automaticChat=r,this._chatDelay=l,this._mixSentences=c}get objectId(){return this._objectId}get category(){return this._category}get botId(){return this._botId}get chat(){return this._chat}get automaticChat(){return this._automaticChat}get chatDelay(){return this._chatDelay}get mixSentences(){return this._mixSentences}};No.UPDATE_CHAT="RWURBCE_UPDATE_CHAT";let ro=No;const Os=class Os extends li{constructor(t,s,n,a){super(t),this._id=s,this._category=n,this._roomId=a}get id(){return this._id}get category(){return this._category}get roomId(){return this._roomId}};Os.OBJECT_SELECTED="RWUROE_OBJECT_SELECTED",Os.OBJECT_DESELECTED="RWUROE_OBJECT_DESELECTED",Os.USER_REMOVED="RWUROE_USER_REMOVED",Os.FURNI_REMOVED="RWUROE_FURNI_REMOVED",Os.FURNI_ADDED="RWUROE_FURNI_ADDED",Os.USER_ADDED="RWUROE_USER_ADDED",Os.OBJECT_ROLL_OVER="RWUROE_OBJECT_ROLL_OVER",Os.OBJECT_ROLL_OUT="RWUROE_OBJECT_ROLL_OUT",Os.OBJECT_REQUEST_MANIPULATION="RWUROE_OBJECT_REQUEST_MANIPULATION",Os.OBJECT_DOUBLE_CLICKED="RWUROE_OBJECT_DOUBLE_CLICKED";let Fe=Os;const Bc=class Bc{constructor(t){this.type=t,this.id=0,this.category=0,this.name="",this.description="",this.image=null,this.isWallItem=!1,this.isStickie=!1,this.isRoomOwner=!1,this.roomControllerLevel=0,this.isAnyRoomController=!1,this.expiration=-1,this.purchaseCatalogPageId=-1,this.purchaseOfferId=-1,this.extraParam="",this.isOwner=!1,this.stuffData=null,this.groupId=0,this.ownerId=0,this.ownerName="",this.usagePolicy=0,this.rentCatalogPageId=-1,this.rentOfferId=-1,this.purchaseCouldBeUsedForBuyout=!1,this.rentCouldBeUsedForBuyout=!1,this.availableForBuildersClub=!1,this.tileSizeX=1,this.tileSizeY=1}};Bc.FURNI="IFI_FURNI";let Tr=Bc;class $m{constructor(t,s,n,a,r,l=!1){this.roomIndex=t,this.category=s,this.id=n,this.name=a,this.userType=r,this.isFriend=l}}const Hc=class Hc{constructor(t){this.type=t,this.level=0,this.maximumLevel=0,this.experience=0,this.levelExperienceGoal=0,this.energy=0,this.maximumEnergy=0,this.happyness=0,this.maximumHappyness=0,this.respectsPetLeft=0,this.respect=0,this.age=0,this.name="",this.id=-1,this.image=null,this.petType=0,this.petBreed=0,this.petFigure="",this.posture="std",this.isOwner=!1,this.ownerId=-1,this.ownerName="",this.canRemovePet=!1,this.roomIndex=0,this.unknownRarityLevel=0,this.saddle=!1,this.rider=!1,this.breedable=!1,this.skillTresholds=[],this.publiclyRideable=0,this.fullyGrown=!1,this.dead=!1,this.rarityLevel=0,this.maximumTimeToLive=0,this.remainingTimeToLive=0,this.remainingGrowTime=0,this.publiclyBreedable=!1}};Hc.PET_INFO="IPI_PET_INFO";let Rr=Hc;const Wc=class Wc{constructor(t){this.type=t,this.name="",this.motto="",this.webID=0,this.figure="",this.badges=[],this.carryItem=0,this.roomIndex=0,this.amIOwner=!1,this.amIAnyRoomController=!1,this.roomControllerLevel=0,this.ownerId=-1,this.ownerName="",this.botSkills=[]}};Wc.RENTABLE_BOT="IRBI_RENTABLE_BOT";let yr=Wc;const an=class an{constructor(t){this.type=t,this.name="",this.motto="",this.achievementScore=0,this.webID=0,this.xp=0,this.userType=-1,this.figure="",this.badges=[],this.groupId=0,this.groupName="",this.groupBadgeId="",this.carryItem=0,this.roomIndex=0,this.isSpectatorMode=!1,this.allowNameChange=!1,this.amIOwner=!1,this.amIAnyRoomController=!1,this.roomControllerLevel=0,this.canBeKicked=!1,this.canBeBanned=!1,this.canBeMuted=!1,this.respectLeft=0,this.isIgnored=!1,this.isGuildRoom=!1,this.canTrade=!1,this.canTradeReason=0,this.targetRoomControllerLevel=0,this.isAmbassador=!1}get isOwnUser(){return this.type===an.OWN_USER}};an.OWN_USER="IUI_OWN_USER",an.PEER="IUI_PEER",an.BOT="IUI_BOT",an.TRADE_REASON_OK=0,an.TRADE_REASON_SHUTDOWN=2,an.TRADE_REASON_NO_TRADING=3,an.DEFAULT_BOT_BADGE_ID="BOT";let Et=an;class Ur{static getObjectName(t,s){const n=ve();let a=-1,r=null,l=0;switch(s){case X.FLOOR:case X.WALL:{const c=W().getRoomObject(n.roomId,t,s);if(!c)break;if(c.type.indexOf("poster")===0)r=u("${poster_"+parseInt(c.type.replace("poster",""))+"_name}");else{let m=null;const h=c.model.getValue(Z.FURNITURE_TYPE_ID);if(s===X.FLOOR?m=V().getFloorItemData(h):s===X.WALL&&(m=V().getWallItemData(h)),!m)break;a=m.id,r=m.name}break}case X.UNIT:{const c=n.userDataManager.getUserDataByIndex(t);if(!c)break;a=c.webID,r=c.name,l=c.type;break}}return!r||!r.length?null:new $m(t,s,a,r,l)}static getFurniInfo(t,s){const n=ve(),a=new Tr(Tr.FURNI);a.id=t,a.category=s;const r=W().getRoomObject(n.roomId,t,s);if(!r)return;const l=r.model;l.getValue(Tn.INFOSTAND_EXTRA_PARAM)&&(a.extraParam=l.getValue(Tn.INFOSTAND_EXTRA_PARAM));const c=l.getValue(Z.FURNITURE_DATA_FORMAT),m=$d.getData(c);m.initializeFromRoomObjectModel(l),a.stuffData=m;const h=r.type;if(h.indexOf("poster")===0){const p=parseInt(h.replace("poster",""));a.name=u("${poster_"+p+"_name}"),a.description=u("${poster_"+p+"_desc}")}else{const p=l.getValue(Z.FURNITURE_TYPE_ID);let I=null;s===X.FLOOR?I=V().getFloorItemData(p):s===X.WALL&&(I=V().getWallItemData(p)),I&&(a.name=I.name,a.description=I.description,a.purchaseOfferId=I.purchaseOfferId,a.purchaseCouldBeUsedForBuyout=I.purchaseCouldBeUsedForBuyout,a.rentOfferId=I.rentOfferId,a.rentCouldBeUsedForBuyout=I.rentCouldBeUsedForBuyout,a.availableForBuildersClub=I.availableForBuildersClub,a.tileSizeX=I.tileSizeX,a.tileSizeY=I.tileSizeY)}h.indexOf("post_it")>-1&&(a.isStickie=!0);const d=l.getValue(Z.FURNITURE_EXPIRY_TIME),g=l.getValue(Z.FURNITURE_EXPIRTY_TIMESTAMP);a.expiration=d<0?d:Math.max(0,d-(As()-g)/1e3);let f=W().getRoomObjectImage(n.roomId,t,s,new vt(180),64,null);(!f.data||f.data.width>140||f.data.height>200)&&(f=W().getRoomObjectImage(n.roomId,t,s,new vt(180),1,null)),a.image=f.getImage(),a.isWallItem=s===X.WALL,a.isRoomOwner=n.isRoomOwner,a.roomControllerLevel=n.controllerLevel,a.isAnyRoomController=V().isModerator,a.ownerId=l.getValue(Z.FURNITURE_OWNER_ID),a.ownerName=l.getValue(Z.FURNITURE_OWNER_NAME),a.usagePolicy=l.getValue(Z.FURNITURE_USAGE_POLICY);const j=l.getValue(Z.FURNITURE_GUILD_CUSTOMIZED_GUILD_ID);return j!==0&&(a.groupId=j),Wt(r)&&(a.isOwner=!0),a}static getUserInfo(t,s){const n=ve();let a=Et.OWN_USER;s.webID!==V().userId&&(a=Et.PEER);const r=new Et(a);r.isSpectatorMode=n.isSpectator,r.name=s.name,r.motto=s.custom,r.achievementScore=s.activityPoints,r.webID=s.webID,r.roomIndex=s.roomIndex,r.userType=lt.USER;const l=W().getRoomObject(n.roomId,s.roomIndex,t);if(l&&(r.carryItem=l.model.getValue(Z.FIGURE_CARRY_OBJECT)||0),a===Et.OWN_USER&&(r.allowNameChange=V().canChangeName),r.amIOwner=n.isRoomOwner,r.isGuildRoom=n.isGuildRoom,r.roomControllerLevel=n.controllerLevel,r.amIAnyRoomController=V().isModerator,r.isAmbassador=V().isAmbassador,a===Et.PEER){if(l){const h=l.model.getValue(Z.FIGURE_FLAT_CONTROL);h!==null&&(r.targetRoomControllerLevel=h),r.canBeMuted=this.canBeMuted(r),r.canBeKicked=this.canBeKicked(r),r.canBeBanned=this.canBeBanned(r)}r.isIgnored=V().isUserIgnored(s.name),r.respectLeft=V().respectsLeft;const c=V().isSystemShutdown,m=n.tradeMode;if(c)r.canTrade=!1;else switch(m){case Jo.ROOM_CONTROLLER_REQUIRED:{const h=r.roomControllerLevel!==qe.NONE&&r.roomControllerLevel!==qe.GUILD_MEMBER,d=r.targetRoomControllerLevel!==qe.NONE&&r.targetRoomControllerLevel!==qe.GUILD_MEMBER;r.canTrade=h||d;break}case Jo.NO_TRADING:r.canTrade=!0;break;default:r.canTrade=!1;break}r.canTradeReason=Et.TRADE_REASON_OK,c&&(r.canTradeReason=Et.TRADE_REASON_SHUTDOWN),m!==Jo.FREE_TRADING&&(r.canTradeReason=Et.TRADE_REASON_NO_TRADING)}return r.groupId=s.groupId,r.groupBadgeId=V().getGroupBadge(r.groupId),r.groupName=s.groupName,r.badges=n.userDataManager.getUserBadges(s.webID),r.figure=s.figure,r}static getBotInfo(t,s){const n=ve(),a=new Et(Et.BOT);a.name=s.name,a.motto=s.custom,a.webID=s.webID,a.roomIndex=s.roomIndex,a.userType=s.type;const r=W().getRoomObject(n.roomId,s.roomIndex,t);return r&&(a.carryItem=r.model.getValue(Z.FIGURE_CARRY_OBJECT)||0),a.amIOwner=n.isRoomOwner,a.isGuildRoom=n.isGuildRoom,a.roomControllerLevel=n.controllerLevel,a.amIAnyRoomController=V().isModerator,a.isAmbassador=V().isAmbassador,a.badges=[Et.DEFAULT_BOT_BADGE_ID],a.figure=s.figure,a}static getRentableBotInfo(t,s){const n=ve(),a=new yr(yr.RENTABLE_BOT);a.name=s.name,a.motto=s.custom,a.webID=s.webID,a.roomIndex=s.roomIndex,a.ownerId=s.ownerId,a.ownerName=s.ownerName,a.botSkills=s.botSkills;const r=W().getRoomObject(n.roomId,s.roomIndex,t);return r&&(a.carryItem=r.model.getValue(Z.FIGURE_CARRY_OBJECT)||0),a.amIOwner=n.isRoomOwner,a.roomControllerLevel=n.controllerLevel,a.amIAnyRoomController=V().isModerator,a.badges=[Et.DEFAULT_BOT_BADGE_ID],a.figure=s.figure,a}static getPetInfo(t){const s=ve(),n=s.userDataManager.getPetData(t.id);if(!n)return;const a=new ra(n.figure);let r=null;a.typeId===Mt.MONSTERPLANT&&(t.level>=t.adultLevel?r="std":r="grw"+t.level);const l=t.ownerId===V().userId,c=new Rr(Rr.PET_INFO);return c.name=n.name,c.id=t.id,c.ownerId=t.ownerId,c.ownerName=t.ownerName,c.rarityLevel=t.rarityLevel,c.petType=a.typeId,c.petBreed=a.paletteId,c.petFigure=n.figure,c.posture=r,c.isOwner=l,c.roomIndex=n.roomIndex,c.level=t.level,c.maximumLevel=t.maximumLevel,c.experience=t.experience,c.levelExperienceGoal=t.levelExperienceGoal,c.energy=t.energy,c.maximumEnergy=t.maximumEnergy,c.happyness=t.happyness,c.maximumHappyness=t.maximumHappyness,c.respect=t.respect,c.respectsPetLeft=V().respectsPetLeft,c.age=t.age,c.saddle=t.saddle,c.rider=t.rider,c.breedable=t.breedable,c.fullyGrown=t.fullyGrown,c.dead=t.dead,c.rarityLevel=t.rarityLevel,c.skillTresholds=t.skillTresholds,c.canRemovePet=!1,c.publiclyRideable=t.publiclyRideable,c.maximumTimeToLive=t.maximumTimeToLive,c.remainingTimeToLive=t.remainingTimeToLive,c.remainingGrowTime=t.remainingGrowTime,c.publiclyBreedable=t.publiclyBreedable,(l||s.isRoomOwner||V().isModerator||s.controllerLevel>=qe.GUEST)&&(c.canRemovePet=!0),c}static checkGuildSetting(t){return t.isGuildRoom?t.roomControllerLevel>=qe.GUILD_ADMIN:t.roomControllerLevel>=qe.GUEST}static isValidSetting(t,s){const n=ve();if(!n.isPrivateRoom)return!1;const a=n.moderationSettings;let r=!1;return a&&(r=s(t,a)),r&&t.targetRoomControllerLevel<qe.ROOM_OWNER}static canBeMuted(t){const s=(n,a)=>{switch(a.allowMute){case $s.MODERATION_LEVEL_USER_WITH_RIGHTS:return this.checkGuildSetting(n);default:return n.roomControllerLevel>=qe.ROOM_OWNER}};return this.isValidSetting(t,s)}static canBeKicked(t){const s=(n,a)=>{switch(a.allowKick){case $s.MODERATION_LEVEL_ALL:return!0;case $s.MODERATION_LEVEL_USER_WITH_RIGHTS:return this.checkGuildSetting(n);default:return n.roomControllerLevel>=qe.ROOM_OWNER}};return this.isValidSetting(t,s)}static canBeBanned(t){const s=(n,a)=>{switch(a.allowBan){case $s.MODERATION_LEVEL_USER_WITH_RIGHTS:return this.checkGuildSetting(n);default:return n.roomControllerLevel>=qe.ROOM_OWNER}};return this.isValidSetting(t,s)}}const Vt=class Vt{};Vt.GENERIC_SKILL=0,Vt.DRESS_UP=1,Vt.SETUP_CHAT=2,Vt.RANDOM_WALK=3,Vt.DANCE=4,Vt.CHANGE_BOT_NAME=5,Vt.SERVE_BEVERAGE=6,Vt.INCLIENT_LINK=7,Vt.NUX_PROCEED=8,Vt.CHANGE_BOT_MOTTO=9,Vt.NUX_TAKE_TOUR=10,Vt.NO_PICK_UP=12,Vt.NAVIGATOR_SEARCH=14,Vt.DONATE_TO_USER=24,Vt.DONATE_TO_ALL=25;let We=Vt;const vo=class vo{constructor(t=-1,s=-1,n=-1,a="",r="",l="",c=null,m=0,h=0,d=null,g=null,f=""){this.senderId=t,this.senderCategory=s,this.roomId=n,this.text=a,this.formattedText=r,this.username=l,this.location=c,this.type=m,this.styleId=h,this.imageUrl=d,this.color=g,this.chatColours=f,this.id=-1,this.width=0,this.height=0,this.elementRef=null,this.skipMovement=!1,this._top=0,this._left=0,this.id=++vo.BUBBLE_COUNTER,this.color=g,this.chatColours=f}get top(){return this._top}set top(t){this._top=t,this.elementRef&&(this.elementRef.style.top=this._top+"px")}get left(){return this._left}set left(t){this._left=t,this.elementRef&&(this.elementRef.style.left=this._left+"px")}};vo.BUBBLE_COUNTER=0;let $l=vo;const Ua=class Ua{};Ua.CHAT_DEFAULT=0,Ua.CHAT_WHISPER=1,Ua.CHAT_SHOUT=2;let dn=Ua;class Au{constructor(t=0,s=0,n=0,a=0){this.id=t,this.type=s,this.color=n,this.light=a}}const XC=(i,t,s,n=0)=>!(i.left+n+i.width<t.left+n||i.left+n>t.left+n+t.width||i.top+i.height<t.top+s||i.top>t.top+s+t.height),Jr=class Jr{static savePreset(t,s,n,a,r){ve().updateMoodlightData(t,s,n,a,r)}static changeState(){ve().toggleMoodlightState()}static previewDimmer(t,s,n){W().updateObjectRoomColor(ve().roomId,t,s,n)}static scaleBrightness(t){return~~((t-this.MIN_BRIGHTNESS)*100/(this.MAX_BRIGHTNESS-this.MIN_BRIGHTNESS)+0)}};Jr.AVAILABLE_COLORS=[7665141,21495,15161822,15353138,15923281,8581961,0],Jr.HTML_COLORS=["#74F5F5","#0053F7","#E759DE","#EA4532","#F2F851","#82F349","#000000"],Jr.MIN_BRIGHTNESS=76,Jr.MAX_BRIGHTNESS=255;let Ps=Jr;const QC=130,JC=100,ZC=130,eN=100,tN=130,sN=100,Km=i=>{let t=0,s=0,n=0,a=0;for(;a<i.length;){switch(a%3){case 0:t=t+i.charCodeAt(a)*37;break;case 1:s=s+i.charCodeAt(a)*37;break;case 2:n=n+i.charCodeAt(a)*37;break}a++}return t=t%JC+QC,s=s%eN+ZC,n=n%sN+tN,`rgb(${t},${s},${n})`},_o=class _o{static getMergedMannequinFigureContainer(t,s){const n=xt().createFigureContainer(t),a=xt().createFigureContainer(s);for(const r of this.MANNEQUIN_CLOTHING_PART_TYPES)n.removePart(r);for(const r of a.getPartTypeIds())n.updatePart(r,a.getPartSetId(r),a.getPartColorIds(r));return n}static transformAsMannequinFigure(t){for(const s of t.getPartTypeIds())this.MANNEQUIN_CLOTHING_PART_TYPES.indexOf(s)>=0||t.removePart(s);t.updatePart(this.MANNEQUIN_FIGURE[0],this.MANNEQUIN_FIGURE[1],this.MANNEQUIN_FIGURE[2])}};_o.MANNEQUIN_FIGURE=["hd",99999,[99998]],_o.MANNEQUIN_CLOTHING_PART_TYPES=[Me.CHEST_ACCESSORY,Me.COAT_CHEST,Me.CHEST,Me.LEGS,Me.SHOES,Me.WAIST_ACCESSORY];let na=_o;const So=class So{};So.POSTURE_STAND=0,So.POSTURE_SIT=1;let ao=So;class Br{constructor(t,s,n){this._id=t,this._category=s,this._name=n}get id(){return this._id}get category(){return this._category}get name(){return this._name}}class nN{constructor(t,s,n,a,r,l,c){this.id=t,this.category=s,this.name=n,this.requestRoomObjectId=a,this.targetRoomObjectId=r,this.requestInventoryStripId=l,this.replace=c}}const io="0",Xm="1",Kn=class Kn{};Kn.UNSTARTED=-1,Kn.ENDED=0,Kn.PLAYING=1,Kn.PAUSED=2,Kn.BUFFERING=3,Kn.CUED=5;let Jn=Kn;function ns(i){D(new qh(i))}const ci=i=>{const t=Math.floor(i/2);return i%2?(t+.5).toString():t.toString()},$e=class $e{};$e.TOGGLE_FURNI_STATE=0,$e.RESET=1,$e.SET_FURNI_STATE=3,$e.MOVE_FURNI=4,$e.GIVE_SCORE=6,$e.CHAT=7,$e.TELEPORT=8,$e.JOIN_TEAM=9,$e.LEAVE_TEAM=10,$e.CHASE=11,$e.FLEE=12,$e.MOVE_AND_ROTATE_FURNI=13,$e.GIVE_SCORE_TO_PREDEFINED_TEAM=14,$e.TOGGLE_TO_RANDOM_STATE=15,$e.MOVE_FURNI_TO=16,$e.GIVE_REWARD=17,$e.CALL_ANOTHER_STACK=18,$e.KICK_FROM_ROOM=19,$e.MUTE_USER=20,$e.BOT_TELEPORT=21,$e.BOT_MOVE=22,$e.BOT_TALK=23,$e.BOT_GIVE_HAND_ITEM=24,$e.BOT_FOLLOW_AVATAR=25,$e.BOT_CHANGE_FIGURE=26,$e.BOT_TALK_DIRECT_TO_AVTR=27;let Qe=$e;const Ke=class Ke{};Ke.STATES_MATCH=0,Ke.FURNIS_HAVE_AVATARS=1,Ke.ACTOR_IS_ON_FURNI=2,Ke.TIME_ELAPSED_MORE=3,Ke.TIME_ELAPSED_LESS=4,Ke.USER_COUNT_IN=5,Ke.ACTOR_IS_IN_TEAM=6,Ke.HAS_STACKED_FURNIS=7,Ke.STUFF_TYPE_MATCHES=8,Ke.STUFFS_IN_FORMATION=9,Ke.ACTOR_IS_GROUP_MEMBER=10,Ke.ACTOR_IS_WEARING_BADGE=11,Ke.ACTOR_IS_WEARING_EFFECT=12,Ke.NOT_STATES_MATCH=13,Ke.FURNI_NOT_HAVE_HABBO=14,Ke.NOT_ACTOR_ON_FURNI=15,Ke.NOT_USER_COUNT_IN=16,Ke.NOT_ACTOR_IN_TEAM=17,Ke.NOT_HAS_STACKED_FURNIS=18,Ke.NOT_FURNI_IS_OF_TYPE=19,Ke.NOT_STUFFS_IN_FORMATION=20,Ke.NOT_ACTOR_IN_GROUP=21,Ke.NOT_ACTOR_WEARS_BADGE=22,Ke.NOT_ACTOR_WEARING_EFFECT=23,Ke.DATE_RANGE_ACTIVE=24,Ke.ACTOR_HAS_HANDITEM=25;let nt=Ke;const Du=i=>`${i.getFullYear()}/${("0"+(i.getMonth()+1)).slice(-2)}/${("0"+i.getDate()).slice(-2)} ${("0"+i.getHours()).slice(-2)}:${("0"+i.getMinutes()).slice(-2)}`,Zr=class Zr{};Zr.STUFF_SELECTION_OPTION_NONE=0,Zr.STUFF_SELECTION_OPTION_BY_ID=1,Zr.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE=2,Zr.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT=3;let oe=Zr;const rN=`
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
uniform mat3 projectionMatrix;
varying vec2 vTextureCoord;
void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,aN=`
varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec3 lineColor;
uniform vec3 color;
void main(void) {
    vec4 currentColor = texture2D(uSampler, vTextureCoord);
    vec3 colorLine = lineColor * currentColor.a;
    vec3 colorOverlay = color * currentColor.a;

    if(currentColor.r == 0.0 && currentColor.g == 0.0 && currentColor.b == 0.0 && currentColor.a > 0.0) {
        gl_FragColor = vec4(colorLine.r, colorLine.g, colorLine.b, currentColor.a);
    } else if(currentColor.a > 0.0) {
        gl_FragColor = vec4(colorOverlay.r, colorOverlay.g, colorOverlay.b, currentColor.a);
    }
}`;class iN extends zh{constructor(t,s){super(rN,aN),this.uniforms.lineColor=new Float32Array(3),this.uniforms.color=new Float32Array(3),this.lineColor=t,this.color=s}get lineColor(){return this._lineColor}set lineColor(t){const s=this.uniforms.lineColor;typeof t=="number"?(fs.hex2rgb(t,s),this._lineColor=t):(s[0]=t[0],s[1]=t[1],s[2]=t[2],this._lineColor=fs.rgb2hex(s))}get color(){return this._color}set color(t){const s=this.uniforms.color;typeof t=="number"?(fs.hex2rgb(t,s),this._color=t):(s[0]=t[0],s[1]=t[1],s[2]=t[2],this._color=fs.rgb2hex(s))}}const ks=class ks{static show(t){ks.applySelectionShader(ks.getRoomObject(t))}static hide(t){ks.clearSelectionShader(ks.getRoomObject(t))}static clearSelectionShaderFromFurni(t){for(const s of t)ks.clearSelectionShader(ks.getRoomObject(s))}static applySelectionShaderToFurni(t){for(const s of t)ks.applySelectionShader(ks.getRoomObject(s))}static getRoomObject(t){const s=W();return s.getRoomObject(s.activeRoomId,t,X.FLOOR)}static applySelectionShader(t){if(!t)return;const s=t.visualization;if(s)for(const n of s.sprites)n.blendMode!==1&&(n.filters=[ks._selectionShader])}static clearSelectionShader(t){if(!t)return;const s=t.visualization;if(s)for(const n of s.sprites)n.filters=[]}};ks._selectionShader=new iN([1,1,1],[.6,.6,.6]);let tr=ks;const la="	",Kt=class Kt{};Kt.AVATAR_SAYS_SOMETHING=0,Kt.AVATAR_WALKS_ON_FURNI=1,Kt.AVATAR_WALKS_OFF_FURNI=2,Kt.EXECUTE_ONCE=3,Kt.TOGGLE_FURNI=4,Kt.EXECUTE_PERIODICALLY=6,Kt.AVATAR_ENTERS_ROOM=7,Kt.GAME_STARTS=8,Kt.GAME_ENDS=9,Kt.SCORE_ACHIEVED=10,Kt.COLLISION=11,Kt.EXECUTE_PERIODICALLY_LONG=12,Kt.BOT_REACHED_STUFF=13,Kt.BOT_REACHED_AVATAR=14;let $t=Kt;const A=i=>{const{ref:t=null,innerRef:s=null,display:n=null,fit:a=!1,fitV:r=!1,grow:l=!1,shrink:c=!1,fullWidth:m=!1,fullHeight:h=!1,overflow:d=null,position:g=null,float:f=null,pointer:j=!1,visible:p=null,textColor:I=null,classNames:x=[],className:E="",style:v={},children:b=null,...w}=i,S=o.useMemo(()=>{const k=[];return n&&n.length&&k.push("d-"+n),(a||m)&&k.push("w-100"),(a||h)&&k.push("h-100"),r&&k.push("vw-100","vh-100"),l&&k.push("flex-grow-1"),c&&k.push("flex-shrink-0"),d&&k.push("overflow-"+d),g&&k.push("position-"+g),f&&k.push("float-"+f),j&&k.push("cursor-pointer"),p!==null&&k.push(p?"visible":"invisible"),I&&k.push("text-"+I),x.length&&k.push(...x),k},[n,a,r,l,c,m,h,d,g,f,j,p,I,x]),T=o.useMemo(()=>{let k=S.join(" ");return E.length&&(k+=" "+E),k.trim()},[S,E]),L=o.useMemo(()=>{let k={};return Object.keys(v).length&&(k={...k,...v}),k},[v]);return e.jsx("div",{ref:s,className:T,style:L,...w,children:b})},Qm=o.createContext({isCssGrid:!1}),oN=i=>e.jsx(Qm.Provider,{value:i.value,children:i.children}),lN=()=>o.useContext(Qm),te=i=>{const{inline:t=!1,gap:s=2,maxContent:n=!1,columnCount:a=0,center:r=!1,alignSelf:l=null,alignItems:c=null,justifyContent:m=null,fullHeight:h=!0,classNames:d=[],style:g={},...f}=i,j=o.useMemo(()=>{const I=[];return t?I.push("inline-grid"):I.push("grid"),s?I.push("gap-"+s):s===0&&I.push("gap-0"),n&&I.push("flex-basis-max-content"),l&&I.push("align-self-"+l),c&&I.push("align-items-"+c),m&&I.push("justify-content-"+m),!c&&!m&&r&&I.push("align-items-center","justify-content-center"),d.length&&I.push(...d),I},[t,s,n,l,c,m,r,d]),p=o.useMemo(()=>{let I={};return a&&(I["--bs-columns"]=a.toString()),Object.keys(g).length&&(I={...I,...g}),I},[a,g]);return e.jsx(oN,{value:{isCssGrid:!0},children:e.jsx(A,{fullHeight:h,classNames:j,style:p,...f})})},ke=i=>{const{columnMinWidth:t=40,columnMinHeight:s=40,columnCount:n=0,fullHeight:a=!1,maxContent:r=!0,overflow:l="auto",style:c={},...m}=i,h=o.useMemo(()=>{let d={};return d["--nitro-grid-column-min-height"]=s+"px",n>1&&(d.gridTemplateColumns=`repeat(auto-fill, minmax(${t}px, 1fr))`),Object.keys(c).length&&(d={...d,...c}),d},[t,s,n,c]);return e.jsx(te,{columnCount:n,fullHeight:a,overflow:l,style:h,...m})},_=i=>{const{display:t="flex",column:s=void 0,reverse:n=!1,gap:a=null,center:r=!1,alignSelf:l=null,alignItems:c=null,justifyContent:m=null,classNames:h=[],...d}=i,g=o.useMemo(()=>{const f=[];return s?n?f.push("flex-column-reverse"):f.push("flex-column"):n&&f.push("flex-row-reverse"),a&&f.push("gap-"+a),l&&f.push("align-self-"+l),c&&f.push("align-items-"+c),m&&f.push("justify-content-"+m),!c&&!m&&r&&f.push("align-items-center","justify-content-center"),h.length&&f.push(...h),f},[s,n,a,r,l,c,m,h]);return e.jsx(A,{display:t,classNames:g,...d})},P=i=>{const{variant:t="primary",size:s="sm",active:n=!1,disabled:a=!1,classNames:r=[],outline:l=!1,tp:c=!1,...m}=i,h=o.useMemo(()=>{const d=["btn"];return l&&t?d.push("btn-outline-"+t):t&&d.push("btn-"+t),c&&d.push("btn-transparent"),s&&d.push("btn-"+s),n&&d.push("active"),a&&d.push("disabled"),r.length&&d.push(...r),d},[t,s,n,a,r,l]);return e.jsx(_,{center:!0,classNames:h,...m})},fn=i=>{const{classNames:t=[],...s}=i,n=o.useMemo(()=>{const a=["btn-group"];return t.length&&a.push(...t),a},[t]);return e.jsx(A,{classNames:n,...s})},Jm=o.createContext({closers:null,setClosers:null,closeAll:null}),cN=i=>e.jsx(Jm.Provider,{...i}),uN=()=>o.useContext(Jm),oo=i=>{const{alignItems:t="center",gap:s=1,children:n=null,...a}=i;return e.jsx(_,{alignItems:t,gap:s,...a,children:n})},lo=i=>{const{headerText:t="",isExpanded:s=!1,gap:n=0,classNames:a=[],children:r=null,...l}=i,[c,m]=o.useState(!1),{setClosers:h=null,closeAll:d=null}=uN(),g=()=>{d(),m(p=>!p)},f=o.useCallback(()=>m(!1),[]),j=o.useMemo(()=>{const p=["nitro-card-accordion-set"];return c&&p.push("active"),a&&a.length&&p.push(...a),p},[c,a]);return o.useEffect(()=>{m(s)},[s]),o.useEffect(()=>{const p=f;return h(I=>{const x=[...I];return x.push(p),x}),()=>{h(I=>{const x=[...I],E=x.indexOf(p);return E>=0&&x.splice(E,1),x})}},[f,h]),e.jsxs(N,{classNames:j,gap:n,...l,children:[e.jsxs(_,{pointer:!0,justifyContent:"between",className:"nitro-card-accordion-set-header px-2 py-1",onClick:g,children:[e.jsx(C,{children:t}),c&&e.jsx(ac,{className:"fa-icon"}),!c&&e.jsx(ic,{className:"fa-icon"})]}),c&&e.jsx(N,{fullHeight:!0,overflow:"auto",gap:0,className:"nitro-card-accordion-set-content",children:r})]})},dN=i=>{const{...t}=i,[s,n]=o.useState([]),a=o.useCallback(()=>{for(const r of s)r()},[s]);return e.jsx(cN,{value:{closers:s,setClosers:n,closeAll:a},children:e.jsx(N,{gap:0,...t})})},ee=i=>{const{overflow:t="auto",classNames:s=[],...n}=i,a=o.useMemo(()=>{const r=["container-fluid","content-area"];return s.length&&r.push(...s),r},[s]);return e.jsx(N,{classNames:a,overflow:t,...n})},mN=o.createContext({theme:null}),hN=i=>e.jsx(mN.Provider,{value:i.value,children:i.children}),se=i=>{const{headerText:t=null,isGalleryPhoto:s=!1,noCloseButton:n=!1,isInfoToHabboPages:a=!1,hideButtonClose:r=!1,onReportPhoto:l=null,onClickInfoHabboPages:c=null,onCloseClick:m=null,justifyContent:h="center",alignItems:d="center",classNames:g=[],children:f=null,...j}=i,p=o.useMemo(()=>{const x=["drag-handler","container-fluid","nitro-card-header"];return g.length&&x.push(...g),x},[g]),I=x=>{x.stopPropagation(),x.nativeEvent.stopImmediatePropagation()};return e.jsx(N,{center:!0,position:"relative",classNames:p,...j,children:e.jsxs(_,{fullWidth:!0,center:!0,className:"nitro-card-header-holder",children:[e.jsx("span",{className:"nitro-card-header-text",children:t}),s&&e.jsx(A,{position:"absolute",className:"end-4 nitro-card-header-report-camera",onClick:l,children:e.jsx(Yh,{className:"fa-icon"})}),a&&e.jsx(A,{position:"absolute",className:"end-6 nitro-card-header-info-habbopages",onClick:c}),e.jsx(_,{center:!0,position:"absolute",className:"end-2 nitro-card-header-close",onMouseDownCapture:I,onClick:m,children:!r&&e.jsx(Us,{className:"fa-icon w-12 h-12"})})]})})},Zm=i=>{const{justifyContent:t="center",classNames:s=[],variant:n="muted",...a}=i,r=o.useMemo(()=>{const l=["container-fluid","p-1"];return s.length&&l.push(...s),l.push("bg-"+n),l},[s,n]);return e.jsx(_,{justifyContent:t,classNames:r,...a})},ea=class ea{};ea.CENTER="DWP_CENTER",ea.TOP_CENTER="DWP_TOP_CENTER",ea.TOP_LEFT="DWP_TOP_LEFT",ea.NOTHING="DWP_NOTHING";let Ft=ea;const Sn=[],Pu=new Map,Lu=0,Mu=0,rr=i=>{const{uniqueKey:t=null,handleSelector:s=".drag-handler",windowPosition:n=Ft.CENTER,disableDrag:a=!1,dragStyle:r={},children:l=null,offsetLeft:c=0,offsetTop:m=0}=i,[h,d]=o.useState(null),[g,f]=o.useState(null),[j,p]=o.useState({x:0,y:0}),[I,x]=o.useState(!1),[E,v]=o.useState(null),b=o.useRef(),w=o.useCallback(()=>{let G=400;for(const re of Sn)G+=1,re.style.zIndex=G.toString()},[]),S=o.useCallback(()=>{const G=Sn.indexOf(b.current);if(G===-1)Sn.push(b.current);else{if(G===Sn.length-1)return;G>=0&&(Sn.splice(G,1),Sn.push(b.current))}w()},[w]),T=o.useCallback(G=>{S()},[S]),L=o.useCallback(G=>{S()},[S]),k=o.useCallback((G,re)=>{p({x:G,y:re}),x(!0)},[]),y=o.useCallback(G=>{k(G.clientX,G.clientY)},[k]),R=o.useCallback(G=>{const re=G.touches[0];k(re.clientX,re.clientY)},[k]),O=o.useCallback(G=>{d({x:G.clientX-j.x,y:G.clientY-j.y})},[j]),F=o.useCallback(G=>{const re=G.touches[0];d({x:re.clientX-j.x,y:re.clientY-j.y})},[j]),U=o.useCallback(()=>{if(!b.current||!E)return;let G=g.x+h.x,re=g.y+h.y;const Le=b.current.offsetLeft+G,Ye=b.current.offsetTop+re;Ye<Lu?re=-b.current.offsetTop:Ye+E.offsetHeight>=document.body.offsetHeight-Lu&&(re=document.body.offsetHeight-b.current.offsetHeight-b.current.offsetTop),Le+b.current.offsetWidth<Mu?G=-b.current.offsetLeft:Le>=document.body.offsetWidth-Mu&&(G=document.body.offsetWidth-b.current.offsetWidth-b.current.offsetLeft),d({x:0,y:0}),f({x:G,y:re}),x(!1),t!==null&&Pu.set(t,{x:G,y:re})},[E,h,g,t]),q=o.useCallback(G=>{U()},[U]),$=o.useCallback(G=>{U()},[U]);return o.useEffect(()=>{const G=b.current;if(!G)return;if(Sn.push(G),w(),!a){const Ye=G.querySelector(s);Ye&&v(Ye)}let re=0,Le=0;switch(n){case Ft.TOP_CENTER:G.style.top=50+m+"px",G.style.left=`calc(50vw - ${G.offsetWidth/2+c}px)`;break;case Ft.CENTER:G.style.top=`calc(50vh - ${G.offsetHeight/2+m}px)`,G.style.left=`calc(50vw - ${G.offsetWidth/2+c}px)`;break;case Ft.TOP_LEFT:G.style.top=50+m+"px",G.style.left=50+c+"px";break}if(t!==null){const Ye=Pu.get(t);Ye&&(re=Ye.x,Le=Ye.y)}return d({x:0,y:0}),f({x:re,y:Le}),()=>{const Ye=Sn.indexOf(G);Ye>=0&&Sn.splice(Ye,1)}},[s,n,t,a,c,m,w]),o.useEffect(()=>{if(!g&&!h)return;const G=b.current;G&&(G.style.transform=`translate(${g.x+h.x}px, ${g.y+h.y}px)`,G.style.visibility="visible")},[g,h]),o.useEffect(()=>{if(E)return E.addEventListener(Ne.MOUSE_DOWN,y),E.addEventListener(Is.TOUCH_START,R),()=>{E.removeEventListener(Ne.MOUSE_DOWN,y),E.removeEventListener(Is.TOUCH_START,R)}},[E,y,R]),o.useEffect(()=>{if(I)return document.addEventListener(Ne.MOUSE_UP,q),document.addEventListener(Is.TOUCH_END,$),document.addEventListener(Ne.MOUSE_MOVE,O),document.addEventListener(Is.TOUCH_MOVE,F),()=>{document.removeEventListener(Ne.MOUSE_UP,q),document.removeEventListener(Is.TOUCH_END,$),document.removeEventListener(Ne.MOUSE_MOVE,O),document.removeEventListener(Is.TOUCH_MOVE,F)}},[I,q,O,$,F]),o.useEffect(()=>{if(!t)return;const G=Ic(`nitro.windows.${t}`);!G||!G.offset||(d({x:0,y:0}),G.offset&&f(G.offset))},[t]),oc.createPortal(e.jsx(A,{position:"absolute",innerRef:b,className:"draggable-window",onMouseDownCapture:T,onTouchStartCapture:L,style:r,children:l}),document.getElementById("draggable-windows-container"))},ne=i=>{const{theme:t="primary",uniqueKey:s=null,handleSelector:n=".drag-handler",windowPosition:a=Ft.CENTER,disableDrag:r=!1,overflow:l="hidden",position:c="relative",gap:m=0,classNames:h=[],...d}=i,g=o.useRef(),f=o.useMemo(()=>{const j=["nitro-card","rounded","shadow"];return j.push(`theme-${t||"primary"}`),h.length&&j.push(...h),j},[t,h]);return e.jsx(hN,{value:{theme:t},children:e.jsx(rr,{uniqueKey:s,handleSelector:n,windowPosition:a,disableDrag:r,children:e.jsx(N,{innerRef:g,overflow:l,position:c,gap:m,classNames:f,...d})})})},tt=i=>{const{figure:t="",gender:s="M",headOnly:n=!1,direction:a=0,scale:r=1,classNames:l=[],style:c={},...m}=i,[h,d]=o.useState(null),[g,f]=o.useState(-1),j=o.useRef(!1),p=o.useMemo(()=>{const x=["avatar-image"];return l.length&&x.push(...l),x},[l]),I=o.useMemo(()=>{let x={};return h&&h.length&&(x.backgroundImage=`url('${h}')`),r!==1&&(x.transform=`scale(${r})`,r%1||(x.imageRendering="pixelated")),Object.keys(c).length&&(x={...x,...c}),x},[h,r,c]);return o.useEffect(()=>{const x=xt().createAvatarImage(t,rc.LARGE,s,{resetFigure:b=>{j.current||f(Math.random())},dispose:()=>{},disposed:!1},null);if(!x)return;let E=$i.FULL;n&&(E=$i.HEAD),x.setDirection(E,a);const v=x.getCroppedImage(E);v&&d(v.src),x.dispose()},[t,s,a,n,g]),o.useEffect(()=>(j.current=!1,()=>{j.current=!0}),[]),e.jsx(A,{classNames:p,style:I,...m})},eh=i=>{const{imageUrl:t=null,fit:s=!0,style:n=null,...a}=i,r=o.useMemo(()=>{const l={...n};return t&&(l.background=`url(${t}) center no-repeat`),l},[n,t]);return e.jsx(A,{fit:s,style:r,...a})},ze=i=>{const{badgeCode:t=null,isGroup:s=!1,showInfo:n=!1,customTitle:a=null,isGrayscale:r=!1,scale:l=1,classNames:c=[],style:m={},children:h=null,...d}=i,[g,f]=o.useState(null),j=o.useMemo(()=>{const I=["badge-image"];return s&&I.push("group-badge"),r&&I.push("grayscale"),c.length&&I.push(...c),I},[c,s,r]),p=o.useMemo(()=>{let I={};return g&&(I.backgroundImage=`url(${s?g.src:K("badge.asset.url").replace("%badgename%",t.toString())})`,I.width=g.width,I.height=g.height,l!==1&&(I.transform=`scale(${l})`,l%1||(I.imageRendering="pixelated"),I.width=g.width*l,I.height=g.height*l)),Object.keys(m).length&&(I={...I,...m}),I},[g,l,m]);return o.useEffect(()=>{if(!t||!t.length)return;let I=!1;const x=v=>{if(v.badgeId!==t)return;const b=xn.generateImage(new Yi(v.image));b.onload=()=>f(b),I=!0,V().events.removeEventListener(Zo.IMAGE_READY,x)};V().events.addEventListener(Zo.IMAGE_READY,x);const E=s?V().getGroupBadgeImage(t):V().getBadgeImage(t);if(E&&!I){const v=xn.generateImage(new Yi(E));v.onload=()=>f(v)}return()=>V().events.removeEventListener(Zo.IMAGE_READY,x)},[t,s]),e.jsxs(A,{classNames:j,style:p,...d,children:[n&&K("badge.descriptions.enabled",!0)&&e.jsxs(A,{className:"badge-information text-black py-1 px-2 small",children:[e.jsx("div",{className:"fw-bold mb-1",children:s?a:da(t)}),e.jsx("div",{children:s?u("group.badgepopup.body"):Ec(t)})]}),h]})},gN=i=>{const{day:t="00",hour:s="00",minutes:n="00",seconds:a="00",classNames:r=[],children:l=null,...c}=i,m=o.useMemo(()=>{const h=["nitro-counter-time"];return r.length&&h.push(...r),h},[r]);return e.jsxs(_,{gap:1,children:[e.jsx(A,{classNames:m,...c,children:e.jsxs("div",{children:[t!="00"?t:s,t!="00"?u("countdown_clock_unit_days"):u("countdown_clock_unit_hours")]})}),e.jsx(A,{style:{marginTop:"3px"},children:":"}),e.jsx(A,{classNames:m,...c,children:e.jsxs("div",{children:[n,u("countdown_clock_unit_minutes")]})}),e.jsx(A,{style:{marginTop:"3px"},children:":"}),e.jsx(A,{classNames:m,...c,children:e.jsxs("div",{children:[a,u("countdown_clock_unit_seconds")]})}),l]})},Nt=i=>{const{type:t="",classNames:s=[],style:n={},...a}=i,r=o.useMemo(()=>{const m=["nitro-currency-icon topcurrencygen"];return s.length&&m.push(...s),m},[s]),l=o.useMemo(()=>{let m=K("currency.asset.icon.url","");return m=m.replace("%type%",t.toString()),`url(${m})`},[t]),c=o.useMemo(()=>{let m={};return m.backgroundImage=l,Object.keys(n).length&&(m={...m,...n}),m},[n,l]);return e.jsx(A,{classNames:r,style:c,...a})},Bo=i=>{const{productType:t="s",productClassId:s=-1,direction:n=2,extraData:a="",scale:r=1,style:l={},...c}=i,[m,h]=o.useState(null),d=o.useMemo(()=>{var f;let g={};return(f=m==null?void 0:m.src)!=null&&f.length&&(g.backgroundImage=`url('${m.src}')`,g.width=m.width,g.height=m.height),r!==1&&(g.transform=`scale(${r})`,r%1||(g.imageRendering="pixelated")),Object.keys(l).length&&(g={...g,...l}),g},[m,r,l]);return o.useEffect(()=>{let g=null;const f={imageReady:(j,p,I)=>{!I&&p&&(I=xn.generateImage(p)),I.onload=()=>h(I)},imageFailed:null};switch(t.toLocaleLowerCase()){case me.FLOOR:g=W().getFurnitureFloorImage(s,new vt(n),64,f,0,a);break;case me.WALL:g=W().getFurnitureWallImage(s,new vt(n),64,f,0,a);break}if(g){const j=g.getImage();j.onload=()=>h(j)}},[t,s,n,a]),m?e.jsx(A,{classNames:["furni-image"],style:d,...c}):null},th=i=>{const{figure:t=null,userName:s=null,message:n=null,editable:a=!1,onChange:r=null}=i;return e.jsxs(_,{overflow:"hidden",className:"nitro-gift-card text-black",children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-center gift-face flex-shrink-0",children:[!s&&e.jsx("div",{className:"gift-incognito"}),t&&e.jsx("div",{className:"gift-avatar",children:e.jsx(tt,{figure:t,direction:2,headOnly:!0})})]}),e.jsx(_,{overflow:"hidden",className:"w-100 pt-4 pb-4 pe-4 ps-3",children:e.jsxs(N,{grow:!0,overflow:"auto",justifyContent:"between",children:[!a&&e.jsx(C,{textBreak:!0,className:"gift-message",children:n}),a&&r!==null&&e.jsx("textarea",{className:"gift-message h-100",maxLength:140,value:n,onChange:l=>r(l.target.value),placeholder:u("catalog.gift_wrapping_new.message_hint")}),s&&e.jsx(C,{italics:!0,textEnd:!0,className:"pe-1",children:u("catalog.gift_wrapping_new.message_from",["name"],[s])})]})})]})},N=i=>{const{size:t=0,offset:s=0,column:n=!0,gap:a=2,classNames:r=[],...l}=i,{isCssGrid:c=!1}=lN(),m=o.useMemo(()=>{const h=[];if(t){let d=`col-${t}`;c&&(d=`g-${d}`),h.push(d)}if(s){let d=`offset-${s}`;c&&(d=`g-start-${s}`),h.push(d)}return r.length&&h.push(...r),h},[t,s,c,r]);return e.jsx(_,{classNames:m,column:n,gap:a,...l})},pn=i=>{const{count:t=0,position:s="absolute",classNames:n=[],children:a=null,...r}=i,l=o.useMemo(()=>{const c=["badge","border","border-black","bg-danger","px-1","nitro-item-count"];return n.length&&c.push(...n),c},[n]);return e.jsxs(A,{position:"absolute",classNames:l,...r,children:[t,a]})},Or=i=>{const{value:t=0}=i,s=t.toString().split("");return e.jsx(e.Fragment,{children:s.map((n,a)=>e.jsx("i",{className:"limited-edition-number n-"+n},a))})},sh=i=>{const{uniqueNumber:t=0,uniqueSeries:s=0,classNames:n=[],children:a=null,...r}=i,l=o.useMemo(()=>{const c=["unique-compact-plate","z-index-1"];return n.length&&c.push(...n),c},[n]);return e.jsxs(A,{classNames:l,...r,children:[e.jsx("div",{children:e.jsx(Or,{value:t})}),e.jsx("div",{children:e.jsx(Or,{value:s})}),a]})},fN=i=>{const{uniqueLimitedItemsLeft:t=0,uniqueLimitedSeriesSize:s=0,classNames:n=[],...a}=i,r=o.useMemo(()=>{const l=["unique-complete-plate"];return n.length&&l.push(...n),l},[n]);return e.jsx(A,{classNames:r,...a,children:e.jsxs(N,{className:"plate-container",gap:0,children:[e.jsxs(_,{justifyContent:"between",alignItems:"center",children:[u("unique.items.left"),e.jsx("div",{children:e.jsx(Or,{value:t})})]}),e.jsxs(_,{justifyContent:"between",alignItems:"center",children:[u("unique.items.number.sold"),e.jsx("div",{children:e.jsx(Or,{value:s})})]})]})})},Ce=i=>{const{itemImage:t=void 0,itemColor:s=void 0,itemActive:n=!1,itemCount:a=1,itemCountMinimum:r=1,itemUniqueSoldout:l=!1,itemUniqueNumber:c=-2,itemUnseen:m=!1,itemHighlight:h=!1,disabled:d=!1,center:g=!0,column:f=!0,style:j={},classNames:p=[],position:I="relative",overflow:x="hidden",children:E=null,...v}=i,b=o.useMemo(()=>{const S=["layout-grid-item","border","border-2","border-muted","rounded"];return n&&S.push("active"),(l||c>0)&&S.push("unique-item"),l&&S.push("sold-out"),m&&S.push("unseen"),h&&S.push("has-highlight"),d&&S.push("disabled"),t===null&&S.push("icon","loading-icon"),p.length&&S.push(...p),S},[n,l,c,m,h,d,t,p]),w=o.useMemo(()=>{let S={...j};return t&&!(l||c>0)&&(S.backgroundImage=`url(${t})`),s&&(S.backgroundColor=s),Object.keys(j).length&&(S={...S,...j}),S},[j,t,s,l,c]);return e.jsxs(N,{center:g,pointer:!0,position:I,overflow:x,column:f,classNames:b,style:w,...v,children:[a>r&&e.jsx(pn,{count:a}),c>0&&e.jsxs(e.Fragment,{children:[e.jsx(A,{fit:!0,className:"unique-bg-override",style:{backgroundImage:`url(${t})`}}),e.jsx("div",{className:"position-absolute bottom-0 unique-item-counter",children:e.jsx(Or,{value:c})})]}),E]})},Nn=i=>{const{imageUrl:t=null,className:s="",...n}=i;return e.jsx("img",{src:t,className:"no-select "+s,alt:"",...n})},pN=i=>{const{text:t=null}=i;return e.jsx(_,{className:"nitro-input-error-popup",alignItems:"center",justifyContent:"center",children:e.jsx(C,{className:"px-2",children:t})})},Sc=i=>{const{...t}=i;return e.jsxs(A,{classNames:["spinner-container"],...t,children:[e.jsx(A,{className:"spinner"}),e.jsx(A,{className:"spinner"}),e.jsx(A,{className:"spinner"})]})},xN=i=>{const{roomId:t=-1,textureReceiver:s=null,onClose:n=null}=i,a=o.useRef(),r=()=>{if(!a||!a.current)return null;const c=a.current.getBoundingClientRect();return new Kd(Math.floor(c.x),Math.floor(c.y),Math.floor(c.width),Math.floor(c.height))},l=()=>{In(En.CAMERA_SHUTTER),s(W().createTextureFromRoom(t,1,r()))};return e.jsx(rr,{handleSelector:".nitro-room-thumbnail-camera",children:e.jsxs("div",{className:"nitro-room-thumbnail-camera px-2",children:[e.jsx("div",{ref:a,className:"camera-frame"}),e.jsxs("div",{className:"d-flex align-items-end h-100 pb-2",children:[e.jsx("button",{className:"btn btn-sm btn-danger w-100 mb-1 me-2",onClick:n,children:u("cancel")}),e.jsx("button",{className:"btn btn-sm btn-success w-100 mb-1",onClick:l,children:u("navigator.thumbeditor.save")})]})]})})},wc=i=>{const{title:t="",onClose:s=null,classNames:n=[],children:a=null,type:r=ge.DEFAULT,options:l=null,...c}=i,m=o.useMemo(()=>{const h=["nitro-alert"];return h.push("nitro-alert-"+r),n.length&&h.push(...n),h},[n,r]);return e.jsxs(ne,{classNames:m,theme:"primary-slim",...c,children:[e.jsx(se,{headerText:t,onCloseClick:s}),e.jsx(ee,{grow:!0,justifyContent:"between",overflow:"hidden",className:"text-black",gap:0,children:a}),l]})},jN=i=>{const{title:t="",onClose:s=null,classNames:n=[],children:a=null,type:r=ge.DEFAULT,...l}=i,c=o.useMemo(()=>{const m=["nitro-alert","nitro-alert-credits"];return n.length&&m.push(...n),m},[n,r]);return e.jsxs(ne,{classNames:c,theme:"primary",...l,children:[e.jsx(se,{headerText:t,onCloseClick:s}),e.jsx(ee,{grow:!0,justifyContent:"between",overflow:"hidden",className:"text-black",gap:0,children:a})]})},on=class on{};on.BOUNCE="bounce",on.SLIDE_LEFT="slideLeft",on.SLIDE_RIGHT="slideRight",on.FLIP_X="flipX",on.FADE_IN="fadeIn",on.FADE_DOWN="fadeDown",on.FADE_UP="fadeUp",on.HEAD_SHAKE="headShake";let Zt=on;function IN(i,t,s=300){switch(i){case Zt.BOUNCE:switch(t){default:return{};case Hn:return{animationName:"bounceIn",animationDuration:`${s}ms`};case dr:return{animationName:"bounceOut",animationDuration:`${s}ms`}}case Zt.SLIDE_LEFT:switch(t){default:return{};case Hn:return{animationName:"slideInLeft",animationDuration:`${s}ms`};case dr:return{animationName:"slideOutLeft",animationDuration:`${s}ms`}}case Zt.SLIDE_RIGHT:switch(t){default:return{};case Hn:return{animationName:"slideInRight",animationDuration:`${s}ms`};case dr:return{animationName:"slideOutRight",animationDuration:`${s}ms`}}case Zt.FLIP_X:switch(t){default:return{};case Hn:return{animationName:"flipInX",animationDuration:`${s}ms`};case dr:return{animationName:"flipOutX",animationDuration:`${s}ms`}}case Zt.FADE_UP:switch(t){default:return{};case Hn:return{animationName:"fadeInUp",animationDuration:`${s}ms`};case dr:return{animationName:"fadeOutDown",animationDuration:`${s}ms`}}case Zt.FADE_IN:switch(t){default:return{};case Hn:return{animationName:"fadeIn",animationDuration:`${s}ms`};case dr:return{animationName:"fadeOut",animationDuration:`${s}ms`}}case Zt.FADE_DOWN:switch(t){default:return{};case Hn:return{animationName:"fadeInDown",animationDuration:`${s}ms`};case dr:return{animationName:"fadeOutUp",animationDuration:`${s}ms`}}case Zt.HEAD_SHAKE:switch(t){default:return{};case Hn:return{animationName:"headShake",animationDuration:`${s}ms`}}}return null}const ca=i=>{const{type:t=null,inProp:s=!1,timeout:n=300,className:a=null,children:r=null}=i,[l,c]=o.useState(!1);return o.useEffect(()=>{let m=null;return s?c(!0):m=setTimeout(()=>{c(!1),clearTimeout(n)},n),()=>{m&&clearTimeout(m)}},[s,n]),e.jsx($h,{in:s,timeout:n,children:m=>e.jsx("div",{className:(a??"")+" animate__animated",style:{...IN(t,m,n)},children:l&&r})})},Tc=i=>{const{fadesOut:t=!0,timeoutMs:s=8e3,onClose:n=null,overflow:a="hidden",classNames:r=[],...l}=i,[c,m]=o.useState(!1),h=o.useMemo(()=>{const d=["nitro-notification-bubble","rounded"];return r.length&&d.push(...r),d},[r]);return o.useEffect(()=>(m(!0),()=>m(!1)),[]),o.useEffect(()=>{if(!t)return;const d=setTimeout(()=>{m(!1),setTimeout(()=>n(),300)},s);return()=>clearTimeout(d)},[t,s,n]),e.jsx(ca,{type:Zt.FADE_IN,inProp:c,timeout:300,children:e.jsx(_,{overflow:a,classNames:h,onClick:n,...l})})},mn=i=>{const{figure:t="",typeId:s=-1,paletteId:n=-1,petColor:a=16777215,customParts:r=[],posture:l="std",headOnly:c=!1,direction:m=0,scale:h=1,style:d={},...g}=i,[f,j]=o.useState(null),[p,I]=o.useState(0),[x,E]=o.useState(0),v=o.useRef(!1),b=o.useMemo(()=>{let w={};return f&&f.length&&(w.backgroundImage=`url(${f})`),h!==1&&(w.transform=`scale(${h})`,h%1||(w.imageRendering="pixelated")),w.width=p,w.height=x,Object.keys(d).length&&(w={...w,...d}),w},[f,h,d,p,x]);return o.useEffect(()=>{let w=s,S=n,T=a,L=r,k=c;if(t&&t.length){const R=new ra(t);w=R.typeId,S=R.paletteId,T=R.color,L=R.customParts}w===16&&(k=!1);const y=W().getRoomObjectPetImage(w,S,T,new vt(m*45),64,{imageReady:(R,O,F)=>{v.current||(F?(j(F.src),I(F.width),E(F.height)):O&&(j(xn.generateImageUrl(O)),I(O.width),E(O.height)))},imageFailed:R=>{}},k,0,L,l);if(y){const R=y.getImage();R&&(j(R.src),I(R.width),E(R.height))}},[t,s,n,a,r,l,c,m]),o.useEffect(()=>(v.current=!1,()=>{v.current=!0}),[]),e.jsx(A,{classNames:["pet-image"],style:b,...g})},Rc=i=>{const{text:t="",progress:s=0,maxProgress:n=100,position:a="relative",justifyContent:r="center",classNames:l=[],children:c=null,...m}=i,h=o.useMemo(()=>{const d=["nitro-progress-bar","text-white"];return l.length&&d.push(...l),d},[l]);return e.jsxs(N,{position:a,justifyContent:r,classNames:h,...m,children:[t&&t.length>0&&e.jsx(_,{fit:!0,center:!0,position:"absolute",className:"nitro-progress-bar-text small",children:t}),e.jsx(A,{className:"nitro-progress-bar-inner",style:{width:~~((s-0)*100/(n-0)+0)+"%"}}),c]})},yc=i=>{const{level:t=0,classNames:s=[],children:n=null,...a}=i,r=o.useMemo(()=>{const l=["nitro-rarity-level"];return s.length&&l.push(...s),l},[s]);return e.jsxs(A,{classNames:r,...a,children:[e.jsx("div",{children:t}),n]})},Ho=i=>{const{roomPreviewer:t=null,height:s=0,children:n=null}=i,[a,r]=o.useState(null),l=o.useRef(),c=m=>{t&&(m.shiftKey?t.changeRoomObjectDirection():t.changeRoomObjectState())};return o.useEffect(()=>{if(!t)return;const m=d=>{!t||!a||!l.current||(t.updatePreviewRoomView(),a.canvasUpdated&&(l.current.style.backgroundImage=`url(${xn.generateImageUrl(a.master)})`))};if(!a&&l.current&&t){let g=document.defaultView.getComputedStyle(l.current,null).backgroundColor;g=fs.rgbStringToHex(g),g=g.replace("#","0x"),t.backgroundColor=parseInt(g,16);const f=l.current.parentElement.clientWidth;t.getRoomCanvas(f,s);const j=t.getRenderingCanvas();r(j),j.canvasUpdated=!0,m()}Ln().add(m);const h=new ResizeObserver(()=>{if(!t||!l.current)return;const d=l.current.parentElement.offsetWidth;t.modifyRoomCanvas(d,s),m()});return h.observe(l.current),()=>{h.disconnect(),Ln().remove(m)}},[a,t,l,s]),e.jsxs("div",{className:"room-preview-container",children:[e.jsx("div",{ref:l,className:"room-preview-image",style:{height:s},onClick:c}),n]})},Wo=i=>{const{roomId:t=-1,customUrl:s=null,shrink:n=!0,overflow:a="hidden",classNames:r=[],children:l=null,...c}=i,m=o.useMemo(()=>{const d=["room-thumbnail","rounded","border"];return r.length&&d.push(...r),d},[r]),h=o.useMemo(()=>s&&s.length?K("image.library.url")+s:K("thumbnails.url").replace("%thumbnail%",t.toString()),[s,t]);return e.jsxs(A,{shrink:n,overflow:a,classNames:m,...c,children:[h&&e.jsx("img",{alt:"",src:h}),l]})},nh=i=>{const{color:t="",message:s="",date:n="",senderName:a="",customTitle:r=null,onCloseClick:l=null}=i;return e.jsx(rr,{handleSelector:".drag-handler",children:e.jsxs(N,{gap:0,alignItems:"center",className:`nitro-layout-trophy trophy-${t}`,children:[e.jsxs(_,{center:!0,fullWidth:!0,position:"relative",className:"trophy-header drag-handler",children:[e.jsx(A,{position:"absolute",pointer:!0,className:"trophy-close",onClick:l}),e.jsx(C,{bold:!0,children:u("widget.furni.trophy.title")})]}),e.jsxs(N,{className:"trophy-content py-1",gap:1,children:[r&&e.jsx(C,{bold:!0,children:r}),s]}),e.jsxs(_,{alignItems:"center",justifyContent:"between",className:"trophy-footer mt-1",children:[e.jsx(C,{bold:!0,children:n}),e.jsx(C,{bold:!0,children:a})]})]})})},rh=i=>{const{title:t=null,onSaveSearch:s=null,onClick:n=null}=i;return e.jsx(A,{color:"white",className:"button-search-saves",pointer:!0,title:t,onClickCapture:s,onClick:n,children:e.jsx(Xd,{})})},EN=i=>{const{itemImage:t=void 0,itemColor:s=void 0,itemActive:n=!1,itemCount:a=1,itemCountMinimum:r=1,itemUniqueSoldout:l=!1,itemUniqueNumber:c=-2,itemUnseen:m=!1,itemHighlight:h=!1,disabled:d=!1,center:g=!0,column:f=!0,style:j={},classNames:p=[],position:I="relative",overflow:x="hidden",children:E=null,...v}=i,b=o.useMemo(()=>{const S=["room-creator-grid-item"];return n&&S.push("active"),(l||c>0)&&S.push("unique-item"),l&&S.push("sold-out"),m&&S.push("unseen"),h&&S.push("has-highlight"),d&&S.push("disabled"),t===null&&S.push("icon","loading-icon"),p.length&&S.push(...p),S},[n,l,c,m,h,d,t,p]),w=o.useMemo(()=>{let S={...j};return t&&(S.backgroundImage=`url(${t})`),s&&(S.backgroundColor=s),Object.keys(j).length&&(S={...S,...j}),S},[j,t,s]);return e.jsxs(N,{center:g,pointer:!0,position:I,overflow:x,column:f,classNames:b,style:w,...v,children:[a>r&&e.jsx(pn,{count:a}),c>0&&e.jsxs(e.Fragment,{children:[e.jsx(A,{fit:!0,className:"unique-bg-override",style:{backgroundImage:`url(${t})`}}),e.jsx("div",{className:"position-absolute bottom-0 unique-item-counter",children:e.jsx(Or,{value:c})})]}),E]})},xs=i=>{const{userId:t=0,classNames:s=[],pointer:n=!0,children:a=null,...r}=i,l=o.useMemo(()=>{const c=["nitro-friends-spritesheet","icon-profile-sm"];return s.length&&c.push(...s),c},[s]);return e.jsx(A,{classNames:l,pointer:n,onClick:c=>ns(t),...r,children:a})},bn=i=>{const{isActive:t=!1,count:s=0,overflow:n="hidden",position:a="relative",pointer:r=!0,classNames:l=[],children:c=null,...m}=i,h=o.useMemo(()=>{const d=["nav-item","rounded-top","border"];return t&&d.push("active"),l.length&&d.push(...l),d},[t,l]);return e.jsxs(_,{overflow:n,pointer:r,position:a,classNames:h,...m,children:[e.jsx(_,{shrink:!0,center:!0,children:c}),s>0&&e.jsx(pn,{count:s})]})},Mn=i=>{const{justifyContent:t="start",gap:s=1,classNames:n=[],children:a=null,...r}=i,l=o.useMemo(()=>{const c=["container-fluid","nitro-card-tabs","pt-1","position-relative"];return n.length&&c.push(...n),c},[n]);return e.jsx(_,{justifyContent:t,gap:s,classNames:l,...r,children:a})},Bt=(...i)=>i.filter(Boolean).join(" "),bN=i=>{const{classNames:t=[],...s}=i,n=o.useMemo(()=>{const a=["form-group"];return t.length&&a.push(...t),a},[t]);return e.jsx(_,{classNames:n,...s})},CN=i=>{const{variant:t="black",height:s=1,classNames:n=[],style:a={},...r}=i,l=o.useMemo(()=>{const m=[];return t&&m.push("bg-"+t),n.length&&m.push(...n),m},[t,n]),c=o.useMemo(()=>{let m={display:"list-item"};return s>0&&(m.height=s),Object.keys(a).length&&(m={...m,...a}),m},[s,a]);return e.jsx(A,{classNames:l,style:c,...r})},Un=(i,t,s,n=!0)=>{o.useEffect(()=>{if(n)return Array.isArray(i)?i.map(a=>t.addEventListener(a,s)):t.addEventListener(i,s),()=>{Array.isArray(i)?i.map(a=>t.removeEventListener(a,s)):t.removeEventListener(i,s)}},[i,t,n,s])},Uu=(i,t)=>Un(i,Qb().events,t),NN=(i,t)=>Un(i,pe().cameraManager.events,t),vN=(i,t)=>Un(i,pe().localization.events,t),hr=(i,t)=>Un(i,pe().events,t),Ie=(i,t)=>Un(i,W().events,t),Ve=(i,t)=>Un(i,Dr().events,t),_N=(i,t)=>Un(i,V().events,t),pr=(i,t,s=!0)=>Un(i,pe().soundManager.events,t,s),M=(i,t)=>{o.useEffect(()=>{const s=new i(t);return Wa().registerMessageEvent(s),()=>Wa().removeMessageEvent(s)},[i,t])},rt=(i,t,s=!0)=>Un(i,jn,t,s),SN=()=>{const[i,t]=o.useState(!0),[s,n]=o.useState([]),[a,r]=o.useState(null),[l,c]=o.useState(-1),[m,h]=o.useState(0),d=o.useMemo(()=>{let E=0;return s.forEach(v=>E+=ps.getAchievementCategoryTotalUnseen(v)),E},[s]),g=o.useMemo(()=>{let E=0;return s.forEach(v=>E+=v.getProgress()),E},[s]),f=o.useMemo(()=>{let E=0;return s.forEach(v=>E+=v.getMaxProgress()),E},[s]),j=o.useMemo(()=>~~((g-0)*100/(f-0)+0),[g,f]),p=o.useMemo(()=>a===null?null:s.find(E=>E.code===a),[s,a]),I=o.useMemo(()=>l===-1||!p?null:p.achievements.find(E=>E.achievementId===l),[p,l]),x=o.useCallback((E,v)=>{n(b=>{const w=[...b];for(const S of w)if(S.code===E)for(const T of S.achievements)T.achievementId===v&&(T.unseen=0);return w})},[]);return M(Kh,E=>{const b=E.getParser().achievement;n(w=>{const S=[...w],T=S.findIndex(L=>L.code===b.category);if(T===-1){const L=new Iu(b.category);L.achievements.push(b),S.push(L)}else{const L=ts(S[T]),k=[...L.achievements],y=k.findIndex(O=>O.achievementId===b.achievementId);let R=null;y===-1?k.push(b):(R=k[y],k[y]=b),ps.getAchievementIsIgnored(b)||(b.unseen++,R&&(b.unseen+=R.unseen)),L.achievements=k,S[T]=L}return S})}),M(Xh,E=>{const v=E.getParser(),b=[];for(const w of v.achievements){const S=w.category;let T=b.find(L=>L.code===S);T||(T=new Iu(S),b.push(T)),T.achievements.push(w)}n(b)}),M(Qh,E=>{const v=E.getParser();h(v.score)}),o.useEffect(()=>{i&&(D(new Jh),t(!1))},[i]),o.useEffect(()=>{!a||l===-1||x(a,l)},[a,l,x]),{achievementCategories:s,selectedCategoryCode:a,setSelectedCategoryCode:r,selectedAchievementId:l,setSelectedAchievementId:c,achievementScore:m,getTotalUnseen:d,getProgress:g,getMaxProgress:f,scaledProgressPercent:j,selectedCategory:p,selectedAchievement:I,setAchievementSeen:x}},qo=()=>at(SN),wN=()=>{const[i,t]=o.useState([]),[s,n]=o.useState([]),[a,r]=o.useState(-1),[l,c]=o.useState(10),[m,h]=o.useState(null);return NN(tg.INITIALIZED,d=>{t(Array.from(Na().effects.values()))}),M(Zh,d=>{const g=d.getParser();h({credits:g.creditPrice,duckets:g.ducketPrice,publishDucketPrice:g.publishDucketPrice})}),o.useEffect(()=>{if(!Na().isLoaded){Na().init(),D(new eg);return}},[]),{availableEffects:i,cameraRoll:s,setCameraRoll:n,selectedPictureIndex:a,setSelectedPictureIndex:r,myLevel:l,price:m}},ah=()=>at(wN),zs=class zs extends _s{};zs.SHOW_CATALOG="CE_SHOW_CATALOG",zs.HIDE_CATALOG="CE_HIDE_CATALOG",zs.TOGGLE_CATALOG="CE_TOGGLE_CATALOG",zs.SOLD_OUT="CE_SOLD_OUT",zs.APPROVE_NAME_RESULT="CE_APPROVE_NAME_RESULT",zs.PURCHASE_APPROVED="CE_PURCHASE_APPROVED",zs.INIT_GIFT="CE_INIT_GIFT",zs.CATALOG_RESET="CE_RESET",zs.CATALOG_INVISIBLE_PAGE_VISITED="CE_CATALOG_INVISIBLE_PAGE_VISITED";let kr=zs;class TN extends kr{constructor(t,s,n){super(kr.INIT_GIFT),this._pageId=t,this._offerId=s,this._extraData=n}get pageId(){return this._pageId}get offerId(){return this._offerId}get extraData(){return this._extraData}}const wo=class wo extends kr{constructor(t){super(wo.POST_MARKETPLACE),this._item=t}get item(){return this._item}};wo.POST_MARKETPLACE="CE_POST_MARKETPLACE";let co=wo;const To=class To extends _s{constructor(t){super(To.PURCHASE_SUCCESS),this._purchase=t}get purchase(){return this._purchase}};To.PURCHASE_SUCCESS="CPE_PURCHASE_SUCCESS";let Cn=To;const Ro=class Ro extends _s{constructor(t){super(Ro.PURCHASE_FAILED),this._code=t}get code(){return this._code}};Ro.PURCHASE_FAILED="CPFE_PURCHASE_FAILED";let sr=Ro;const yo=class yo extends _s{constructor(t){super(yo.NOT_ALLOWED),this._code=t}get code(){return this._code}};yo.NOT_ALLOWED="CPNAE_NOT_ALLOWED";let Za=yo;const ht=class ht extends _s{};ht.WIDGETS_INITIALIZED="CWE_CWE_WIDGETS_INITIALIZED",ht.SELECT_PRODUCT="CWE_SELECT_PRODUCT",ht.SET_EXTRA_PARM="CWE_CWE_SET_EXTRA_PARM",ht.PURCHASE="CWE_PURCHASE",ht.COLOUR_ARRAY="CWE_COLOUR_ARRAY",ht.MULTI_COLOUR_ARRAY="CWE_MULTI_COLOUR_ARRAY",ht.COLOUR_INDEX="CWE_COLOUR_INDEX",ht.TEXT_INPUT="CWE_TEXT_INPUT",ht.DROPMENU_SELECT="CWE_CWE_DROPMENU_SELECT",ht.PURCHASE_OVERRIDE="CWE_PURCHASE_OVERRIDE",ht.SELLABLE_PET_PALETTES="CWE_SELLABLE_PET_PALETTES",ht.UPDATE_ROOM_PREVIEW="CWE_UPDATE_ROOM_PREVIEW",ht.GUILD_SELECTED="CWE_GUILD_SELECTED",ht.TOTAL_PRICE_WIDGET_INITIALIZED="CWE_TOTAL_PRICE_WIDGET_INITIALIZED",ht.PRODUCT_OFFER_UPDATED="CWE_CWE_PRODUCT_OFFER_UPDATED",ht.SET_PREVIEWER_STUFFDATA="CWE_CWE_SET_PREVIEWER_STUFFDATA",ht.EXTRA_PARAM_REQUIRED_FOR_BUY="CWE_CWE_EXTRA_PARAM_REQUIRED_FOR_BUY",ht.TOGGLE="CWE_CWE_TOGGLE",ht.BUILDER_SUBSCRIPTION_UPDATED="CWE_CWE_BUILDER_SUBSCRIPTION_UPDATED",ht.ROOM_CHANGED="CWE_CWE_ROOM_CHANGED",ht.SHOW_WARNING_TEXT="CWE_CWE_SHOW_WARNING_TEXT";let Fu=ht;const Oo=class Oo extends _s{constructor(){super(Oo.SOLD_OUT)}};Oo.SOLD_OUT="CPSOE_SOLD_OUT";let ei=Oo;const ko=class ko extends _s{constructor(t,s){super(ko.UPDATE_STUFF_DATA),this._offer=t,this._stuffData=s}get offer(){return this._offer}get stuffData(){return this._stuffData}};ko.UPDATE_STUFF_DATA="SRPSA_UPDATE_STUFF_DATA";let Vu=ko;const jr=class jr extends _s{};jr.SHOW_GUIDE_TOOL="GTE_SHOW_GUIDE_TOOL",jr.HIDE_GUIDE_TOOL="GTE_HIDE_GUIDE_TOOL",jr.TOGGLE_GUIDE_TOOL="GTE_TOGGLE_GUIDE_TOOL",jr.CREATE_HELP_REQUEST="GTE_CREATE_HELP_REQUEST",jr.CREATE_BULLY_REQUEST="GTE_CREATE_BULLY_REQUEST";let gs=jr;const qc=class qc extends _s{};qc.INIT="HC_NAME_CHANGE_INIT";let ti=qc;const Ao=class Ao extends _s{constructor(t,s){super(Ao.DELETE_ITEM_CONFIRM),this._item=t,this._amount=s}get item(){return this._item}get amount(){return this._amount}};Ao.DELETE_ITEM_CONFIRM="DIC_DELETE_ITEM_CONFIRM";let uo=Ao;const Do=class Do extends _s{constructor(t,s,n){super(Do.FURNI_ADDED),this.id=t,this.spriteId=s,this.category=n}};Do.FURNI_ADDED="IFAE_FURNI_ADDED";let si=Do;const Fa=class Fa extends _s{};Fa.SHOW_THUMBNAIL="NE_SHOW_THUMBNAIL",Fa.HIDE_THUMBNAIL="NE_HIDE_THUMBNAIL",Fa.TOGGLE_THUMBNAIL="NE_TOGGLE_THUMBNAIL";let cn=Fa;const Gu=i=>i&&i.length?i.replace(/\\r/g,"\r"):"",Bu=i=>{const t="0"+i;return t.substr(t.length-2,t.length)};let Ia=null;const RN=()=>{const[i,t]=o.useState([]),[s,n]=o.useState([]),[a,r]=o.useState([]),[l,c]=o.useState(!1),[m,h]=o.useState(!1),d=()=>K("notification",{}),g=y=>{const R=d();return R?R[y]:null},f=(y,R,O,F)=>{if(y.has(O))return y.get(O);const U=["notification",R,O].join(".");return pe().localization.hasValue(U)||F?u(U,Array.from(y.keys()),Array.from(y.values())):null},j=(y,R)=>{let O=y.get("image");return O||(O=K("image.library.notifications.url","").replace("%image%",R.replace(/\./g,"_"))),u(O)},p=o.useCallback((y,R=null,O=null,F=null,U=null,q=null)=>{(!U||!U.length)&&(U=u("notifications.broadcast.title")),(!R||!R.length)&&(R=ge.DEFAULT);const $=new no([Gu(y)],R,O,F,U,q);t(G=>[$,...G])},[]),I=o.useCallback(()=>p(null,ge.NITRO),[p]),x=o.useCallback((y,R,O=null,F=null)=>{if(l)return;const U=new zl(y,R,O,F);n(q=>[U,...q])},[l]),E=(y,R=null)=>{R||(R=new Map);const O=g("notification."+y);if(O)for(const re in O)R.set(re,O[re]);y==="floorplan_editor.error"&&R.set("message",R.get("message").replace(/[^a-zA-Z._ ]/g,""));const F=f(R,y,"title",!0),U=f(R,y,"message",!0).replace(/\\r/g,"\r"),q=f(R,y,"linkTitle",!1),$=f(R,y,"linkUrl",!1),G=j(R,y);R.get("display")==="BUBBLE"?x(u(U),Qt.INFO,G,$):p(u(U),y,$,q,F,G),R.get("sound")&&In(R.get("sound"))},v=o.useCallback((y,R,O,F=null,U=null,q=null,$=null)=>{(!F||!F.length)&&(F=u("generic.confirm")),(!U||!U.length)&&(U=u("generic.cancel")),(!q||!q.length)&&(q=u("notifications.broadcast.title"));const G=new Yl($,y,R,O,F,U,q);r(re=>[G,...re])},[]),b=(y,R=null,O=!0)=>{p(y,ge.DEFAULT,R,u("mod.alert.link"),u("mod.alert.title"))},w=o.useCallback((y,R="")=>{switch(y){case is.ALERT_SCAM:p(u("inventory.trading.warning.other_not_offering"),null,null,null,u("inventory.trading.notification.title"));return;case is.HOTEL_TRADING_DISABLED:case is.YOU_NOT_ALLOWED:case is.THEY_NOT_ALLOWED:case is.ROOM_DISABLED:case is.YOU_OPEN:case is.THEY_OPEN:p(u(`inventory.trading.openfail.${y}`,["otherusername"],[R]),null,null,null,u("inventory.trading.openfail.title"));return;case is.ERROR_WHILE_COMMIT:p(`${u("inventory.trading.notification.caption")}, ${u("inventory.trading.notification.commiterror.info")}`,null,null,null,u("inventory.trading.notification.title"));return;case is.THEY_CANCELLED:p(u("inventory.trading.info.closed"),null,null,null,u("inventory.trading.notification.title"));return}},[p]),S=o.useCallback(y=>{t(R=>{const O=[...R],F=O.findIndex(U=>y===U);return F>=0&&O.splice(F,1),O})},[]),T=o.useCallback(y=>{n(R=>{const O=[...R],F=O.findIndex(U=>y===U);return F>=0&&O.splice(F,1),O})},[]),L=o.useCallback(y=>{r(R=>{const O=[...R],F=O.findIndex(U=>y===U);return F>=0&&O.splice(F,1),O})},[]);M(sg,y=>{const R=y.getParser();if(R.userId!==V().userId)return;const O=u("notifications.text.respect.1"),F=u("notifications.text.respect.2",["count"],[R.respectsReceived.toString()]);x(O,Qt.RESPECT),x(F,Qt.RESPECT)}),M(ng,y=>{const R=y.getParser();p(R.message.replace(/\\r/g,"\r"),null,null,u("notifications.broadcast.title"))}),M(rg,y=>{const R=y.getParser(),O=u("achievements.levelup.desc"),F=da(R.data.badgeCode),U=V().getBadgeUrl(R.data.badgeCode),q="questengine/achievements/"+R.data.category;x(O+" "+F,Qt.ACHIEVEMENT,U,q)}),M(ag,y=>{const R=y.getParser();R.numGifts<=0||x(R.numGifts.toString(),Qt.CLUBGIFT,null,"catalog/open/"+K("catalog.links")["hc.hc_gifts"])}),M(ig,y=>{const R=y.getParser();b(R.message,R.url,!1)}),M(Qd,y=>{const R=y.getParser();if(R.amountChanged<=0||R.type!==5)return;const O=K("currency.asset.icon.url","").replace("%type%",R.type.toString());x(u("notifications.text.loyalty.received",["AMOUNT"],[R.amountChanged.toString()]),Qt.INFO,O)}),M(og,y=>{const R=y.getParser();b(R.message)}),M(lg,y=>{const R=y.getParser();p(u("opening.hours."+(R.userThrowOutAtClose?"disconnected":"closed"),["h","m"],[Bu(R.openHour),Bu(R.openMinute)]),ge.DEFAULT,null,null,u("opening.hours.title"))}),M(cg,y=>{const R=y.getParser(),O=u("notifications.text."+(R.boughtAsGift?"petbought":"petreceived"));let F=null;const U=W().getRoomObjectPetImage(R.pet.typeId,R.pet.paletteId,parseInt(R.pet.color,16),new vt(45*3),64,null,!0);U&&(F=U.getImage().src),x(O,Qt.PETLEVEL,F)}),M(ug,y=>{const O=y.getParser().messages.map(U=>Gu(U)),F=new no(O,ge.MOTD,null,null,u("notifications.motd.title"));t(U=>[F,...U])}),M(dg,y=>{const R=y.getParser();let O=null;const F=W().getRoomObjectPetImage(R.figureData.typeId,R.figureData.paletteId,parseInt(R.figureData.color,16),new vt(45*3),64,null,!0);F&&(O=F.getImage().src),x(u("notifications.text.petlevel",["pet_name","level"],[R.petName,R.level.toString()]),Qt.PETLEVEL,O)}),M(mg,y=>{const R=y.getParser();c(!R.enabled)}),M(hg,y=>{const R=y.getParser();if(!R.products||!R.products.length)return;const O=R.products[0];O&&x(u("notifications.text.club_gift.selected"),Qt.INFO,qi.getProductImageUrl(O.productType,O.furniClassId,O.extraParam))}),M(gg,y=>{const R=y.getParser();p(u("maintenance.shutdown",["m","d"],[R.minutesUntilMaintenance.toString(),R.duration.toString()]),ge.DEFAULT,null,null,u("opening.hours.title"))}),M(fg,y=>{const R=y.getParser();b(R.message,R.url)}),M(pg,y=>{const R=y.getParser();E(R.type,R.parameters)}),M(xg,y=>{const R=y.getParser();p(u("opening.hours.shutdown",["m"],[R.openMinute.toString()]),ge.DEFAULT,null,null,u("opening.hours.title"))}),M(jg,y=>{const R=y.getParser();p(u("opening.hours.disconnected",["h","m"],[R.openHour.toString(),R.openMinute.toString()]),ge.DEFAULT,null,null,u("opening.hours.title"))}),M(Ig,y=>{const R=y.getParser();switch(R.errorCode){default:case 0:p(u("connection.server.error.desc",["errorCode"],[R.errorCode.toString()]),ge.ALERT,null,null,u("connection.server.error.title"));break;case 1001:case 1002:case 1003:case 1004:case 1005:case 1006:case 1007:case 1008:case 1009:case 1010:case 1011:case 1012:case 1013:case 1014:case 1015:case 1016:case 1017:case 1018:case 1019:y.connection.dispose();break;case 4013:p(u("connection.room.maintenance.desc"),ge.ALERT,null,null,u("connection.room.maintenance.title"));break}}),M(Eg,y=>{const R=y.getParser();p(u(R.alertMessage),ge.DEFAULT,null,null,u(R.titleMessage?R.titleMessage:"notifications.broadcast.title"))});const k=o.useCallback(()=>{if(!m)if(Pl.isRunning()){if(Ia)return;Ia=setTimeout(()=>{k()},Pl.totalRunningTime+5e3)}else Ia&&(clearTimeout(Ia),Ia=null),x(u("mod.chatdisclaimer"),Qt.INFO),h(!0)},[m,x]);return M(bg,k),{alerts:i,bubbleAlerts:s,confirms:a,simpleAlert:p,showNitroAlert:I,showTradeAlert:w,showConfirm:v,showSingleBubble:x,closeAlert:S,closeBubbleAlert:T,closeConfirm:L}},Pe=()=>at(RN),Hu=new URLSearchParams(window.location.search).get("userid")||0,yN=(i,t)=>{i=Hu?`${i}.${Hu}`:i;const[s,n]=o.useState(()=>{try{return(typeof window<"u"?Ic(i):void 0)??t}catch{return t}});return[s,r=>{try{const l=r instanceof Function?r(s):r;n(l),typeof window<"u"&&Nc(i,l)}catch(l){Jd.error(l)}}]},gn=yN,ON=()=>gn(Ka.CATALOG_PLACE_MULTIPLE_OBJECTS,!1),ih=()=>at(ON),kN=()=>gn(Ka.CATALOG_SKIP_PURCHASE_CONFIRMATION,!1),oh=()=>at(kN),AN=-12345678,DN=()=>{const[i,t]=o.useState(!1),[s,n]=o.useState(!1),[a,r]=o.useState(-1),[l,c]=o.useState(-1),[m,h]=o.useState(Ls.NORMAL),[d,g]=o.useState(null),[f,j]=o.useState(null),[p,I]=o.useState(null),[x,E]=o.useState(null),[v,b]=o.useState([]),[w,S]=o.useState(null),[T,L]=o.useState([]),[k,y]=o.useState(null),[R,O]=o.useState(!1),[F,U]=o.useState({quantity:1,extraData:null,extraParamRequired:!1,previewStuffData:null}),[q,$]=o.useState({}),[G,re]=o.useState(!1),[Le,Ye]=ih(),[jt,ds]=oh(),[ye,Dt]=o.useState(null),[Se,ms]=o.useState(null),[ue,de]=o.useState(0),[le,we]=o.useState(0),[kt,_t]=o.useState(0),[Gs,fe]=o.useState(0),[Te,st]=o.useState(0),[he,De]=o.useState(0),{simpleAlert:Be=null}=Pe(),Yt=o.useRef(new fr),gi=o.useCallback(()=>{r(-1),c(-1),g(null),j(null),I(null),E(null),b([]),S(null),L([]),t(!1)},[]),ha=o.useCallback(B=>{if(!B)return Rn.MISSING_OFFER;if(ue<0||ue>=le)return Rn.FURNI_LIMIT_REACHED;const z=ve();if(!z)return Rn.NOT_IN_ROOM;if(!z.isRoomOwner)return Rn.NOT_ROOM_OWNER;if(Gs<=0){const J=W();let ae=J.getRoomObjectCount(z.roomId,X.UNIT);for(;ae>0;){const _e=J.getRoomObjectByIndex(z.roomId,ae,X.UNIT),He=z.userDataManager.getUserDataByIndex(_e.id);if(He&&He.type===lt.USER&&He.roomIndex!==z.ownRoomIndex&&!He.isModerator)return Rn.VISITORS_IN_ROOM;ae--}}return Rn.OKAY},[ue,le,Gs]),ga=o.useCallback(B=>{const z=ve();return!!((z&&B.page&&B.page.layoutCode!=="sold_ltd_items"&&m===Ls.NORMAL&&(z.isRoomOwner||z.isGuildRoom&&z.controllerLevel>=qe.GUILD_MEMBER)||m===Ls.BUILDER&&ha(B)===Rn.OKAY)&&B.pricingModel!==Ut.PRICING_MODEL_BUNDLE&&B.product.productType!==me.EFFECT&&B.product.productType!==me.HABBO_CLUB)},[m,ha]),or=o.useCallback(B=>{if(!ga(B))return;const z=B.product;if(!z)return;let J=0;switch(z.productType){case me.FLOOR:J=X.FLOOR;break;case me.WALL:J=X.WALL;break}W().processRoomObjectPlacement(Va.CATALOG,-B.offerId,J,z.productClassId,z.extraParam)&&(Dt(B),re(!0),t(!1))},[ga]),Gn=o.useCallback((B,z)=>{const J=W();let ae=J.getRoomInstanceVariable(J.activeRoomId,Z.ROOM_WALL_TYPE),_e=J.getRoomInstanceVariable(J.activeRoomId,Z.ROOM_FLOOR_TYPE),He=J.getRoomInstanceVariable(J.activeRoomId,Z.ROOM_LANDSCAPE_TYPE);switch(ae=ae&&ae.length?ae:"101",_e=_e&&_e.length?_e:"101",He=He&&He.length?He:"1.1",B){case"floor":J.updateRoomInstancePlaneType(J.activeRoomId,z,ae,He,!0);return;case"wallpaper":J.updateRoomInstancePlaneType(J.activeRoomId,_e,z,He,!0);return;case"landscape":J.updateRoomInstancePlaneType(J.activeRoomId,_e,ae,z,!0);return;default:J.updateRoomInstancePlaneType(J.activeRoomId,_e,ae,He,!0);return}},[]),fa=o.useCallback(()=>{ye&&(W().cancelRoomObjectInsert(),re(!1),Dt(null))},[ye]),lr=o.useCallback((B=!0)=>{re(z=>(z&&B&&Q("catalog/open"),!1))},[]),pa=o.useCallback((B=!1)=>{B||lr(),ms(z=>{if(z)switch(z.category){case X.FLOOR:W().removeRoomObjectFloor(z.roomId,z.objectId);break;case X.WALL:{switch(z.furniData.className){case"floor":case"wallpaper":case"landscape":Gn("reset","");break;default:W().removeRoomObjectWall(z.roomId,z.objectId);break}break}default:W().deleteRoomObject(z.objectId,z.category);break}return null})},[lr,Gn]),Bn=o.useCallback((B,z)=>{if(z.pageId===B&&z!==d)return z;for(const J of z.children){const ae=Bn(B,J);if(ae)return ae}return null},[d]),xa=o.useCallback((B,z)=>{if(z.pageName===B&&z!==d)return z;for(const J of z.children){const ae=xa(B,J);if(ae)return ae}return null},[d]),cr=o.useCallback((B,z=!1)=>{if(!f||!f.size)return null;if(z){const J=[],ae=f.get(B);if(ae&&ae.length)for(const _e of ae)_e.isVisible&&J.push(_e);if(J.length)return J}return f.get(B)},[f]),ur=o.useCallback((B,z)=>{B<0||(n(!0),r(B),B>-1&&D(new Cg(B,z,m)))},[m]),hs=o.useCallback((B,z,J,ae,_e,He)=>{const St=new Ji(B,z,J,ae,He);if(I(St),c(xe=>B!==-1?B:xe),O(!1),_e>-1&&St.offers.length){for(const xe of St.offers)if(xe.offerId===_e){E(xe);break}}},[]),rs=o.useCallback((B,z=-1)=>{if(fa(),B.parent.pageName==="root"&&B.children.length){for(const _e of B.children)if(_e.isVisible){B=_e;break}}const J=[];let ae=B;for(;ae&&ae.pageName!=="root";)J.push(ae),ae=ae.parent;J.reverse(),b(_e=>{const He=_e.indexOf(B)>=0,St=B.isOpen;for(const xe of _e)xe.deactivate(),J.indexOf(xe)===-1&&xe.close();for(const xe of J)xe.activate(),xe.parent&&xe.open(),xe===B.parent&&xe.children.length&&xe.open();return He&&St?B.close():B.open(),J}),B.pageId>-1&&ur(B.pageId,z)},[b,ur,fa]),_n=o.useCallback(B=>{if(B!==-1&&S(null),!i)Yt.current.requestById=B,t(!0);else{const z=Bn(B,d);z&&rs(z)}},[i,d,Bn,rs]),Bs=o.useCallback(B=>{if(S(null),!i)Yt.current.requestByName=B,t(!0);else{const z=xa(B,d);z&&rs(z)}},[i,d,xa,rs]),Qo=o.useCallback(B=>{if(S(null),!i)Yt.current.requestedByOfferId=B,t(!0);else{const z=cr(B);if(!z||!z.length)return;rs(z[0],B)}},[i,cr,rs]),zc=o.useCallback(()=>{},[]);return M(Ng,B=>{const z=B.getParser(),J=new Map,ae=(_e,He,St)=>{const xe=new Zb(_e,He,St);for(const Ts of xe.offerIds)J.has(Ts)?J.get(Ts).push(xe):J.set(Ts,[xe]);He++;for(const Ts of _e.children)xe.addChild(ae(Ts,He,xe));return xe};g(ae(z.root,0,null)),j(J)}),M(vg,B=>{const z=B.getParser();if(z.catalogType!==m)return;const J=[];for(const ae of z.offers){const _e=[],He=sa(ae.localizationId);for(const xe of ae.products){const Ts=Vl(xe.furniClassId,xe.productType);_e.push(new er(xe.productType,xe.furniClassId,xe.extraParam,xe.productCount,He,Ts,xe.uniqueLimitedItem,xe.uniqueLimitedSeriesSize,xe.uniqueLimitedItemsLeft))}if(!_e.length)continue;const St=new Ut(ae.offerId,ae.localizationId,ae.rent,ae.priceCredits,ae.priceActivityPoints,ae.priceActivityPointsType,ae.giftable,ae.clubLevel,_e,ae.bundlePurchaseAllowed);(m===Ls.NORMAL||St.pricingModel!==Ut.PRICING_MODEL_BUNDLE&&St.pricingModel!==Ut.PRICING_MODEL_MULTI)&&J.push(St)}z.frontPageItems&&z.frontPageItems.length&&L(z.frontPageItems),n(!1),a===z.pageId&&hs(z.pageId,z.layoutCode,new Lm(z.localization.images.concat(),z.localization.texts.concat()),J,z.offerId,z.acceptSeasonCurrencyAsCredits)}),M(_g,B=>{const z=B.getParser();pt(new Cn(z.offer))}),M(Sg,B=>{const z=B.getParser();pt(new sr(z.code))}),M(wg,B=>{const z=B.getParser();pt(new Za(z.code))}),M(Tg,B=>{B.getParser(),pt(new ei)}),M(Rg,B=>{const J=B.getParser().offer;if(!J||!J.products.length)return;J.products[0].uniqueLimitedItem;const _e=[],He=sa(J.localizationId);for(const xe of J.products){const Ts=Vl(xe.furniClassId,xe.productType);_e.push(new er(xe.productType,xe.furniClassId,xe.extraParam,xe.productCount,He,Ts,xe.uniqueLimitedItem,xe.uniqueLimitedSeriesSize,xe.uniqueLimitedItemsLeft))}const St=new Ut(J.offerId,J.localizationId,J.rent,J.priceCredits,J.priceActivityPoints,J.priceActivityPointsType,J.giftable,J.clubLevel,_e,J.bundlePurchaseAllowed);(m===Ls.NORMAL||St.pricingModel!==Ut.PRICING_MODEL_BUNDLE&&St.pricingModel!==Ut.PRICING_MODEL_MULTI)&&(St.page=p,E(St),St.product&&St.product.productType===me.WALL&&U(xe=>{const Ts={...xe};return Ts.extraData=St.product.extraParam||null,Ts}))}),M(yg,B=>{const z=B.getParser(),J=new eC(z.productCode,z.palettes.slice());$(ae=>{const _e=[];ae.petPalettes&&_e.push(...ae.petPalettes);for(let He=0;He<_e.length;He++)if(_e[He].breed===J.breed){_e.splice(He,1);break}return _e.push(J),{...ae,petPalettes:_e}})}),M(Og,B=>{const z=B.getParser();$(J=>{const ae=z.offers;return{...J,clubOffers:ae}})}),M(kg,B=>{const z=B.getParser();$(J=>{const ae=z.groups;return{...J,groups:ae}})}),M(Ag,B=>{const z=B.getParser();$(J=>{const ae=new oC(z);return{...J,giftConfiguration:ae}})}),M(Dg,B=>{const z=B.getParser();if(!z)return;let J="";z.result===1?J=u("inventory.marketplace.result.title.success"):J=u("inventory.marketplace.result.title.failure");const ae=u(`inventory.marketplace.result.${z.result}`);Be(ae,ge.DEFAULT,null,null,J)}),M(Zd,B=>{const z=B.getParser();$(J=>({...J,clubGifts:z}))}),M(Pg,B=>{const z=i;gi(),z&&Be(u("catalog.alert.published.description"),ge.ALERT,null,null,u("catalog.alert.published.title"))}),M(Lg,B=>{const z=B.getParser();de(z.furniCount),zc()}),M(Mg,B=>{const z=B.getParser();we(z.furniLimit),_t(z.maxFurniLimit),fe(z.secondsLeft),st(As()),De(z.secondsLeftWithGrace),zc()}),rt(Cn.PURCHASE_SUCCESS,B=>In(En.CREDITS)),Ie($c.PLACED,B=>{if(!G||B.type!==$c.PLACED)return;if(pa(!0),!ye){lr();return}let z=!1;const J=ye.product;if(B.category===X.WALL)switch(J.furnitureData.className){case"floor":case"wallpaper":case"landscape":z=B.placedOnFloor||B.placedOnWall;break;default:z=B.placedInRoom;break}else z=B.placedInRoom;if(!z){lr();return}switch(ms(new lC(B.roomId,B.objectId,B.category,B.wallLocation,B.x,B.y,B.direction,ye)),m){case Ls.NORMAL:{switch(B.category){case X.FLOOR:W().addFurnitureFloor(B.roomId,B.objectId,J.productClassId,new vt(B.x,B.y,B.z),new vt(B.direction),0,new Vg);break;case X.WALL:switch(J.furnitureData.className){case"floor":case"wallpaper":case"landscape":Gn(J.furnitureData.className,J.extraParam);break;default:W().addFurnitureWall(B.roomId,B.objectId,J.productClassId,new vt(B.x,B.y,B.z),new vt(B.direction*45),0,B.instanceData,0);break}}const ae=W().getRoomObject(B.roomId,B.objectId,B.category);ae&&ae.model.setValue(Z.FURNITURE_ALPHA_MULTIPLIER,.5),jt&&D(new Po(a,ye.offerId,J.extraParam,1)),Le&&or(ye);break}case Ls.BUILDER:{let ae=ye.page.pageId;switch(ae===AN&&(ae=-1),B.category){case X.FLOOR:D(new Fg(ae,ye.offerId,J.extraParam,B.x,B.y,B.direction));break;case X.WALL:D(new Ug(ae,ye.offerId,J.extraParam,B.wallLocation));break}Le&&or(ye);break}}}),rt(si.FURNI_ADDED,B=>{const z=W();if(!(!Se||Se.productClassId!==B.spriteId||Se.roomId!==z.activeRoomId)){switch(B.category){case ce.FLOOR:{const J=z.getRoomInstanceVariable(z.activeRoomId,Z.ROOM_FLOOR_TYPE);Se.extraParam!==J&&D(new Wi(B.id));break}case ce.WALL_PAPER:{const J=z.getRoomInstanceVariable(z.activeRoomId,Z.ROOM_WALL_TYPE);Se.extraParam!==J&&D(new Wi(B.id));break}case ce.LANDSCAPE:{const J=z.getRoomInstanceVariable(z.activeRoomId,Z.ROOM_LANDSCAPE_TYPE);Se.extraParam!==J&&D(new Wi(B.id));break}default:D(new Gg(B.id,Se.category,Se.wallLocation,Se.x,Se.y,Se.direction))}Le||pa()}}),o.useEffect(()=>()=>E(null),[p]),o.useEffect(()=>{if(!(!i||!d||!f||!Yt.current))switch(Yt.current.requestType){case fr.REQUEST_TYPE_NONE:if(p)return;if(d.isBranch){for(const B of d.children)if(B&&B.isVisible){rs(B);return}}return;case fr.REQUEST_TYPE_ID:_n(Yt.current.requestById),Yt.current.resetRequest();return;case fr.REQUEST_TYPE_OFFER:Qo(Yt.current.requestedByOfferId),Yt.current.resetRequest();return;case fr.REQUEST_TYPE_NAME:Bs(Yt.current.requestByName),Yt.current.resetRequest();return}},[i,d,f,p,rs,_n,Qo,Bs]),o.useEffect(()=>{!w&&p&&p.pageId===-1&&_n(l)},[w,p,l,_n]),o.useEffect(()=>{x&&U({quantity:1,extraData:null,extraParamRequired:!1,previewStuffData:null})},[x]),o.useEffect(()=>{!i||d||(D(new Bg),D(new em),D(new Hg(m)),D(new Wg))},[i,d,m]),o.useEffect(()=>(y(new Xi(W(),++Xi.PREVIEW_COUNTER)),()=>{y(B=>(B.dispose(),null))}),[]),{isVisible:i,setIsVisible:t,isBusy:s,pageId:a,previousPageId:l,currentType:m,rootNode:d,offersToNodes:f,currentPage:p,setCurrentPage:I,currentOffer:x,setCurrentOffer:E,activeNodes:v,searchResult:w,setSearchResult:S,frontPageItems:T,roomPreviewer:k,navigationHidden:R,setNavigationHidden:O,purchaseOptions:F,setPurchaseOptions:U,catalogOptions:q,setCatalogOptions:$,getNodeById:Bn,getNodeByName:xa,activateNode:rs,openPageById:_n,openPageByName:Bs,openPageByOfferId:Qo,requestOfferToMover:or}},Ae=()=>at(DN),PN=1e3,LN=10,MN=1e3;let UN=0,FN=0;const VN=()=>{const[i,t]=gn("chatHistory",[]),[s,n]=gn("roomHistory",[]),[a,r]=gn("messengerHistory",[]),[l,c]=gn("needsRoomInsert",!1),m=g=>{g.id=UN++,t(f=>{const j=[...f];return j.push(g),j.length>PN&&j.shift(),j})},h=g=>{n(f=>{const j=[...f];return j.push(g),j.length>LN&&j.shift(),j})},d=g=>{g.id=FN++,r(f=>{const j=[...f];return j.push(g),j.length>MN&&j.shift(),j})};return Ve(yt.STARTED,g=>c(!0)),M(ua,g=>{if(!l)return;const f=g.getParser();s.length&&s[s.length-1].id===f.data.roomId||(m({id:-1,webId:-1,entityId:-1,name:f.data.roomName,timestamp:Wm(),type:Qs.TYPE_ROOM_INFO,roomId:f.data.roomId}),h({id:f.data.roomId,name:f.data.roomName}),c(!1))}),M(tm,g=>{const f=g.getParser();d({id:-1,webId:f.senderId,entityId:-1,name:"",message:f.messageText,roomId:-1,timestamp:wu(f.secondsSinceSent),type:Qs.TYPE_IM})}),M(sm,g=>{const f=g.getParser();d({id:-1,webId:f.senderId,entityId:-1,name:"",message:f.messageText,roomId:-1,timestamp:wu(),type:Qs.TYPE_IM})}),{addChatEntry:m,chatHistory:i,roomHistory:s,messengerHistory:a}},ui=()=>at(VN),GN=()=>{const[i,t]=o.useState([]),[s,n]=o.useState([]),[a,r]=o.useState([]),[l,c]=o.useState([]),[m,h]=o.useState(null),{simpleAlert:d}=Pe(),g=o.useMemo(()=>{const b=i.filter(w=>w.online);return b.sort((w,S)=>w.name<S.name?-1:w.name>S.name?1:0),b},[i]),f=o.useMemo(()=>{const b=i.filter(w=>!w.online);return b.sort((w,S)=>w.name<S.name?-1:w.name>S.name?1:0),b},[i]),j=b=>D(new lc(b.id)),p=(b,w)=>w!==b.relationshipStatus&&D(new Ea(b.id,w)),I=b=>{for(const w of i)if(w.id===b)return w;return null},x=b=>!(b===V().userId||I(b)||s.find(w=>w.requesterUserId===b)||a.indexOf(b)>=0),E=(b,w)=>{if(!x(b))return!1;r(S=>{const T=[...S];return T.push(b),T}),D(new nm(w))},v=(b,w)=>{b===-1&&!w?(D(new Kc(!0)),n([])):n(S=>{const T=[...S],L=T.findIndex(k=>k.id===b);return L===-1?S:(D(w?new ef(T[L].id):new Kc(!1,T[L].id)),T.splice(L,1),T)})};return M(zg,b=>{const w=b.getParser();h(new VC(w.userFriendLimit,w.normalFriendLimit,w.extendedFriendLimit,w.categories)),D(new qg)}),M(Yg,b=>{const w=b.getParser();t(S=>{const T=[...S];for(const L of w.fragment){const k=T.findIndex(R=>R.id===L.id),y=new os;y.populate(L),k>-1?T[k]=y:T.push(y)}return T})}),M($g,b=>{const w=b.getParser();t(S=>{const T=[...S],L=k=>{const y=T.findIndex(R=>R.id===k.id);if(y===-1){const R=new os;R.populate(k),T.unshift(R)}else T[y].populate(k)};for(const k of w.addedFriends)L(k);for(const k of w.updatedFriends)L(k);for(const k of w.removedFriendIds){const y=T.findIndex(R=>R.id===k);y>-1&&T.splice(y,1)}return T})}),M(Kg,b=>{const w=b.getParser();n(S=>{const T=[...S];for(const L of w.requests){const k=T.findIndex(y=>y.requesterUserId===L.requesterUserId);if(k>=0)T[k]=ts(T[k]),T[k].populate(L);else{const y=new Tu;y.populate(L),T.push(y)}}return T})}),M(Xg,b=>{const S=b.getParser().request;n(T=>{const L=[...T];if(L.findIndex(y=>y.requesterUserId===S.requesterUserId)===-1){const y=new Tu;y.populate(S),L.push(y)}return L})}),M(Qg,b=>{const w=b.getParser();w&&d(u(w.success?"friendbar.find.success.text":"friendbar.find.error.text"),"","","",u(w.success?"friendbar.find.success.title":"friendbar.find.error.title"))}),o.useEffect(()=>{D(new Jg);const b=window.setInterval(()=>D(new Zg),12e4);return()=>{clearInterval(b)}},[]),{friends:i,requests:s,sentRequests:a,dismissedRequestIds:l,setDismissedRequestIds:c,settings:m,onlineFriends:g,offlineFriends:f,getFriend:I,canRequestFriend:x,requestFriend:E,requestResponse:v,followFriend:j,updateRelationship:p}},cs=()=>at(GN),BN=()=>{const[i,t]=o.useState([]),[s,n]=o.useState(-1),[a,r]=o.useState([]),[l,c]=o.useState(hn.HIDDEN),{getFriend:m=null}=cs(),{simpleAlert:h=null}=Pe(),d=o.useMemo(()=>i.filter(I=>a.indexOf(I.threadId)===-1),[i,a]),g=o.useMemo(()=>s>0&&d.find(I=>I.threadId===s||null),[s,d]),f=I=>{let x=i.find(E=>E.participant&&E.participant.id===I);if(x){const E=a.indexOf(x.threadId);E>=0&&r(v=>{const b=[...v];return b.splice(E,1),b})}else{const E=m(I);if(!E)return null;x=new ql(E),x.addMessage(null,u("messenger.moderationinfo"),0,null,Pn.SECURITY_NOTIFICATION),x.setRead(),t(v=>{const b=[...v];return b.push(x),b})}return x},j=I=>{r(x=>{const E=[...x];return E.indexOf(I)>=0?x:(E.push(I),E)}),s===I&&n(-1)},p=(I,x,E,v=0,b=null,w=Pn.CHAT)=>{if(!I||!E||!E.length)return;const S=x===V().userId;S&&E.length<=255&&D(new sf(I.participant.id,E)),t(T=>{const L=[...T],k=L.findIndex(y=>y.threadId===I.threadId);return k===-1?T:(I=ts(L[k]),S&&I.groups.length===1&&In(En.MESSENGER_NEW_THREAD),I.addMessage(w===Pn.ROOM_INVITE?null:x,E,v,b,w),s===I.threadId&&I.setRead(),L[k]=I,!S&&I.unread&&In(En.MESSENGER_MESSAGE_RECEIVED),L)})};return M(tm,I=>{const x=I.getParser(),E=f(x.senderId);E&&p(E,x.senderId,x.messageText,x.secondsSinceSent,x.extraData)}),M(sm,I=>{const x=I.getParser(),E=f(x.senderId);E&&p(E,x.senderId,x.messageText,0,null,Pn.ROOM_INVITE)}),M(tf,I=>{const x=I.getParser();h(`Received room invite error: ${x.errorCode},recipients: ${x.failedRecipients}`,ge.DEFAULT,null,null,u("friendlist.alert.title"))}),o.useEffect(()=>{s<=0||t(I=>{const x=[...I],E=x.findIndex(v=>v.threadId===s);return E>=0&&(x[E]=ts(x[E]),x[E].setRead()),x})},[s]),o.useEffect(()=>{c(I=>{if(!d.length)return hn.HIDDEN;let x=!1;for(const E of d)if(E.unreadCount>0){x=!0;break}return x?hn.UNREAD:hn.SHOW})},[d]),{messageThreads:i,activeThread:g,iconState:l,visibleThreads:d,getMessageThread:f,setActiveThreadId:n,closeThread:j,sendMessage:p}},lh=()=>at(BN),HN=()=>{const[i,t]=o.useState(!1),[s,n]=o.useState(null),[a,r]=o.useState(null),[l,c]=o.useState(null),[m,h]=o.useState(!1),[d,g]=o.useState(null);return M(nf,f=>{let j=f.getParser();!j||j&&!j.games.length||(r(j.games[0]),n(j.games))}),M(rf,f=>{let j=f.getParser();j&&c(j)}),M(af,f=>{let j=f.getParser();j&&h(j.isInMaintenance)}),M(of,f=>{let j=f.getParser();if(j)switch(j.gameTypeId){case 2:return console.log("snowwar");default:return g(j.url)}}),o.useEffect(()=>{i&&(D(new lf),pc())},[i]),{isVisible:i,setIsVisible:t,games:s,accountStatus:l,selectedGame:a,setSelectedGame:r,gameOffline:m,gameURL:d,setGameURL:g}},zo=()=>at(HN),WN=()=>{const[i,t]=o.useState(null);return M(cf,s=>{const n=s.getParser(),a={badgeBases:[],badgeSymbols:[],badgePartColors:[],groupColorsA:[],groupColorsB:[]};n.bases.forEach((l,c)=>a.badgeBases.push({id:c,images:l})),n.symbols.forEach((l,c)=>a.badgeSymbols.push({id:c,images:l})),n.partColors.forEach((l,c)=>a.badgePartColors.push({id:c,color:l})),n.colorsA.forEach((l,c)=>a.groupColorsA.push({id:c,color:l})),n.colorsB.forEach((l,c)=>a.groupColorsB.push({id:c,color:l}));const r=(l,c)=>l.id<c.id?-1:l.id>c.id?1:0;a.badgeBases.sort(r),a.badgeSymbols.sort(r),a.badgePartColors.sort(r),a.groupColorsA.sort(r),a.groupColorsB.sort(r),t(a)}),o.useEffect(()=>{D(new uf)},[]),{groupCustomize:i}},di=()=>at(WN),qN=()=>{const[i,t]=o.useState(null),[s,n]=o.useState(null),{simpleAlert:a=null,showConfirm:r=null}=Pe(),l=(c,m)=>{const h={reportType:c,reportedUserId:-1,reportedChats:[],cfhCategory:-1,cfhTopic:-1,roomId:-1,roomName:"",messageId:-1,threadId:-1,groupId:-1,extraData:"",roomObjectId:-1,message:"",currentStep:0};switch(c){case Ze.BULLY:case Ze.EMERGENCY:case Ze.IM:h.reportedUserId=m.reportedUserId,h.currentStep=qt.SELECT_CHATS;break;case Ze.ROOM:h.roomId=m.roomId,h.roomName=m.roomName,h.currentStep=qt.SELECT_TOPICS;break;case Ze.THREAD:h.groupId=m.groupId,h.threadId=m.threadId,h.currentStep=qt.SELECT_TOPICS;break;case Ze.MESSAGE:h.groupId=m.groupId,h.threadId=m.threadId,h.messageId=m.messageId,h.currentStep=qt.SELECT_TOPICS;break;case Ze.PHOTO:h.extraData=m.extraData,h.roomId=m.roomId,h.reportedUserId=m.reportedUserId,h.roomObjectId=m.roomObjectId,h.currentStep=qt.SELECT_TOPICS;break}t(h)};return M(mf,c=>{const m=c.getParser();let h=m.messageText;switch(m.resultType){case so.TOO_MANY_PENDING_CALLS_CODE:D(new df),a(u("help.cfh.error.pending"),ge.MODERATION,null,null,u("help.cfh.error.title"));break;case so.HAS_ABUSIVE_CALL_CODE:a(u("help.cfh.error.abusive"),ge.MODERATION,null,null,u("help.cfh.error.title"));break;default:h.trim().length===0&&(h=u("help.cfh.sent.text")),a(h,ge.MODERATION,null,null,u("help.cfh.sent.title"))}}),M(hf,c=>{const m=c.getParser(),h=m.messageText.length===0?u("help.cfh.closed."+YC(m.closeReason)):m.messageText;a(h,ge.MODERATION,null,null,u("mod.alert.title"))}),M(ff,c=>{const m=c.getParser();m.count>0&&r(u("help.emergency.pending.title")+`
`+m.pendingCalls[0].message,()=>{D(new gf)},null,u("help.emergency.pending.button.discard"),u("help.emergency.pending.button.keep"),u("help.emergency.pending.message.subtitle"))}),M(pf,c=>{a("Your pending calls were deleted",ge.MODERATION,null,null,u("mod.alert.title"))}),M(xf,c=>{const m=c.getParser();a(m.message,ge.MODERATION,null,null,u("help.cfh.reply.title"))}),M(jf,c=>{const m=c.getParser();a(u("help.emergency.global_mute.message"),ge.MODERATION,m.infoUrl,u("help.emergency.global_mute.link"),u("help.emergency.global_mute.subtitle"))}),M(If,c=>{const m=c.getParser();n(m)}),{activeReport:i,setActiveReport:t,sanctionInfo:s,setSanctionInfo:n,report:l}},Fs=()=>at(qN),Yo=()=>{const[i,t]=o.useState([]),s=o.useMemo(()=>!!i.length,[i]),n=o.useCallback(()=>{let r=-1;return t(l=>{const c=[...l];return r=c.length?c[c.length-1]+1:0,c.push(r),c}),r},[]),a=o.useCallback(r=>{t(l=>{const c=[...l],m=c.indexOf(r);return m===-1?l:(c.splice(m,1),c)})},[]);return{isVisible:s,activate:n,deactivate:a}},zN=i=>D(new bf(i)),YN=(i,t)=>D(new Cf(i,...t)),$N=()=>{const[i,t]=o.useState(new Map),s=o.useCallback(m=>{var h;return((h=i.get(m))==null?void 0:h.length)||0},[i]),n=o.useMemo(()=>{let m=0;for(const h of i.keys())m+=s(h);return m},[i,s]),a=o.useCallback(m=>{let h=!0;return t(d=>{if(!d.has(m))return h=!1,d;const g=new Map(d);return g.delete(m),zN(m),g}),h},[]),r=o.useCallback((m,h)=>{let d=!0;return t(g=>{if(!g.has(m))return d=!1,g;const f=new Map(g),j=f.get(m);if(j)for(const p of h)j.splice(j.indexOf(p),1);return YN(m,h),f}),d},[]),l=o.useCallback((m,h)=>i.has(m)?i.get(m).indexOf(h)>=0:!1,[i]),c=o.useCallback((m,h)=>{t(d=>{if(!d.has(m))return d;const g=new Map(d),f=g.get(m),j=f.indexOf(h);return j>=0&&f.splice(j,1),g})},[]);return M(Ef,m=>{const h=m.getParser();t(d=>{const g=new Map(d);for(const f of h.categories){let j=g.get(f);j||(j=[],g.set(f,j));const p=h.getItemsByCategory(f);for(const I of p)j.indexOf(I)===-1&&j.push(I)}return g})}),{getCount:s,getFullCount:n,resetCategory:a,resetItems:r,isUnseen:l,removeUnseen:c}},Ss=()=>at($N),KN=()=>{const[i,t]=o.useState(!0),[s,n]=o.useState([]),[a,r]=o.useState(new Map),[l,c]=o.useState([]),[m,h]=o.useState(null),{isVisible:d=!1,activate:g=null,deactivate:f=null}=Yo(),{isUnseen:j=null,resetCategory:p=null}=Ss(),I=K("user.badges.max.slots",5),x=w=>l.indexOf(w)>=0,E=()=>l.length<I,v=w=>{c(S=>{const T=[...S],L=T.indexOf(w);if(L===-1){if(!E())return S;T.push(w)}else T.splice(L,1);const k=new Sf;for(let y=0;y<I;y++)k.addActivatedBadge(T[y]??"");return D(k),T})},b=w=>s.indexOf(w)===-1?0:a.get(w)??0;return M(Nf,w=>{const S=w.getParser(),T=[];r(L=>{const k=new Map(L);return S.getAllBadgeCodes().forEach(y=>{const R=s.indexOf(y)>=0,O=S.getBadgeId(y);k.set(y,O),!R&&T.push(y)}),k}),c(S.getActiveBadgeCodes()),n(L=>[...L,...T])}),M(vf,w=>{const S=w.getParser(),T=j(et.BADGE,S.badgeId);n(L=>{const k=[...L];return T?k.unshift(S.badgeCode):k.push(S.badgeCode),k}),r(L=>{const k=new Map(L);return k.set(S.badgeCode,S.badgeId),k})}),o.useEffect(()=>{!s||!s.length||h(w=>{let S=w;return S&&s.indexOf(S)===-1&&(S=null),S||(S=s[0]),S})},[s]),o.useEffect(()=>{if(d)return()=>{p(et.BADGE)}},[d,p]),o.useEffect(()=>{!d||!i||(D(new _f),t(!1))},[d,i]),{badgeCodes:s,activeBadgeCodes:l,selectedBadgeCode:m,setSelectedBadgeCode:h,isWearingBadge:x,canWearBadges:E,toggleBadge:v,getBadgeId:b,activate:g,deactivate:f}},mi=()=>at(KN),XN=()=>{const[i,t]=o.useState(!0),[s,n]=o.useState([]),[a,r]=o.useState(null),{isVisible:l=!1,activate:c=null,deactivate:m=null}=Yo(),{isUnseen:h=null,resetCategory:d=null}=Ss();return M(wf,g=>{const f=g.getParser();n(j=>{const p=[...j],I=p.map(E=>E.botData.id),x=[];for(const E of f.items.values())I.indexOf(E.id)===-1&&x.push(E);for(const E of I){let v=!0;for(const S of f.items.values())if(S.id===E){v=!1;break}if(!v)continue;const b=p.findIndex(S=>S.botData.id===E),w=p[b];b===-1||!w||(ia()===w.botData.id&&(Qa(),Q("inventory/open")),p.splice(b,1))}for(const E of x){const v={botData:E};h(et.BOT,E.id)?p.unshift(v):p.push(v)}return p})}),M(Tf,g=>{const f=g.getParser();n(j=>{const p=[...j];if(p.findIndex(v=>v.botData.id===f.item.id)>=0)return j;const x={botData:f.item};return h(et.BOT,x.botData.id)?p.unshift(x):p.push(x),p})}),M(Rf,g=>{const f=g.getParser();n(j=>{const p=[...j],I=p.findIndex(x=>x.botData.id===f.itemId);return I===-1?j:(p.splice(I,1),ia()===f.itemId&&(Qa(),Q("inventory/show")),p)})}),o.useEffect(()=>{!s||!s.length||r(g=>{let f=g;return f&&s.indexOf(f)===-1&&(f=null),f||(f=s[0]),f})},[s]),o.useEffect(()=>{if(l)return()=>{d(et.BOT)}},[l,d]),o.useEffect(()=>{!l||!i||(D(new yf),t(!1))},[l,i]),{botItems:s,selectedBot:a,setSelectedBot:r,activate:c,deactivate:m}},ch=()=>at(XN);let Ri=null;const QN=()=>{const[i,t]=o.useState(!0),[s,n]=o.useState([]),[a,r]=o.useState(null),{isVisible:l=!1,activate:c=null,deactivate:m=null}=Yo(),{isUnseen:h=null,resetCategory:d=null}=Ss(),g=p=>{if(!(!s||!s.length))return s.filter(I=>I.type===p)},f=p=>{if(!(!s||!s.length)){for(const I of s){const x=I.getItemById(p);if(x&&x.isWallItem)return I}return null}},j=p=>{if(!(!s||!s.length)){for(const I of s){const x=I.getItemById(p);if(x&&!x.isWallItem)return I}return null}};return M(rm,p=>{const I=p.getParser();n(x=>{const E=[...x];for(const v of I.items){let b=0,w=null;for(;b<E.length;){const S=E[b];let T=0;for(;T<S.items.length;){const L=S.items[T];if(L.id===v.itemId){L.update(v);const k=[...S.items];k[T]=L,S.items=k,w=S;break}T++}if(w)break;b++}if(w)w.hasUnseenItems=!0,E[b]=ts(w);else{const S=new Xa(v);bu(E,S,h(et.FURNI,v.itemId)),pt(new si(S.id,S.type,S.category))}}return E})}),M(Ll,p=>{const I=p.getParser();Ri||(Ri=new Array(I.totalFragments));const x=CC(I.fragment,I.totalFragments,I.fragmentNumber,Ri);x&&(n(E=>{const v=[...E],b=NC(v);for(const w of b){if(x.get(w))continue;let S=0;for(;S<v.length;){const T=v[S],L=T.remove(w);if(!L){S++;continue}ia()===L.ref&&(Qa(),oa(T)||Q("inventory/show")),T.getTotalCount()<=0&&(v.splice(S,1),T.dispose());break}}for(const w of x.keys()){if(b.indexOf(w)>=0)continue;const S=x.get(w);if(!S)continue;const T=new Xa(S);bu(v,T,h(et.FURNI,w)),pt(new si(T.id,T.type,T.category))}return v}),Ri=null)}),M(Of,p=>{t(!0)}),M(am,p=>{const I=p.getParser();n(x=>{const E=[...x];let v=0;for(;v<E.length;){const b=E[v],w=b.remove(I.itemId);if(!w){v++;continue}ia()===w.ref&&(Qa(),oa(b)||Q("inventory/show")),b.getTotalCount()<=0&&(E.splice(v,1),b.dispose());break}return E})}),M(kf,p=>{}),o.useEffect(()=>{!s||!s.length||r(p=>{let I=p;return I&&s.indexOf(I)===-1&&(I=null),I||(I=s[0]),I})},[s]),o.useEffect(()=>{if(l)return()=>{d(et.FURNI)&&n(p=>{const I=[...p];for(const x of I)x.hasUnseenItems=!1;return I})}},[l,d]),o.useEffect(()=>{!l||!i||(D(new Af),t(!1))},[l,i]),{isVisible:l,groupItems:s,setGroupItems:n,selectedItem:a,setSelectedItem:r,activate:c,deactivate:m,getWallItemById:f,getFloorItemById:j,getItemsByType:g}},ar=()=>at(QN);let yi=null;const JN=()=>{const[i,t]=o.useState(!0),[s,n]=o.useState([]),[a,r]=o.useState(null),{isVisible:l=!1,activate:c=null,deactivate:m=null}=Yo(),{isUnseen:h=null,resetCategory:d=null}=Ss();return M(Df,g=>{const f=g.getParser();yi||(yi=new Array(f.totalFragments));const j=wC(f.fragment,f.totalFragments,f.fragmentNumber,yi);j&&(n(p=>{const I=[...p];return SC(I,j,h),I}),yi=null)}),M(Pf,g=>{const f=g.getParser();n(j=>{const p=[...j];return Bm(f.pet,p,h(et.PET,f.pet.id)),p})}),M(Lf,g=>{const f=g.getParser();n(j=>{const p=[...j];return Hm(f.petId,p),p})}),o.useEffect(()=>{!s||!s.length||r(g=>{let f=g;return f&&s.indexOf(f)===-1&&(f=null),f||(f=s[0]),f})},[s]),o.useEffect(()=>{if(l)return()=>{d(et.PET)}},[l,d]),o.useEffect(()=>{!l||!i||(D(new Mf),t(!1))},[l,i]),{petItems:s,selectedPet:a,setSelectedPet:r,activate:c,deactivate:m}},uh=()=>at(JN),ZN=()=>{const[i,t]=o.useState(null),[s,n]=o.useState(null),[a,r]=o.useState(bt.TRADING_STATE_READY),{groupItems:l=[],setGroupItems:c=null,activate:m=null,deactivate:h=null}=ar(),{simpleAlert:d=null,showTradeAlert:g=null}=Pe(),f=a>=bt.TRADING_STATE_RUNNING,j=()=>{switch(a){case bt.TRADING_STATE_RUNNING:!s.itemCount&&!i.accepts&&d(u("inventory.trading.warning.other_not_offering"),null,null,null),i.accepts?D(new Xf):D(new Qf);return;case bt.TRADING_STATE_CONFIRMING:D(new Kf),r(bt.TRADING_STATE_CONFIRMED);return}},p=x=>{const E=x.getLastItem();E&&D(new Jf(E.id))},I=()=>{if(f)switch(a){case bt.TRADING_STATE_RUNNING:D(new ep);return;default:D(new Zf);return}};return M(Uf,x=>{const E=x.getParser();!i||!s||(i.userId===E.userID?t(v=>{const b=ts(v);return b.accepts=E.userAccepts,b}):s.userId===E.userID&&n(v=>{const b=ts(v);return b.accepts=E.userAccepts,b}))}),M(Vf,x=>{const E=x.getParser();E.reason===Ff.ERROR_WHILE_COMMIT?g(is.ERROR_WHILE_COMMIT):i&&E.userID!==i.userId&&g(is.THEY_CANCELLED),t(null),n(null),r(bt.TRADING_STATE_READY)}),M(Gf,x=>{x.getParser(),t(null),n(null),r(bt.TRADING_STATE_READY)}),M(Bf,x=>{x.getParser(),r(bt.TRADING_STATE_COUNTDOWN)}),M(Hf,x=>{const E=x.getParser(),v=vu(E.firstUserItemArray),b=vu(E.secondUserItemArray);t(w=>{const S=ts(w);S.userId===E.firstUserID?(S.creditsCount=E.firstUserNumCredits,S.itemCount=E.firstUserNumItems,S.userItems=v):(S.creditsCount=E.secondUserNumCredits,S.itemCount=E.secondUserNumItems,S.userItems=b);const T=[];for(const L of S.userItems.getValues()){let k=0;for(;k<L.getTotalCount();){const y=L.getItemByIndex(k);y&&T.push(y.ref),k++}}return c(L=>{const k=[...L];for(const y of k)y.lockItemIds(T);return k}),S}),n(w=>{const S=ts(w);return S.userId===E.firstUserID?(S.creditsCount=E.firstUserNumCredits,S.itemCount=E.firstUserNumItems,S.userItems=v):(S.creditsCount=E.secondUserNumCredits,S.itemCount=E.secondUserNumItems,S.userItems=b),S})}),M(Wf,x=>{x.getParser()}),M(qf,x=>{const E=x.getParser(),v=new Cu,b=ve().userDataManager.getUserData(E.userID);v.userItems=new Ga;const w=new Cu,S=ve().userDataManager.getUserData(E.otherUserID);w.userItems=new Ga,b.webID===V().userId?(v.userId=b.webID,v.userName=b.name,v.canTrade=E.userCanTrade,w.userId=S.webID,w.userName=S.name,w.canTrade=E.otherUserCanTrade):S.webID===V().userId&&(v.userId=S.webID,v.userName=S.name,v.canTrade=E.otherUserCanTrade,w.userId=b.webID,w.userName=b.name,w.canTrade=E.userCanTrade),t(v),n(w),r(bt.TRADING_STATE_RUNNING)}),M(zf,x=>{const E=x.getParser();g(E.reason,E.otherUserName)}),M(Yf,x=>{x.getParser(),g(is.THEY_NOT_ALLOWED)}),M($f,x=>{x.getParser(),g(is.YOU_NOT_ALLOWED)}),o.useEffect(()=>{if(a===bt.TRADING_STATE_READY)return;const x=m();return()=>h(x)},[a,m,h]),{ownUser:i,otherUser:s,tradeState:a,setTradeState:r,isTrading:f,groupItems:l,progressTrade:j,removeItem:p,stopTrading:I}},Oc=()=>at(ZN),ev=()=>{const[i,t]=o.useState(null),[s,n]=o.useState([]),[a,r]=o.useState([]),[l,c]=o.useState([]),[m,h]=o.useState([]),[d,g]=o.useState([]),[f,j]=o.useState([]),{simpleAlert:p=null}=Pe(),I=O=>{s.indexOf(O)>=0||n(F=>[...F,O])},x=O=>{n(F=>{const U=[...F],q=U.indexOf(O);return q>=0&&U.splice(q),U})},E=O=>{s.indexOf(O)>=0?x(O):I(O)},v=O=>{a.indexOf(O)>=0||r(F=>[...F,O])},b=O=>{r(F=>{const U=[...F],q=U.indexOf(O);return q>=0&&U.splice(q),U})},w=O=>{a.indexOf(O)>=0?b(O):v(O)},S=O=>{l.indexOf(O)>=0||c(F=>[...F,O])},T=O=>{c(F=>{const U=[...F],q=U.indexOf(O);return q>=0&&U.splice(q),U})},L=O=>{l.indexOf(O)>=0?T(O):S(O)},k=O=>{m.indexOf(O)>=0||h(F=>[...F,O])},y=O=>{h(F=>{const U=[...F],q=U.indexOf(O);return q>=0&&U.splice(q),U})},R=O=>{a.indexOf(O)>=0?y(O):k(O)};return M(tp,O=>{const U=O.getParser().data;t(U),g(U.issues)}),M(sp,O=>{const F=O.getParser();g(U=>{const q=[...U],$=q.findIndex(G=>G.issueId===F.issueData.issueId);return $>=0?q[$]=F.issueData:(q.push(F.issueData),In(En.MODTOOLS_NEW_TICKET)),q})}),M(np,O=>{O.getParser()}),M(rp,O=>{O.getParser()&&p("Failed to pick issue",ge.DEFAULT,null,null,"Error")}),M(ap,O=>{const F=O.getParser();g(U=>{const q=[...U],$=q.findIndex(G=>G.issueId===F.issueId);return $>=0&&q.splice($,1),q})}),M(ip,O=>{O.getParser().success?p("Moderation action was successfull",ge.MODERATION,null,null,"Success"):p("There was a problem applying tht moderation action",ge.MODERATION,null,null,"Error")}),M(op,O=>{const F=O.getParser();j(F.callForHelpCategories)}),M(lp,O=>{O.getParser()}),{settings:i,openRooms:s,openRoomChatlogs:a,openUserChatlogs:m,openUserInfos:l,cfhCategories:f,tickets:d,openRoomInfo:I,closeRoomInfo:x,toggleRoomInfo:E,openRoomChatlog:v,closeRoomChatlog:b,toggleRoomChatlog:w,openUserInfo:S,closeUserInfo:T,toggleUserInfo:L,openUserChatlog:k,closeUserChatlog:y,toggleUserChatlog:R}},ma=()=>at(ev),tv=()=>{const[i,t]=o.useState(null),[s,n]=o.useState(null),[a,r]=o.useState(null),[l,c]=o.useState(null),[m,h]=o.useState({roomInfo:null,state:Ge.NONE}),[d,g]=o.useState(null),[f,j]=o.useState(""),[p,I]=o.useState(null),[x,E]=o.useState({settingsReceived:!1,homeRoomId:0,enteredGuestRoom:null,currentRoomOwner:!1,currentRoomId:0,currentRoomIsStaffPick:!1,createdFlatId:0,avatarId:0,roomPicker:!1,eventMod:!1,currentRoomRating:0,canRate:!0}),{simpleAlert:v=null}=Pe();return M(cp,b=>{const w=b.getParser();D(new Ki(w.roomId,!1,!1))}),M(up,b=>{const w=b.getParser();w.canCreate||v(u(`navigator.cannotcreateevent.error.${w.errorCode}`),null,null,null,u("navigator.cannotcreateevent.title"))}),M(om,b=>{D(new dp),D(new im)}),M(mp,b=>{const w=b.getParser();E(S=>{const T={...S};return T.eventMod=w.securityLevel>=Qi.MODERATOR,T.roomPicker=w.securityLevel>=Qi.COMMUNITY,T})}),M(hp,b=>{const w=b.getParser();ss(w.roomId)}),M(lm,b=>{const w=b.getParser();E(S=>{const T={...S};return T.enteredGuestRoom=null,T.currentRoomOwner=w.isOwner,T.currentRoomId=w.roomId,T}),D(new Ki(w.roomId,!0,!1)),Ha.available&&Ha.call("legacyTrack","navigator","private",[w.roomId])}),M(ua,b=>{const w=b.getParser();if(w.roomEnter)h({roomInfo:null,state:Ge.NONE}),E(S=>{const T={...S};return T.enteredGuestRoom=w.data,T.currentRoomIsStaffPick=w.staffPick,!(T.createdFlatId===w.data.roomId)&&w.data.displayRoomEntryAd&&K("roomenterad.habblet.enabled",!1)&&ni.openRoomEnterAd(),T.createdFlatId=0,T.enteredGuestRoom&&T.enteredGuestRoom.habboGroupId>0,T});else if(w.roomForward){if(w.data.ownerName!==V().userName&&!w.isGroupMember)switch(w.data.doorMode){case Je.DOORBELL_STATE:h(S=>{const T={...S};return T.roomInfo=w.data,T.state=Ge.START_DOORBELL,T});return;case Je.PASSWORD_STATE:h(S=>{const T={...S};return T.roomInfo=w.data,T.state=Ge.START_PASSWORD,T});return}if(w.data.doorMode===Je.NOOB_STATE&&!V().isAmbassador&&!V().isRealNoob&&!V().isModerator)return;br(w.data.roomId)}else E(S=>{const T={...S};return T.enteredGuestRoom=w.data,T.currentRoomIsStaffPick=w.staffPick,T})}),M(gp,b=>{const w=b.getParser();E(S=>{const T={...S};return T.currentRoomRating=w.totalLikes,T.canRate=w.canLike,T})}),M(fp,b=>{const w=b.getParser();(!w.userName||w.userName.length===0)&&h(S=>{const T={...S};return T.state=Ge.STATE_WAITING,T})}),M(pp,b=>{const w=b.getParser();(!w.userName||w.userName.length===0)&&h(S=>{const T={...S};return T.state=Ge.STATE_ACCEPTED,T})}),M(xp,b=>{const w=b.getParser();(!w.userName||w.userName.length===0)&&h(S=>{const T={...S};return T.state=Ge.STATE_NO_ANSWER,T})}),M(jp,b=>{switch(b.getParser().errorCode){case-100002:h(S=>{const T={...S};return T.state=Ge.STATE_WRONG_PASSWORD,T});return;case 4009:v(u("navigator.alert.need.to.be.vip"),ge.DEFAULT,null,null,u("generic.alert.title"));return;case 4010:v(u("navigator.alert.invalid_room_name"),ge.DEFAULT,null,null,u("generic.alert.title"));return;case 4011:v(u("navigator.alert.cannot_perm_ban"),ge.DEFAULT,null,null,u("generic.alert.title"));return;case 4013:v(u("navigator.alert.room_in_maintenance"),ge.DEFAULT,null,null,u("generic.alert.title"));return}}),M(Ip,b=>{const w=b.getParser();c(w.topLevelContexts),r(w.topLevelContexts.length?w.topLevelContexts[0]:null)}),M(Ep,b=>{const w=b.getParser();r(S=>{let T=S;if(T||(T=l&&l.length&&l[0]||null),!T)return null;if(w.result.code!==T.code&&l&&l.length)for(const L of l)L.code===w.result.code&&(T=L);for(const L of l)L.code===w.result.code&&(T=L);return T}),g(w.result),j(w.result.data)}),M(bp,b=>{const w=b.getParser();t(w.categories)}),M(Cp,b=>{const w=b.getParser();n(w.categories)}),M(Np,b=>{const w=b.getParser();br(w.roomId)}),M(vp,b=>{const w=b.getParser();let S=!1;if(E(k=>{S=k.settingsReceived;const y={...k};return y.homeRoomId=w.homeRoomId,y.settingsReceived=!0,y}),S)return;let T=-1,L=-1;K("friend.id")!==void 0&&parseInt(K("friend.id"))>0&&(T=0,D(new lc(parseInt(K("friend.id"))))),K("forward.type")!==void 0&&K("forward.id")!==void 0&&(T=parseInt(K("forward.type")),L=parseInt(K("forward.id"))),T===2?ss(L):T===-1&&w.roomIdToEnter>0&&(Q("navigator/close"),w.roomIdToEnter!==w.homeRoomId?br(w.roomIdToEnter):br(w.homeRoomId))}),M(_p,b=>{const w=b.getParser();switch(w.reason){case el.REASON_FULL:v(u("navigator.guestroomfull.text"),ge.DEFAULT,null,null,u("navigator.guestroomfull.title"));break;case el.REASON_QUEUE_ERROR:v(u(`room.queue.error.${w.parameter}`),ge.DEFAULT,null,null,u("room.queue.error.title"));break;case el.REASON_BANNED:v(u("navigator.banned.text"),ge.DEFAULT,null,null,u("navigator.banned.title"));break;default:v(u("room.queue.error.title"),ge.DEFAULT,null,null,u("room.queue.error.title"));break}pc()}),M(Sp,b=>Q("navigator/show")),M(wp,b=>{const w=b.getParser();w&&I(w.searches)}),{categories:i,doorData:m,setDoorData:h,topLevelContext:a,topLevelContexts:l,searchResult:d,navigatorData:x,navigatorSearches:p,searchResultQuery:f}},Vs=()=>at(tv),sv=()=>{const[i,t]=o.useState(new _c),s=o.useMemo(()=>K("hc.disabled",!1),[]),n=o.useMemo(()=>s||i.clubDays>0?un.ACTIVE:i.pastVipDays>0||i.pastVipDays>0?un.EXPIRED:un.NONE,[i,s]),a=r=>{if(r===-1)return i.credits;for(const[l,c]of i.activityPoints.entries())if(l===r)return c;return 0};return M(Tp,r=>{const l=r.getParser();t(c=>{const m=ts(c);return m.credits=parseFloat(l.credits),c.credits!==m.credits&&In(En.CREDITS),m})}),M(Rp,r=>{const l=r.getParser();t(c=>{const m=ts(c);return m.activityPoints=l.currencies,m})}),M(Qd,r=>{const l=r.getParser();t(c=>{const m=ts(c);return m.activityPoints=new Map(m.activityPoints),m.activityPoints.set(l.type,l.amount),l.type===0&&In(En.DUCKETS),m})}),M(Op,r=>{const l=r.getParser(),c=l.productName;c!=="club_habbo"&&c!=="habbo_club"||t(m=>{const h=ts(m);return h.clubDays=Math.max(0,l.daysToPeriodEnd),h.clubPeriods=Math.max(0,l.periodsSubscribedAhead),h.isVip=l.isVip,h.pastClubDays=l.pastClubDays,h.pastVipDays=l.pastVipDays,h.isExpiring=l.responseType===yp.RESPONSE_TYPE_DISCOUNT_AVAILABLE,h.minutesUntilExpiration=l.minutesUntilExpiration,h.minutesSinceLastModified=l.minutesSinceLastModified,h})}),o.useEffect(()=>{if(s)return;D(new Xc("habbo_club"));const r=setInterval(()=>D(new Xc("habbo_club")),5e4);return()=>clearInterval(r)},[s]),o.useEffect(()=>{D(new kp)},[]),{purse:i,hcDisabled:s,clubStatus:n,getCurrencyAmount:a}},Lr=()=>at(sv),nv=(i,t)=>{o.useEffect(()=>{if(!i)return;const s=n=>t(n);return jn.addEventListener(Fe.FURNI_ADDED,s),()=>{jn.removeEventListener(Fe.FURNI_ADDED,s)}},[i,t])},ws=(i,t)=>{o.useEffect(()=>{if(!i)return;const s=n=>t(n);return jn.addEventListener(Fe.FURNI_REMOVED,s),()=>{jn.removeEventListener(Fe.FURNI_REMOVED,s)}},[i,t])},rv=i=>{rt(Fe.OBJECT_DESELECTED,i)},av=i=>{rt(Fe.OBJECT_ROLL_OUT,i)},iv=i=>{rt(Fe.OBJECT_ROLL_OVER,i)},kc=i=>{rt(Fe.OBJECT_SELECTED,i)},dh=(i,t)=>{o.useEffect(()=>{if(!i)return;const s=n=>t(n);return jn.addEventListener(Fe.USER_ADDED,s),()=>{jn.removeEventListener(Fe.USER_ADDED,s)}},[i,t])},mh=(i,t)=>{o.useEffect(()=>{if(!i)return;const s=n=>t(n);return jn.addEventListener(Fe.USER_REMOVED,s),()=>{jn.removeEventListener(Fe.USER_REMOVED,s)}},[i,t])},ov=()=>{const[i,t]=o.useState(null),[s,n]=o.useState(!1);return M(Ap,a=>{const r=a.getParser();r&&t(r)}),{promoteInformation:i,isExtended:s,setPromoteInformation:t,setIsExtended:n}},Ac=()=>at(ov),lv=()=>{const[i,t]=o.useState(null),[s,n]=o.useState(null),[a,r]=o.useState(null),[l,c]=o.useState(0),m=(d,g,f,j=!1)=>{if(!s)return;const p=fs.hslToRGB(((d&255)<<16)+((g&255)<<8)+(f&255));j&&c(p),!d&&!g&&!f?s.tint=0:s.tint=p},h=d=>{if(!a)return;const g=d>>16&255,f=d>>8&255,j=d&255;a.red=g/255,a.green=f/255,a.blue=j/255};return rt(Qn.PREVIEW,d=>m(d.hue,d.saturation,d.lightness)),rt(Qn.CLEAR_PREVIEW,d=>{s&&(s.tint=l)}),Ie(Dp.ROOM_BACKGROUND_COLOR,d=>{Er.isRoomPreviewerId(d.roomId)||(d.enable?m(d.hue,d.saturation,d.lightness,!0):m(0,0,0,!0))}),Ie(Pp.ROOM_COLOR,d=>{if(Er.isRoomPreviewerId(d.roomId))return;let g=0,f=255;d.bgOnly||(g=d.color,f=d.brightness),h(fs.hslToRGB((fs.rgbToHSL(g)&16776960)+f))}),Ie([Ns.INITIALIZED,Ns.DISPOSED],d=>{if(Er.isRoomPreviewerId(d.roomId))return;const g=ve();if(g)switch(d.type){case Ns.INITIALIZED:ju(d.roomId),t(g);return;case Ns.DISPOSED:t(null);return}}),Ve([yt.CREATED,yt.ENDED],d=>{switch(d.type){case yt.CREATED:hC(d.session);return;case yt.ENDED:t(null);return}}),Ie([gt.SELECTED,gt.DESELECTED,gt.ADDED,gt.REMOVED,gt.PLACED,gt.REQUEST_MOVE,gt.REQUEST_ROTATE,gt.MOUSE_ENTER,gt.MOUSE_LEAVE,gt.DOUBLE_CLICK],d=>{if(Er.isRoomPreviewerId(d.roomId))return;let g=null;switch(d.type){case gt.SELECTED:fC(d)||(g=new Fe(Fe.OBJECT_SELECTED,d.objectId,d.category,d.roomId));break;case gt.DESELECTED:g=new Fe(Fe.OBJECT_DESELECTED,d.objectId,d.category,d.roomId);break;case gt.ADDED:{let f=null;switch(d.category){case X.FLOOR:case X.WALL:f=Fe.FURNI_ADDED;break;case X.UNIT:f=Fe.USER_ADDED;break}f&&(g=new Fe(f,d.objectId,d.category,d.roomId));break}case gt.REMOVED:{let f=null;switch(d.category){case X.FLOOR:case X.WALL:f=Fe.FURNI_REMOVED;break;case X.UNIT:f=Fe.USER_REMOVED;break}f&&(g=new Fe(f,d.objectId,d.category,d.roomId));break}case gt.REQUEST_MOVE:qa(i,d.objectId,d.category)&&Nr(d.objectId,d.category,Ms.OBJECT_MOVE);break;case gt.REQUEST_ROTATE:qa(i,d.objectId,d.category)&&Nr(d.objectId,d.category,Ms.OBJECT_ROTATE_POSITIVE);break;case gt.MOUSE_ENTER:g=new Fe(Fe.OBJECT_ROLL_OVER,d.objectId,d.category,d.roomId);break;case gt.MOUSE_LEAVE:g=new Fe(Fe.OBJECT_ROLL_OUT,d.objectId,d.category,d.roomId);break;case gt.DOUBLE_CLICK:g=new Fe(Fe.OBJECT_DOUBLE_CLICKED,d.objectId,d.category,d.roomId);break}g&&pt(g)}),o.useEffect(()=>{if(!i)return;const d=pe(),g=W(),f=i.roomId,j=1,p=Math.floor(window.innerWidth),I=Math.floor(window.innerHeight),x=d.application.renderer;x&&(x.view.style.width=`${p}px`,x.view.style.height=`${I}px`,x.resolution=window.devicePixelRatio,x.resize(p,I));const E=g.getRoomInstanceDisplay(f,j,p,I,Lp.SCALE_ZOOMED_IN),v=W().getRoomInstanceRenderingCanvas(f,j);if(!E||!v)return;const b=new Yi(Mp.WHITE),w=new Up,S=v.master;b.tint=0,b.width=p,b.height=I,S.addChildAt(b,0),S.filters=[w],n(b),r(w);const T=g.getRoomInstanceGeometry(f,j);if(T){const y=g.getRoomInstanceVariable(f,fi.ROOM_MIN_X)||0,R=g.getRoomInstanceVariable(f,fi.ROOM_MAX_X)||0,O=g.getRoomInstanceVariable(f,fi.ROOM_MIN_Y)||0,F=g.getRoomInstanceVariable(f,fi.ROOM_MAX_Y)||0;let U=(y+R)/2,q=(O+F)/2;const $=20;U=U+($-1),q=q+($-1);const G=Math.sqrt($*$+$*$)*Math.tan(30/180*Math.PI);T.location=new vt(U,q,G)}const L=d.application.stage;if(!L)return;L.addChild(E),ju(i.roomId);const k=y=>{const R=Math.floor(window.innerWidth),O=Math.floor(window.innerHeight);x.view.style.width=`${R}px`,x.view.style.height=`${O}px`,x.resolution=window.devicePixelRatio,x.resize(R,O),b.width=R,b.height=O,gC(R,O,1),d.application.render()};return window.addEventListener("resize",k),()=>{n(null),r(null),c(0),window.removeEventListener("resize",k)}},[i]),{roomSession:i}},Re=()=>at(lv),cv=()=>{const[i,t]=o.useState(-1),[s,n]=o.useState(-1),[a,r]=o.useState(0),{roomSession:l=null}=Re(),c=()=>{const d=fs.rgbToHSL(a),[g,f,j,p]=ls.int_to_8BitVals(d);D(new Fp(i,f,j,p))},m=()=>l.useMultistateItem(i),h=()=>{pt(new Qn(Qn.CLEAR_PREVIEW)),t(-1),n(-1),r(0)};return Ie(be.REQUEST_BACKGROUND_COLOR,d=>{if(!qa(l,d.objectId,d.category))return;const f=W().getRoomObject(d.roomId,d.objectId,d.category).model;t(d.objectId),n(d.category);const j=parseInt(f.getValue(Z.FURNITURE_ROOM_BACKGROUND_COLOR_HUE)),p=parseInt(f.getValue(Z.FURNITURE_ROOM_BACKGROUND_COLOR_SATURATION)),I=parseInt(f.getValue(Z.FURNITURE_ROOM_BACKGROUND_COLOR_LIGHTNESS)),x=ls.eight_bitVals_to_int(0,j,p,I),E=fs.hslToRGB(x);r(E)}),ws(i!==-1&&s!==-1,d=>{d.id!==i||d.category!==s||h()}),o.useEffect(()=>{if(i===-1||s===-1)return;const d=fs.rgbToHSL(a),[g,f,j,p]=ls.int_to_8BitVals(d);pt(new Qn(Qn.PREVIEW,f,j,p))},[i,s,a]),{objectId:i,color:a,setColor:r,applyToner:c,toggleToner:m,onClose:h}},uv=cv,dv=()=>{const[i,t]=o.useState(-1),[s,n]=o.useState(-1),[a,r]=o.useState("1"),[l,c]=o.useState(""),[m,h]=o.useState(""),[d,g]=o.useState(""),[f,j]=o.useState(""),{simpleAlert:p=null}=Pe(),I=()=>{t(-1),n(-1),r("1"),c(""),h(""),g(""),j("")};return Ie([be.REQUEST_BADGE_DISPLAY_ENGRAVING,be.REQUEST_ACHIEVEMENT_RESOLUTION_ENGRAVING],x=>{const E=W().getRoomObject(x.roomId,x.objectId,x.category);if(!E)return;const v=new ri;v.initializeFromRoomObjectModel(E.model),t(x.objectId),n(x.category),r("1"),c(da(v.getValue(1))),h(Ec(v.getValue(1))),g(v.getValue(2)),j(v.getValue(3))}),Ie(be.REQUEST_ACHIEVEMENT_RESOLUTION_FAILED,x=>{const E=W().getRoomObject(x.roomId,x.objectId,x.category);!E||E.model.getValue(Z.FURNITURE_OWNER_ID)!==V().userId||p(`${u("resolution.failed.subtitle")} ${u("resolution.failed.text")}`,null,null,null,u("resolution.failed.title"))}),ws(i!==-1&&s!==-1,x=>{x.id!==i||x.category!==s||I()}),{objectId:i,category:s,color:a,badgeName:l,badgeDesc:m,date:d,senderName:f,onClose:I}},mv=dv,Kl="MONSTERPLANT_SEED_CONFIRMATION",Xl="PURCHASABLE_CLOTHING_CONFIRMATION",hh="GROUP_FURNITURE",gh="EFFECTBOX_OPEN",Ql="MYSTERYTROPHY_OPEN_DIALOG",hv=()=>{const[i,t]=o.useState(-1),[s,n]=o.useState(null),[a,r]=o.useState(null),[l,c]=o.useState(-1),[m,h]=o.useState(null),[d,g]=o.useState(!1),[f,j]=o.useState(-1),{roomSession:p=null}=Re(),I=()=>{t(-1),h(null),g(!1),n(null)},x=()=>{r(null),c(-1)},E=v=>{if(v)switch(v){case"use_friend_furni":p.useMultistateItem(i);break;case"use_monsterplant_seed":r(Kl),c(i);break;case"use_random_teleport":W().useRoomObject(i,X.FLOOR);break;case"use_purchaseable_clothing":r(Xl),c(i);break;case"use_mystery_box":p.useMultistateItem(i);break;case"use_mystery_trophy":r(Ql),c(i);break;case"join_group":vc(m.guildId),g(!0);return;case"go_to_group_homeroom":m&&ss(m.guildHomeRoomId);break}I()};return Ie([be.OPEN_FURNI_CONTEXT_MENU,be.CLOSE_FURNI_CONTEXT_MENU,be.REQUEST_MONSTERPLANT_SEED_PLANT_CONFIRMATION_DIALOG,be.REQUEST_PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG,be.REQUEST_EFFECTBOX_OPEN_DIALOG,be.REQUEST_MYSTERYBOX_OPEN_DIALOG,be.REQUEST_MYSTERYTROPHY_OPEN_DIALOG],v=>{const b=W().getRoomObject(p.roomId,v.objectId,v.category);if(b)switch(j(b.model.getValue(Z.FURNITURE_OWNER_ID)),v.type){case be.REQUEST_MONSTERPLANT_SEED_PLANT_CONFIRMATION_DIALOG:if(!Wt(b))return;c(b.id),r(Kl),I();return;case be.REQUEST_EFFECTBOX_OPEN_DIALOG:if(!Wt(b))return;c(b.id),r(gh),I();return;case be.REQUEST_PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG:if(!Wt(b))return;c(b.id),r(Xl),I();return;case be.REQUEST_MYSTERYBOX_OPEN_DIALOG:p.useMultistateItem(b.id),I();return;case be.REQUEST_MYSTERYTROPHY_OPEN_DIALOG:if(!Wt(b))return;c(b.id),r(Ql),I();return;case be.OPEN_FURNI_CONTEXT_MENU:switch(t(b.id),v.contextMenu){case Lt.FRIEND_FURNITURE:n(Lt.FRIEND_FURNITURE);return;case Lt.MONSTERPLANT_SEED:Wt(b)&&n(Lt.MONSTERPLANT_SEED);return;case Lt.MYSTERY_BOX:n(Lt.MYSTERY_BOX);return;case Lt.MYSTERY_TROPHY:Wt(b)&&n(Lt.MYSTERY_TROPHY);return;case Lt.RANDOM_TELEPORT:n(Lt.RANDOM_TELEPORT);return;case Lt.PURCHASABLE_CLOTHING:Wt(b)&&n(Lt.PURCHASABLE_CLOTHING);return}return;case be.CLOSE_FURNI_CONTEXT_MENU:b.id===i&&I();return}}),M(Vp,v=>{const b=v.getParser();t(b.objectId),h(b),g(b.userIsMember),n(hh)}),{objectId:i,mode:s,confirmMode:a,confirmingObjectId:l,groupData:m,isGroupMember:d,objectOwnerId:f,closeConfirm:x,processAction:E,onClose:I}},gv=hv,fv=()=>{const[i,t]=o.useState(-1),[s,n]=o.useState([]),[a,r]=o.useState(null),[l,c]=o.useState([]),[m,h]=o.useState(null),[d,g]=o.useState(new Map),[f,j]=o.useState(!1),{groupItems:p=[],getItemsByType:I=null,activate:x=null,deactivate:E=null}=ar(),{simpleAlert:v=null}=Pe(),b=a&&d.get(a.name)||null,w=()=>{n([]),r(null),c([]),g(new Map)},S=()=>{t(-1),w()},T=()=>{j(!0),D(new Yp(i,a.name))},L=k=>{r(k),d.get(k.name)||D(new $p(k.name))};return Ie(be.OPEN_WIDGET,k=>{k.widget===Gp.CRAFTING&&(t(k.objectId),w(),D(new Bp(k.objectId)))}),M(Hp,k=>{const y=k.getParser();if(!y.isActive()){t(-1);return}n(R=>{const O=[];for(const F of y.recipes){const U=W().roomContentLoader._activeObjectTypeIds.get(F.itemName),q=W().getFurnitureFloorIconUrl(U);O.push({name:F.recipeName,localizedName:u("roomItem.name."+U),iconUrl:q})}return O}),h(y.ingredients)}),M(Wp,k=>{const y=k.getParser();g(R=>{const O=new Map(R);return O.set(a.name,y.ingredients),O})}),M(qp,k=>{r(null),j(!1),k.getParser().result&&v(u("crafting.info.result.ok"))}),M(zp,k=>{}),o.useEffect(()=>{!m||!m.length||c(k=>{const y=[];for(const R of m){const O=W().roomContentLoader._activeObjectTypeIds.get(R),F=W().getFurnitureFloorIconUrl(O),U=I(O);let q=0;if(U)for(const $ of U)q+=$.items.length;y.push({name:R,iconUrl:F,count:q})}return y})},[p,m,I]),o.useEffect(()=>{if(i===-1)return;const k=x();return()=>E(k)},[i,x,E]),{objectId:i,recipes:s,ingredients:l,selectedRecipe:a,requiredIngredients:b,isCrafting:f,selectRecipe:L,craft:T,onClose:S}},pv=fv,xv=()=>{const[i,t]=o.useState([]),[s,n]=o.useState(0),[a,r]=o.useState(0),[l,c]=o.useState(0),[m,h]=o.useState(0),[d,g]=o.useState(16777215),[f,j]=o.useState(255),[p,I]=o.useState(0),[x,E]=o.useState(0),[v,b]=o.useState(0),{roomSession:w=null}=Re(),S=()=>w.isRoomOwner||w.controllerLevel>=qe.GUEST||V().isModerator,T=k=>{const y=i[k-1];y&&(n(y.id),I(y.type),E(y.color),b(y.light))},L=()=>{if(a===0)return;const k=s-1;if(s<1||s>i.length)return;const y=i[k];!y||p===y.type&&x===y.color&&v===y.light||(t(R=>{const O=[...R];return O[k]=new Au(y.id,p,x,v),O}),Ps.savePreset(y.id,p,x,v,!0))};return Ie(be.REQUEST_DIMMER,k=>{S()&&w.requestMoodlightSettings()}),Ve(Kp.ROOM_DIMMER_PRESETS,k=>{const y=[];let R=0;for(;R<k.presetCount;){const O=k.getPreset(R);O&&y.push(new Au(O.id,O.type,O.color,O.brightness)),R++}t(y),n(k.selectedPresetId)}),Ie(Xp.ROOM_COLOR,k=>{Er.isRoomPreviewerId(k.roomId)||(c(a),r(k.state),n(k.presetId),h(k.effectId),I(k.effectId),g(k.color),E(k.color),j(k.brightness),b(k.brightness))}),o.useEffect(()=>{a===0&&l===0||Ps.previewDimmer(x,v,p===2)},[a,l,x,v,p]),{presets:i,selectedPresetId:s,dimmerState:a,lastDimmerState:l,effectId:m,color:d,brightness:f,selectedEffectId:p,setSelectedEffectId:I,selectedColor:x,setSelectedColor:E,selectedBrightness:v,setSelectedBrightness:b,selectPresetId:T,applyChanges:L}},jv=xv,Iv=()=>{const[i,t]=o.useState(-1),[s,n]=o.useState(-1),[a,r]=o.useState(0),l=()=>{t(-1),n(-1),r(0)},c=()=>{ve().connection.send(new Qp(i)),l()};return Ie(be.REQUEST_CREDITFURNI,m=>{const h=W().getRoomObject(m.roomId,m.objectId,m.category);!h||!Wt(h)||(t(m.objectId),n(m.category),r(h.model.getValue(Z.FURNITURE_CREDIT_VALUE)||0))}),ws(i!==-1&&s!==-1,m=>{m.id!==i||m.category!==s||l()}),{objectId:i,value:a,redeem:c,onClose:l}},Ev=Iv,bv=()=>{const[i,t]=o.useState(-1),[s,n]=o.useState(-1),[a,r]=o.useState(-1),[l,c]=o.useState([]),{roomSession:m=null}=Re(),h=()=>{t(-1),n(-1),r(-1),c([])};return Ie(be.REQUEST_EXTERNAL_IMAGE,d=>{const g=W().getRoomObject(d.roomId,d.objectId,d.category),f=W().getRoomObjects(m==null?void 0:m.roomId,X.WALL);if(!g)return;const j=[];f.forEach(I=>{if(I.type!=="external_image_wallitem_poster_small")return null;const x=I.model.getValue(Z.FURNITURE_DATA),E=JSON.parse(x);j.push(E)}),t(d.objectId),n(d.category),c(j);const p=JSON.parse(g.model.getValue(Z.FURNITURE_DATA));r(I=>{let x=0;return p&&(x=j.findIndex(E=>E.w===p.w)),x<0&&(x=0),x})}),ws(i!==-1&&s!==-1,d=>{d.id!==i||d.category!==s||h()}),{objectId:i,currentPhotoIndex:a,currentPhotos:l,onClose:h}},Cv=bv,Nv=()=>{const[i,t]=o.useState(-1),[s,n]=o.useState(-1),[a,r]=o.useState(0),[l,c]=o.useState([]),[m,h]=o.useState([]),[d,g]=o.useState(null),[f,j]=o.useState(0),p=()=>{t(-1),n(-1),r(0),c([]),h([]),g(null)},I=x=>{ve().connection.send(new tx(i,x)),p()};return M(Jp,x=>{const E=x.getParser();t(E.furniId),j(E.start?1:2)}),M(Zp,x=>p()),M(ex,x=>p()),Ie(be.REQUEST_FRIEND_FURNITURE_ENGRAVING,x=>{const E=W().getRoomObject(x.roomId,x.objectId,x.category);if(!E)return;const v=E.model.getValue(Z.FURNITURE_DATA),b=E.model.getValue(Z.FURNITURE_FRIENDFURNI_ENGRAVING);v[0]!=="1"||v.length!==6||(t(x.objectId),n(x.category),r(b),c([v[1],v[2]]),h([v[3],v[4]]),g(v[5]),j(0))}),ws(i!==-1&&s!==-1,x=>{x.id!==i||x.category!==s||p()}),{objectId:i,type:a,usernames:l,figures:m,date:d,stage:f,onClose:p,respond:I}},vv=Nv,_v=["perteam","mostwins","classic"],Sv=["alltime","daily","weekly","monthly"],wv=()=>{const[i,t]=o.useState(new Map),{roomSession:s=null}=Re(),n=r=>_v[r],a=r=>Sv[r];return Ie(be.REQUEST_HIGH_SCORE_DISPLAY,r=>{const l=W().getRoomObject(r.roomId,r.objectId,r.category);if(!l)return;const c=l.model.getValue(Z.FURNITURE_DATA_FORMAT),m=$d.getData(c);m.initializeFromRoomObjectModel(l.model),t(h=>{const d=new Map(h);return d.set(l.id,m),d})}),Ie(be.REQUEST_HIDE_HIGH_SCORE_DISPLAY,r=>{r.roomId===s.roomId&&t(l=>{const c=new Map(l);return c.delete(r.objectId),c})}),{stuffDatas:i,getScoreType:n,getClearType:a}},Tv=wv,Rv="internalLink",yv=()=>(Ie(be.REQUEST_INTERNAL_LINK,i=>{const t=W().getRoomObject(i.roomId,i.objectId,i.category);if(!t)return;let n=t.model.getValue(Z.FURNITURE_DATA)[Rv];(!n||!n.length)&&(n=t.model.getValue(Z.FURNITURE_INTERNAL_LINK)),n&&n.length&&Q(n)}),{}),Ov=yv,kv=()=>{const[i,t]=o.useState(-1),[s,n]=o.useState(-1),[a,r]=o.useState(null),[l,c]=o.useState(null),[m,h]=o.useState(zt.NO_CLUB),[d,g]=o.useState(null),f=()=>{t(-1),n(-1),r(null),c(null),g(null)},j=()=>{i!==-1&&(D(new sx(i)),f())},p=()=>{i!==-1&&(D(new Ml(i)),f())},I=()=>{i!==-1&&D(new nx(i,d))};return Ie(be.REQUEST_MANNEQUIN,x=>{const E=W().getRoomObject(x.roomId,x.objectId,x.category);if(!E)return;const v=E.model,b=v.getValue(Z.FURNITURE_MANNEQUIN_FIGURE)||null,w=v.getValue(Z.FURNITURE_MANNEQUIN_GENDER)||null,S=xt().createFigureContainer(b),T=xt().getFigureClubLevel(S,w,na.MANNEQUIN_CLOTHING_PART_TYPES);t(x.objectId),n(x.category),r(b),c(w),h(T),g(v.getValue(Z.FURNITURE_MANNEQUIN_NAME)||null)}),ws(i!==-1&&s!==-1,x=>{x.id!==i||x.category!==s||f()}),{objectId:i,figure:a,gender:l,clubLevel:m,name:d,setName:g,saveFigure:j,wearFigure:p,saveName:I,onClose:f}},Av=kv,Dv=()=>{const[i,t]=o.useState(-1),[s,n]=o.useState(-1),[a,r]=o.useState(-1),[l,c]=o.useState(new Ga),[m,h]=o.useState([]),{roomSession:d=null}=Re(),{showSingleBubble:g=null,simpleAlert:f=null}=Pe(),j=()=>{t(-1),n(-1)},p=o.useCallback((v,b)=>D(new rx(v,b)),[]),I=o.useCallback(v=>D(new ax(v)),[]),x=o.useCallback((v,b)=>D(new Ml(v,b)),[]);Ie(be.REQUEST_PLAYLIST_EDITOR,v=>{var w,S,T;const b=W().getRoomObject(v.roomId,v.objectId,v.category);if(b){if(Wt(b)){t(v.objectId),n(v.category),(w=pe().soundManager.musicController)==null||w.requestUserSongDisks(),(T=(S=pe().soundManager.musicController)==null?void 0:S.getRoomItemPlaylist())==null||T.requestPlayList();return}(d.isRoomOwner||d.controllerLevel>=qe.GUEST||V().isModerator)&&D(new Ml(v.objectId,-2))}}),ws(i!==-1&&s!==-1,v=>{v.id!==i||v.category!==s||j()}),pr(cm.NPE_SONG_CHANGED,v=>{r(v.position)}),pr(ix.NOTIFY_PLAYED_SONG,v=>{g(u("soundmachine.notification.playing",["songname","songauthor"],[v.name,v.creator]),Qt.SOUNDMACHINE)}),pr(ox.SDIR_SONG_DISK_INVENTORY_RECEIVENT_EVENT,v=>{var b;c((b=pe().soundManager.musicController)==null?void 0:b.songDiskInventory.clone())}),pr(Qc.PLUE_PLAY_LIST_UPDATED,v=>{var b,w;h((w=(b=pe().soundManager.musicController)==null?void 0:b.getRoomItemPlaylist())==null?void 0:w.entries.concat())}),pr(Qc.PLUE_PLAY_LIST_FULL,v=>{f(u("playlist.editor.alert.playlist.full"),ge.ALERT,"","",u("playlist.editor.alert.playlist.full.title"))});const E=v=>{var b,w;i!==-1&&(v instanceof Ll?v.getParser().fragmentNumber===0&&((b=pe().soundManager.musicController)==null||b.requestUserSongDisks()):(w=pe().soundManager.musicController)==null||w.requestUserSongDisks())};return M(Ll,E),M(am,E),M(rm,E),{objectId:i,diskInventory:l,playlist:m,currentPlayingIndex:a,onClose:j,addToPlaylist:p,removeFromPlaylist:I,togglePlayPause:x}},Pv=Dv,Wu="floor",Lv="wallpaper",qu="landscape",Mv="poster",Uv=()=>{const[i,t]=o.useState(-1),[s,n]=o.useState(-1),[a,r]=o.useState(null),[l,c]=o.useState(null),[m,h]=o.useState(!1),[d,g]=o.useState(null),[f,j]=o.useState(null),[p,I]=o.useState(-1),[x,E]=o.useState(null),[v,b]=o.useState(!1),[w,S]=o.useState(null),{roomSession:T=null}=Re(),L=()=>{t(-1),n(-1),r(null),c(null),h(!1),g(null),j(null),I(-1),E(null),b(!1),S(null)},k=()=>{i!==-1&&(T.openGift(i),W().changeObjectModelData(W().activeRoomId,i,X.FLOOR,Z.FURNITURE_DISABLE_PICKING_ANIMATION,1))},y=o.useMemo(()=>({imageReady:(R,O,F)=>{!F&&O&&(F=xn.generateImage(O)),S(F.src)},imageFailed:null}),[]);return Ve(lx.RSPE_PRESENT_OPENED,R=>{let O=null;R.itemType===me.FLOOR?O=V().getFloorItemData(R.classId):R.itemType===me.WALL&&(O=V().getWallItemData(R.classId));let F=!1;if(R.placedInRoom){const U=W().getRoomObject(T.roomId,R.placedItemId,X.FLOOR);U&&(F=Wt(U))}switch(R.itemType){case me.WALL:{if(O)switch(O.className){case Wu:case qu:case Lv:let U=null;O.className===Wu?U=u("inventory.furni.item.floor.name"):O.className===qu?U=u("inventory.furni.item.landscape.name"):U=u("inventory.furni.item.wallpaper.name"),c(U);break;case Mv:{const q=R.productCode;let $=null;q.indexOf("poster")===0&&($=q.replace("poster",""));const G=V().getProductData(q);let re=null;G?re=G.name:O&&(re=O.name),c(re),S(W().getFurnitureWallIconUrl(R.classId,$));break}default:{c(O.name||null),S(W().getFurnitureWallIconUrl(R.classId));break}}break}case me.HABBO_CLUB:c(u("widget.furni.present.hc"));break;default:{if(R.placedItemType===me.PET){const q=R.petFigureString;if(q&&q.length){const $=new ra(q),G=W().getRoomObjectPetImage($.typeId,$.paletteId,$.color,new vt(90),64,y,!0,0,$.customParts);G&&S(G.getImage().src)}}else{const q=W().getFurnitureFloorImage(R.classId,new vt(90),64,y);q&&S(q.getImage().src)}const U=V().getProductData(R.productCode);c(U&&U.name||O.name);break}}t(0),n(R.classId),r(R.itemType),h(F),I(R.placedItemId),E(R.placedItemType),b(R.placedInRoom)}),Ie(be.REQUEST_PRESENT,R=>{const O=W().getRoomObject(R.roomId,R.objectId,R.category);if(!O)return null;L(),t(R.objectId),n(-1),c(O.model.getValue(Z.FURNITURE_DATA)||""),h(Wt(O)),g(O.model.getValue(Z.FURNITURE_PURCHASER_NAME)||null),j(O.model.getValue(Z.FURNITURE_PURCHASER_FIGURE)||null)}),ws(i!==-1,R=>{R.id===i&&L(),R.id===p&&v&&b(!1)}),{objectId:i,classId:s,itemType:a,text:l,isOwnerOfFurniture:m,senderName:d,senderFigure:f,placedItemId:p,placedItemType:x,placedInRoom:v,imageUrl:w,openPresent:k,onClose:L}},Fv=Uv,Vv="internalLink",Gv=()=>{const[i,t]=o.useState(0);return Ie(be.REQUEST_ROOM_LINK,s=>{const n=W().getRoomObject(s.roomId,s.objectId,s.category);if(!n)return;let r=n.model.getValue(Z.FURNITURE_DATA)[Vv];(!r||!r.length)&&(r=n.model.getValue(Z.FURNITURE_INTERNAL_LINK)),!(!r||!r.length)&&(r=parseInt(r,10),!isNaN(r)&&(t(r),D(new Ki(r,!1,!1))))}),M(ua,s=>{!i||s.getParser().data.roomId!==i||t(0)}),{}},Bv=Gv,Hv=()=>{const[i,t]=o.useState(-1),[s,n]=o.useState(-1),[a,r]=o.useState(""),[l,c]=o.useState(""),[m,h]=o.useState("0"),[d,g]=o.useState(""),[f,j]=o.useState(!1),{getWallItemById:p=null}=ar(),I=()=>{D(new ux(i,l,m,d)),t(-1),n(-1),r(""),c(""),h("0"),g(""),j(!1)};return M(cx,x=>{const E=x.getParser();t(E.itemId),n(X.WALL);const v=p(E.itemId);let b="post_it";if(v){const w=W().getFurnitureWallName(v.type);w.match("post_it_")&&(b=w)}r(b),c(E.location),h("FFFF33"),g(""),j(!0)}),{objectId:i,color:m,setColor:h,text:d,setText:g,canModify:f,onClose:I}},Wv=Hv,fl=40,qv=()=>{const[i,t]=o.useState(-1),[s,n]=o.useState(-1),[a,r]=o.useState(0),[l,c]=o.useState(-1),m=()=>{t(-1),n(-1),r(0),c(-1)},h=(d,g=!1)=>{d||(d=0),d=Math.abs(d),g||d>fl&&(d=fl),r(parseFloat(d.toFixed(2))),g||c(d*100)};return M(dx,d=>{const g=d.getParser();i===g.furniId&&h(g.height,!0)}),Ie(be.REQUEST_STACK_HEIGHT,d=>{if(!qa(ve(),d.objectId,d.category))return;const g=W().getRoomObject(d.roomId,d.objectId,d.category);g&&(t(d.objectId),n(d.category),r(g.getLocation().z),c(-1))}),ws(i!==-1&&s!==-1,d=>{d.id!==i||d.category!==s||m()}),o.useEffect(()=>{if(i===-1||l===-1)return;const d=setTimeout(()=>D(new Ul(i,~~l)),10);return()=>clearTimeout(d)},[i,l]),{objectId:i,height:a,maxHeight:fl,onClose:m,updateHeight:h}},zv=qv,Yv=()=>{const[i,t]=o.useState(-1),[s,n]=o.useState(-1),[a,r]=o.useState("0"),[l,c]=o.useState(""),[m,h]=o.useState(""),[d,g]=o.useState(!1),f=()=>{t(-1),n(-1),r("0"),c(""),h(""),g(!1)},j=x=>{x!==a&&(r(x),W().modifyRoomObjectData(i,s,x,l))},p=x=>{c(x),W().modifyRoomObjectData(i,s,a,x)},I=()=>W().deleteRoomObject(i,s);return Ie(be.REQUEST_STICKIE,x=>{const E=W().getRoomObject(x.roomId,x.objectId,x.category);if(!E)return;const v=E.model.getValue(Z.FURNITURE_ITEMDATA);if(v.length<6)return;let b=null,w=null;v.indexOf(" ")>0?(b=v.slice(0,v.indexOf(" ")),w=v.slice(v.indexOf(" ")+1,v.length)):b=v,t(x.objectId),n(x.category),r(b||"0"),c(w||""),h(E.type||"post_it"),g(ve().isRoomOwner||V().isModerator||Wt(E))}),ws(i!==-1&&s!==-1,x=>{x.id!==i||x.category!==s||f()}),{objectId:i,color:a,text:l,type:m,canModify:d,updateColor:j,updateText:p,trash:I,onClose:f}},$v=Yv,Kv=()=>{const[i,t]=o.useState(-1),[s,n]=o.useState(-1),[a,r]=o.useState("1"),[l,c]=o.useState(""),[m,h]=o.useState(""),[d,g]=o.useState(""),f=()=>{t(-1),n(-1),r("1"),c(""),h(""),g("")};return Ie(be.REQUEST_TROPHY,j=>{const p=W().getRoomObject(j.roomId,j.objectId,j.category);if(!p)return;let I=p.model.getValue(Z.FURNITURE_DATA);p.model.getValue(Z.FURNITURE_EXTRAS),t(j.objectId),n(j.category),r(p.model.getValue(Z.FURNITURE_COLOR)||"1");const x=I.substring(0,I.indexOf("	"));I=I.substring(x.length+1,I.length);const E=I.substring(0,I.indexOf("	")),v=I.substr(E.length+1,I.length);c(x),h(E),g(v)}),ws(i!==-1&&s!==-1,j=>{j.id!==i||j.category!==s||f()}),{objectId:i,color:a,senderName:l,date:m,message:d,onClose:f}},Xv=Kv,Qv=0,Jv=1,Zv=2,e_=3,t_=()=>{const[i,t]=o.useState(-1),[s,n]=o.useState(-1),[a,r]=o.useState(null),[l,c]=o.useState(null),[m,h]=o.useState(null),[d,g]=o.useState(-1),[f,j]=o.useState(null),[p,I]=o.useState(null),[x,E]=o.useState(!1),v=()=>{t(-1),n(-1),r(null),c(null),h(null),g(-1),j(null),I(null),E(!1)},b=()=>D(new pi(i,Qv)),w=()=>D(new pi(i,Jv)),S=()=>x&&a&&a.length&&D(new pi(i,Zv)),T=()=>x&&a&&a.length&&D(new pi(i,e_)),L=k=>{if(f===k){j(null),D(new Jc(i,""));return}j(k),D(new Jc(i,k))};return Ie(be.REQUEST_YOUTUBE,k=>{if(Er.isRoomPreviewerId(k.roomId))return;const y=W().getRoomObject(k.roomId,k.objectId,k.category);y&&(t(k.objectId),n(k.category),E(V().hasSecurity(Qi.EMPLOYEE)||Wt(y)),D(new mx(k.objectId)))}),M(hx,k=>{const y=k.getParser();i===-1||i!==y.furniId||(r(y.videoId),c(y.startAtSeconds),h(y.endAtSeconds),g(y.state))}),M(gx,k=>{const y=k.getParser();i===-1||i!==y.furniId||(I(y.playlists),j(y.selectedPlaylistId),r(null),g(-1),h(null),c(null))}),M(fx,k=>{const y=k.getParser();if(!(i===-1||i!==y.furniId))switch(y.commandId){case 1:g(Jn.PLAYING);break;case 2:g(Jn.PAUSED);break}}),ws(i!==-1&&s!==-1,k=>{k.id!==i||k.category!==s||v()}),{objectId:i,videoId:a,videoStart:l,videoEnd:m,currentVideoState:d,selectedVideo:f,playlists:p,onClose:v,previous:b,next:w,pause:S,play:T,selectVideo:L}},s_=t_,n_=()=>{const[i,t]=o.useState(null),[s,n]=o.useState([]),[a,r]=o.useState(""),[l,c]=o.useState([]),[m,h]=o.useState(0),[d,g]=o.useState(oe.STUFF_SELECTION_OPTION_NONE),{showConfirm:f=null}=Pe(),j=()=>{const I=x=>{x&&(x instanceof um?D(new Ex(x.id,s,a,l,m,x.stuffTypeSelectionCode)):x instanceof dm?D(new bx(x.id,s,a,l,x.stuffTypeSelectionCode)):x instanceof mm&&D(new Cx(x.id,s,a,l,x.stuffTypeSelectionCode)))};dC(i.id)?I(i):f(u("wiredfurni.nonowner.change.confirm.body"),()=>{I(i)},null,null,null,u("wiredfurni.nonowner.change.confirm.title"))},p=(I,x)=>{!i||!d||I<=0||c(E=>{const v=[...E],b=E.indexOf(I);return b>=0?(v.splice(b,1),tr.hide(I)):v.length<i.maximumItemSelectionCount&&(v.push(I),tr.show(I)),v})};return M(px,I=>{I.getParser(),t(null)}),M(xx,I=>{const x=I.getParser();t(x.definition)}),M(jx,I=>{const x=I.getParser();t(x.definition)}),M(Ix,I=>{const x=I.getParser();t(x.definition)}),o.useEffect(()=>{if(i)return()=>{n([]),r(""),h(0),c(I=>(I&&I.length&&tr.clearSelectionShaderFromFurni(I),[])),g(oe.STUFF_SELECTION_OPTION_NONE)}},[i]),{trigger:i,setTrigger:t,intParams:s,setIntParams:n,stringParam:a,setStringParam:r,furniIds:l,setFurniIds:c,actionDelay:m,setActionDelay:h,setAllowsFurni:g,saveWired:j,selectObjectForWired:p}},Ee=()=>at(n_),r_=()=>{const[i,t]=o.useState(null),[s,n]=o.useState(null),[a,r]=o.useState([]),[l,c]=o.useState([]),[m,h]=o.useState(null),[d,g]=o.useState(-1),[f,j]=o.useState(!1),{friends:p=[]}=cs(),{selectObjectForWired:I=null}=Ee(),{roomSession:x=null}=Re(),E=T=>{r(L=>{const k=[...L];return k.splice(T,1),k})},v=T=>{c(L=>{const k=[...L],y=k.splice(T,1)[0];return m===y&&h(null),k})},b=T=>{h(T),c([])},w=(T,L)=>{const k=Ur.getObjectName(T,L);k&&(n(k),L!==X.UNIT&&c([]))},S=(T,L)=>{let k=null;switch(L){case X.FLOOR:case X.WALL:k=Ur.getFurniInfo(T,L),k&&I(T,L);break;case X.UNIT:{const y=x.userDataManager.getUserDataByIndex(T);if(!y)break;switch(y.type){case lt.PET:x.userDataManager.requestPetInfo(y.webID),g(y.webID);break;case lt.USER:k=Ur.getUserInfo(L,y);break;case lt.BOT:k=Ur.getBotInfo(L,y);break;case lt.RENTABLE_BOT:k=Ur.getRentableBotInfo(L,y);break}}}k&&t(k)};return Ve(Nx.USER_DATA_UPDATED,T=>{if(!T.addedUsers.length)return;let L=[];T.addedUsers.forEach(k=>{k.webID===V().userId||k.type!==lt.USER||p.find(y=>y.id===k.webID)&&L.push(new $m(k.roomIndex,X.UNIT,k.webID,k.name,k.type,!0))}),L.length&&r(k=>{const y=[...k];return L.forEach(R=>{const O=y.findIndex(F=>F.id===R.id);O>-1&&y.splice(O,1),y.push(R)}),y})}),Ve(vx.PET_INFO,T=>{const L=T.petInfo;if(!L||L.id!==d)return;const k=Ur.getPetInfo(L);k&&(t(k),g(-1))}),Ve(_x.PET_STATUS_UPDATE,T=>{}),Ie(Zc.USE_PRODUCT_FROM_INVENTORY,T=>{}),Ie(Zc.USE_PRODUCT_FROM_ROOM,T=>{const L=W().getRoomObject(x.roomId,T.objectId,X.FLOOR);if(!L||!Wt(L))return;const k=L.model.getValue(Z.FURNITURE_OWNER_ID),y=L.model.getValue(Z.FURNITURE_TYPE_ID),R=V().getFloorItemData(y),O=R.customParams.split(" "),F=O.length?parseInt(O[0]):-1;if(F===-1)return;const U=[],q=W().getRoomObjects(x.roomId,X.UNIT);for(const $ of q){const G=x.userDataManager.getUserDataByIndex($.id);let re=!1;if(!(!G||G.type!==lt.PET)){if(G.ownerId===k){G.hasSaddle&&R.specialType===ce.PET_SADDLE&&(re=!0);const Le=G.figure.split(" ");if((Le.length?parseInt(Le[0]):-1)===F){if(R.specialType===ce.MONSTERPLANT_REVIVAL&&!G.canRevive||R.specialType===ce.MONSTERPLANT_REBREED&&(G.petLevel<7||G.canRevive||G.canBreed)||R.specialType===ce.MONSTERPLANT_FERTILIZE&&(G.petLevel>=7||G.canRevive))continue;U.push(new nN(G.roomIndex,X.UNIT,G.name,T.objectId,$.id,-1,re))}}}}h(null),U.length&&c(U)}),Ie(gt.REQUEST_MANIPULATION,T=>{qa(x,T.objectId,T.category)&&j(!0)}),kc(T=>{S(T.id,T.category)}),rv(T=>{t(null),c([])}),iv(T=>{i||T.category!==X.UNIT||w(T.id,T.category)}),av(T=>{!s||T.category!==X.UNIT||s.roomIndex!==T.id||n(null)}),rt([Fe.FURNI_REMOVED,Fe.USER_REMOVED],T=>{if(s&&s.category===T.category&&s.roomIndex===T.id&&n(null),T.category===X.UNIT){let L=a.findIndex(k=>k.roomIndex===T.id);L>-1&&r(k=>k.filter(y=>y.roomIndex===T.id)),L=l.findIndex(k=>k.id===T.id),L>-1&&c(k=>k.filter(y=>y.id!==T.id))}else T.category===X.FLOOR&&l.findIndex(k=>k.id===T.id)>-1&&c(k=>k.filter(y=>y.requestRoomObjectId!==T.id));i&&(i instanceof Tr?i.id===T.id&&t(null):(i instanceof Et||i instanceof yr||i instanceof Rr)&&i.roomIndex===T.id&&t(null))}),o.useEffect(()=>{i&&(n(null),r([]),c([]))},[i]),o.useEffect(()=>{s&&r([])},[s]),o.useEffect(()=>{x.isDecorating=f},[x,f]),{avatarInfo:i,setAvatarInfo:t,activeNameBubble:s,setActiveNameBubble:n,nameBubbles:a,productBubbles:l,confirmingProduct:m,isDecorating:f,setIsDecorating:j,removeNameBubble:E,removeProductBubble:v,updateConfirmingProduct:b,getObjectName:w}},a_=r_,i_=()=>{const[i,t]=o.useState(""),[s,n]=o.useState(!1),[a,r]=o.useState(!1),[l,c]=o.useState(!1),[m,h]=o.useState(!1),[d,g]=o.useState(0),{showNitroAlert:f=null,showConfirm:j=null}=Pe(),{roomSession:p=null}=Re(),I=(x,E,v="",b=0,w="")=>{if(x==="")return null;const S=x.split(" ");if(S.length>0){const T=S[0];let L="";if(S.length>1&&(L=S[1]),T.charAt(0)===":"&&L==="x"){const k=W().selectedAvatarId;if(k>-1){const y=p.userDataManager.getUserDataByIndex(k);y&&(L=y.name,x=x.replace(" x"," "+y.name))}}switch(T.toLowerCase()){case":shake":return tu.init(2500,5e3),tu.turnVisualizationOn(),null;case":rotate":return eu.init(2500,5e3),eu.turnVisualizationOn(),null;case":d":case";d":vs()===zt.VIP&&p.sendExpressionMessage(ln.LAUGH.ordinal);break;case"o/":case"_o/":return p.sendExpressionMessage(ln.WAVE.ordinal),null;case":kiss":if(vs()===zt.VIP)return p.sendExpressionMessage(ln.BLOW.ordinal),null;break;case":jump":if(vs()===zt.VIP)return p.sendExpressionMessage(ln.JUMP.ordinal),null;break;case":idle":return p.sendExpressionMessage(ln.IDLE.ordinal),null;case"_b":return p.sendExpressionMessage(ln.RESPECT.ordinal),null;case":sign":return p.sendSignMessage(parseInt(L)),null;case":iddqd":case":flip":return W().events.dispatchEvent(new ba(p.roomId,-1,!0)),null;case":zoom":let k=parseFloat(L);return isNaN(k)&&(k=1),k>=1&&k<=5?W().events.dispatchEvent(new ba(p.roomId,k,!1)):k===0?W().events.dispatchEvent(new ba(p.roomId,1,!1)):W().events.dispatchEvent(new ba(p.roomId,1,!1)),null;case":screenshot":const y=W().createTextureFromRoom(p.roomId,1),R=new Image;return R.src=xn.generateImageUrl(y),window.open("").document.write(R.outerHTML),null;case":pickall":return(p.isRoomOwner||V().isModerator)&&j(u("room.confirm.pick_all"),()=>{V().sendSpecialCommandMessage(":pickall")},null,null,null,u("generic.alert.title"),null,"pickall"),null;case":ejectall":return(p.isRoomOwner||V().isModerator||p.controllerLevel>=qe.GUEST)&&j(u("room.confirm.eject_all"),()=>{V().sendSpecialCommandMessage(":ejectall")},null,null,null,u("generic.alert.title")),null;case":furni":return Q("furni-chooser/"),null;case":chooser":return Q("user-chooser/"),null;case":floor":case":bcfloor":return p.controllerLevel>=qe.ROOM_OWNER&&Q("floor-editor/show"),null;case":togglefps":return Ln().maxFPS>0?Ln().maxFPS=0:Ln().maxFPS=K("system.animation.fps"),null;case":client":case":nitro":case":billsonnn":return f(),null;case":settings":return(p.isRoomOwner||V().isModerator)&&D(new hm(p.roomId)),null}}switch(E){case dn.CHAT_DEFAULT:p.sendChatMessage(x,b,w);break;case dn.CHAT_SHOUT:p.sendShoutMessage(x,b,w);break;case dn.CHAT_WHISPER:p.sendWhisperMessage(v,x,b);break}};return Ve(Rs.FLOOD_EVENT,x=>{h(!0),g(parseFloat(x.message))}),kc(x=>{if(x.category!==X.UNIT)return;const E=p.userDataManager.getUserDataByIndex(x.id);E&&t(E.name)}),Ie(gt.DESELECTED,x=>t("")),o.useEffect(()=>{if(!m)return;let x=0;const E=window.setInterval(()=>{g(v=>(x=(v||0)-1,x)),x<0&&(clearInterval(E),h(!1))},1e3);return()=>clearInterval(E)},[m]),o.useEffect(()=>{if(!l)return;let x=null;return l&&(x=setTimeout(()=>{c(!1),n(!1)},1e4)),()=>clearTimeout(x)},[l]),o.useEffect(()=>{s?a||(r(!0),p.sendChatTypingMessage(s)):a&&(r(!1),p.sendChatTypingMessage(s))},[p,s,a]),{selectedUsername:i,floodBlocked:m,floodBlockedSeconds:d,setIsTyping:n,setIsIdle:c,sendChat:I}},o_=i_,zu=new Map,Yu=new Map,$u=new Map,l_=()=>{const[i,t]=o.useState([]),[s,n]=o.useState({mode:ft.CHAT_MODE_FREE_FLOW,weight:ft.CHAT_BUBBLE_WIDTH_NORMAL,speed:ft.CHAT_SCROLL_SPEED_NORMAL,distance:50,protection:ft.FLOOD_FILTER_NORMAL}),{roomSession:a=null}=Re(),{addChatEntry:r}=ui(),l=o.useRef(!1),c=o.useMemo(()=>{if(!s)return 6e3;switch(s.speed){case ft.CHAT_SCROLL_SPEED_FAST:return 3e3;case ft.CHAT_SCROLL_SPEED_NORMAL:return 6e3;case ft.CHAT_SCROLL_SPEED_SLOW:return 12e3}},[s]),m=g=>{const f=xt().createAvatarImage(g,rc.LARGE,null,{resetFigure:I=>{l.current||m(I)},dispose:()=>{},disposed:!1});if(!f)return;const j=f.getCroppedImage($i.HEAD),p=f.getPartColor(Me.CHEST);return zu.set(g,p&&p.rgb||16777215),f.dispose(),Yu.set(g,j.src),j.src},h=g=>{let f=Yu.get(g);return f||(f=m(g)),f},d=(g,f,j,p=64,I=null)=>{let x=$u.get(g+I);if(x)return x;const E=new ra(g),v=E.typeId,b=W().getRoomObjectPetImage(v,E.paletteId,E.color,new vt(f*45),p,null,!1,0,E.customParts,I);return b&&(x=xn.generateImageUrl(b.data),$u.set(g+I,x)),x};return Ve(Rs.CHAT_EVENT,g=>{const f=W().getRoomObject(a.roomId,g.objectId,X.UNIT),j=f?Mm(a.roomId,f==null?void 0:f.id,X.UNIT):new Dn,p=f?a.userDataManager.getUserDataByIndex(g.objectId):new Sx(-1);let I="",x=0,E=null,v=g.chatType,b=g.style,w=0,S=g.message,T=g._chatColours;if(p){w=p.type;const R=p.figure;switch(w){case lt.PET:E=d(R,2,!0,64,f.model.getValue(Z.FIGURE_POSTURE)),new ra(R).typeId,T="black";break;case lt.USER:E=h(R);break;case lt.RENTABLE_BOT:case lt.BOT:b=Rx.BOT,T="black";break}x=zu.get(R),I=p.name}switch(v){case Rs.CHAT_TYPE_RESPECT:S=u("widgets.chatbubble.respect",["username"],[I]),K("respect.options").enabled&&In(K("respect.options").sound);break;case Rs.CHAT_TYPE_PETREVIVE:case Rs.CHAT_TYPE_PET_REBREED_FERTILIZE:case Rs.CHAT_TYPE_PET_SPEED_FERTILIZE:{let R="widget.chatbubble.petrevived";v===Rs.CHAT_TYPE_PET_REBREED_FERTILIZE?R="widget.chatbubble.petrefertilized;":v===Rs.CHAT_TYPE_PET_SPEED_FERTILIZE&&(R="widget.chatbubble.petspeedfertilized");let O=null;if(W().getRoomObject(a.roomId,g.extraParam,X.UNIT)){const U=a.userDataManager.getUserDataByIndex(f.id);U&&(O=U.name)}S=u(R,["petName","userName"],[I,O]);break}case Rs.CHAT_TYPE_PETRESPECT:S=u("widget.chatbubble.petrespect",["petname"],[I]);break;case Rs.CHAT_TYPE_PETTREAT:S=u("widget.chatbubble.pettreat",["petname"],[I]);break;case Rs.CHAT_TYPE_HAND_ITEM_RECEIVED:S=u("widget.chatbubble.handitem",["username","handitem"],[I,u("handitem"+g.extraParam)]);break;case Rs.CHAT_TYPE_MUTE_REMAINING:{const R=(g.extraParam>0?Math.floor(g.extraParam/3600):0).toString(),O=(g.extraParam>0?Math.floor(g.extraParam%3600/60):0).toString(),F=(g.extraParam%60).toString();S=u("widget.chatbubble.mutetime",["hours","minutes","seconds"],[R,O,F]);break}}const L=yC(S),k=x&&("#"+x.toString(16).padStart(6,"0")||null),y=new $l(p.roomIndex,X.UNIT,a.roomId,S,L,I,new Dn(j.x,j.y),v,b,E,k,T);t(R=>[...R,y]),r({id:-1,webId:p.webID,entityId:p.roomIndex,name:I,imageUrl:E,style:b,chatType:v,entityType:p.type,message:L,timestamp:Wm(),type:Qs.TYPE_CHAT,roomId:a.roomId,color:k,chatColours:T})}),Ie(wx.ROOM_DRAG,g=>{if(!i.length||g.roomId!==a.roomId)return;const f=g.offsetX;i.forEach(j=>j.elementRef&&(j.left+=f))}),M(ua,g=>{const f=g.getParser();f.roomEnter&&n(f.chat)}),M(Tx,g=>{const f=g.getParser();n(f.chat)}),o.useEffect(()=>(l.current=!1,()=>{l.current=!0}),[]),{chatMessages:i,setChatMessages:t,chatSettings:s,getScrollSpeed:c}},c_=l_,u_=()=>{const[i,t]=o.useState([]),s=r=>{i.indexOf(r)>=0||t([...i,r])},n=r=>{const l=i.indexOf(r);if(l===-1)return;const c=[...i];c.splice(l,1),t(c)},a=(r,l)=>{ve().sendDoorbellApprovalMessage(r,l),n(r)};return Ve(tl.DOORBELL,r=>s(r.userName)),Ve(tl.RSDE_REJECTED,r=>n(r.userName)),Ve(tl.RSDE_ACCEPTED,r=>n(r.userName)),{users:i,addUser:s,removeUser:n,answer:a}},d_=u_,m_=()=>{const[i,t]=o.useState(null),[s,n]=o.useState(!1),a=()=>n(!1);return M(yx,r=>{const l=r.getParser();n(!0),t(l.words)}),{wordsFilter:i,isVisible:s,setWordsFilter:t,onClose:a}},h_=m_,g_=()=>{const[i,t]=o.useState([]),{requests:s=[],dismissedRequestIds:n=[],setDismissedRequestIds:a=null}=cs(),r=o.useMemo(()=>i.filter(c=>n.indexOf(c.request.requesterUserId)===-1),[i,n]),l=c=>{a(m=>{if(m.indexOf(c)>=0)return m;const h=[...m];return h.push(c),h})};return dh(!0,c=>{if(c.category!==X.UNIT)return;const m=ve().userDataManager.getUserDataByIndex(c.id);if(!m||m.type!==su.getTypeNumber(su.USER))return;const h=s.find(g=>g.requesterUserId===m.webID);if(!h||i.find(g=>g.request.requesterUserId===m.webID))return;const d=[...i];d.push({roomIndex:m.roomIndex,request:h}),t(d)}),mh(!0,c=>{if(c.category!==X.UNIT)return;const m=i.findIndex(d=>d.roomIndex===c.id);if(m===-1)return;const h=[...i];h.splice(m,1),t(h)}),o.useEffect(()=>{const c=[];for(const m of s){const h=ve().userDataManager.getUserData(m.requesterUserId);h&&c.push({roomIndex:h.roomIndex,request:m})}t(c)},[s]),{displayedRequests:r,hideFriendRequest:l}},f_=g_,p_=()=>{const[i,t]=o.useState(null),{roomSession:s=null}=Re(),n=()=>t(null),a=l=>l&&W().selectRoomObject(ve().roomId,l.id,l.category),r=()=>{const l=V(),c=W().getRoomObjects(s.roomId,X.WALL),m=W().getRoomObjects(s.roomId,X.FLOOR),h=c.map(g=>{if(g.id<0)return null;let f=g.type;if(f.startsWith("poster"))f=u(`poster_${f.replace("poster","")}_name`);else{const j=g.model.getValue(Z.FURNITURE_TYPE_ID),p=l.getWallItemData(j);p&&p.name.length&&(f=p.name)}return new Br(g.id,X.WALL,f)}),d=m.map(g=>{if(g.id<0)return null;let f=g.type;const j=g.model.getValue(Z.FURNITURE_TYPE_ID),p=l.getFloorItemData(j);return p&&p.name.length&&(f=p.name),new Br(g.id,X.FLOOR,f)});t([...h,...d].sort((g,f)=>g.name<f.name?-1:1))};return nv(!!i,l=>{if(l.id<0)return;const c=W().getRoomObject(ve().roomId,l.id,l.category);if(!c)return;let m=null;switch(l.category){case X.WALL:{let h=c.type;if(h.startsWith("poster"))h=u(`poster_${h.replace("poster","")}_name`);else{const d=c.model.getValue(Z.FURNITURE_TYPE_ID),g=V().getWallItemData(d);g&&g.name.length&&(h=g.name)}m=new Br(c.id,X.WALL,h);break}case X.FLOOR:{let h=c.type;const d=c.model.getValue(Z.FURNITURE_TYPE_ID),g=V().getFloorItemData(d);g&&g.name.length&&(h=g.name),m=new Br(c.id,X.FLOOR,h)}}t(h=>[...h,m].sort((d,g)=>d.name<g.name?-1:1))}),ws(!!i,l=>{l.id<0||t(c=>{const m=[...c];for(let h=0;h<m.length;h++){const d=m[h];if(!(d.id!==l.id||d.category!==l.category)){m.splice(h,1);break}}return m})}),{items:i,onClose:n,selectItem:a,populateChooser:r}},x_=p_,j_=()=>{const[i,t]=o.useState(!1),[s,n]=o.useState(-1),[a,r]=o.useState(""),[l,c]=o.useState(""),[m,h]=o.useState(""),d=()=>{h(""),c(""),r(""),n(-1),t(!1)},g=()=>{D(new Ox(s,l))},f=p=>{c(p),m.length>0&&h("")},j=p=>{if(!(!p||p===0))switch(p){case 1:return u("catalog.alert.petname.long");case 2:return u("catalog.alert.petname.short");case 3:return u("catalog.alert.petname.chars");case 4:default:return u("catalog.alert.petname.bobba")}};return Ve(nu.RSOPPE_OPEN_PET_PACKAGE_REQUESTED,p=>{if(!p)return;const I=W().getRoomObject(p.session.roomId,p.objectId,X.FLOOR);n(p.objectId),r(I.type),t(!0)}),Ve(nu.RSOPPE_OPEN_PET_PACKAGE_RESULT,p=>{p&&(p.nameValidationStatus===0&&d(),p.nameValidationStatus!==0&&h(j(p.nameValidationStatus)))}),{isVisible:i,errorResult:m,petName:l,objectType:a,onChangePetName:f,onConfirm:g,onClose:d}},I_=j_,E_=()=>{const{roomSession:i=null}=Re(),t=a=>i.sendPollStartMessage(a),s=a=>i.sendPollRejectMessage(a),n=(a,r,l)=>i.sendPollAnswerMessage(a,r,l);return Ve(sl.OFFER,a=>{const r=new qn(qn.OFFER,a.id);r.summary=a.summary,r.headline=a.headline,pt(r)}),Ve(sl.ERROR,a=>{const r=new qn(qn.ERROR,a.id);r.summary=a.summary,r.headline=a.headline,pt(r)}),Ve(sl.CONTENT,a=>{const r=new qn(qn.CONTENT,a.id);r.startMessage=a.startMessage,r.endMessage=a.endMessage,r.numQuestions=a.numQuestions,r.questionArray=a.questionArray,r.npsPoll=a.npsPoll,pt(r)}),{startPoll:t,rejectPoll:s,answerPoll:n}},b_=E_,C_=()=>{const[i,t]=o.useState(null);Re();const s=()=>t(null),n=r=>r&&W().selectRoomObject(ve().roomId,r.id,r.category),a=()=>{const r=ve(),l=W().getRoomObjects(r.roomId,X.UNIT);t(l.map(c=>{if(c.id<0)return null;const m=r.userDataManager.getUserDataByIndex(c.id);return m?new Br(m.roomIndex,X.UNIT,m.name):null}).sort((c,m)=>c.name<m.name?-1:1))};return dh(!!i,r=>{if(r.id<0)return;const l=ve().userDataManager.getUserDataByIndex(r.id);l&&t(c=>{const m=[...c];return m.push(new Br(l.roomIndex,X.UNIT,l.name)),m.sort((h,d)=>h.name<d.name?-1:1),m})}),mh(!!i,r=>{r.id<0||t(l=>{const c=[...l];for(let m=0;m<c.length;m++){const h=c[m];if(!(h.id!==r.id||h.category!==r.category)){c.splice(m,1);break}}return c})}),{items:i,onClose:s,selectItem:n,populateChooser:a}},N_=C_,Ku=4e3,v_=3,__=()=>{const[i,t]=o.useState(-1),[s,n]=o.useState(null),[a,r]=o.useState(!1),[l,c]=o.useState(null),[m,h]=o.useState(new Map),[d,g]=o.useState(new Map),{answerPoll:f=null}=b_(),{roomSession:j=null}=Re(),p=()=>{t(-1),n(null)},I=x=>{a||!s||(f(i,s.id,[x]),r(!0))};return Ve(nl.ANSWERED,x=>{const E=j.userDataManager.getUserData(x.userId);E&&(h(x.answerCounts),g(v=>{if(!v.has(E.roomIndex)){const b=new Map(d);return b.set(E.roomIndex,{value:x.value,secondsLeft:v_}),b}return v}),W().updateRoomObjectUserGesture(j.roomId,E.roomIndex,ta.getGestureId(x.value==="0"?ta.GESTURE_SAD:ta.GESTURE_SMILE)))}),Ve(nl.FINISHED,x=>{s&&s.id===x.questionId&&(h(x.answerCounts),r(!0),c(E=>(E&&clearTimeout(E),setTimeout(()=>p(),Ku)))),g(new Map)}),Ve(nl.QUESTION,x=>{t(x.id),n(x.question),r(!1),h(new Map),g(new Map),c(E=>{if(E&&clearTimeout(E),x.duration>0){const v=x.duration<1e3?Ku:x.duration;return setTimeout(()=>p(),v)}return null})}),o.useEffect(()=>{const x=()=>{g(v=>{const b=[];if(v.forEach((S,T)=>{S.secondsLeft--,S.secondsLeft<=0&&b.push(T)}),b.length===0)return v;const w=new Map(v);return b.forEach(S=>w.delete(S)),w})},E=setInterval(()=>x(),1e3);return()=>clearInterval(E)},[]),o.useEffect(()=>()=>{c(x=>(x&&clearTimeout(x),null))},[]),{question:s,answerSent:a,answerCounts:m,userAnswers:d,vote:I}},S_=__,w_=()=>{const[i,t]=o.useState(null),[s,n]=o.useState(null),[a,r]=gn("chatStyleId",0),[l,c]=gn("chatColour",""),[m,h]=o.useState(0),[d,g]=o.useState(0),[f,j]=gn("nitroScreensize",{width:window.innerWidth,height:window.innerHeight}),p=v=>{r(v),D(new Ax(v))},I=v=>{c(v)},x=v=>{V().giveRespect(v),h(V().respectsLeft)},E=v=>{V().givePetRespect(v),g(V().respectsPetLeft)};return M(om,v=>{const b=v.getParser();t(b.userInfo),n(b.userInfo.figure),h(b.userInfo.respectsRemaining),g(b.userInfo.respectsPetRemaining)}),M(kx,v=>{const b=v.getParser();n(b.figure)}),o.useEffect(()=>{const v=Ic("nitroScreensize");if(v&&(v.width!==window.innerWidth||v.height!==window.innerHeight)){let w=window.localStorage.length;for(;w>0;){const S=window.localStorage.key(w);S&&S.startsWith("nitro.window")&&window.localStorage.removeItem(S),w--}}const b=w=>j({width:window.innerWidth,height:window.innerHeight});return window.addEventListener("resize",b),()=>{window.removeEventListener("resize",b)}},[j]),{userInfo:i,userFigure:s,chatStyleId:a,userRespectRemaining:m,petRespectRemaining:d,respectUser:x,respectPet:E,updateChatStyleId:p,updateChatColour:I,chatColour:l}},Fn=()=>at(w_),T_=i=>o.useEffect(i,[]),Dc=i=>T_(()=>i()),R_=()=>{const{showConfirm:i=null}=Pe(),t=n=>{if(n.target instanceof HTMLAnchorElement&&n.target.href){n.stopPropagation(),n.preventDefault();const a=n.target.href;if(a.includes("youtube.com")||a.includes("youtu.be")){const r=s(a);r&&Q("youtube-tv/show/"+r)}else i(u("chat.confirm.openurl",["url"],[a]),()=>{window.open(a,"_blank")},null,null,null,u("generic.alert.title"),null,"link")}},s=n=>{const a=/(?:http:\/\/|https:\/\/)?(?:www\.)?(?:youtube\.com|youtu\.be)\/(?:watch\?.*v=|shorts\/)?([a-zA-Z0-9_-]{11})/,r=n.match(a);return r?r[1]:null};return{onClickChat:t}},fh=()=>at(R_),$o=i=>{var x,E;const{rows:t=[],overscan:s=5,scrollToBottom:n=!1,rowRender:a=null}=i,r=t.length-1,l=o.useRef(null),{getVirtualItems:c,getTotalSize:m,scrollToIndex:h=null,measureElement:d}=Dx({count:t.length,getScrollElement:()=>l.current,estimateSize:()=>8,overscan:s}),g=c(),f=m(),j=g.length>0&&((x=g==null?void 0:g[0])==null?void 0:x.start)||0,p=g.length>0?f-(((E=g==null?void 0:g[g.length-1])==null?void 0:E.end)||0):0,I=v=>{if(!l.current)return!1;const b=l.current,w=b.querySelector(`[data-index="${v-1}"]`);if(!w)return!1;const S=w.getBoundingClientRect(),{scrollTop:T,scrollHeight:L,clientHeight:k}=b;return T+k+S.height>=L-S.height};return Dc(()=>{setTimeout(()=>h(r),0)}),o.useEffect(()=>{n&&I(r)&&h(r)},[n,r,h]),e.jsxs(A,{fit:!0,innerRef:l,position:"relative",overflow:"auto",children:[j>0&&e.jsx("div",{style:{minHeight:`${j}px`}}),g.map(v=>{const b=t[v.index];return b?e.jsx("div",{"data-index":v.index,ref:d,children:a(b)},v.key):e.jsx(o.Fragment,{},v.key)}),p>0&&e.jsx("div",{style:{minHeight:`${p}px`}})]})},Ot=i=>{const{disabledButton:t,max:s,min:n,value:a,onChange:r,...l}=i;return e.jsxs(_,{fullWidth:!0,gap:1,children:[!t&&e.jsx(P,{disabled:n>=a,onClick:()=>r(n<a?a-1:n,0),children:e.jsx(Px,{})}),e.jsx(Lx,{className:"nitro-slider",max:s,min:n,value:a,onChange:r,...l}),!t&&e.jsx(P,{disabled:s<=a,onClick:()=>r(s>a?a+1:s,0),children:e.jsx(Mx,{})})]})},C=i=>{const{variant:t="black",fontWeight:s=null,fontSize:n=0,align:a=null,bold:r=!1,underline:l=!1,italics:c=!1,truncate:m=!1,center:h=!1,textEnd:d=!1,small:g=!1,wrap:f=!1,noWrap:j=!1,textBreak:p=!1,...I}=i,x=o.useMemo(()=>{const E=["d-inline"];return t&&E.push("text-"+t),r&&E.push("fw-bold"),s&&E.push("fw-"+s),n&&E.push("fs-"+n),a&&E.push("text-"+a),l&&E.push("text-decoration-underline"),c&&E.push("fst-italic"),m&&E.push("text-truncate"),h&&E.push("text-center"),d&&E.push("text-end"),g&&E.push("small"),f&&E.push("text-wrap"),j&&E.push("text-nowrap"),p&&E.push("text-break"),E},[t,s,n,a,r,l,c,m,h,d,g,f,j,p]);return e.jsx(A,{classNames:x,...I})},y_=i=>{const{isError:t=!1,message:s="",percent:n=0}=i;return e.jsx(N,{fullHeight:!0,position:"relative",className:"nitro-loading",children:e.jsx(A,{fullHeight:!0,className:"container h-100",children:e.jsxs(N,{fullHeight:!0,alignItems:"center",justifyContent:"end",children:[e.jsx(A,{className:"connecting-duck"}),e.jsx(A,{className:"logo"}),e.jsx(N,{size:6,className:"text-center py-4",children:t&&s&&s.length?e.jsx(A,{className:"fs-4 text-shadow",children:s}):e.jsxs(e.Fragment,{children:[e.jsxs(C,{fontSize:4,variant:"white",className:"text-shadow",children:["The hotel is loading ",n.toFixed(),"%..."]}),e.jsx(Rc,{progress:n,className:"mt-2 large"})]})})]})})})},ph=i=>{const{achievement:t=null,scale:s=1,...n}=i;return t?e.jsx(ze,{badgeCode:ps.getAchievementBadgeCode(t),isGrayscale:!ps.getAchievementHasStarted(t),scale:s,...n}):null},O_=i=>{const{achievement:t=null}=i,{selectedAchievement:s=null,setSelectedAchievementId:n=null}=qo();return t?e.jsx(Ce,{itemActive:s===t,itemUnseen:t.unseen>0,onClick:a=>n(t.achievementId),children:e.jsx(ph,{achievement:t})}):null},k_=i=>{const{achievements:t=null}=i;return e.jsx(ke,{columnCount:6,columnMinWidth:50,columnMinHeight:50,children:t&&t.length>0&&t.map((s,n)=>e.jsx(O_,{achievement:s},n))})},A_=i=>{const{achievement:t=null}=i;return t?e.jsxs(_,{shrink:!0,className:"bg-muted rounded p-2 text-black",gap:2,overflow:"hidden",children:[e.jsxs(N,{center:!0,gap:1,children:[e.jsx(ph,{className:"nitro-achievements-badge-image",achievement:t,scale:2}),e.jsx(C,{fontWeight:"bold",children:u("achievements.details.level",["level","limit"],[ps.getAchievementLevel(t).toString(),t.levelCount.toString()])})]}),e.jsxs(N,{fullWidth:!0,justifyContent:"center",overflow:"hidden",children:[e.jsxs(N,{gap:1,children:[e.jsx(C,{fontWeight:"bold",truncate:!0,children:da(ps.getAchievementBadgeCode(t))}),e.jsx(C,{textBreak:!0,children:Ec(ps.getAchievementBadgeCode(t))})]}),(t.levelRewardPoints>0||t.scoreLimit>0)&&e.jsxs(N,{gap:1,children:[t.levelRewardPoints>0&&e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx(C,{truncate:!0,className:"small",children:u("achievements.details.reward")}),e.jsxs(_,{center:!0,className:"fw-bold small",gap:1,children:[t.levelRewardPoints,e.jsx(Nt,{type:t.levelRewardPointType})]})]}),t.scoreLimit>0&&e.jsx(Rc,{text:u("achievements.details.progress",["progress","limit"],[(t.currentPoints+t.scoreAtStartOfLevel).toString(),(t.scoreLimit+t.scoreAtStartOfLevel).toString()]),progress:t.currentPoints+t.scoreAtStartOfLevel,maxProgress:t.scoreLimit+t.scoreAtStartOfLevel})]})]})]}):null},D_=i=>{const{category:t=null}=i,{selectedAchievement:s=null,setSelectedAchievementId:n=null}=qo();return o.useEffect(()=>{var a,r;t&&(s||n((r=(a=t==null?void 0:t.achievements)==null?void 0:a[0])==null?void 0:r.achievementId))},[t,s,n]),t?e.jsxs(N,{fullHeight:!0,justifyContent:"between",children:[e.jsx(k_,{achievements:t.achievements}),!!s&&e.jsx(A_,{achievement:s})]}):null},P_=i=>{const{category:t=null,selectedCategoryCode:s=null,setSelectedCategoryCode:n=null}=i;if(!t)return null;const a=ps.getAchievementCategoryProgress(t),r=ps.getAchievementCategoryMaxProgress(t),l=ps.getAchievementCategoryImageUrl(t,a),c=ps.getAchievementCategoryTotalUnseen(t);return e.jsxs(Ce,{itemActive:s===t.code,itemCount:c,itemCountMinimum:0,gap:1,onClick:m=>n(t.code),children:[e.jsx(C,{fullWidth:!0,center:!0,small:!0,className:"pt-1",children:u(`quests.${t.code}.name`)}),e.jsx(eh,{position:"relative",imageUrl:l,children:e.jsxs(C,{fullWidth:!0,center:!0,position:"absolute",variant:"white",style:{fontSize:12,bottom:9},children:[a," / ",r]})})]})},L_=i=>{const{categories:t=null,selectedCategoryCode:s=null,setSelectedCategoryCode:n=null}=i;return e.jsx(ke,{columnCount:3,columnMinWidth:90,columnMinHeight:100,children:t&&t.length>0&&t.map((a,r)=>e.jsx(P_,{category:a,selectedCategoryCode:s,setSelectedCategoryCode:n},r))})},M_=i=>{const[t,s]=o.useState(!1),{achievementCategories:n=[],selectedCategoryCode:a=null,setSelectedCategoryCode:r=null,achievementScore:l=0,getProgress:c=0,getMaxProgress:m=0,selectedCategory:h=null}=qo();return o.useEffect(()=>{const d={linkReceived:g=>{const f=g.split("/");if(!(f.length<2))switch(f[1]){case"show":s(!0);return;case"hide":s(!1);return;case"toggle":s(j=>!j);return}},eventUrlPrefix:"achievements/"};return ct(d),()=>ut(d)},[]),t?e.jsxs(ne,{uniqueKey:"achievements",className:"nitro-achievements",theme:"primary-slim",children:[e.jsx(se,{headerText:u("inventory.achievements"),onCloseClick:d=>s(!1)}),h&&e.jsxs(Zm,{position:"relative",className:"justify-content-center align-items-center cursor-pointer",gap:3,children:[e.jsx(A,{onClick:d=>r(null),className:"nitro-achievements-back-arrow"}),e.jsxs(N,{grow:!0,gap:0,children:[e.jsx(C,{fontSize:4,fontWeight:"bold",className:"text-small",children:u(`quests.${h.code}.name`)}),e.jsx(C,{children:u("achievements.details.categoryprogress",["progress","limit"],[h.getProgress().toString(),h.getMaxProgress().toString()])})]}),e.jsx(Nn,{imageUrl:ps.getAchievementCategoryImageUrl(h,null,!0)})]}),e.jsxs(ee,{gap:1,children:[!h&&e.jsxs(e.Fragment,{children:[e.jsx(L_,{categories:n,selectedCategoryCode:a,setSelectedCategoryCode:r}),e.jsxs(N,{grow:!0,justifyContent:"end",gap:1,children:[e.jsx(C,{small:!0,center:!0,children:u("achievements.categories.score",["score"],[l.toString()])}),e.jsx(Rc,{text:u("achievements.categories.totalprogress",["progress","limit"],[c.toString(),m.toString()]),progress:c,maxProgress:m})]})]}),h&&e.jsx(D_,{category:h})]})]}):null},U_=i=>{const{figureData:t=null}=i,[s,n]=o.useState(-1),a=r=>{r<xi.MIN_DIRECTION&&(r=xi.MAX_DIRECTION+(r+1)),r>xi.MAX_DIRECTION&&(r=r-(xi.MAX_DIRECTION+1)),t.direction=r};return o.useEffect(()=>{if(t)return t.notify=()=>n(r=>r+1),()=>{t.notify=null}},[t]),e.jsxs(N,{className:"figure-preview-container",overflow:"hidden",position:"relative",children:[e.jsx(tt,{figure:t.getFigureString(),direction:t.direction,scale:2}),e.jsx(A,{className:"avatar-shadow"}),e.jsx(A,{className:"arrow-container",children:e.jsx("i",{className:"icon arrow-left",onClick:r=>a(t.direction+1)})})]})},Hr=i=>{const{icon:t=null,selected:s=!1,classNames:n=[],children:a=null,...r}=i,l=o.useMemo(()=>{const c=["nitro-avatar-editor-spritesheet"];return t&&t.length&&c.push(t+"-icon"),s&&c.push("selected"),n.length&&c.push(...n),c},[t,s,n]);return e.jsx(A,{classNames:l,...r})},F_=i=>{const{partItem:t=null,children:s=null,...n}=i,[a,r]=o.useState(-1),l=K("hc.disabled",!1);return o.useEffect(()=>{const c=()=>r(m=>m+1);return t.notify=c,()=>t.notify=null},[t]),e.jsx("div",{className:"avatar-container",children:e.jsxs(Ce,{className:`avatar-parts ${t.isSelected?"part-selected":""}`,itemImage:t.isClear?void 0:t.imageUrl,...n,children:[!l&&t.isHC&&e.jsx("i",{className:"icon hc-icon position-absolute"}),t.isClear&&e.jsx(Hr,{icon:"clear"}),t.isSellable&&e.jsx(Hr,{icon:"sellable",position:"absolute",className:"end-1 bottom-1"}),s]})})},V_=[3111,3110,3109,3030,3114,266,265,262,3113,3112,691,690,667],G_=[3128,3127,3126,3125,3124,3123,3122,3121,3120,3119],B_=[3116,281,275,715,700,696,3006],H_=[3115,3068,906],W_=i=>{const{model:t=null,category:s=null,isFromFootballGate:n=!1,setMaxPaletteCount:a=null}=i,r=o.useRef(null),l=o.useCallback(c=>{const m=s.parts.indexOf(c);if(m===-1)return;if(c.isHC&&V().clubLevel===zt.NO_CLUB)return Q("habboUI/open/hccenter");t.selectPart(s.name,m);const h=s.getCurrentPart();a(h.maxColorIndex||1)},[t,s,a]);return o.useEffect(()=>{!t||!s||!r||!r.current||(r.current.scrollTop=0)},[t,s]),e.jsx(ke,{className:"clothing-container",innerRef:r,columnCount:3,columnMinHeight:50,children:s.parts.length>0&&s.parts.map(c=>(!n||n&&V_.includes(c.id)||G_.includes(c.id)||B_.includes(c.id)||H_.includes(c.id))&&e.jsx(F_,{partItem:c,onClick:m=>l(c)},c.id))})},q_=i=>{const{itemImage:t=void 0,itemColor:s=void 0,itemActive:n=!1,itemCount:a=1,itemCountMinimum:r=1,itemUniqueSoldout:l=!1,itemUniqueNumber:c=-2,itemUnseen:m=!1,itemHighlight:h=!1,disabled:d=!1,center:g=!0,column:f=!0,style:j={},classNames:p=[],position:I="relative",overflow:x="hidden",children:E=null,...v}=i,b=o.useMemo(()=>{const S=["layout-grid-item","color-picker-frame"];return n&&S.push("active"),(l||c>0)&&S.push("unique-item"),l&&S.push("sold-out"),m&&S.push("unseen"),h&&S.push("has-highlight"),d&&S.push("disabled"),t===null&&S.push("icon","loading-icon"),p.length&&S.push(...p),S},[n,l,c,m,h,d,t,p]),w=o.useMemo(()=>{let S={...j};return t&&(S.backgroundImage=`url(${t})`),s&&(S.backgroundColor=s),Object.keys(j).length&&(S={...S,...j}),S},[j,t,s]);return e.jsxs(N,{center:g,pointer:!0,position:I,overflow:x,column:f,classNames:b,style:w,...v,children:[a>r&&e.jsx(pn,{count:a}),c>0&&e.jsxs(e.Fragment,{children:[e.jsx(A,{fit:!0,className:"unique-bg-override",style:{backgroundImage:`url(${t})`}}),e.jsx("div",{className:"position-absolute bottom-0 unique-item-counter",children:e.jsx(Or,{value:c})})]}),E]})},z_=i=>{const{colorItem:t=null,children:s=null,...n}=i,[a,r]=o.useState(-1),l=K("hc.disabled",!1);return o.useEffect(()=>{const c=()=>r(m=>m+1);return t.notify=c,()=>t.notify=null},[t]),e.jsxs(q_,{itemHighlight:!0,itemColor:t.color,itemActive:t.isSelected,className:"color-picker-frame clear-bg",...n,children:[!l&&t.isHC&&e.jsx("i",{className:"icon hc-icon position-absolute"}),s]})},Xu=i=>{const{model:t=null,category:s=null,paletteSet:n=[],paletteIndex:a=-1}=i,r=o.useRef(null),l=o.useCallback(c=>{const m=n.indexOf(c);if(m!==-1){if(c.isHC&&V().clubLevel===zt.NO_CLUB)return Q("habboUI/open/hccenter");t.selectColor(s.name,m,a)}},[t,s,n,a]);return o.useEffect(()=>{!t||!s||!r||!r.current||(r.current.scrollTop=0)},[t,s]),e.jsx(ke,{className:"py-1 avatar-editor-palette-set-view",innerRef:r,gap:1,columnCount:8,columnMinWidth:14,children:n.length>0&&n.map((c,m)=>e.jsx(z_,{colorItem:c,onClick:h=>l(c)},m))})},Y_=["ch","cp","lg","sh"],$_=i=>{const{model:t=null,gender:s=null,isFromFootballGate:n=!1,setGender:a=null}=i,[r,l]=o.useState(null),[c,m]=o.useState(1),h=o.useCallback(d=>{const g=t.categories.get(d);if(g){g.init(),l(g);for(const f of g.parts)if(!(!f||!f.isSelected)){m(f.maxColorIndex||1);break}}},[t]);return o.useEffect(()=>{t.init();for(const d of t.categories.keys()){h(d);break}},[t,h]),!t||!r?null:e.jsx(te,{children:e.jsxs(N,{className:"choose-clothing overflow-y-auto overflow-x-hidden",children:[e.jsxs(_,{className:"px-3",gap:4,children:[t.canSetGender&&e.jsxs(e.Fragment,{children:[e.jsxs(_,{center:!0,pointer:!0,className:"category-item",gap:3,onClick:d=>a(je.MALE),children:[e.jsx(Hr,{icon:"male",selected:s===je.MALE}),e.jsx(C,{bold:!0,children:u("avatareditor.generic.boy")})]}),e.jsxs(_,{center:!0,pointer:!0,className:"category-item",gap:3,onClick:d=>a(je.FEMALE),children:[e.jsx(Hr,{icon:"female",selected:s===je.FEMALE}),e.jsx(C,{bold:!0,children:u("avatareditor.generic.girl")})]})]}),!t.canSetGender&&t.categories&&t.categories.size>0&&Array.from(t.categories.keys()).map(d=>{const g=t.categories.get(d);return e.jsx("div",{children:e.jsxs(_,{center:!0,pointer:!0,className:"category-item",onClick:f=>h(d),children:[n&&Y_.includes(g.name)&&e.jsx(Hr,{icon:g.name,selected:r===g}),!n&&e.jsx(Hr,{icon:g.name,selected:r===g})]})},d)})]}),e.jsx(N,{className:"avatar-parts-container",size:5,overflow:"hidden",children:e.jsx(W_,{model:t,category:r,isFromFootballGate:n,setMaxPaletteCount:m})}),e.jsxs(N,{overflow:"hidden",className:c===2?"avatar-color-palette-container dual-palette":"avatar-color-palette-container",children:[c>=1&&e.jsx(Xu,{model:t,category:r,paletteSet:r.getPalette(0),paletteIndex:0}),c===2&&e.jsx(Xu,{model:t,category:r,paletteSet:r.getPalette(1),paletteIndex:1})]})]})})},K_=i=>{const{figureData:t=null,savedFigures:s=[],setSavedFigures:n=null,loadAvatarInEditor:a=null}=i,r=K("hc.disabled",!1),l=o.useCallback(d=>{if(d>=s.length||d<0)return;const[g,f]=s[d];a(g.getFigureString(),f)},[s,a]),c=o.useCallback(d=>{if(!t||d>=s.length||d<0)return;if(V().clubLevel===zt.NO_CLUB)return Q("habboUI/open/hccenter");const g=[...s],f=t.getFigureString(),j=t.gender;g[d]=[xt().createFigureContainer(f),j],n(g),D(new Ux(d+1,f,j))},[t,s,n]),m=o.useCallback(()=>{let d=0;return s.forEach(([g,f])=>{if(g){const j=xt().getFigureClubLevel(g,f);d=Math.max(d,j)}}),d},[s]),h=o.useMemo(()=>{if(!s||!s.length)return[];const d=[];return s.forEach(([g,f],j)=>{let p=0;g&&(p=xt().getFigureClubLevel(g,f)),d.push(e.jsxs(_,{alignItems:"center",justifyContent:"center",children:[e.jsxs(_,{gap:1,column:!0,className:"button-container",children:[e.jsx("button",{className:"saved-outfit-button",onClick:I=>c(j),disabled:p>vs()&&!r,children:e.jsx(Fx,{})}),g&&e.jsx("button",{className:"saved-outfit-button",onClick:I=>l(j),disabled:p>vs()&&!r,children:e.jsx(Vx,{})})]}),e.jsx("div",{className:"avatar-container",children:g&&e.jsx(tt,{className:"avatar-figure",figure:g.getFigureString(),gender:f,direction:4})})]},j))}),d},[s,c,l]);return e.jsxs("div",{children:[e.jsxs("div",{className:"d-flex flex-column align-items-center",children:[e.jsx("span",{className:"saved-outfits-title",children:u("avatareditor.wardrobe.title")}),e.jsx("span",{className:"mt-2",children:!r&&m()>0&&e.jsx(Nt,{type:"hc"})})]}),e.jsx("div",{className:"saved-outfit-container mt-2",children:e.jsx("div",{className:"nitro-avatar-editor-wardrobe-container",children:h})})]})},X_="hr-100.hd-180-7.ch-215-66.lg-270-79.sh-305-62.ha-1002-70.wa-2007",Q_="hr-515-33.hd-600-1.ch-635-70.lg-716-66-62.sh-735-68",J_=i=>{const[t,s]=o.useState(!1),[n,a]=o.useState(null),[r,l]=o.useState(null),[c,m]=o.useState(null),[h,d]=o.useState(null),[g,f]=o.useState([]),[j,p]=o.useState([]),[I,x]=o.useState([]),[E,v]=o.useState(!1),[b,w]=o.useState(null),[S,T]=o.useState(null),[L,k]=o.useState(!0),[y,R]=o.useState(!1),[O,F]=o.useState(null),[U,q]=o.useState(null),$=JSON.parse(window.localStorage.getItem("nitro.look.footballgate.M"))||"ch-3109-92-1408.lg-3116-82-1408.sh-3115-1408-1408",G=JSON.parse(window.localStorage.getItem("nitro.look.footballgate.F"))||"ch-3112-1408-1408.lg-3116-71-1408.sh-3115-1408-1408",re=o.useMemo(()=>K("avatar.wardrobe.max.slots",10),[]),Le=()=>{F(null),q(null),s(!1)};M(Wx,ue=>{const de=ue.getParser();f(de.figureSetIds),p(de.boundsFurnitureNames)}),M(qx,ue=>{const de=ue.getParser(),le=[];let we=0;for(;we<re;)le.push([null,null]),we++;for(let[kt,[_t,Gs]]of de.looks.entries()){const fe=xt().createFigureContainer(_t);le[kt-1]=[fe,Gs]}x(le)});const Ye=o.useCallback(ue=>{c&&d(c.get(ue))},[c]),jt=o.useCallback(()=>{const ue=new Map;O?(ue.set(Ds.TORSO,new Su),ue.set(Ds.LEGS,new _u)):(ue.set(Ds.GENERIC,new xC),ue.set(Ds.HEAD,new LC),ue.set(Ds.TORSO,new Su),ue.set(Ds.LEGS,new _u)),m(ue)},[O]),ds=o.useCallback(()=>{const ue=new Map,de=new je,le=new je;de.loadAvatarData(X_,je.MALE),le.loadAvatarData(Q_,je.FEMALE),ue.set(je.MALE,de),ue.set(je.FEMALE,le),a(ue),l(ue.get(je.MALE))},[]),ye=o.useCallback((ue,de,le=!0)=>{de=Ct.getGender(de);let we=r;de!==we.gender&&(we=n.get(de)),ue!==we.getFigureString()&&we.loadAvatarData(ue,de),we!==r&&l(we),le&&(w(r.getFigureString()),T(r.gender))},[n,r]),Dt=o.useCallback(ue=>{switch(ue){case tn.ACTION_CLEAR:ye(r.getFigureStringWithFace(0,!1),r.gender,!1),jt();return;case tn.ACTION_RESET:ye(b,S),jt();return;case tn.ACTION_RANDOMIZE:const de=PC(r,r.gender,vs(),g,[je.FACE]);ye(de,r.gender,!1),jt();return;case tn.ACTION_SAVE:D(O?new Gx(U,O,r.getFigureString()):new gm(r.gender,r.getFigureString())),Nc(`nitro.look.footballgate.${O}`,r.getFigureString()),Le();return}},[ye,r,jt,b,S,g,O,U]),Se=o.useCallback(ue=>{ue=Ct.getGender(ue),l(n.get(ue))},[n]);if(o.useEffect(()=>{const ue={linkReceived:de=>{const le=de.split("/");if(F(le[2]?le[2]:null),q(le[3]?Number(le[3]):null),!(le.length<2))switch(le[1]){case"show":s(!0);return;case"hide":s(!1);return;case"toggle":s(we=>!we);return}},eventUrlPrefix:"avatar-editor/"};return ct(ue),()=>ut(ue)},[]),o.useEffect(()=>{x(new Array(re))},[re]),o.useEffect(()=>{D(new zx)},[]),o.useEffect(()=>{c&&Ye(O?Ds.TORSO:Ds.GENERIC)},[c,O,Ye]),o.useEffect(()=>{if(r)return Ct.CURRENT_FIGURE=r,jt(),()=>Ct.CURRENT_FIGURE=null},[r,jt]),o.useEffect(()=>(Ct.FIGURE_SET_IDS=g,Ct.BOUND_FURNITURE_NAMES=j,jt(),()=>{Ct.FIGURE_SET_IDS=null,Ct.BOUND_FURNITURE_NAMES=null}),[g,j,jt]),o.useEffect(()=>{if(t&&!n){ds(),R(!0);return}},[t,n,ds]),o.useEffect(()=>{!t||!y||!L||(O||ye(V().figure,V().gender),O&&ye(O===je.MALE?$:G,O),k(!1))},[t,y,L,ye,O,$,G]),o.useEffect(()=>{if(t)return()=>{ds(),v(!1),k(!0)}},[t,O,ds]),o.useEffect(()=>{if(!t)return()=>{k(!0)}},[t]),!t||!r)return null;const ms=`nitro-avatar-editor no-resize ${E?"expanded":""}`;return e.jsxs(ne,{uniqueKey:"avatar-editor",className:ms,children:[e.jsx(se,{headerText:u(O?"widget.furni.clothingchange.editor.title":"avatareditor.title"),onCloseClick:Le}),e.jsxs(Mn,{className:"avatar-editor-tabs",children:[c&&c.size>0&&Array.from(c.keys()).map(ue=>{const de=h&&h.name===ue;return e.jsx(bn,{isActive:de,onClick:le=>Ye(ue),children:e.jsx("div",{className:`tab ${ue}`})},ue)}),!O&&e.jsx(bn,{onClick:ue=>v(!E),children:e.jsx("div",{className:"tab-wardrobe"})})]}),e.jsx(ee,{children:e.jsxs(te,{children:[e.jsx(N,{size:E?6:8,overflow:"hidden",children:h&&e.jsx($_,{model:h,gender:r.gender,setGender:Se})}),e.jsx(N,{size:E?6:4,overflow:"hidden",children:e.jsxs(_,{gap:2,className:"w-100 h-100",children:[e.jsxs(_,{column:!0,className:"w-100",children:[e.jsx(U_,{figureData:r}),e.jsxs(N,{grow:!0,gap:1,children:[!O&&e.jsxs(fn,{className:"action-buttons w-100",children:[e.jsx(P,{variant:"secondary",onClick:ue=>Dt(tn.ACTION_RESET),children:e.jsx(Bx,{className:"fa-icon"})}),e.jsx(P,{variant:"secondary",onClick:ue=>Dt(tn.ACTION_CLEAR),children:e.jsx(cc,{className:"fa-icon"})}),e.jsx(P,{variant:"secondary",onClick:ue=>Dt(tn.ACTION_RANDOMIZE),children:e.jsx(Hx,{className:"fa-icon"})})]}),e.jsx(P,{className:"w-10",variant:"success",onClick:ue=>Dt(tn.ACTION_SAVE),children:u("avatareditor.save")})]})]}),E&&e.jsx(N,{overflow:"hidden",className:"w-100",children:e.jsx(K_,{figureData:r,savedFigures:I,setSavedFigures:x,loadAvatarInEditor:ye})})]})})]})})]})},Z_=5,eS=i=>{const{onClose:t=null,onEdit:s=null,onDelete:n=null}=i,{cameraRoll:a=null,setCameraRoll:r=null,selectedPictureIndex:l=-1,setSelectedPictureIndex:c=null}=ah(),{simpleAlert:m=null}=Pe(),h=o.useRef(),d=l>-1?a[l]:null,g=()=>{if(!h||!h.current)return null;const j=h.current.getBoundingClientRect();return new Kd(Math.floor(j.x),Math.floor(j.y),Math.floor(j.width),Math.floor(j.height))},f=()=>{if(l>-1){c(-1);return}const j=W().createTextureFromRoom(ve().roomId,1,g()),p=[...a];p.length>=Z_&&(m(u("camera.full.body")),p.pop()),In(En.CAMERA_SHUTTER),p.push(new MC(j,xn.generateImageUrl(j))),r(p)};return e.jsx(rr,{uniqueKey:"nitro-camera-capture",children:e.jsxs(N,{center:!0,className:"nitro-camera-capture",gap:0,children:[d&&e.jsx("img",{alt:"",className:"camera-area",src:d.imageUrl}),e.jsxs("div",{className:"camera-canvas drag-handler",children:[e.jsx("div",{className:"position-absolute info-camera",onClick:()=>Q("habbopages/camera")}),e.jsx("div",{className:"position-absolute header-close",onClick:t,children:e.jsx(Us,{className:"fa-icon"})}),!d&&e.jsx("div",{ref:h,className:"camera-area camera-view-finder"}),d&&e.jsx("div",{className:"camera-area camera-frame",children:e.jsxs("div",{className:"camera-frame-preview-actions w-100 position-absolute bottom-0 py-2 text-center",children:[e.jsx("button",{className:"btn btn-success me-3",title:u("camera.editor.button.tooltip"),onClick:s,children:u("camera.editor.button.text")}),e.jsx("button",{className:"btn btn-danger",onClick:n,children:u("camera.delete.button.text")})]})}),e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx("div",{className:"camera-button",title:u("camera.take.photo.button.tooltip"),onClick:f})})]}),a.length>0&&e.jsx(_,{gap:2,justifyContent:"center",className:"camera-roll d-flex justify-content-center py-2",children:a.map((j,p)=>e.jsx("img",{alt:"",src:j.imageUrl,onClick:I=>c(p)},p))})]})})},tS=i=>{const{base64Url:t=null,onCloseClick:s=null,onCancelClick:n=null,price:a=null}=i,[r,l]=o.useState(null),[c,m]=o.useState(null),[h,d]=o.useState(0),[g,f]=o.useState(!1),[j,p]=o.useState(!1),[I,x]=o.useState(0),{simpleAlert:E}=Pe(),v=o.useMemo(()=>K("camera.publish.disabled",!1),[]);M(Yx,w=>{d(S=>S+1),p(!1)}),M($x,w=>{const S=w.getParser();S.ok||E(u("camera.publish.wait",["minutes"],[Math.floor(S.secondsToWait/60).toString().replace("-","")]),null,null,null,u("camera.purchase.pleasewait")),m(S.extraDataId),x(S.secondsToWait),f(S.ok),p(!1)}),M(Kx,w=>{const S=w.getParser();l(K("camera.url")+"/"+S.url)}),M(Xx,w=>{const S=w.getParser();if(!S)return null;S.notEnoughCredits&&!S.notEnoughActivityPoints&&E(u("catalog.alert.notenough.credits.description"),null,null,null,u("catalog.alert.notenough.title")),!S.notEnoughCredits&&S.notEnoughActivityPoints&&E(u(`catalog.alert.notenough.activitypoints.description.${S.activityPointType}`),null,null,null,u(`catalog.alert.notenough.activitypoints.title.${S.activityPointType}`)),p(!1)});const b=(w,S=null)=>{switch(w){case"close":s();return;case"buy":if(j)return;p(!0),D(new Jx(""));return;case"publish":if(j)return;p(!0),D(new Qx);return;case"cancel":n();return}};return o.useEffect(()=>{t&&W().saveBase64AsScreenshot(t)},[t]),a?e.jsxs(ne,{className:"nitro-camera-checkout",theme:"primary-slim",children:[e.jsx(se,{headerText:u("camera.confirm_phase.title"),onCloseClick:w=>b("close")}),e.jsxs(ee,{children:[e.jsxs(_,{center:!0,children:[r&&r.length&&e.jsx(Nn,{className:"picture-preview border",imageUrl:r}),(!r||!r.length)&&e.jsx(_,{center:!0,className:"picture-preview border",children:e.jsx(C,{bold:!0,children:u("camera.loading")})})]}),e.jsxs(_,{justifyContent:"between",alignItems:"center",className:"bg-muted rounded p-2",children:[e.jsxs(N,{size:v?10:6,gap:1,children:[e.jsx(C,{bold:!0,children:u("camera.purchase.header")}),(a.credits>0||a.duckets>0)&&e.jsxs(_,{gap:1,children:[e.jsx(C,{children:u("catalog.purchase.confirmation.dialog.cost")}),a.credits>0&&e.jsxs(_,{gap:1,children:[e.jsx(C,{bold:!0,children:a.credits}),e.jsx(Nt,{type:-1})]}),a.duckets>0&&e.jsxs(_,{gap:1,children:[e.jsx(C,{bold:!0,children:a.duckets}),e.jsx(Nt,{type:5})]})]}),h>0&&e.jsxs(C,{children:[e.jsx(C,{bold:!0,children:u("camera.purchase.count.info")})," ",h,e.jsx("u",{className:"ms-1 cursor-pointer",onClick:()=>Q("inventory/toggle"),children:u("camera.open.inventory")})]})]}),e.jsx(_,{alignItems:"center",children:e.jsx(P,{variant:"success",disabled:j,onClick:w=>b("buy"),children:u(h?"camera.buy.another.button.text":"buy")})})]}),!v&&e.jsxs(_,{justifyContent:"between",alignItems:"center",className:"bg-muted rounded p-2",children:[e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u(g?"camera.publish.successful":"camera.publish.explanation")}),e.jsx(C,{children:u(g?"camera.publish.success.short.info":"camera.publish.detailed.explanation")}),g&&e.jsx("a",{href:c,rel:"noreferrer",target:"_blank",children:u("camera.link.to.published")}),!g&&a.publishDucketPrice>0&&e.jsxs(_,{gap:1,children:[e.jsx(C,{children:u("catalog.purchase.confirmation.dialog.cost")}),e.jsxs(_,{gap:1,children:[e.jsx(C,{bold:!0,children:a.publishDucketPrice}),e.jsx(Nt,{type:5})]})]}),I>0&&e.jsx("div",{className:"mt-1 text-center fw-bold",children:u("camera.publish.wait",["minutes"],[Math.ceil(I/60).toString()])})]}),!g&&e.jsx(_,{className:"d-flex align-items-end",children:e.jsx(P,{variant:"success",disabled:j||I>0,onClick:w=>b("publish"),children:u("camera.publish.button.text")})})]}),e.jsx(C,{center:!0,children:u("camera.warning.disclaimer")}),e.jsx(_,{justifyContent:"end",children:e.jsx(P,{onClick:w=>b("cancel"),children:u("generic.cancel")})})]})]}):null},sS=i=>{const{effect:t=null,thumbnailUrl:s=null,isActive:n=!1,isLocked:a=!1,selectEffect:r=null,removeEffect:l=null}=i;return e.jsxs(Ce,{title:u(a?`camera.effect.required.level ${t.minLevel}`:`camera.effect.name.${t.name}`),itemActive:n,onClick:c=>!n&&r(),children:[n&&e.jsx(P,{variant:"danger",className:"rounded-circle remove-effect",onClick:l,children:e.jsx(Us,{className:"fa-icon"})}),!a&&s&&s.length>0&&e.jsx("div",{className:"effect-thumbnail-image border",children:e.jsx("img",{alt:"",src:s})}),a&&e.jsxs(C,{center:!0,bold:!0,children:[e.jsx("div",{children:e.jsx(Zx,{className:"fa-icon"})}),t.minLevel]})]})},nS=i=>{const{myLevel:t=0,selectedEffects:s=[],effects:n=[],thumbnails:a=[],processAction:r=null}=i;return e.jsx(te,{columnCount:3,overflow:"auto",children:n&&n.length>0&&n.map((l,c)=>{const m=a.find(d=>d.effectName===l.name),h=s.findIndex(d=>d.effect.name===l.name)>-1;return e.jsx(sS,{effect:l,thumbnailUrl:m&&m.thumbnailUrl||null,isActive:h,isLocked:l.minLevel>t,selectEffect:()=>r("select_effect",l.name),removeEffect:()=>r("remove_effect",l.name)},c)})})},Qu=[Ja.COLORMATRIX,Ja.COMPOSITE],rS=i=>{const{picture:t=null,availableEffects:s=null,myLevel:n=1,onClose:a=null,onCancel:r=null,onCheckout:l=null}=i,[c,m]=o.useState(Qu[0]),[h,d]=o.useState(null),[g,f]=o.useState([]),[j,p]=o.useState([]),[I,x]=o.useState(!1),E=o.useMemo(()=>s.filter(R=>R.colorMatrix),[s]),v=o.useMemo(()=>s.filter(R=>R.texture),[s]),b=o.useCallback(()=>c===Ja.COLORMATRIX?E:v,[c,E,v]),w=o.useCallback(R=>!R||!R.length||!g||!g.length?-1:g.findIndex(O=>O.effect.name===R),[g]),S=o.useMemo(()=>w(h),[h,w]),T=o.useMemo(()=>h&&g[S]||null,[h,S,g]),L=o.useCallback(R=>{const O=S;O!==-1&&f(F=>{const U=[...F],q=U[O];return U[S]=new rl(q.effect,R),U})},[S,f]),k=o.useMemo(()=>Na().applyEffects(t.texture,g,I).src,[t,g,I]),y=o.useCallback((R,O=null)=>{switch(R){case"close":a();return;case"cancel":r();return;case"checkout":l(k);return;case"change_tab":m(String(O));return;case"select_effect":{if(w(O)>=0)return;const U=s.find(q=>q.name===O);if(!U)return;f(q=>[...q,new rl(U,1)]),d(U.name);return}case"remove_effect":{let F=w(O);if(F===-1)return;f(U=>{const q=[...U];return q.splice(F,1),q}),h===O&&d(null);return}case"clear_effects":d(null),f([]);return;case"download":{const F=new Image;F.src=k,window.open("").document.write(F.outerHTML);return}case"zoom":x(!I);return}},[I,s,h,k,w,r,l,a,x,f]);return o.useEffect(()=>{const R=[];for(const O of s)R.push(new UC(O.name,Na().applyEffects(t.texture,[new rl(O,1)],!1).src));p(R)},[t,s]),e.jsxs(ne,{className:"nitro-camera-editor",children:[e.jsx(se,{headerText:u("camera.editor.button.text"),onCloseClick:R=>y("close")}),e.jsx(Mn,{children:Qu.map(R=>e.jsx(bn,{isActive:c===R,onClick:O=>y("change_tab",R),children:e.jsx("i",{className:"icon icon-camera-"+R})},R))}),e.jsx(ee,{children:e.jsxs(te,{children:[e.jsx(N,{size:5,overflow:"hidden",children:e.jsx(nS,{myLevel:n,selectedEffects:g,effects:b(),thumbnails:j,processAction:y})}),e.jsxs(N,{size:7,justifyContent:"between",overflow:"hidden",children:[e.jsxs(N,{center:!0,children:[e.jsx(Nn,{imageUrl:k,className:"picture-preview"}),h&&e.jsxs(N,{center:!0,fullWidth:!0,gap:1,children:[e.jsx(C,{children:u("camera.effect.name."+h)}),e.jsx(Ot,{min:0,max:1,step:.01,value:T.alpha,onChange:R=>L(R),renderThumb:(R,O)=>e.jsx("div",{...R,children:O.valueNow})})]})]}),e.jsxs(_,{justifyContent:"between",children:[e.jsxs(fn,{children:[e.jsx(P,{onClick:R=>y("clear_effects"),children:e.jsx(cc,{className:"fa-icon"})}),e.jsx(P,{onClick:R=>y("download"),children:e.jsx(ej,{className:"fa-icon"})}),e.jsxs(P,{onClick:R=>y("zoom"),children:[I&&e.jsx(tj,{className:"fa-icon"}),!I&&e.jsx(sj,{className:"fa-icon"})]})]}),e.jsxs(_,{gap:1,children:[e.jsx(P,{onClick:R=>y("cancel"),children:u("generic.cancel")}),e.jsx(P,{onClick:R=>y("checkout"),children:u("camera.preview.button.text")})]})]})]})]})})]})},Fr=0,Oi=1,Ju=2,Zu=3,aS=i=>{const[t,s]=o.useState(Fr),[n,a]=o.useState(null),{availableEffects:r=[],selectedPictureIndex:l=-1,cameraRoll:c=[],setCameraRoll:m=null,myLevel:h=0,price:d={credits:0,duckets:0,publishDucketPrice:0}}=ah(),g=p=>{switch(p){case"close":s(Fr);return;case"edit":s(Ju);return;case"delete":m(I=>{const x=[...I];return x.splice(l,1),x});return;case"editor_cancel":s(Oi);return}},f=p=>{if(!p.startsWith("data:image/"))return;const x=j(p);x&&(a(x),s(Zu))},j=p=>p.startsWith("data:image/")?p:null;return Ve(yt.ENDED,p=>s(Fr)),o.useEffect(()=>{const p={linkReceived:I=>{const x=I.split("/");if(!(x.length<2))switch(x[1]){case"show":s(Oi);return;case"hide":s(Fr);return;case"toggle":s(E=>E?Fr:Oi);return}},eventUrlPrefix:"camera/"};return ct(p),()=>ut(p)},[]),t===Fr?null:e.jsxs(e.Fragment,{children:[t===Oi&&e.jsx(eS,{onClose:()=>g("close"),onEdit:()=>g("edit"),onDelete:()=>g("delete")}),t===Ju&&e.jsx(rS,{picture:c[l],myLevel:h,onClose:()=>g("close"),onCancel:()=>g("editor_cancel"),onCheckout:f,availableEffects:r}),t===Zu&&e.jsx(tS,{base64Url:n,onCloseClick:()=>g("close"),onCancelClick:()=>g("editor_cancel"),price:d})]})},iS=i=>{const{itemId:t=-1,state:s=null,product:n=null,active:a=!1,onClick:r=null}=i,l=c=>{let m=V().getFloorItemDataByName(c),h=null;return m?h=W().getFurnitureFloorIconUrl(m.id):(m=V().getWallItemDataByName(c),m&&(h=W().getFurnitureWallIconUrl(m.id))),h};return e.jsxs(N,{fit:!0,center:!0,pointer:!0,className:`campaign-spritesheet campaign-day-generic-bg rounded calendar-item ${a?"active":""}`,onClick:()=>r(t),children:[s===Jt.STATE_UNLOCKED&&e.jsx(_,{center:!0,className:"campaign-spritesheet unlocked-bg",children:e.jsx(_,{center:!0,className:"campaign-spritesheet campaign-opened",children:n&&e.jsx(Nn,{imageUrl:n.customImage?K("image.library.url")+n.customImage:l(n.productName)})})}),s!==Jt.STATE_UNLOCKED&&e.jsxs(_,{center:!0,className:"campaign-spritesheet locked-bg",children:[s===Jt.STATE_LOCKED_AVAILABLE&&e.jsx(A,{className:"campaign-spritesheet available"}),(s===Jt.STATE_LOCKED_EXPIRED||s===Jt.STATE_LOCKED_FUTURE)&&e.jsx(A,{className:"campaign-spritesheet unavailable"})]})]})},pl=5,oS=i=>{const{onClose:t=null,campaignName:s=null,currentDay:n=null,numDays:a=null,missedDays:r=null,openedDays:l=null,openPackage:c=null,receivedProducts:m=null}=i,[h,d]=o.useState(n),[g,f]=o.useState(Math.max(0,h-1)),j=b=>l.includes(b)?Jt.STATE_UNLOCKED:b>n?Jt.STATE_LOCKED_FUTURE:r.includes(b)?Jt.STATE_LOCKED_EXPIRED:Jt.STATE_LOCKED_AVAILABLE,p=b=>{switch(j(b)){case Jt.STATE_UNLOCKED:return u("campaign.calendar.info.unlocked");case Jt.STATE_LOCKED_FUTURE:return u("campaign.calendar.info.future");case Jt.STATE_LOCKED_EXPIRED:return u("campaign.calendar.info.expired");default:return u("campaign.calendar.info.available.desktop")}},I=()=>{const b=h+1;b!==a&&(d(b),g+pl<b+1&&f(g+1))},x=()=>{const b=h-1;b<0||(d(b),g>b&&f(g-1))},E=b=>{if(h===b){j(b)===Jt.STATE_LOCKED_AVAILABLE&&c(b,!1);return}d(b)},v=()=>{const b=h;j(b)!==Jt.STATE_UNLOCKED&&c(b,!0)};return e.jsxs(ne,{className:"nitro-campaign-calendar",theme:"primary-slim",children:[e.jsx(se,{headerText:u(`campaign.calendar.${s}.title`),onCloseClick:t}),e.jsxs(ee,{children:[e.jsxs(te,{fullHeight:!1,justifyContent:"between",alignItems:"center",children:[e.jsx(N,{size:1}),e.jsx(N,{size:10,children:e.jsxs(_,{justifyContent:"between",alignItems:"center",gap:1,children:[e.jsxs(N,{gap:1,children:[e.jsx(C,{fontSize:3,children:u("campaign.calendar.heading.day",["number"],[(h+1).toString()])}),e.jsx(C,{children:p(h)})]}),e.jsx("div",{children:V().isModerator&&e.jsx(P,{variant:"danger",onClick:v,children:"Force open"})})]})}),e.jsx(N,{size:1})]}),e.jsxs(_,{fullHeight:!0,gap:2,children:[e.jsx(_,{center:!0,children:e.jsx(A,{pointer:!0,className:"campaign-spritesheet prev",onClick:x})}),e.jsx(N,{center:!0,fullWidth:!0,children:e.jsx(te,{fit:!0,columnCount:pl,gap:1,children:[...Array(pl)].map((b,w)=>{const S=g+w;return e.jsx(N,{overflow:"hidden",children:e.jsx(iS,{itemId:S,state:j(S),active:h===S,product:m.has(S)?m.get(S):null,onClick:E})},w)})})}),e.jsx(_,{center:!0,children:e.jsx(A,{pointer:!0,className:"campaign-spritesheet next",onClick:I})})]})]})]})},lS=i=>{const[t,s]=o.useState(null),[n,a]=o.useState(-1),[r,l]=o.useState(new Map),[c,m]=o.useState(!1),h=(d,g=!1)=>{t&&(a(d),D(g?new nj(t.campaignName,d):new rj(t.campaignName,d)))};return M(aj,d=>{const g=d.getParser();g&&s(g.calendarData)}),M(ij,d=>{const g=d.getParser();if(!g)return;const f=n;g.doorOpened&&(s(j=>{const p=j.clone();return p.openedDays.push(n),p}),l(j=>{const p=new Map(j);return p.set(f,new FC(g.productName,g.customImage,g.furnitureClassName)),p})),a(-1)}),o.useEffect(()=>{const d={linkReceived:g=>{const f=g.split("/");if(!(f.length<2))switch(f[1]){case"calendar":m(!0);break}},eventUrlPrefix:"openView/"};return ct(d),()=>ut(d)},[]),e.jsx(e.Fragment,{children:t&&c&&e.jsx(oS,{onClose:()=>m(!1),campaignName:t.campaignName,currentDay:t.currentDay,numDays:t.campaignDays,openedDays:t.openedDays,missedDays:t.missedDays,openPackage:h,receivedProducts:r})})},xh=i=>{const{icon:t=0}=i,s=o.useMemo(()=>K("catalog.asset.icon.url").replace("%name%",t.toString()),[t]);return e.jsx(Nn,{imageUrl:s,style:{width:20,height:20}})},cS=i=>{const[t,s]=o.useState(!1),[n,a]=o.useState(0),[r,l]=o.useState(0),[c,m]=o.useState(""),[h,d]=o.useState(""),[g,f]=o.useState(!0),[j,p]=o.useState(""),[I,x]=o.useState([]),[E,v]=o.useState(0),[b,w]=o.useState(0),[S,T]=o.useState(0),[L,k]=o.useState(0),[y,R]=o.useState(0),[O,F]=o.useState(!1),{catalogOptions:U=null,getNodesByOfferId:q=null}=Ae(),{friends:$}=cs(),{giftConfiguration:G=null}=U,[re,Le]=o.useState([]),[Ye,jt]=o.useState([]),[ds,ye]=o.useState(!0),Dt=o.useCallback(()=>{s(!1),a(0),l(0),m(""),d(""),f(!0),p(""),v(0),w(0),ye(!1),jt([]),I.length&&T(I[0].id)},[I]),Se=o.useMemo(()=>G?G.defaultStuffTypes.findIndex(he=>he===re[E])>-1:!1,[re,G,E]),ms=o.useMemo(()=>G?(re[E]*1e3+G.ribbonTypes[b]).toString():"",[G,E,b,re]),ue=o.useMemo(()=>{if(!G||Se)return!1;const he=re[E];return!(he===8||he>=3&&he<=6)},[G,E,Se,re]),de=o.useMemo(()=>Se?re[E]:S,[Se,re,E,S]),le=$.filter(he=>he.id!==-1),we=he=>{const De=he.target.value;let Be=[];De.length>0&&(Be=le.sort().filter(Yt=>Yt.name.includes(De))),d(De),ye(!0),jt(Be)},kt=he=>{d(he),ye(!1)},_t=o.useCallback(he=>{switch(he){case"prev_box":v(Be=>Be===0?L:Be-1);return;case"next_box":v(Be=>Be===L?0:Be+1);return;case"prev_ribbon":w(Be=>Be===0?y:Be-1);return;case"next_ribbon":w(Be=>Be===y?0:Be+1);return;case"buy":if(!h||h.length===0){F(!0);return}let De=n;if(De===-1){const Be=q(r);Be&&(De=Be[0].pageId)}D(new oj(De,r,c,h,j,de,E,b,g));return}},[de,c,L,y,j,r,n,h,E,b,g,q]);M(lj,he=>F(!0)),rt([Cn.PURCHASE_SUCCESS,kr.INIT_GIFT],he=>{switch(he.type){case Cn.PURCHASE_SUCCESS:Dt();return;case kr.INIT_GIFT:const De=he;Dt(),a(De.pageId),l(De.offerId),m(De.extraData),s(!0);return}}),o.useEffect(()=>{F(!1)},[h]);const Gs=o.useCallback(()=>{G&&Le(he=>{let De=[...G.boxTypes];return De.push(G.defaultStuffTypes[Math.floor(Math.random()*(G.defaultStuffTypes.length-1))]),k(De.length-1),R(De.length-1),De})},[G]);if(o.useEffect(()=>{if(!G)return;const he=[];for(const De of G.stuffTypes){const Be=V().getFloorItemData(De);Be&&(Be.colors&&Be.colors.length>0?he.push({id:De,color:ls.makeColorNumberHex(Be.colors[0])}):he.push({id:De,color:"#000000"}))}Gs(),he.length&&(T(he[0].id),x(he))},[G,Gs]),o.useEffect(()=>{t&&Gs()},[Gs,t]),!G||!G.isEnabled||!t)return null;const fe="catalog.gift_wrapping_new.box."+(Se?"default":re[E]),Te=`catalog.gift_wrapping_new.ribbon.${b}`,st="catalog.gift_wrapping_new."+(Se?"freeprice":"price");return e.jsxs(ne,{uniqueKey:"catalog-gift",className:"nitro-catalog-gift",theme:"primary-slim",children:[e.jsx(se,{headerText:u("catalog.gift_wrapping.title"),onCloseClick:Dt}),e.jsxs(ee,{className:"text-black",children:[e.jsxs(bN,{column:!0,children:[e.jsx(C,{children:u("catalog.gift_wrapping.receiver")}),e.jsx("input",{type:"text",className:Bt("form-control form-control-sm",O&&"is-invalid"),value:h,onChange:he=>we(he)}),Ye.length>0&&ds&&e.jsx(N,{className:"autocomplete-gift-container",children:Ye.map(he=>e.jsx(A,{className:"autocomplete-gift-item",onClick:De=>kt(he.name),children:he.name},he.id))}),O&&e.jsx(A,{className:"invalid-feedback",children:u("catalog.gift_wrapping.receiver_not_found.title")})]}),e.jsx(th,{figure:V().figure,userName:V().userName,message:j,editable:!0,onChange:he=>p(he)}),e.jsxs(A,{className:"form-check",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",name:"showMyFace",checked:g,onChange:he=>f(De=>!De)}),e.jsx("label",{className:"form-check-label",children:u("catalog.gift_wrapping.show_face.title")})]}),e.jsxs(_,{alignItems:"center",gap:2,children:[S&&e.jsx(A,{className:"gift-preview",children:e.jsx(Bo,{productType:me.FLOOR,productClassId:de,extraData:ms})}),e.jsxs(N,{gap:1,children:[e.jsxs(_,{gap:2,children:[e.jsxs(fn,{children:[e.jsx(P,{variant:"primary",onClick:()=>_t("prev_box"),children:e.jsx(Es,{className:"fa-icon"})}),e.jsx(P,{variant:"primary",onClick:()=>_t("next_box"),children:e.jsx(bs,{className:"fa-icon"})})]}),e.jsxs(N,{gap:1,children:[e.jsx(C,{fontWeight:"bold",children:u(fe)}),e.jsxs(_,{alignItems:"center",gap:1,children:[u(st,["price"],[G.price.toString()]),e.jsx(Nt,{type:-1})]})]})]}),e.jsxs(_,{alignItems:"center",gap:2,className:ue?"":"opacity-50 pointer-events-none",children:[e.jsxs(fn,{children:[e.jsx(P,{variant:"primary",onClick:()=>_t("prev_ribbon"),children:e.jsx(Es,{className:"fa-icon"})}),e.jsx(P,{variant:"primary",onClick:()=>_t("next_ribbon"),children:e.jsx(bs,{className:"fa-icon"})})]}),e.jsx(C,{fontWeight:"bold",children:u(Te)})]})]})]}),e.jsxs(N,{gap:1,className:ue?"":"opacity-50 pointer-events-none",children:[e.jsx(C,{fontWeight:"bold",children:u("catalog.gift_wrapping.pick_color")}),e.jsx(fn,{fullWidth:!0,children:I.map(he=>e.jsx(P,{variant:"dark",active:he.id===S,disabled:!ue,style:{backgroundColor:he.color},onClick:()=>T(he.id)},he.id))})]}),e.jsxs(_,{justifyContent:"between",alignItems:"center",children:[e.jsx(P,{variant:"link",onClick:Dt,className:"text-black",children:u("cancel")}),e.jsx(P,{variant:"success",onClick:()=>_t("buy"),children:u("catalog.gift_wrapping.give_gift")})]})]})]})},uS=i=>{const[t,s]=o.useState(""),{currentType:n=null,rootNode:a=null,offersToNodes:r=null,searchResult:l=null,setSearchResult:c=null,setCurrentPage:m=null}=Ae();return o.useEffect(()=>{let h=t==null?void 0:t.toLocaleLowerCase().replace(" ","");if(!h||!h.length){c(null);return}const d=setTimeout(()=>{const g=V().getAllFurnitureData({loadFurnitureData:null});if(!g||!g.length)return;const f=[],j=[];for(const x of g){if(n===Ls.BUILDER&&!x.availableForBuildersClub||n===Ls.NORMAL&&x.excludeDynamic)continue;const E=[x.className,x.name,x.description].join(" ").replace(/ /gi,"").toLowerCase();if(!(n===Ls.BUILDER&&x.purchaseOfferId===-1&&x.rentOfferId===-1)){if([...xu(r,x.purchaseOfferId),...xu(r,x.rentOfferId)].length&&(E.indexOf(h)>=0&&f.push(x),f.length===250))break}}const p=[];for(const x of f)p.push(new aC(x));let I=[];Pm(h,j,a,I),c(new cC(h,p,I.filter(x=>x.isVisible))),m(new Ji(-1,"default_3x3",new Lm([],[]),p,!1,1))},300);return()=>clearTimeout(d)},[r,n,a,t,m,c]),e.jsxs(_,{gap:1,children:[e.jsx(_,{fullWidth:!0,alignItems:"center",position:"relative",children:e.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:u("generic.search"),value:t,onChange:h=>s(h.target.value)})}),(!t||!t.length)&&e.jsx(P,{variant:"primary",className:"catalog-search-button",children:e.jsx(cj,{className:"fa-icon"})}),t&&!!t.length&&e.jsx(P,{variant:"primary",className:"catalog-search-button",onClick:h=>s(""),children:e.jsx(Us,{className:"fa-icon"})})]})},jh=i=>{const{node:t=null,child:s=!1}=i;return e.jsx(e.Fragment,{children:t&&t.children.length>0&&t.children.map((n,a)=>n.isVisible?e.jsx(Ih,{node:n,child:s},a):null)})},Ih=i=>{const{node:t=null,child:s=!1}=i,{activateNode:n=null}=Ae();return e.jsxs(A,{className:"nitro-catalog-navigation-section",children:[e.jsxs(Ce,{gap:1,column:!1,itemActive:t.isActive,onClick:a=>n(t),className:s?"inset":"",children:[e.jsx(xh,{icon:t.iconId}),e.jsx(C,{grow:!0,truncate:!0,children:t.localization}),t.isBranch&&e.jsxs(e.Fragment,{children:[t.isOpen&&e.jsx(ac,{className:"fa-icon blackselectiongen"}),!t.isOpen&&e.jsx(ic,{className:"fa-icon blackselectiongen"})]})]}),t.isOpen&&t.isBranch&&e.jsx(jh,{node:t,child:!0})]})},dS=i=>{const{node:t=null}=i,{searchResult:s=null}=Ae();return e.jsxs(e.Fragment,{children:[e.jsx(uS,{}),e.jsx(N,{fullHeight:!0,className:"nitro-catalog-navigation-grid-container rounded p-1",overflow:"hidden",children:e.jsxs(ke,{id:"nitro-catalog-main-navigation",gap:1,columnCount:1,children:[s&&s.filteredNodes.length>0&&s.filteredNodes.map((n,a)=>e.jsx(Ih,{node:n},a)),!s&&e.jsx(jh,{node:t})]})})]})},mS=i=>{const{columnCount:t=5,...s}=i,[n,a]=o.useState(!1),[r,l]=o.useState(null),{currentOffer:c=null,setPurchaseOptions:m=null}=Ae(),{badgeCodes:h=[],activate:d=null,deactivate:g=null}=mi(),f=o.useMemo(()=>{if(!r)return null;const j=new ri;return j.setValue(["0",r,"",""]),j},[r]);return o.useEffect(()=>{c&&m(j=>{const p={...j};return p.extraParamRequired=!0,p.extraData=f&&f.getValue(1)||null,p.previewStuffData=f,p})},[c,f,m]),o.useEffect(()=>{if(!n)return;const j=d();return()=>g(j)},[n,d,g]),o.useEffect(()=>(a(!0),()=>a(!1)),[]),e.jsx(ke,{columnCount:t,...s,children:h&&h.length>0&&h.map((j,p)=>e.jsx(Ce,{itemActive:r===j,onClick:I=>l(j),children:e.jsx(ze,{badgeCode:j})},p))})},Ko=i=>{const{currentPage:t=null,setCurrentOffer:s=null}=Ae();return o.useEffect(()=>{!t||!t.offers.length||s(t.offers[0])},[t,s]),null},Pc=i=>{const{offer:t=null,selectOffer:s=null,itemActive:n=!1,...a}=i,[r,l]=o.useState(!1),{requestOfferToMover:c=null}=Ae(),{isVisible:m=!1}=ar(),h=o.useMemo(()=>t.pricingModel===Ut.PRICING_MODEL_BUNDLE?null:t.product.getIconUrl(t),[t]),d=f=>{switch(f.type){case Ne.MOUSE_DOWN:s(t),l(!0);return;case Ne.MOUSE_UP:l(!1);return;case Ne.ROLL_OUT:if(!r||!n||!m)return;c(t);return}},g=t.product;return g?e.jsx(Ce,{itemImage:h,itemCount:t.pricingModel===Ut.PRICING_MODEL_MULTI?g.productCount:1,itemUniqueSoldout:g.uniqueLimitedItemSeriesSize&&!g.uniqueLimitedItemsLeft,itemUniqueNumber:g.uniqueLimitedItemSeriesSize,itemActive:n,onMouseDown:d,onMouseUp:d,onMouseOut:d,...a,children:t.product.productType===me.ROBOT&&e.jsx(tt,{figure:t.product.extraParam,headOnly:!0,direction:3})}):null},hi=i=>{const{columnCount:t=5,children:s=null,...n}=i,{currentOffer:a=null,setCurrentOffer:r=null,currentPage:l=null,setPurchaseOptions:c=null}=Ae(),m=o.useRef();if(o.useEffect(()=>{m&&m.current&&(m.current.scrollTop=0)},[l]),!l)return null;const h=d=>{d.activate(),!d.isLazy&&(r(d),d.product&&d.product.productType===me.WALL&&c(g=>{const f={...g};return f.extraData=d.product.extraParam||null,f}))};return e.jsxs(ke,{innerRef:m,columnCount:t,...n,children:[l.offers&&l.offers.length>0&&l.offers.map((d,g)=>e.jsx(Pc,{itemActive:a&&a.offerId===d.offerId,offer:d,selectOffer:h},g)),s]})},Xo=i=>{const{children:t=null,...s}=i,{currentOffer:n=null}=Ae();return!n||n.pricingModel!==Ut.PRICING_MODEL_SINGLE||!n.product.isUniqueLimitedItem?null:e.jsxs(A,{...s,children:[e.jsx(fN,{className:"mx-auto",uniqueLimitedItemsLeft:n.product.uniqueLimitedItemsLeft,uniqueLimitedSeriesSize:n.product.uniqueLimitedItemSeriesSize}),t]})},Js=i=>{const{noGiftOption:t=!1,purchaseCallback:s=null}=i,[n,a]=o.useState(Xe.NONE);gn(Ka.CATALOG_SKIP_PURCHASE_CONFIRMATION,!1);const{currentOffer:r=null,purchaseOptions:l=null,setPurchaseOptions:c=null,getNodesByOfferId:m=null}=Ae(),{getCurrencyAmount:h=null}=Lr(),d=o.useCallback(p=>{switch(p.type){case Cn.PURCHASE_SUCCESS:a(Xe.NONE);return;case sr.PURCHASE_FAILED:a(Xe.FAILED);return;case Za.NOT_ALLOWED:a(Xe.FAILED);return;case ei.SOLD_OUT:a(Xe.SOLD_OUT);return}},[]);rt(Cn.PURCHASE_SUCCESS,d),rt(sr.PURCHASE_FAILED,d),rt(Za.NOT_ALLOWED,d),rt(ei.SOLD_OUT,d);const g=o.useMemo(()=>{if(!r||l.extraParamRequired&&(!l.extraData||!l.extraData.length))return!1;if(r.pricingModel===Ut.PRICING_MODEL_SINGLE){const p=r.product;if(p&&p.isUniqueLimitedItem)return!p.uniqueLimitedItemsLeft}return!1},[r,l]),f=(p=!1)=>{if(!r)return;if(vs()<r.clubLevel){Q("habboUI/open/hccenter");return}if(p){pt(new TN(r.page.pageId,r.offerId,l.extraData));return}if(a(Xe.PURCHASE),s){s();return}let I=r.page.pageId;D(new Po(I,r.offerId,l.extraData,l.quantity))};if(o.useEffect(()=>{r&&a(Xe.NONE)},[r,c]),o.useEffect(()=>{let p=null;return(n===Xe.CONFIRM||n===Xe.FAILED)&&(p=setTimeout(()=>a(Xe.NONE),3e3)),()=>{p&&clearTimeout(p)}},[n]),!r)return null;const j=()=>{const p=r.priceInCredits*l.quantity,I=r.priceInActivityPoints*l.quantity;if(vs()<r.clubLevel)return e.jsx(P,{variant:"danger",disabled:!0,children:u("catalog.alert.hc.required")});if(g)return e.jsx(P,{variant:"danger",disabled:!0,children:u("catalog.alert.limited_edition_sold_out.title")});if(p>h(-1))return e.jsx(P,{variant:"danger",disabled:!0,children:u("catalog.alert.notenough.title")});if(I>h(r.activityPointType))return e.jsx(P,{variant:"danger",disabled:!0,children:u("catalog.alert.notenough.activitypoints.title."+r.activityPointType)});switch(n){case Xe.CONFIRM:return e.jsx(P,{variant:"warning",onClick:()=>f(),children:u("catalog.marketplace.confirm_title")});case Xe.PURCHASE:return e.jsx(P,{disabled:!0,children:e.jsx(Sc,{})});case Xe.FAILED:return e.jsx(P,{variant:"danger",children:u("generic.failed")});case Xe.SOLD_OUT:return e.jsx(P,{variant:"danger",children:u("generic.failed")+" - "+u("catalog.alert.limited_edition_sold_out.title")});case Xe.NONE:default:return e.jsx(P,{disabled:l.extraParamRequired&&(!l.extraData||!l.extraData.length),onClick:x=>a(Xe.CONFIRM),children:u("catalog.purchase_confirmation."+(r.isRentOffer?"rent":"buy"))})}};return e.jsxs(e.Fragment,{children:[e.jsx(j,{}),!t&&!r.isRentOffer&&e.jsx(P,{disabled:l.quantity>1||!r.giftable||g||l.extraParamRequired&&(!l.extraData||!l.extraData.length),onClick:()=>f(!0),children:u("catalog.purchase_confirmation.gift")})]})},Eh=i=>{const{offer:t=null,separator:s=!1}=i,{purchaseOptions:n=null}=Ae(),{quantity:a=1}=n;return t?e.jsxs(e.Fragment,{children:[t.priceInCredits>0&&e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx(C,{bold:!0,children:t.priceInCredits*a}),e.jsx(Nt,{type:-1})]}),s&&t.priceInCredits>0&&t.priceInActivityPoints>0&&e.jsx(Lo,{size:"xs",color:"black",className:"fa-icon"}),t.priceInActivityPoints>0&&e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx(C,{bold:!0,children:t.priceInActivityPoints*a}),e.jsx(Nt,{type:t.activityPointType})]})]}):null},Vn=i=>{const{gap:t=1,...s}=i,{currentOffer:n=null}=Ae();return e.jsx(N,{gap:t,...s,children:e.jsx(Eh,{offer:n})})},ir=i=>{const{currentOffer:t=null,roomPreviewer:s=null,purchaseOptions:n=null}=Ae(),{previewStuffData:a=null}=n;return o.useEffect(()=>{if(!t||t.pricingModel===Ut.PRICING_MODEL_BUNDLE||!s)return;const r=t.product;if(r)switch(s.reset(!1),r.productType){case me.FLOOR:{if(!r.furnitureData)return;if(r.furnitureData.specialType===ce.FIGURE_PURCHASABLE_SET){const c=V().getFloorItemData(r.furnitureData.id).customParams.split(",").map(d=>parseInt(d)),m=[];for(const d of c)xt().isValidFigureSetForGender(d,V().gender)&&m.push(d);const h=xt().getFigureStringWithFigureIds(V().figure,V().gender,m);s.addAvatarIntoRoom(h,r.productClassId)}else s.addFurnitureIntoRoom(r.productClassId,new vt(90),a,r.extraParam);return}case me.WALL:{if(!r.furnitureData)return;switch(r.furnitureData.specialType){case ce.FLOOR:s.updateObjectRoom(r.extraParam);return;case ce.WALL_PAPER:s.updateObjectRoom(null,r.extraParam);return;case ce.LANDSCAPE:{s.updateObjectRoom(null,null,r.extraParam);const l=V().getWallItemDataByName("window_double_default");l&&s.addWallItemIntoRoom(l.id,new vt(90),l.customParams);return}default:s.updateObjectRoom("default","default","default"),s.addWallItemIntoRoom(r.productClassId,new vt(90),r.extraParam);return}}case me.ROBOT:s.addAvatarIntoRoom(r.extraParam,0);return;case me.EFFECT:s.addAvatarIntoRoom(V().figure,r.productClassId);return}},[t,a,s]),t?t.pricingModel===Ut.PRICING_MODEL_BUNDLE?e.jsx(N,{fit:!0,overflow:"hidden",className:"bg-muted p-2 rounded",children:e.jsx(ke,{fullWidth:!0,columnCount:4,className:"nitro-catalog-layout-bundle-grid",children:t.products.length>0&&t.products.map((r,l)=>e.jsx(Ce,{itemImage:r.getIconUrl(t),itemCount:r.productCount},l))})}):e.jsx(Ho,{roomPreviewer:s,height:140}):null},hS=i=>{const{page:t=null}=i,{currentOffer:s=null}=Ae();return e.jsxs(e.Fragment,{children:[e.jsx(Ko,{}),e.jsxs(te,{children:[e.jsxs(N,{size:7,overflow:"hidden",children:[e.jsx(hi,{shrink:!0}),e.jsxs(N,{gap:1,overflow:"hidden",children:[e.jsx(C,{truncate:!0,shrink:!0,fontWeight:"bold",children:u("catalog_selectbadge")}),e.jsx(mS,{})]})]}),e.jsxs(N,{center:!s,size:5,overflow:"hidden",children:[!s&&e.jsxs(e.Fragment,{children:[!!t.localization.getImage(1)&&e.jsx("img",{alt:"",src:t.localization.getImage(1)}),e.jsx(C,{center:!0,dangerouslySetInnerHTML:{__html:t.localization.getText(0)}})]}),s&&e.jsxs(e.Fragment,{children:[e.jsx(A,{position:"relative",overflow:"hidden",children:e.jsx(ir,{})}),e.jsxs(N,{grow:!0,gap:1,children:[e.jsx(Xo,{fullWidth:!0}),e.jsx(C,{grow:!0,truncate:!0,children:s.localizationName}),e.jsx(_,{justifyContent:"end",children:e.jsx(Vn,{alignItems:"end"})}),e.jsx(Js,{})]})]})]})]})]})},nr=i=>{const{...t}=i,{currentOffer:s=null}=Ae();return!s||!s.badgeCode||!s.badgeCode.length?null:e.jsx(ze,{badgeCode:s.badgeCode,...t})},gS=1,fS=100,Lc=i=>{const{currentOffer:t=null,purchaseOptions:s=null,setPurchaseOptions:n=null}=Ae(),{quantity:a=1}=s,r=l=>{isNaN(l)&&(l=1),l=Math.max(l,gS),l=Math.min(l,fS),l!==a&&n(c=>{const m={...c};return m.quantity=l,m})};return!t||!t.bundlePurchaseAllowed?null:e.jsxs(e.Fragment,{children:[e.jsx(C,{children:u("catalog.bundlewidget.spinner.select.amount")}),e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx(uc,{className:"text-black cursor-pointer fa-icon",onClick:l=>r(a-1)}),e.jsx("input",{type:"number",className:"form-control form-control-sm quantity-input",value:a,onChange:l=>r(l.target.valueAsNumber)}),e.jsx(dc,{className:"text-black cursor-pointer fa-icon",onClick:l=>r(a+1)})]})]})},pS=i=>{const{page:t=null}=i,[s,n]=o.useState(new Map),{currentOffer:a=null,setCurrentOffer:r=null}=Ae(),[l,c]=o.useState(!1),m=(j,p)=>!j.product.furnitureData.colorIndex||!p.product.furnitureData.colorIndex||j.product.furnitureData.colorIndex>p.product.furnitureData.colorIndex?1:j==p?0:-1,h=(j,p)=>j.product.furnitureData.className>p.product.furnitureData.className?1:j==p?0:-1,d=j=>{j.activate(),r(j)},g=(j,p)=>{const I=`${p}*${j}`,x=t.offers.findIndex(E=>E.product.furnitureData.fullName===I);x>-1&&d(t.offers[x])},f=o.useMemo(()=>{const j=[],p=new Map,I=new Map;return t.offers.sort(m),t.offers.forEach(x=>{if(!x.product)return;const E=x.product.furnitureData;if(!E||!E.hasIndexedColor)j.push(x);else{const v=E.className,b=E.colorIndex;I.has(v)||I.set(v,[]);let w=16777215;if(E.colors){for(let S of E.colors)S!==16777215&&(w=S);I.get(v).indexOf(w)===-1&&(I.get(v)[b]=w)}p.has(v)||(j.push(x),p.set(v,!0))}}),j.sort(h),n(I),j},[t.offers]);return e.jsxs(te,{children:[e.jsx(N,{size:7,overflow:"hidden",children:e.jsxs(ke,{columnCount:5,children:[(!l||!a||!s.has(a.product.furnitureData.className))&&f.map((j,p)=>e.jsx(Pc,{itemActive:a&&(a.product.furnitureData.hasIndexedColor?a.product.furnitureData.className===j.product.furnitureData.className:a.offerId===j.offerId),offer:j,selectOffer:d},p)),l&&a&&s.has(a.product.furnitureData.className)&&s.get(a.product.furnitureData.className).map((j,p)=>e.jsx(Ce,{itemHighlight:!0,itemActive:a.product.furnitureData.colorIndex===p,itemColor:fs.int2rgb(j),className:"clear-bg",onClick:I=>g(p,a.product.furnitureData.className)},p))]})}),e.jsxs(N,{center:!a,size:5,overflow:"hidden",children:[!a&&e.jsxs(e.Fragment,{children:[!!t.localization.getImage(1)&&e.jsx("img",{alt:"",src:t.localization.getImage(1)}),e.jsx(C,{center:!0,dangerouslySetInnerHTML:{__html:t.localization.getText(0)}})]}),a&&e.jsxs(e.Fragment,{children:[e.jsxs(A,{position:"relative",overflow:"hidden",children:[e.jsx(ir,{}),e.jsx(nr,{position:"absolute",className:"bg-muted rounded bottom-1 end-1"}),a.product.furnitureData.hasIndexedColor&&e.jsx(P,{position:"absolute",className:"bottom-1 start-1",onClick:j=>c(p=>!p),children:e.jsx(fm,{className:"fa-icon"})})]}),e.jsxs(N,{grow:!0,gap:1,children:[e.jsx(Xo,{fullWidth:!0}),e.jsx(C,{grow:!0,truncate:!0,children:a.localizationName}),e.jsxs(_,{justifyContent:"between",children:[e.jsx(N,{gap:1,children:e.jsx(Lc,{})}),e.jsx(Vn,{justifyContent:"end",alignItems:"end"})]}),e.jsx(Js,{})]})]})]})]})},bh=i=>{const{imageUrl:t=null}=i,[s,n]=o.useState("");return o.useEffect(()=>{n(t??K("catalog.asset.image.url").replace("%name%","catalog_header_roombuilder"))},[t]),e.jsx(_,{center:!0,fullWidth:!0,className:"nitro-catalog-header",children:e.jsx("img",{src:s,onError:({currentTarget:a})=>{a.src=K("catalog.asset.image.url").replace("%name%","catalog_header_roombuilder")}})})},xS=i=>{const{page:t=null}=i,{currentOffer:s=null,currentPage:n=null}=Ae();return e.jsx(e.Fragment,{children:e.jsxs(te,{children:[e.jsxs(N,{size:7,overflow:"hidden",children:[K("catalog.headers")&&e.jsx(bh,{imageUrl:n.localization.getImage(0)}),e.jsx(hi,{})]}),e.jsxs(N,{center:!s,size:5,overflow:"hidden",children:[!s&&e.jsxs(e.Fragment,{children:[!!t.localization.getImage(1)&&e.jsx(Nn,{imageUrl:t.localization.getImage(1)}),e.jsx(C,{center:!0,dangerouslySetInnerHTML:{__html:t.localization.getText(0)}})]}),s&&e.jsxs(e.Fragment,{children:[e.jsxs(_,{center:!0,overflow:"hidden",style:{height:140},children:[s.product.productType!==me.BADGE&&e.jsxs(e.Fragment,{children:[e.jsx(ir,{}),e.jsx(nr,{className:"bg-muted rounded bottom-1 end-1"})]}),s.product.productType===me.BADGE&&e.jsx(nr,{className:"scale-2"})]}),e.jsxs(N,{grow:!0,gap:1,children:[e.jsx(Xo,{fullWidth:!0}),e.jsx(C,{grow:!0,children:s.localizationName}),e.jsxs(_,{justifyContent:"between",children:[e.jsx(N,{gap:1,children:e.jsx(Lc,{})}),e.jsx(Vn,{justifyContent:"end",alignItems:"end"})]}),e.jsx(Js,{})]})]})]})]})})},jS=i=>{const{...t}=i,{currentOffer:s=null,purchaseOptions:n=null}=Ae(),{previewStuffData:a=null}=n,r=o.useMemo(()=>{if(!s||!a)return null;const l=a.getValue(2);return!l||!l.length?null:l},[s,a]);return r?e.jsx(ze,{badgeCode:r,isGroup:!0,...t}):null},Ch=i=>{const[t,s]=o.useState(0),{currentOffer:n=null,catalogOptions:a=null,setPurchaseOptions:r=null}=Ae(),{groups:l=null}=a,c=o.useMemo(()=>{if(!l||!l.length)return null;const h=l[t];if(!h)return null;const d=new ri;return d.setValue(["0",h.groupId.toString(),h.badgeCode,h.colorA,h.colorB]),d},[t,l]);if(o.useEffect(()=>{n&&r(h=>{const d={...h};return d.extraParamRequired=!0,d.extraData=c&&c.getValue(1)||null,d.previewStuffData=c,d})},[n,c,r]),o.useEffect(()=>{D(new pm)},[]),!l||!l.length)return e.jsxs(A,{className:"bg-muted rounded p-1 text-black text-center",children:[u("catalog.guild_selector.members_only"),e.jsx(P,{className:"mt-1",children:u("catalog.guild_selector.find_groups")})]});const m=l[t];return e.jsxs(_,{gap:1,children:[!!m&&e.jsxs(_,{overflow:"hidden",className:"rounded border",children:[e.jsx(A,{fullHeight:!0,style:{width:"20px",backgroundColor:"#"+m.colorA}}),e.jsx(A,{fullHeight:!0,style:{width:"20px",backgroundColor:"#"+m.colorB}})]}),e.jsx("select",{className:"form-select form-select-sm",value:t,onChange:h=>s(parseInt(h.target.value)),children:l.map((h,d)=>e.jsx("option",{value:d,children:h.groupName},d))})]})},IS=i=>{const{page:t=null}=i,{currentOffer:s=null}=Ae();return e.jsxs(te,{children:[e.jsx(N,{size:7,overflow:"hidden",children:e.jsx(hi,{})}),e.jsxs(N,{center:!s,size:5,overflow:"hidden",children:[!s&&e.jsxs(e.Fragment,{children:[!!t.localization.getImage(1)&&e.jsx("img",{alt:"",src:t.localization.getImage(1)}),e.jsx(C,{center:!0,dangerouslySetInnerHTML:{__html:t.localization.getText(0)}})]}),s&&e.jsxs(e.Fragment,{children:[e.jsxs(A,{position:"relative",overflow:"hidden",children:[e.jsx(ir,{}),e.jsx(jS,{position:"absolute",className:"bottom-1 end-1"})]}),e.jsxs(N,{grow:!0,gap:1,children:[e.jsx(C,{truncate:!0,children:s.localizationName}),e.jsx(A,{grow:!0,children:e.jsx(Ch,{})}),e.jsx(_,{justifyContent:"end",children:e.jsx(Vn,{alignItems:"end"})}),e.jsx(Js,{})]})]})]})]})},ES=i=>{const{page:t=null}=i;o.useState(0);const{currentOffer:s=null,setCurrentOffer:n=null,catalogOptions:a=null}=Ae();return o.useEffect(()=>{D(new pm)},[t]),e.jsxs(e.Fragment,{children:[e.jsx(Ko,{}),e.jsxs(te,{children:[e.jsx(N,{className:"bg-muted rounded p-2 text-black",size:7,overflow:"hidden",children:e.jsx(A,{className:"overflow-auto",dangerouslySetInnerHTML:{__html:t.localization.getText(1)}})}),e.jsx(N,{size:5,overflow:"hidden",gap:1,children:!!s&&e.jsx(e.Fragment,{children:e.jsxs(N,{grow:!0,gap:1,children:[e.jsx(C,{truncate:!0,children:s.localizationName}),e.jsx(A,{grow:!0,children:e.jsx(Ch,{})}),e.jsx(_,{justifyContent:"end",children:e.jsx(Vn,{alignItems:"end"})}),e.jsx(Js,{noGiftOption:!0})]})})})]})]})},bS=i=>{const{page:t=null}=i;return e.jsxs(te,{children:[e.jsxs(N,{size:7,overflow:"hidden",className:"bg-muted rounded p-2 text-black",children:[e.jsx(A,{dangerouslySetInnerHTML:{__html:t.localization.getText(2)}}),e.jsx(A,{overflow:"auto",dangerouslySetInnerHTML:{__html:t.localization.getText(0)}}),e.jsx(A,{dangerouslySetInnerHTML:{__html:t.localization.getText(1)}})]}),e.jsxs(N,{center:!0,size:5,overflow:"hidden",children:[e.jsx(Nn,{imageUrl:t.localization.getImage(1)}),e.jsx(P,{onClick:()=>Q("groups/create"),children:u("catalog.start.guild.purchase.button")})]})]})},CS=i=>{const{page:t=null}=i;return e.jsx("div",{className:"h-100 nitro-catalog-layout-info-loyalty text-black d-flex flex-row",children:e.jsx("div",{className:"overflow-auto h-100 d-flex flex-column info-loyalty-content",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:t.localization.getText(0)}})})})},Nh=i=>{const{page:t=null}=i,s=t.localization.getImage(1);return e.jsxs(N,{grow:!0,className:"bg-muted rounded text-black p-2",overflow:"hidden",children:[e.jsxs(_,{alignItems:"center",gap:2,children:[s&&e.jsx("img",{alt:"",src:s}),e.jsx(A,{className:"fs-5",dangerouslySetInnerHTML:{__html:t.localization.getText(1)}})]}),e.jsx(N,{grow:!0,alignItems:"center",overflow:"auto",children:e.jsx(A,{dangerouslySetInnerHTML:{__html:t.localization.getText(2)}})}),e.jsx(_,{alignItems:"center",children:e.jsx(A,{className:"fw-bold",dangerouslySetInnerHTML:{__html:t.localization.getText(3)}})})]})},NS=i=>e.jsx(Nh,{...i}),vS=i=>{const{page:t=null}=i,[s,n]=o.useState(""),[a,r]=o.useState(""),[l,c]=o.useState(-1),[m,h]=o.useState([]),[d,g]=o.useState(!1),[f,j]=o.useState(1),{categories:p=null}=Vs(),{setIsVisible:I=null}=Ae(),{promoteInformation:x,isExtended:E,setIsExtended:v}=Ac();o.useEffect(()=>{E&&(c(x.data.flatId),n(x.data.eventName),r(x.data.eventDescription),j(x.data.categoryId),g(E),v(!1))},[E,s,a,f]);const b=()=>{c(-1),n(""),r(""),j(1),v(!1),I(!1)},w=()=>{const S=t.pageId,T=t.offers.length>=1?t.offers[0].offerId:-1,L=l,k=s,y=a,R=f;D(new mj(S,T,L,k,d,y,R)),b()};return M(uj,S=>{const T=S.getParser();T&&h(T.rooms)}),o.useEffect(()=>{D(new dj),D(new im)},[]),e.jsxs(e.Fragment,{children:[e.jsx(C,{bold:!0,center:!0,children:u("roomad.catalog_header")}),e.jsxs(N,{size:12,overflow:"hidden",className:"text-black",children:[e.jsx(A,{children:u("roomad.catalog_text",["duration"],["120"])}),e.jsxs(A,{className:"bg-muted rounded p-1",children:[e.jsxs(N,{gap:2,children:[e.jsx(C,{bold:!0,children:u("navigator.category")}),e.jsx("select",{className:"form-select form-select-sm",value:f,onChange:S=>j(parseInt(S.target.value)),disabled:d,children:p&&p.map((S,T)=>e.jsx("option",{value:S.id,children:u(S.name)},T))})]}),e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("roomad.catalog_name")}),e.jsx("input",{type:"text",className:"form-control form-control-sm",maxLength:64,value:s,onChange:S=>n(S.target.value),readOnly:d})]}),e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("roomad.catalog_description")}),e.jsx("textarea",{className:"form-control form-control-sm",maxLength:64,value:a,onChange:S=>r(S.target.value),readOnly:d})]}),e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("roomad.catalog_roomname")}),e.jsxs("select",{className:"form-select form-select-sm",value:l,onChange:S=>c(parseInt(S.target.value)),disabled:d,children:[e.jsx("option",{value:-1,disabled:!0,children:u("roomad.catalog_roomname")}),m&&m.map((S,T)=>e.jsx("option",{value:S.roomId,children:S.roomName},T))]})]}),e.jsx(N,{gap:1,children:e.jsx(P,{variant:!s||!a||l===-1?"danger":"success",onClick:w,disabled:!s||!a||l===-1,children:u(d?"roomad.extend.event":"buy")})})]})]})]})},vh=i=>{const{columnCount:t=5,children:s=null,...n}=i,{currentOffer:a=null}=Ae(),r=o.useRef();return o.useEffect(()=>{r&&r.current&&(r.current.scrollTop=0)},[a]),a?e.jsxs(ke,{innerRef:r,columnCount:5,...n,children:[a.products&&a.products.length>0&&a.products.map((l,c)=>e.jsx(Ce,{itemImage:l.getIconUrl(),itemCount:l.productCount},c)),s]}):null},_h=i=>{const{gap:t=1,...s}=i,{currentOffer:n=null}=Ae();return e.jsx(_,{gap:t,alignItems:"center",classNames:["bg-muted","p-1","rounded"],...s,children:e.jsx(Eh,{separator:!0,offer:n})})},_S=i=>{const{page:t=null}=i;return e.jsxs(e.Fragment,{children:[e.jsx(Ko,{}),e.jsxs(te,{children:[e.jsxs(N,{size:7,overflow:"hidden",children:[!!t.localization.getText(2)&&e.jsx(C,{dangerouslySetInnerHTML:{__html:t.localization.getText(2)}}),e.jsx(N,{grow:!0,overflow:"hidden",className:"bg-muted p-2 rounded",children:e.jsx(vh,{fullWidth:!0,className:"nitro-catalog-layout-bundle-grid"})})]}),e.jsxs(N,{size:5,overflow:"hidden",gap:1,children:[!!t.localization.getText(1)&&e.jsx(C,{center:!0,small:!0,overflow:"auto",children:t.localization.getText(1)}),e.jsxs(N,{grow:!0,position:"relative",overflow:"hidden",gap:0,children:[!!t.localization.getImage(1)&&e.jsx("img",{alt:"",className:"flex-grow-1",src:t.localization.getImage(1)}),e.jsx(nr,{position:"absolute",className:"bg-muted rounded bottom-0 start-0"}),e.jsx(_h,{position:"absolute",className:"bottom-0 end-0"})]}),e.jsx(N,{gap:1,children:e.jsx(Js,{})})]})]})]})},SS=i=>{const{page:t=null}=i;return e.jsxs(e.Fragment,{children:[e.jsx(Ko,{}),e.jsxs(te,{children:[e.jsxs(N,{size:7,overflow:"hidden",children:[!!t.localization.getText(2)&&e.jsx(C,{dangerouslySetInnerHTML:{__html:t.localization.getText(2)}}),e.jsx(N,{grow:!0,overflow:"hidden",className:"bg-muted p-2 rounded",children:e.jsx(vh,{fullWidth:!0,className:"nitro-catalog-layout-bundle-grid"})})]}),e.jsxs(N,{size:5,overflow:"hidden",gap:1,children:[!!t.localization.getText(1)&&e.jsx(C,{center:!0,small:!0,overflow:"auto",children:t.localization.getText(1)}),e.jsxs(N,{grow:!0,position:"relative",overflow:"hidden",gap:0,children:[!!t.localization.getImage(1)&&e.jsx("img",{alt:"",className:"flex-grow-1",src:t.localization.getImage(1)}),e.jsx(nr,{position:"absolute",className:"bg-muted rounded bottom-0 start-0"}),e.jsx(_h,{position:"absolute",className:"bottom-0 end-0"})]}),e.jsx(N,{gap:1,children:e.jsx(Js,{})})]})]})]})},wS=i=>{const{page:t=null}=i,[s,n]=o.useState(-1),[a,r]=o.useState(""),{currentOffer:l=null,currentPage:c=null}=Ae(),m=h=>{var d;return(d=pe().soundManager.musicController)==null?void 0:d.playSong(h,Ca.PRIORITY_PURCHASE_PREVIEW,15,0,0,0)};return M(hj,h=>{const d=h.getParser();d.officialSongId===a&&n(d.songId)}),o.useEffect(()=>{if(!l)return;const h=l.product;if(h){if(h.extraParam.length>0){const d=parseInt(h.extraParam);d>0?n(d):(r(h.extraParam),D(new gj(h.extraParam)))}else r(""),n(-1);return()=>{var d;return(d=pe().soundManager.musicController)==null?void 0:d.stop(Ca.PRIORITY_PURCHASE_PREVIEW)}}},[l]),o.useEffect(()=>()=>{var h;return(h=pe().soundManager.musicController)==null?void 0:h.stop(Ca.PRIORITY_PURCHASE_PREVIEW)},[]),e.jsx(e.Fragment,{children:e.jsxs(te,{children:[e.jsxs(N,{size:7,overflow:"hidden",children:[K("catalog.headers")&&e.jsx(bh,{imageUrl:c.localization.getImage(0)}),e.jsx(hi,{})]}),e.jsxs(N,{center:!l,size:5,overflow:"hidden",children:[!l&&e.jsxs(e.Fragment,{children:[!!t.localization.getImage(1)&&e.jsx(Nn,{imageUrl:t.localization.getImage(1)}),e.jsx(C,{center:!0,dangerouslySetInnerHTML:{__html:t.localization.getText(0)}})]}),l&&e.jsxs(e.Fragment,{children:[e.jsxs(_,{center:!0,overflow:"hidden",style:{height:140},children:[l.product.productType!==me.BADGE&&e.jsxs(e.Fragment,{children:[e.jsx(ir,{}),e.jsx(nr,{className:"bg-muted rounded bottom-1 end-1"})]}),l.product.productType===me.BADGE&&e.jsx(nr,{className:"scale-2"})]}),e.jsxs(N,{grow:!0,gap:1,children:[e.jsx(Xo,{fullWidth:!0}),e.jsx(C,{grow:!0,truncate:!0,children:l.localizationName}),s>-1&&e.jsx(P,{onClick:()=>m(s),children:u("play_preview_button")}),e.jsxs(_,{justifyContent:"between",children:[e.jsx(N,{gap:1,children:e.jsx(Lc,{})}),e.jsx(Vn,{justifyContent:"end",alignItems:"end"})]}),e.jsx(Js,{})]})]})]})]})})},TS=["floors","walls","views"],RS=i=>{const{columnCount:t=5,children:s=null,...n}=i,[a,r]=o.useState(null),[l,c]=o.useState(-1),[m,h]=o.useState(null),{currentPage:d=null,currentOffer:g=null,setCurrentOffer:f=null,setPurchaseOptions:j=null}=Ae(),p=o.useRef(),I=E=>{E&&h(v=>{const b=[...v];return b[l]=E,b})};if(o.useEffect(()=>{if(!d)return;const E=[[],[],[]];for(const v of d.offers){if(v.pricingModel!==Ut.PRICING_MODEL_SINGLE&&v.pricingModel!==Ut.PRICING_MODEL_MULTI)continue;const b=v.product;if(!b||b.productType!==me.WALL&&b.productType!==me.FLOOR||!b.furnitureData)continue;switch(b.furnitureData.className){case"floor":E[0].push(v);break;case"wallpaper":E[1].push(v);break;case"landscape":E[2].push(v);break}}r(E),c(0),h([E[0][0],E[1][0],E[2][0]])},[d]),o.useEffect(()=>{l===-1||!m||f(m[l])},[l,m,f]),o.useEffect(()=>{l===-1||!m||!g||j(E=>{const v={...E};return v.extraData=m[l].product.extraParam,v.extraParamRequired=!0,v})},[g,l,m,j]),o.useEffect(()=>{p&&p.current&&(p.current.scrollTop=0)},[l]),!a||l===-1)return null;const x=a[l];return e.jsxs(e.Fragment,{children:[e.jsx(fn,{children:TS.map((E,v)=>e.jsx(P,{active:l===v,onClick:b=>c(v),children:u(`catalog.spaces.tab.${E}`)},v))}),e.jsxs(ke,{innerRef:p,columnCount:t,...n,children:[x&&x.length>0&&x.map((E,v)=>e.jsx(Pc,{itemActive:g&&g===E,offer:E,selectOffer:b=>I(b)},v)),s]})]})},yS=i=>{const{page:t=null}=i,{currentOffer:s=null,roomPreviewer:n=null}=Ae();return o.useEffect(()=>{n.updatePreviewObjectBoundingRectangle(new Dn)},[n]),e.jsxs(te,{children:[e.jsx(N,{size:7,overflow:"hidden",children:e.jsx(RS,{})}),e.jsxs(N,{center:!s,size:5,overflow:"hidden",children:[!s&&e.jsxs(e.Fragment,{children:[!!t.localization.getImage(1)&&e.jsx("img",{alt:"",src:t.localization.getImage(1)}),e.jsx(C,{center:!0,dangerouslySetInnerHTML:{__html:t.localization.getText(0)}})]}),s&&e.jsxs(e.Fragment,{children:[e.jsx(A,{position:"relative",overflow:"hidden",children:e.jsx(ir,{})}),e.jsxs(N,{grow:!0,gap:1,children:[e.jsx(C,{grow:!0,truncate:!0,children:s.localizationName}),e.jsx(_,{justifyContent:"end",children:e.jsx(Vn,{alignItems:"end"})}),e.jsx(Js,{})]})]})]})]})},OS=i=>{const{page:t=null}=i,[s,n]=o.useState(""),{currentOffer:a=null,setPurchaseOptions:r=null}=Ae();return o.useEffect(()=>{a&&r(l=>{const c={...l};return c.extraData=s,c})},[a,s,r]),e.jsxs(te,{children:[e.jsxs(N,{size:7,overflow:"hidden",children:[e.jsx(hi,{}),e.jsx("textarea",{className:"flex-grow-1 form-control w-100",defaultValue:s||"",onChange:l=>n(l.target.value)})]}),e.jsxs(N,{center:!a,size:5,overflow:"hidden",children:[!a&&e.jsxs(e.Fragment,{children:[!!t.localization.getImage(1)&&e.jsx("img",{alt:"",src:t.localization.getImage(1)}),e.jsx(C,{center:!0,dangerouslySetInnerHTML:{__html:t.localization.getText(0)}})]}),a&&e.jsxs(e.Fragment,{children:[e.jsx(ir,{}),e.jsxs(N,{grow:!0,gap:1,children:[e.jsx(C,{grow:!0,truncate:!0,children:a.localizationName}),e.jsx(_,{justifyContent:"end",children:e.jsx(Vn,{alignItems:"end"})}),e.jsx(Js,{})]})]})]})]})},kS=i=>{const[t,s]=o.useState(null),[n,a]=o.useState(Xe.NONE),{currentPage:r=null,catalogOptions:l=null}=Ae(),{purse:c=null,getCurrencyAmount:m=null}=Lr(),{clubOffers:h=null}=l,d=o.useCallback(v=>{switch(v.type){case Cn.PURCHASE_SUCCESS:a(Xe.NONE);return;case sr.PURCHASE_FAILED:a(Xe.FAILED);return}},[]);rt(Cn.PURCHASE_SUCCESS,d),rt(sr.PURCHASE_FAILED,d);const g=o.useCallback(v=>{let b="";return v.months>0&&(b=u("catalog.vip.item.header.months",["num_months"],[v.months.toString()])),v.extraDays>0&&(b!==""&&(b+=" "),b+=" "+u("catalog.vip.item.header.days",["num_days"],[v.extraDays.toString()])),b},[]),f=o.useCallback(()=>{if(!c)return"";const v=c.clubDays>0||c.clubPeriods>0?"extension.":"subscription.",b=t.months===0?"days":"months",w=t.months===0?t.extraDays:t.months;return u("catalog.vip.buy.confirm."+v+b).replace("%NUM_"+b.toUpperCase()+"%",w.toString())},[t,c]),j=o.useCallback(()=>{let v=u("catalog.vip.buy.confirm.end_date");return v=v.replace("%month%",t.month.toString()),v=v.replace("%day%",t.day.toString()),v=v.replace("%year%",t.year.toString()),v},[t]),p=o.useMemo(()=>{const v=c.clubDays,w=c.clubPeriods*31+v;return u("catalog.vip.extend.info",["days"],[w.toString()])},[c]),I=o.useCallback(()=>{t&&(a(Xe.PURCHASE),D(new Po(r.pageId,t.offerId,null,1)))},[t,r]),x=o.useCallback(v=>{a(Xe.NONE),s(v)},[]),E=o.useCallback(()=>{if(!t)return null;if(t.priceCredits>m(-1))return e.jsx(P,{fullWidth:!0,variant:"danger",children:u("catalog.alert.notenough.title")});if(t.priceActivityPoints>m(t.priceActivityPointsType))return e.jsx(P,{fullWidth:!0,variant:"danger",children:u("catalog.alert.notenough.activitypoints.title."+t.priceActivityPointsType)});switch(n){case Xe.CONFIRM:return e.jsx(P,{fullWidth:!0,variant:"warning",onClick:I,children:u("catalog.marketplace.confirm_title")});case Xe.PURCHASE:return e.jsx(P,{fullWidth:!0,variant:"primary",disabled:!0,children:e.jsx(Sc,{})});case Xe.FAILED:return e.jsx(P,{fullWidth:!0,variant:"danger",disabled:!0,children:u("generic.failed")});case Xe.NONE:default:return e.jsx(P,{fullWidth:!0,variant:"success",onClick:()=>a(Xe.CONFIRM),children:u("buy")})}},[t,n,I,m]);return o.useEffect(()=>{h||D(new fj(1))},[h]),e.jsxs(te,{children:[e.jsxs(N,{fullHeight:!0,size:7,overflow:"hidden",justifyContent:"between",children:[e.jsx(ke,{columnCount:1,className:"nitro-catalog-layout-vip-buy-grid",children:h&&h.length>0&&h.map((v,b)=>e.jsxs(Ce,{column:!1,center:!1,alignItems:"center",justifyContent:"between",itemActive:t===v,className:"p-1",onClick:()=>x(v),children:[e.jsx("i",{className:"icon-hc-banner"}),e.jsxs(N,{justifyContent:"end",gap:0,children:[e.jsx(C,{textEnd:!0,children:g(v)}),e.jsxs(_,{justifyContent:"end",gap:1,children:[v.priceCredits>0&&e.jsxs(_,{alignItems:"center",justifyContent:"end",gap:1,children:[e.jsx(C,{children:v.priceCredits}),e.jsx(Nt,{type:-1})]}),v.priceActivityPoints>0&&e.jsxs(_,{alignItems:"center",justifyContent:"end",gap:1,children:[e.jsx(C,{children:v.priceActivityPoints}),e.jsx(Nt,{type:v.priceActivityPointsType})]})]})]})]},b))}),e.jsx(C,{center:!0,dangerouslySetInnerHTML:{__html:u("catalog.vip.buy.hccenter")}})]}),e.jsxs(N,{size:5,overflow:"hidden",children:[e.jsxs(N,{fullHeight:!0,center:!0,overflow:"hidden",children:[r.localization.getImage(1)&&e.jsx("img",{alt:"",src:r.localization.getImage(1)}),e.jsx(C,{center:!0,overflow:"auto",dangerouslySetInnerHTML:{__html:p}})]}),t&&e.jsxs(N,{fullWidth:!0,grow:!0,justifyContent:"end",children:[e.jsxs(_,{alignItems:"end",children:[e.jsxs(N,{grow:!0,gap:0,children:[e.jsx(C,{fontWeight:"bold",children:f()}),e.jsx(C,{children:j()})]}),e.jsxs(N,{gap:1,children:[t.priceCredits>0&&e.jsxs(_,{alignItems:"center",justifyContent:"end",gap:1,children:[e.jsx(C,{children:t.priceCredits}),e.jsx(Nt,{type:-1})]}),t.priceActivityPoints>0&&e.jsxs(_,{alignItems:"center",justifyContent:"end",gap:1,children:[e.jsx(C,{children:t.priceActivityPoints}),e.jsx(Nt,{type:t.priceActivityPointsType})]})]})]}),E()]})]})]})},AS=i=>{const{text:t=null}=i,[s,n]=o.useState(""),[a,r]=o.useState(!1),{simpleAlert:l=null}=Pe(),c=()=>{!s||!s.length||a||(D(new Ij(s)),r(!0))};return M(pj,m=>{const h=m.getParser();let d=u("catalog.alert.voucherredeem.ok.description");h.productName&&(d=u("catalog.alert.voucherredeem.ok.description.furni",["productName","productDescription"],[h.productName,h.productDescription])),l(d,null,null,null,u("catalog.alert.voucherredeem.ok.title")),r(!1),n("")}),M(xj,m=>{const h=m.getParser();l(u(`catalog.alert.voucherredeem.error.description.${h.errorCode}`),null,null,null,u("catalog.alert.voucherredeem.error.title")),r(!1)}),e.jsxs(_,{gap:1,children:[e.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:t,value:s,onChange:m=>n(m.target.value)}),e.jsx(P,{variant:"primary",onClick:c,disabled:a,children:e.jsx(jj,{className:"fa-icon"})})]})},ki=i=>{const{item:t=null,position:s="relative",pointer:n=!0,overflow:a="hidden",fullHeight:r=!0,classNames:l=[],children:c=null,...m}=i,h=o.useMemo(()=>{const g=["rounded","nitro-front-page-item"];return l.length&&g.push(...l),g},[l]);if(!t)return null;const d=K("image.library.url")+t.itemPromoImage;return e.jsxs(eh,{imageUrl:d,classNames:h,position:s,fullHeight:r,pointer:n,overflow:a,...m,children:[e.jsx(C,{position:"absolute",variant:"white",className:"bg-dark rounded p-2 m-2 bottom-0",children:t.itemName}),c]})},DS=i=>{const{page:t=null,hideNavigation:s=null}=i,{frontPageItems:n=[]}=Ae(),a=o.useCallback(r=>{switch(r.type){case ru.ITEM_CATALOGUE_PAGE:Q(`catalog/open/${r.catalogPageLocation}`);return;case ru.ITEM_PRODUCT_OFFER:Q(`catalog/open/${r.productOfferId}`);return}},[]);return o.useEffect(()=>{s()},[t,s]),e.jsxs(te,{children:[e.jsx(N,{size:4,children:n[0]&&e.jsx(ki,{item:n[0],onClick:r=>a(n[0])})}),e.jsxs(N,{size:8,children:[n[1]&&e.jsx(ki,{item:n[1],onClick:r=>a(n[1])}),n[2]&&e.jsx(ki,{item:n[2],onClick:r=>a(n[2])}),n[3]&&e.jsx(ki,{item:n[3],onClick:r=>a(n[3])}),e.jsx(AS,{text:t.localization.getText(1)})]})]})},Jl=1,zi=2,Sh=i=>{const{offerData:t=null,type:s=zi,onClick:n=null}=i,a=o.useMemo(()=>t?u((t.furniType===2?"wallItem":"roomItem")+`.name.${t.furniId}`):"",[t]),r=o.useCallback(()=>{if(!t)return"";if(t.status===Ya.SOLD)return u("catalog.marketplace.offer.sold");if(t.timeLeftMinutes<=0)return u("catalog.marketplace.offer.expired");const l=Math.max(1,t.timeLeftMinutes),c=Math.floor(l/60);let h=l-c*60+" "+u("catalog.marketplace.offer.minutes");return c>0&&(h=c+" "+u("catalog.marketplace.offer.hours")+" "+h),u("catalog.marketplace.offer.time_left",["time"],[h])},[t]);return e.jsxs(Ce,{shrink:!0,center:!1,column:!1,alignItems:"center",className:"p-1",children:[e.jsx(N,{style:{width:40,height:40},children:e.jsx(Ce,{column:!1,itemImage:iC(t.furniType===za.TYPE_FLOOR?me.FLOOR:me.WALL,t.furniId,t.extraData),itemUniqueNumber:t.isUniqueLimitedItem?t.stuffData.uniqueNumber:0})}),e.jsxs(N,{grow:!0,gap:0,children:[e.jsx(C,{fontWeight:"bold",children:a}),s===Jl&&e.jsxs(e.Fragment,{children:[e.jsx(C,{children:u("catalog.marketplace.offer.price_own_item",["price"],[t.price.toString()])}),e.jsx(C,{children:r()})]}),s===zi&&e.jsxs(e.Fragment,{children:[e.jsx(C,{children:u("catalog.marketplace.offer.price_public_item",["price","average"],[t.price.toString(),t.averagePrice>0?t.averagePrice.toString():"-"])}),e.jsx(C,{children:u("catalog.marketplace.offer_count",["count"],[t.offerCount.toString()])})]})]}),e.jsxs(N,{gap:1,children:[s===Jl&&t.status!==Ya.SOLD&&e.jsx(P,{variant:"secondary",onClick:()=>n(t),children:u("catalog.marketplace.offer.pick")}),s===zi&&e.jsxs(e.Fragment,{children:[e.jsx(P,{variant:"secondary",onClick:()=>n(t),children:u("buy")}),e.jsx(P,{variant:"secondary",disabled:!0,children:u("catalog.marketplace.view_more")})]})]})]})},PS=i=>{const[t,s]=o.useState(0),[n,a]=o.useState([]),{simpleAlert:r=null}=Pe();M(Ej,h=>{const d=h.getParser();if(!d)return;const g=d.offers.map(f=>{const j=new za(f.offerId,f.furniId,f.furniType,f.extraData,f.stuffData,f.price,f.status,f.averagePrice,f.offerCount);return j.timeLeftMinutes=f.timeLeftMinutes,j});s(d.creditsWaiting),a(g)}),M(bj,h=>{const d=h.getParser();if(d){if(!d.success){r(u("catalog.marketplace.cancel_failed"),ge.DEFAULT,null,null,u("catalog.marketplace.operation_failed.topic"));return}a(g=>g.filter(f=>f.offerId!==d.offerId))}});const l=o.useMemo(()=>n.filter(h=>h.status===Ya.SOLD),[n]),c=o.useCallback(()=>{a(h=>{const d=l.map(g=>g.offerId);return h.filter(g=>d.indexOf(g.offerId)===-1)}),D(new Cj)},[l]),m=h=>{D(new vj(h.offerId))};return o.useEffect(()=>{D(new Nj)},[]),e.jsxs(N,{overflow:"hidden",children:[t<=0&&e.jsx(C,{center:!0,className:"bg-muted rounded p-1",children:u("catalog.marketplace.redeem.no_sold_items")}),t>0&&e.jsxs(N,{center:!0,gap:1,className:"bg-muted rounded p-2",children:[e.jsx(C,{children:u("catalog.marketplace.redeem.get_credits",["count","credits"],[l.length.toString(),t.toString()])}),e.jsx(P,{className:"mt-1",onClick:c,children:u("catalog.marketplace.offer.redeem")})]}),e.jsxs(N,{gap:1,overflow:"hidden",children:[e.jsx(C,{truncate:!0,shrink:!0,fontWeight:"bold",children:u("catalog.marketplace.items_found",["count"],[n.length.toString()])}),e.jsx(N,{overflow:"auto",className:"nitro-catalog-layout-marketplace-grid",children:n.length>0&&n.map(h=>e.jsx(Sh,{offerData:h,type:Jl,onClick:m},h.offerId))})]})]})},LS=i=>{const{searchType:t=null,sortTypes:s=null,onSearch:n=null}=i,[a,r]=o.useState(s?s[0]:3),[l,c]=o.useState(""),[m,h]=o.useState(0),[d,g]=o.useState(0),f=o.useCallback(p=>{r(p),(t===Gt.BY_ACTIVITY||t===Gt.BY_VALUE)&&n({minPrice:-1,maxPrice:-1,query:"",type:p})},[n,t]),j=o.useCallback(()=>{const p=m>0?m:-1,I=d>0?d:-1;n({minPrice:p,maxPrice:I,type:a,query:l})},[d,m,n,l,a]);return o.useEffect(()=>{if(!s||!s.length)return;const p=s[0];r(p),(t===Gt.BY_ACTIVITY||Gt.BY_VALUE===t)&&n({minPrice:-1,maxPrice:-1,query:"",type:p})},[n,t,s]),e.jsxs(N,{gap:1,children:[e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx(C,{className:"col-3",children:u("catalog.marketplace.sort_order")}),e.jsx("select",{className:"form-select form-select-sm",value:a,onChange:p=>f(parseInt(p.target.value)),children:s.map(p=>e.jsx("option",{value:p,children:u(`catalog.marketplace.sort.${p}`)},p))})]}),t===Gt.ADVANCED&&e.jsxs(e.Fragment,{children:[e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx(C,{className:"col-3",children:u("catalog.marketplace.search_name")}),e.jsx("input",{className:"form-control form-control-sm",type:"text",value:l,onChange:p=>c(p.target.value)})]}),e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx(C,{className:"col-3",children:u("catalog.marketplace.search_price")}),e.jsxs(_,{fullWidth:!0,gap:1,children:[e.jsx("input",{className:"form-control form-control-sm",type:"number",min:0,value:m,onChange:p=>h(p.target.valueAsNumber)}),e.jsx("input",{className:"form-control form-control-sm",type:"number",min:0,value:d,onChange:p=>g(p.target.valueAsNumber)})]})]}),e.jsx(P,{variant:"secondary",className:"mx-auto",onClick:j,children:u("generic.search")})]})]})},MS=[1,2],US=[3,4,5,6],FS=[1,2,3,4,5,6],VS=i=>{const[t,s]=o.useState(Gt.BY_ACTIVITY),[n,a]=o.useState(0),[r,l]=o.useState(new Map),[c,m]=o.useState({minPrice:-1,maxPrice:-1,query:"",type:3}),{getCurrencyAmount:h=null}=Lr(),{simpleAlert:d=null,showConfirm:g=null}=Pe(),f=o.useCallback(I=>{m(I),D(new _j(I.minPrice,I.maxPrice,I.query,I.type))},[]),j=o.useMemo(()=>{switch(t){case Gt.BY_ACTIVITY:return US;case Gt.BY_VALUE:return MS;case Gt.ADVANCED:return FS}return[]},[t]),p=o.useCallback(I=>{if(I.price>h(-1)){d(u("catalog.alert.notenough.credits.description"),ge.DEFAULT,null,null,u("catalog.alert.notenough.title"));return}const x=I.offerId;g(u("catalog.marketplace.confirm_header"),()=>{D(new au(x))},null,null,null,u("catalog.marketplace.confirm_title"))},[h,d,g]);return M(Sj,I=>{const x=I.getParser();if(!x)return;const E=new Map;x.offers.forEach(v=>{const b=new za(v.offerId,v.furniId,v.furniType,v.extraData,v.stuffData,v.price,v.status,v.averagePrice,v.offerCount);b.timeLeftMinutes=v.timeLeftMinutes,E.set(v.offerId,b)}),a(x.totalItemsFound),l(E)}),M(wj,I=>{const x=I.getParser();if(x)switch(x.result){case 1:f(c);break;case 2:l(E=>{const v=new Map(E);return v.delete(x.requestedOfferId),v}),d(u("catalog.marketplace.not_available_header"),ge.DEFAULT,null,null,u("catalog.marketplace.not_available_title"));break;case 3:l(E=>{const v=new Map(E),b=v.get(x.requestedOfferId);return b&&(b.offerId=x.offerId,b.price=x.newPrice,b.offerCount--,v.set(b.offerId,b)),v.delete(x.requestedOfferId),v}),g(u("catalog.marketplace.confirm_higher_header")+`
`+u("catalog.marketplace.confirm_price",["price"],[x.newPrice.toString()]),()=>{D(new au(x.offerId))},null,null,null,u("catalog.marketplace.confirm_higher_title"));break;case 4:d(u("catalog.alert.notenough.credits.description"),ge.DEFAULT,null,null,u("catalog.alert.notenough.title"));break}}),e.jsxs(e.Fragment,{children:[e.jsxs(fn,{children:[e.jsx(P,{active:t===Gt.BY_ACTIVITY,onClick:()=>s(Gt.BY_ACTIVITY),children:u("catalog.marketplace.search_by_activity")}),e.jsx(P,{active:t===Gt.BY_VALUE,onClick:()=>s(Gt.BY_VALUE),children:u("catalog.marketplace.search_by_value")}),e.jsx(P,{active:t===Gt.ADVANCED,onClick:()=>s(Gt.ADVANCED),children:u("catalog.marketplace.search_advanced")})]}),e.jsx(LS,{sortTypes:j,searchType:t,onSearch:f}),e.jsxs(N,{gap:1,overflow:"hidden",children:[e.jsx(C,{truncate:!0,shrink:!0,fontWeight:"bold",children:u("catalog.marketplace.items_found",["count"],[r.size.toString()])}),e.jsx(N,{className:"nitro-catalog-layout-marketplace-grid",overflow:"auto",children:Array.from(r.values()).map((I,x)=>e.jsx(Sh,{offerData:I,type:zi,onClick:p},x))})]})]})},GS=i=>{const{page:t=null}=i,[s,n]=o.useState(-1),[a,r]=o.useState([]),[l,c]=o.useState(-1),[m,h]=o.useState([]),[d,g]=o.useState(-1),[f,j]=o.useState(!1),[p,I]=o.useState("");o.useState(!0);const[x,E]=o.useState(-1),{currentOffer:v=null,setCurrentOffer:b=null,setPurchaseOptions:w=null,catalogOptions:S=null,roomPreviewer:T=null}=Ae(),{petPalettes:L=null}=S,k=o.useMemo(()=>!m.length||d===-1?16777215:m[d][0],[m,d]),y=o.useMemo(()=>s===-1||!a.length||l===-1?"":u(`pet.breed.${s}.${a[l].breedId}`),[s,a,l]),R=o.useMemo(()=>{if(!a.length||l===-1)return"";const U=a[l].paletteId;let q=16777215;if(s<=7){if(d===-1)return"";q=m[d][0]}let $=q.toString(16).toUpperCase();for(;$.length<6;)$="0"+$;return`${U}
${$}`},[a,l,s,m,d]),O=o.useMemo(()=>{let U="";switch(x){case 1:U="catalog.alert.petname.long";break;case 2:U="catalog.alert.petname.short";break;case 3:U="catalog.alert.petname.chars";break;case 4:U="catalog.alert.petname.bobba";break}return!U||!U.length?"":u(U)},[x]),F=o.useCallback(()=>{if(x===-1){D(new Tj(p,1));return}if(x===0){D(new Po(t.pageId,v.offerId,`${p}
${R}`,1));return}},[t,v,p,R,x]);return M(Rj,U=>{const q=U.getParser();E(q.result),q.result===0?F():pt(new sr(-1))}),o.useEffect(()=>{if(!t||!t.offers.length)return;const U=t.offers[0];b(U),n(nC(U.localizationId)),j(!1)},[t,b]),o.useEffect(()=>{if(!v)return;const U=v.product.productData;if(U){if(L)for(const q of L){if(q.breed!==U.type)continue;const $=[];for(const G of q.palettes)G.sellable&&$.push(G);c($.length?0:-1),r($);return}c(-1),r([]),D(new yj(U.type))}},[v,L]),o.useEffect(()=>{if(s===-1)return;const U=rC(s,a);g(U.length?0:-1),h(U)},[s,a]),o.useEffect(()=>{if(!T||(T.reset(!1),s===-1||!a.length||l===-1))return;let U=`${s} ${a[l].paletteId}`;s<=7&&(U+=` ${k.toString(16)}`),T.addPetIntoRoom(U)},[T,s,a,l,k]),o.useEffect(()=>{E(-1)},[p]),v?e.jsxs(te,{children:[e.jsx(N,{size:7,overflow:"hidden",children:e.jsxs(ke,{columnCount:5,children:[!f&&a.length>0&&a.map((U,q)=>e.jsx(Ce,{itemActive:l===q,onClick:$=>c(q),children:e.jsx(mn,{typeId:s,paletteId:U.paletteId,direction:2,headOnly:!0})},q)),f&&m.length>0&&m.map((U,q)=>e.jsx(Ce,{itemHighlight:!0,itemActive:d===q,itemColor:fs.int2rgb(U[0]),className:"clear-bg",onClick:$=>g(q)},q))]})}),e.jsxs(N,{center:!v,size:5,overflow:"hidden",children:[!v&&e.jsxs(e.Fragment,{children:[!!t.localization.getImage(1)&&e.jsx("img",{alt:"",src:t.localization.getImage(1)}),e.jsx(C,{center:!0,dangerouslySetInnerHTML:{__html:t.localization.getText(0)}})]}),v&&e.jsxs(e.Fragment,{children:[e.jsxs(A,{position:"relative",overflow:"hidden",children:[e.jsx(ir,{}),e.jsx(nr,{position:"absolute",className:"bg-muted rounded bottom-1 end-1"}),s>-1&&s<=7&&e.jsx(P,{position:"absolute",className:"bottom-1 start-1",onClick:U=>j(!f),children:e.jsx(fm,{className:"fa-icon"})})]}),e.jsxs(N,{grow:!0,gap:1,children:[e.jsx(C,{truncate:!0,children:y}),e.jsxs(N,{grow:!0,gap:1,children:[e.jsx("input",{type:"text",className:"form-control form-control-sm w-100",placeholder:u("widgets.petpackage.name.title"),value:p,onChange:U=>I(U.target.value)}),x>0&&e.jsx(A,{className:"invalid-feedback d-block m-0",children:O})]}),e.jsx(_,{justifyContent:"end",children:e.jsx(Vn,{justifyContent:"end",alignItems:"end"})}),e.jsx(Js,{purchaseCallback:F})]})]})]})]}):null},BS=i=>{const{offer:t=null,isAvailable:s=!1,daysRequired:n=0,onSelect:a=null}=i,r=o.useCallback(()=>{if(!t||!t.products.length)return"";const c=t.products[0];return qi.getProductImageUrl(c.productType,c.furniClassId,c.extraParam)},[t]),l=o.useCallback(()=>{if(!t||!t.products.length)return"";const c=t.products[0],m=qi.getProductCategory(c.productType,c.furniClassId)===2?"wallItem.name."+c.furniClassId:"roomItem.name."+c.furniClassId;return u(m)},[t]);return o.useCallback(()=>{if(!t||!t.products.length)return"";const c=t.products[0],m=qi.getProductCategory(c.productType,c.furniClassId)===2?"wallItem.desc."+c.furniClassId:"roomItem.desc."+c.furniClassId;return u(m)},[t]),o.useCallback(()=>Math.floor(n/31),[n]),e.jsxs(Ce,{center:!1,column:!1,alignItems:"center",className:"p-1",children:[e.jsx(Nn,{imageUrl:r()}),e.jsx(C,{grow:!0,fontWeight:"bold",children:l()}),e.jsx(P,{variant:"secondary",onClick:()=>a(t.localizationId),disabled:!s,children:u("catalog.club_gift.select")})]})},HS=i=>{const{purse:t=null}=Lr(),{catalogOptions:s=null,setCatalogOptions:n=null}=Ae(),{clubGifts:a=null}=s,{showConfirm:r=null}=Pe(),l=o.useCallback(()=>a?a.giftsAvailable>0?u("catalog.club_gift.available",["amount"],[a.giftsAvailable.toString()]):a.daysUntilNextGift>0?u("catalog.club_gift.days_until_next",["days"],[a.daysUntilNextGift.toString()]):t.isVip?u("catalog.club_gift.not_available"):u("catalog.club_gift.no_club"):"",[a,t]),c=o.useCallback(h=>{r(u("catalog.club_gift.confirm"),()=>{D(new Oj(h)),n(d=>(d.clubGifts.giftsAvailable--,{...d}))},null)},[n,r]),m=o.useMemo(()=>a.offers.sort((d,g)=>a.getOfferExtraData(d.offerId).daysRequired-a.getOfferExtraData(g.offerId).daysRequired),[a]);return e.jsxs(e.Fragment,{children:[e.jsx(C,{truncate:!0,shrink:!0,fontWeight:"bold",children:l()}),e.jsx(ke,{columnCount:1,className:"nitro-catalog-layout-vip-gifts-grid",children:a.offers.length>0&&m.map(h=>e.jsx(BS,{offer:h,isAvailable:a.getOfferExtraData(h.offerId).isSelectable&&a.giftsAvailable>0,onSelect:c,daysRequired:a.getOfferExtraData(h.offerId).daysRequired},h.offerId))})]})},WS=(i,t)=>{if(!i)return null;const s={page:i,hideNavigation:t};switch(i.layoutCode){case"frontpage_featured":return null;case"frontpage4":return e.jsx(DS,{...s});case"pets":return e.jsx(GS,{...s});case"pets2":return e.jsx(NS,{...s});case"pets3":return e.jsx(Nh,{...s});case"vip_buy":return e.jsx(kS,{...s});case"guild_frontpage":return e.jsx(bS,{...s});case"guild_forum":return e.jsx(ES,{...s});case"guild_custom_furni":return e.jsx(IS,{...s});case"club_gifts":return e.jsx(HS,{...s});case"marketplace_own_items":return e.jsx(PS,{...s});case"marketplace":return e.jsx(VS,{...s});case"single_bundle":return e.jsx(SS,{...s});case"room_bundle":return e.jsx(_S,{...s});case"spaces_new":return e.jsx(yS,{...s});case"trophies":return e.jsx(OS,{...s});case"info_loyalty":return e.jsx(CS,{...s});case"badge_display":return e.jsx(hS,{...s});case"roomads":return e.jsx(vS,{...s});case"default_3x3_color_grouping":return e.jsx(pS,{...s});case"soundmachine":return e.jsx(wS,{...s});case"bots":case"default_3x3":default:return e.jsx(xS,{...s})}},qS=i=>{const[t,s]=o.useState(null),[n,a]=o.useState(0),[r,l]=o.useState("0"),{catalogOptions:c=null,setCatalogOptions:m=null}=Ae(),{marketplaceConfiguration:h=null}=c,{showConfirm:d=null}=Pe(),g=x=>{l(x);const E=parseInt(x);isNaN(E)||E===n||a(parseInt(x))};if(M(kj,x=>{const E=x.getParser();m(v=>{const b={...v};return b.marketplaceConfiguration=E,b})}),rt(co.POST_MARKETPLACE,x=>s(x.item)),o.useEffect(()=>{!t||h||D(new Aj)},[t,h]),o.useEffect(()=>{if(t)return()=>a(0)},[t]),!h||!t)return null;const f=t?u(t.isWallItem?"wallItem.name."+t.type:"roomItem.name."+t.type):"",j=t?u(t.isWallItem?"wallItem.desc."+t.type:"roomItem.desc."+t.type):"",p=()=>Math.max(Math.ceil(h.commission*.01*n),1),I=()=>{!t||n<h.minimumPrice||d(u("inventory.marketplace.confirm_offer.info",["furniname","price"],[f,n.toString()]),()=>{D(new Dj(n,t.isWallItem?2:1,t.id)),s(null)},()=>{s(null)},null,null,u("inventory.marketplace.confirm_offer.title"))};return e.jsxs(ne,{className:"nitro-catalog-layout-marketplace-post-offer",theme:"primary-slim",children:[e.jsx(se,{headerText:u("inventory.marketplace.make_offer.title"),onCloseClick:x=>s(null)}),e.jsx(ee,{overflow:"hidden",children:e.jsxs(te,{fullHeight:!0,children:[e.jsx(N,{center:!0,className:"bg-muted rounded p-2",size:4,overflow:"hidden",children:e.jsx(Bo,{productType:t.isWallItem?me.WALL:me.FLOOR,productClassId:t.type,extraData:t.extra.toString()})}),e.jsxs(N,{size:8,justifyContent:"between",overflow:"hidden",children:[e.jsxs(N,{grow:!0,gap:1,children:[e.jsx(C,{fontWeight:"bold",children:f}),e.jsx(C,{truncate:!0,shrink:!0,children:j})]}),e.jsxs(N,{overflow:"auto",children:[e.jsx(C,{italics:!0,children:u("inventory.marketplace.make_offer.expiration_info",["time"],[h.offerTime.toString()])}),e.jsxs("div",{className:"input-group has-validation",children:[e.jsx("input",{className:"form-control form-control-sm",type:"number",min:0,value:r,onChange:x=>g(x.target.value),placeholder:u("inventory.marketplace.make_offer.price_request")}),(n<h.minimumPrice||isNaN(n))&&e.jsx(A,{className:"invalid-feedback d-block",children:u("inventory.marketplace.make_offer.min_price",["minprice"],[h.minimumPrice.toString()])}),n>h.maximumPrice&&!isNaN(n)&&e.jsx(A,{className:"invalid-feedback d-block",children:u("inventory.marketplace.make_offer.max_price",["maxprice"],[h.maximumPrice.toString()])}),!(n<h.minimumPrice||n>h.maximumPrice||isNaN(n))&&e.jsx(A,{className:"invalid-feedback d-block",children:u("inventory.marketplace.make_offer.final_price",["commission","finalprice"],[p().toString(),(n+p()).toString()])})]}),e.jsx(P,{disabled:n<h.minimumPrice||n>h.maximumPrice||isNaN(n),onClick:I,children:u("inventory.marketplace.make_offer.post")})]})]})]})})]})},zS=i=>{const{isVisible:t=!1,setIsVisible:s=null,rootNode:n=null,currentPage:a=null,navigationHidden:r=!1,setNavigationHidden:l=null,activeNodes:c=[],searchResult:m=null,setSearchResult:h=null,openPageByName:d=null,openPageByOfferId:g=null,activateNode:f=null,getNodeById:j}=Ae();return o.useEffect(()=>{const p={linkReceived:I=>{const x=I.split("/");if(!(x.length<2))switch(x[1]){case"show":s(!0);return;case"hide":s(!1);return;case"toggle":s(E=>!E);return;case"open":if(x.length>2)if(x.length===4)switch(x[2]){case"offerId":g(parseInt(x[3]));return}else d(x[2]);else s(!0);return}},eventUrlPrefix:"catalog/"};return ct(p),()=>ut(p)},[s,g,d]),e.jsxs(e.Fragment,{children:[t&&e.jsxs(ne,{uniqueKey:"catalog",className:"nitro-catalog",style:K("catalog.headers")?{width:710}:{},children:[e.jsx(se,{headerText:u("catalog.title"),onCloseClick:p=>s(!1)}),e.jsx(Mn,{children:n&&n.children.length>0&&n.children.map((p,I)=>{if(!p.isVisible)return null;const x=`${p.pageId}-${I}`;return e.jsx(bn,{isActive:p.isActive,onClick:E=>{m&&h(null),f(p)},children:e.jsxs(_,{gap:K("catalog.tab.icons")?1:0,alignItems:"center",children:[K("catalog.tab.icons")&&e.jsx(xh,{icon:p.iconId}),p.localization]})},x)})}),e.jsx(ee,{children:e.jsxs(te,{children:[!r&&e.jsx(N,{size:3,overflow:"hidden",children:c&&c.length>0&&e.jsx(dS,{node:c[0]})}),e.jsx(N,{size:r?12:9,overflow:"hidden",children:WS(a,()=>l(!0))})]})})]}),e.jsx(cS,{}),e.jsx(qS,{})]})},YS=i=>{const{chatHistory:t=[]}=ui(),[s,n]=o.useState(!1),{onClickChat:a=null}=fh(),[r,l]=o.useState(""),c=o.useRef(null),m=o.useMemo(()=>{if(r.length===0)return t;let h=r.toLowerCase();return t.filter(d=>d.message&&d.message.toLowerCase().includes(h)||d.name&&d.name.toLowerCase().includes(h))},[t,r]);return o.useEffect(()=>{c&&c.current&&s&&(c.current.scrollTop=c.current.scrollHeight)},[s]),o.useEffect(()=>{const h={linkReceived:d=>{const g=d.split("/");if(!(g.length<2))switch(g[1]){case"show":n(!0);return;case"hide":n(!1);return;case"toggle":n(f=>!f);return}},eventUrlPrefix:"chat-history/"};return ct(h),()=>ut(h)},[]),s?e.jsxs(ne,{uniqueKey:"chat-history",className:"nitro-chat-history",theme:"primary-slim",children:[e.jsx(se,{headerText:u("room.chathistory.button.text"),onCloseClick:h=>n(!1)}),e.jsxs(ee,{innerRef:c,overflow:"hidden",gap:2,children:[e.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:u("generic.search"),value:r,onChange:h=>l(h.target.value)}),e.jsx($o,{rows:m,scrollToBottom:!0,rowRender:h=>e.jsxs(_,{alignItems:"center",className:"p-1",gap:2,children:[e.jsx(C,{variant:"muted",children:h.timestamp}),h.type===Qs.TYPE_CHAT&&e.jsxs("div",{className:"bubble-container",style:{position:"relative"},children:[h.style===0&&e.jsx("div",{className:"user-container-bg",style:{backgroundColor:h.color}}),e.jsxs("div",{className:`chat-bubble bubble-${h.style} type-${h.chatType}`,style:{maxWidth:"100%"},children:[e.jsx("div",{className:"user-container",children:h.imageUrl&&h.imageUrl.length>0&&e.jsx("div",{className:"user-image",style:{backgroundImage:`url(${h.imageUrl})`}})}),e.jsxs("div",{className:"chat-content",children:[e.jsx("b",{className:"username mr-1",dangerouslySetInnerHTML:{__html:`${h.name}: `}}),e.jsx("span",{className:"message",dangerouslySetInnerHTML:{__html:`${h.message}`},onClick:d=>a(d)})]})]})]}),h.type===Qs.TYPE_ROOM_INFO&&e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"icon icon-small-room"}),e.jsx(C,{textBreak:!0,wrap:!0,grow:!0,children:h.name})]})]})})]})]}):null},wh=o.createContext({originalFloorplanSettings:null,setOriginalFloorplanSettings:null,visualizationSettings:null,setVisualizationSettings:null}),$S=i=>e.jsx(wh.Provider,{...i}),Mc=()=>o.useContext(wh),Zn=32,gr=100,va="x0123456789abcdefghijklmnopq",Ir=class Ir{};Ir.DOOR=0,Ir.UP=1,Ir.DOWN=2,Ir.SET=3,Ir.UNSET=4;let Rt=Ir;const KS={x:"101010",0:"0065ff",1:"0091ff",2:"00bcff",3:"00e8ff",4:"00ffea",5:"00ffbf",6:"00ff93",7:"00ff68",8:"00ff3d",9:"19ff00",a:"44ff00",b:"70ff00",c:"9bff00",d:"f2ff00",e:"ffe000",f:"ffb500",g:"ff8900",h:"ff5e00",i:"ff3200",j:"ff0700",k:"ff0023",l:"ff007a",m:"ff00a5",n:"ff00d1",o:"ff00fc",p:"d600ff",q:"aa00ff"};class XS{constructor(){this._currentAction=Rt.SET,this._currentHeight=va[1]}get currentAction(){return this._currentAction}set currentAction(t){this._currentAction=t}get currentHeight(){return this._currentHeight}set currentHeight(t){this._currentHeight=t}clear(){this._currentAction=Rt.SET,this._currentHeight=va[1]}}const QS="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGwAAAC+CAMAAADnThrbAAAAYFBMVEUAAAAiIiIAZf8A6P8A/5MZ/wCb/wD/tQD/MgD/AHr/APxDXocAkf8A/+oA/2hE/wDy/wD/iQD/BwD/AKXWAP////8AvP8A/78A/z1w/wD/4AD/XgD/ACP/ANGqAP8QEBBSz3qJAAAAAXRSTlMAQObYZgAAAAlwSFlzAAALEwAACxMBAJqcGAAABJxJREFUeNrt1tuOszoMBeDpD7QFBloKDGf6/m+51UTj1PUhN1uWOup3vSQLkSzn6+vV4fAV9X9lLIcdDv/+xWKHw/d3PPPzE8k8Rj1osceoBz3z4yiZ31HauN9R2rjfUcq451HSuOdR0rjnUcK411HcuNdR3LjXUcw4btTrOG7U6zhu1Ms4adTzOGnU8zhpVBh30Eb5cQ/fKp/5UR1+51l9mfU/Mz6NxvfMuEGMu9G49f/y8vzLz4Ikif/8qopnhiF6FhNHP9aVo2cGR71lCZAvbAXkzADE/kgQvooqhM8MCNuMCUFLtiJoZiBI5ycsvD4qFs4MLLTNElFYjJUoZAYRPAsSlV/5lcpnBhU8C6y+zPqfGZ9G43tm3CDG3Wjc+p9N/Z7PgjSN//y6jmfGMXoWU0c/1rWjZ0ZHvWUpkC9sDeTMCMT+SBG+imqEz4wI24wpQUu2JmhmJEjnpyy8PmoWzowstM1SUViMtShkRhE8C1KVX/m1ymdGFTwLrL7M+p8Zn0bje2bcIMbdaNz6n039ns+CLIv//Mslnpmm6FnMHP1YXxw9MznqLcuAfGEvQM5MQOyPDOGr6ILwmQlhmzEjaMleCJqZCNL5GQuvjwsLZyYW2maZKCzGiyhkJhE8CzKVX/kXlc9MKngWWH2Z9T8zPo3G98y4QYy70bj1P5v6PZ8Fx2P851+v8cw8R8/i0dGP9dXRM7Oj3rIjkC/sFciZGYj9cUT4KroifGZG2GY8ErRkrwTNzATp/CMLr48rC2dmFtpmR1FYjFdRyMwieBYcVX7lX1U+M6vgWWD1Zdb/zPg0Gt8z4wYx7kbj1v9s6vd8FpxO8Z/fNPHMskTP4snRj3Xj6JnFUW/ZCcgXtgFyZgFif5wQvooahM8sCNuMJ4KWbEPQzEKQzj+x8PpoWDizsNA2O4nCYmxEIbOI4FlwUvmV36h8ZlHBs8Dqy6z/mfFpNL5nxg1i3I3Grf/Z1O/5LDif4z//dotn1jV6Fs+Ofqxvjp5ZHfWWnYF8YW9AzqxA7I8zwlfRDeEzK8I245mgJXsjaGYlSOefWXh93Fg4s7LQNjuLwmK8iUJmFcGz4KzyK/+m8plVBc8Cqy+z/mfGp9H4nhk3iHE3Grf+Z1O/57Mgz+M/v23jmW2LnsXc0Y916+iZzVFvWQ7kC9sCObMBsT9yhK+iFuEzG8I2Y07Qkm0JmtkI0vk5C6+PloUzGwtts1wUFmMrCplNBM+CXOVXfqvymU0FzwKrL7P+Z8an0fieGTeIcTcat/5nU7/ns6Ao4j+/6+KZfY+excLRj3Xn6JndUW9ZAeQL2wE5swOxPwqEr6IO4TM7wjZjQdCS7Qia2QnS+QULr4+OhTM7C22zQhQWYycKmV0Ez4JC5Vd+p/KZXQXPAqsvs/5nxqfR+J4ZN4hxNxq3/mdTv+ezoCzjP7/v45n7PXoWS0c/1r2jZ+6OestKIF/YHsiZOxD7o0T4KuoRPnNH2GYsCVqyPUEzd4J0fsnC66Nn4cydhbZZKQqLsReFzF0Ez4JS5Vd+r/KZuwqeBVZfZv3PjE+j8T0zbhDjbjRu/b+0PP8DZwi9QurvbfwAAAAASUVORK5CYII=",JS={frames:{0:{frame:{x:1,y:1,w:34,h:17},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:34,h:17},sourceSize:{w:34,h:17}},1:{frame:{x:37,y:1,w:34,h:17},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:34,h:17},sourceSize:{w:34,h:17}},2:{frame:{x:73,y:1,w:34,h:17},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:34,h:17},sourceSize:{w:34,h:17}},3:{frame:{x:1,y:20,w:34,h:17},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:34,h:17},sourceSize:{w:34,h:17}},4:{frame:{x:37,y:20,w:34,h:17},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:34,h:17},sourceSize:{w:34,h:17}},5:{frame:{x:73,y:20,w:34,h:17},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:34,h:17},sourceSize:{w:34,h:17}},6:{frame:{x:1,y:39,w:34,h:17},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:34,h:17},sourceSize:{w:34,h:17}},7:{frame:{x:37,y:39,w:34,h:17},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:34,h:17},sourceSize:{w:34,h:17}},8:{frame:{x:73,y:39,w:34,h:17},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:34,h:17},sourceSize:{w:34,h:17}},9:{frame:{x:1,y:58,w:34,h:17},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:34,h:17},sourceSize:{w:34,h:17}},a:{frame:{x:37,y:58,w:34,h:17},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:34,h:17},sourceSize:{w:34,h:17}},b:{frame:{x:73,y:58,w:34,h:17},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:34,h:17},sourceSize:{w:34,h:17}},c:{frame:{x:1,y:77,w:34,h:17},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:34,h:17},sourceSize:{w:34,h:17}},d:{frame:{x:37,y:77,w:34,h:17},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:34,h:17},sourceSize:{w:34,h:17}},e:{frame:{x:73,y:77,w:34,h:17},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:34,h:17},sourceSize:{w:34,h:17}},f:{frame:{x:1,y:96,w:34,h:17},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:34,h:17},sourceSize:{w:34,h:17}},g:{frame:{x:37,y:96,w:34,h:17},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:34,h:17},sourceSize:{w:34,h:17}},h:{frame:{x:73,y:96,w:34,h:17},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:34,h:17},sourceSize:{w:34,h:17}},i:{frame:{x:1,y:115,w:34,h:17},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:34,h:17},sourceSize:{w:34,h:17}},j:{frame:{x:37,y:115,w:34,h:17},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:34,h:17},sourceSize:{w:34,h:17}},k:{frame:{x:73,y:115,w:34,h:17},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:34,h:17},sourceSize:{w:34,h:17}},l:{frame:{x:1,y:134,w:34,h:17},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:34,h:17},sourceSize:{w:34,h:17}},m:{frame:{x:37,y:134,w:34,h:17},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:34,h:17},sourceSize:{w:34,h:17}},n:{frame:{x:73,y:134,w:34,h:17},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:34,h:17},sourceSize:{w:34,h:17}},o:{frame:{x:1,y:153,w:34,h:17},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:34,h:17},sourceSize:{w:34,h:17}},p:{frame:{x:37,y:153,w:34,h:17},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:34,h:17},sourceSize:{w:34,h:17}},q:{frame:{x:73,y:153,w:34,h:17},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:34,h:17},sourceSize:{w:34,h:17}},r:{frame:{x:73,y:153,w:34,h:17},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:34,h:17},sourceSize:{w:34,h:17}},r_blocked:{frame:{x:1,y:172,w:34,h:17},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:34,h:17},sourceSize:{w:34,h:17}},r_door:{frame:{x:37,y:172,w:34,h:17},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:34,h:17},sourceSize:{w:34,h:17}},s:{frame:{x:73,y:153,w:34,h:17},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:34,h:17},sourceSize:{w:34,h:17}},t:{frame:{x:73,y:153,w:34,h:17},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:34,h:17},sourceSize:{w:34,h:17}},x:{frame:{x:73,y:172,w:34,h:17},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:34,h:17},sourceSize:{w:34,h:17}}},meta:{app:"https://www.codeandweb.com/texturepacker",version:"1.0",image:"tiles.png",format:"RGBA8888",size:{w:108,h:190},scale:"1",smartupdate:"$TexturePacker:SmartUpdate:6d0f8373580629749f786a0b0f6c6bb9:96dff9df69bdc6938cf02f254bbe028b:accbe1e7e294ded8391337fc1c446319$"}};class Ai{constructor(t,s){this._height=t,this._isBlocked=s}get height(){return this._height}set height(t){this._height=t}get isBlocked(){return this._isBlocked}set isBlocked(t){this._isBlocked=t}}const ed=(i,t)=>{let s=i*Zn/2-t*Zn/2;const n=i*Zn/4+t*Zn/4;return s=s+1600,[s,n]},mo=i=>{switch(i=parseInt(i.toString()),i){case 0:return-2;case 1:return-1;case 3:return 1;default:return 0}},Di=i=>{switch(i){case .25:return 0;case .5:return 1;case 2:return 3;default:return 2}},Ys=class Ys{constructor(){const t=Zn*gr+20,s=Zn*gr/2+100,n=document.createElement("canvas");n.height=s,n.width=t,n.style.touchAction="none",this._renderer=n.getContext("2d"),this._image=new Image,this._image.src=QS,this._tilemap=[],this._doorLocation=new Dn(0,0),this._width=0,this._height=0,this._isPointerDown=!1,this._lastUsedTile=new Dn(-1,-1),this._actionSettings=new XS}onPointerRelease(){this._isPointerDown=!1}onPointerDown(t){if(t.button===2)return;const s=new Dn(t.offsetX,t.offsetY);this._isPointerDown=!0,this.tileHitDetection(s,!0)}onPointerMove(t){if(!this._isPointerDown)return;const s=new Dn(t.offsetX,t.offsetY);this.tileHitDetection(s,!1)}tileHitDetection(t,s=!1){const n=Math.floor(t.x),a=Math.floor(t.y),r=Zn,l=Zn/2;for(let c=0;c<this._tilemap.length;c++)for(let m=0;m<this.tilemap[c].length;m++){const[h,d]=ed(m,c),g=h+r/2,f=d+l/2,j=Math.abs(n-g),p=Math.abs(a-f);if(j/(r*.5)+p/(l*.5)<=1)return this._isPointerDown&&(s?this.onClick(m,c):(this._lastUsedTile.x!==m||this._lastUsedTile.y!==c)&&(this._lastUsedTile.x=m,this._lastUsedTile.y=c,this.onClick(m,c))),!0}return!1}onClick(t,s){const n=this._tilemap[s][t],a=va.indexOf(n.height);let r=0;switch(this._actionSettings.currentAction){case Rt.DOOR:n.height!=="x"&&(this._doorLocation.x=t,this._doorLocation.y=s,this.renderTiles());return;case Rt.UP:if(n.height==="x")return;r=a+1;break;case Rt.DOWN:if(n.height==="x"||a<=1)return;r=a-1;break;case Rt.SET:r=va.indexOf(this._actionSettings.currentHeight);break;case Rt.UNSET:r=0;break}if(r===-1||a===r)return;r>0&&(t+1>this._width&&(this._width=t+1),s+1>this._height&&(this._height=s+1));const l=va[r];l&&(this._tilemap[s][t].height=l,this.renderTiles())}renderTiles(){this.clearCanvas();for(let t=0;t<this._tilemap.length;t++)for(let s=0;s<this.tilemap[t].length;s++){const n=this.tilemap[t][s];let a=n.height;this._doorLocation.x===s&&this._doorLocation.y===t&&(a=Ys.TILE_DOOR),n.isBlocked&&(a=Ys.TILE_BLOCKED),(n.height==="x"||n.height==="X")&&n.isBlocked&&(a="x");const[r,l]=ed(s,t),c=JS.frames[a];if(c===void 0){console.warn(`Asset "${a}" not found in spritesheet.`);continue}this.renderer.drawImage(this._image,c.frame.x,c.frame.y,c.frame.w,c.frame.h,r,l,c.frame.w,c.frame.h)}}setTilemap(t,s){this._tilemap=[];const n=t.split("\r");let a=0,r=n.length;for(let l=0;l<r;l++){const c=n[l];if(c.length===0){n.splice(l,1),r=n.length,l--;continue}c.length>a&&(a=c.length)}for(let l=0;l<r;l++){this._tilemap[l]=[];const c=n[l];for(let m=0;m<a;m++){const h=s[l]&&s[l][m]||!1,d=c[m];d!=="x"&&d!=="X"&&d?this._tilemap[l][m]=new Ai(d,h):this._tilemap[l][m]=new Ai("x",h)}for(let m=a;m<gr;m++)this.tilemap[l][m]=new Ai("x",!1)}for(let l=r;l<gr;l++){this.tilemap[l]||(this.tilemap[l]=[]);for(let c=0;c<gr;c++)this.tilemap[l][c]=new Ai("x",!1)}this._width=a,this._height=r}getCurrentTilemapString(){if(this._tilemap[this._height-1][this._width-1].height==="x"){this._width=-1,this._height=-1;for(let n=gr-1;n>=0;n--)if(this._tilemap[n])for(let a=gr-1;a>=0;a--){if(!this._tilemap[n][a])continue;this._tilemap[n][a].height!=="x"&&(a+1>this._width&&(this._width=a+1),n+1>this._height&&(this._height=n+1))}}const s=[];for(let n=0;n<this._height;n++){const a=[];for(let r=0;r<this._width;r++){const l=this._tilemap[n][r];a[r]=l.height}s[n]=a.join("")}return s.join("\r")}clear(){this._tilemap=[],this._doorLocation.set(-1,-1),this._width=0,this._height=0,this._isPointerDown=!1,this._lastUsedTile.set(-1,-1),this._actionSettings.clear(),this.clearCanvas()}clearCanvas(){this.renderer.fillStyle="0x000000",this.renderer.fillRect(0,0,this._renderer.canvas.width,this._renderer.canvas.height)}get renderer(){return this._renderer}get tilemap(){return this._tilemap}get doorLocation(){return this._doorLocation}set doorLocation(t){this._doorLocation=t}get actionSettings(){return this._actionSettings}static get instance(){return Ys._INSTANCE||(Ys._INSTANCE=new Ys),Ys._INSTANCE}};Ys._INSTANCE=null,Ys.TILE_BLOCKED="r_blocked",Ys.TILE_DOOR="r_door";let At=Ys;const ZS=i=>{const{gap:t=1,children:s=null,...n}=i,[a,r]=o.useState(!1),[l,c]=o.useState(!1),{originalFloorplanSettings:m=null,setOriginalFloorplanSettings:h=null,setVisualizationSettings:d=null}=Mc(),g=o.useRef(null);M(Pj,I=>{const x=I.getParser();h(E=>{const v={...E};return v.reservedTiles=x.blockedTilesMap,At.instance.setTilemap(v.tilemap,v.reservedTiles),v}),r(!0),g.current.scrollTo(At.instance.renderer.canvas.width/3,0)}),M(Lj,I=>{const x=I.getParser();h(E=>{const v={...E};return v.entryPoint=[x.x,x.y],v.entryPointDir=x.direction,v}),d(E=>{const v={...E};return v.entryPointDir=x.direction,v}),At.instance.doorLocation=new Dn(x.x,x.y),c(!0)});const f=I=>{const x=g.current;if(x)switch(I){case"up":x.scrollBy({top:-10});break;case"down":x.scrollBy({top:10});break;case"left":x.scrollBy({left:-10});break;case"right":x.scrollBy({left:10});break}},j=I=>{switch(I.preventDefault(),I.type){case"pointerout":case"pointerup":At.instance.onPointerRelease();break;case"pointerdown":At.instance.onPointerDown(I);break;case"pointermove":At.instance.onPointerMove(I);break}};o.useEffect(()=>()=>{At.instance.clear(),d(I=>({wallHeight:m.wallHeight,thicknessWall:m.thicknessWall,thicknessFloor:m.thicknessFloor,entryPointDir:I.entryPointDir}))},[m.thicknessFloor,m.thicknessWall,m.wallHeight,d]),o.useEffect(()=>{!l||!a||At.instance.renderTiles()},[l,a]),o.useEffect(()=>{D(new Mj),D(new Uj);const I=g.current;if(I)return I.appendChild(At.instance.renderer.canvas),I.addEventListener("pointerup",j),I.addEventListener("pointerout",j),I.addEventListener("pointerdown",j),I.addEventListener("pointermove",j),()=>{I&&(I.removeEventListener("pointerup",j),I.removeEventListener("pointerout",j),I.removeEventListener("pointerdown",j),I.removeEventListener("pointermove",j))}},[]);const p=()=>window.innerWidth<768;return e.jsxs(N,{gap:t,...n,children:[e.jsxs(te,{overflow:"hidden",gap:1,children:[e.jsx(N,{center:!0,size:1,className:"d-md-none",children:e.jsx(P,{className:"d-md-none",onClick:I=>f("left"),children:e.jsx(xm,{className:"fa-icon"})})}),e.jsxs(N,{overflow:"hidden",size:p()?10:12,gap:1,children:[e.jsx(_,{justifyContent:"center",className:"d-md-none",children:e.jsx(P,{shrink:!0,onClick:I=>f("up"),children:e.jsx(Fj,{className:"fa-icon"})})}),e.jsx(A,{overflow:"auto",innerRef:g}),e.jsx(_,{justifyContent:"center",className:"d-md-none",children:e.jsx(P,{shrink:!0,onClick:I=>f("down"),children:e.jsx(Vj,{className:"fa-icon"})})})]}),e.jsx(N,{center:!0,size:1,className:"d-md-none",children:e.jsx(P,{className:"d-md-none",onClick:I=>f("right"),children:e.jsx(jm,{className:"fa-icon"})})})]}),s]})},td=i=>i.replace(/\r\n|\r|\n/g,`
`).toLowerCase(),ew=i=>{const{onCloseClick:t=null}=i,[s,n]=o.useState(""),{originalFloorplanSettings:a=null}=Mc(),r=()=>{D(new Im(s.split(`
`).join("\r"),a.entryPoint[0],a.entryPoint[1],a.entryPointDir,mo(a.thicknessWall),mo(a.thicknessFloor),a.wallHeight-1))};return Dc(()=>{n(td(a.tilemap))}),e.jsxs(ne,{theme:"primary-slim",className:"floorplan-import-export",children:[e.jsx(se,{headerText:u("floor.plan.editor.import.export"),onCloseClick:t}),e.jsxs(ee,{children:[e.jsx("textarea",{className:"h-100",value:s,onChange:l=>n(l.target.value)}),e.jsxs(_,{justifyContent:"between",children:[e.jsx(P,{onClick:l=>n(td(a.tilemap)),children:u("floor.plan.editor.revert.to.last.received.map")}),e.jsx(P,{onClick:r,children:u("floor.plan.editor.save")})]})]})]})},sd=0,Pi=16,tw=0,sw=26,nw=i=>{const{visualizationSettings:t=null,setVisualizationSettings:s=null}=Mc(),[n,a]=o.useState(Rt.SET),[r,l]=o.useState(0),c=I=>{a(I),At.instance.actionSettings.currentAction=I},m=()=>{s(I=>{const x={...I};return x.entryPointDir<7?++x.entryPointDir:x.entryPointDir=0,x})},h=I=>{(isNaN(I)||I<=0)&&(I=0),I>26&&(I=26),l(I),At.instance.actionSettings.currentHeight=I.toString(36)},d=I=>{s(x=>{const E={...x};return E.thicknessFloor=I,E})},g=I=>{s(x=>{const E={...x};return E.thicknessWall=I,E})},f=I=>{(isNaN(I)||I<=0)&&(I=sd),I>Pi&&(I=Pi),s(x=>{const E={...x};return E.wallHeight=I,E})},j=()=>{let I=t.wallHeight+1;I>Pi&&(I=Pi),f(I)},p=()=>{let I=t.wallHeight-1;I<=0&&(I=sd),f(I)};return e.jsxs(N,{children:[e.jsxs(_,{gap:1,children:[e.jsxs(N,{size:5,gap:1,children:[e.jsx(C,{bold:!0,children:u("floor.plan.editor.draw.mode")}),e.jsxs(_,{gap:3,children:[e.jsxs(_,{gap:1,children:[e.jsx(Ce,{itemActive:n===Rt.SET,onClick:I=>c(Rt.SET),children:e.jsx("i",{className:"icon icon-set-tile"})}),e.jsx(Ce,{itemActive:n===Rt.UNSET,onClick:I=>c(Rt.UNSET),children:e.jsx("i",{className:"icon icon-unset-tile"})})]}),e.jsxs(_,{gap:1,children:[e.jsx(Ce,{itemActive:n===Rt.UP,onClick:I=>c(Rt.UP),children:e.jsx("i",{className:"icon icon-increase-height"})}),e.jsx(Ce,{itemActive:n===Rt.DOWN,onClick:I=>c(Rt.DOWN),children:e.jsx("i",{className:"icon icon-decrease-height"})})]}),e.jsx(Ce,{itemActive:n===Rt.DOOR,onClick:I=>c(Rt.DOOR),children:e.jsx("i",{className:"icon icon-set-door"})})]})]}),e.jsxs(N,{alignItems:"center",size:4,children:[e.jsx(C,{bold:!0,children:u("floor.plan.editor.enter.direction")}),e.jsx("i",{className:`icon icon-door-direction-${t.entryPointDir} cursor-pointer`,onClick:m})]}),e.jsxs(N,{size:3,children:[e.jsx(C,{bold:!0,children:u("floor.editor.wall.height")}),e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx(uc,{className:"cursor-pointer fa-icon",onClick:p}),e.jsx("input",{type:"number",className:"form-control form-control-sm quantity-input",value:t.wallHeight,onChange:I=>f(I.target.valueAsNumber)}),e.jsx(dc,{className:"cursor-pointer fa-icon",onClick:j})]})]})]}),e.jsxs(_,{gap:1,children:[e.jsxs(N,{size:6,children:[e.jsxs(C,{bold:!0,children:[u("floor.plan.editor.tile.height"),": ",r]}),e.jsx(Ot,{min:tw,max:sw,step:1,value:r,onChange:I=>h(I),renderThumb:({style:I,...x},E)=>e.jsx("div",{style:{backgroundColor:`#${KS[E.valueNow.toString(33)]}`,...I},...x,children:E.valueNow})})]}),e.jsxs(N,{size:6,children:[e.jsx(C,{bold:!0,children:u("floor.plan.editor.room.options")}),e.jsxs(_,{className:"align-items-center",children:[e.jsxs("select",{className:"form-control form-control-sm",value:t.thicknessWall,onChange:I=>g(parseInt(I.target.value)),children:[e.jsx("option",{value:0,children:u("navigator.roomsettings.wall_thickness.thinnest")}),e.jsx("option",{value:1,children:u("navigator.roomsettings.wall_thickness.thin")}),e.jsx("option",{value:2,children:u("navigator.roomsettings.wall_thickness.normal")}),e.jsx("option",{value:3,children:u("navigator.roomsettings.wall_thickness.thick")})]}),e.jsxs("select",{className:"form-control form-control-sm",value:t.thicknessFloor,onChange:I=>d(parseInt(I.target.value)),children:[e.jsx("option",{value:0,children:u("navigator.roomsettings.floor_thickness.thinnest")}),e.jsx("option",{value:1,children:u("navigator.roomsettings.floor_thickness.thin")}),e.jsx("option",{value:2,children:u("navigator.roomsettings.floor_thickness.normal")}),e.jsx("option",{value:3,children:u("navigator.roomsettings.floor_thickness.thick")})]})]})]})]})]})},rw=i=>{const[t,s]=o.useState(!1),[n,a]=o.useState(!1),[r,l]=o.useState({tilemap:"",reservedTiles:[],entryPoint:[0,0],entryPointDir:2,wallHeight:-1,thicknessWall:1,thicknessFloor:1}),[c,m]=o.useState({entryPointDir:2,wallHeight:-1,thicknessWall:1,thicknessFloor:1}),h=()=>{D(new Im(At.instance.getCurrentTilemapString(),At.instance.doorLocation.x,At.instance.doorLocation.y,c.entryPointDir,mo(c.thicknessWall),mo(c.thicknessFloor),c.wallHeight-1))},d=()=>{m({wallHeight:r.wallHeight,thicknessWall:r.thicknessWall,thicknessFloor:r.thicknessFloor,entryPointDir:r.entryPointDir}),At.instance.doorLocation=new Dn(r.entryPoint[0],r.entryPoint[1]),At.instance.setTilemap(r.tilemap,r.reservedTiles),At.instance.renderTiles()};return Ie(Ns.DISPOSED,g=>s(!1)),M(Gj,g=>{const f=g.getParser();l(j=>{const p={...j};return p.tilemap=f.model,p.wallHeight=f.wallHeight+1,p}),m(j=>{const p={...j};return p.wallHeight=f.wallHeight+1,p})}),M(Bj,g=>{const f=g.getParser();l(j=>{const p={...j};return p.thicknessFloor=Di(f.thicknessFloor),p.thicknessWall=Di(f.thicknessWall),p}),m(j=>{const p={...j};return p.thicknessFloor=Di(f.thicknessFloor),p.thicknessWall=Di(f.thicknessWall),p})}),o.useEffect(()=>{const g={linkReceived:f=>{const j=f.split("/");if(!(j.length<2))switch(j[1]){case"show":s(!0);return;case"hide":s(!1);return;case"toggle":s(p=>!p);return}},eventUrlPrefix:"floor-editor/"};return ct(g),()=>ut(g)},[]),e.jsxs($S,{value:{originalFloorplanSettings:r,setOriginalFloorplanSettings:l,visualizationSettings:c,setVisualizationSettings:m},children:[t&&e.jsxs(ne,{uniqueKey:"floorpan-editor",className:"nitro-floorplan-editor",theme:"primary-slim",children:[e.jsx(se,{headerText:u("floor.plan.editor.title"),onCloseClick:()=>s(!1)}),e.jsxs(ee,{overflow:"hidden",children:[e.jsx(nw,{}),e.jsx(ZS,{overflow:"hidden"}),e.jsxs(_,{justifyContent:"between",children:[e.jsx(P,{onClick:d,children:u("floor.plan.editor.reload")}),e.jsxs(fn,{children:[e.jsx(P,{disabled:!0,children:u("floor.plan.editor.preview")}),e.jsx(P,{onClick:g=>a(!0),children:u("floor.plan.editor.import.export")}),e.jsx(P,{onClick:h,children:u("floor.plan.editor.save")})]})]})]})]}),n&&e.jsx(ew,{onCloseClick:()=>a(!1)})]})},aw=i=>{const{friend:t=null}=i,[s,n]=o.useState(!1),{followFriend:a=null}=cs(),r=o.useRef();return o.useEffect(()=>{const l=c=>{const m=r.current;m&&c.target!==m&&!m.contains(c.target)&&n(!1)};return document.addEventListener(Ne.MOUSE_CLICK,l),()=>document.removeEventListener(Ne.MOUSE_CLICK,l)},[]),t?e.jsxs("div",{ref:r,className:"btn btn-friendsgensuccess friend-bar-item "+(s?"friend-bar-item-active":""),onClick:l=>n(c=>!c),children:[e.jsxs("div",{className:`friend-bar-item-head position-absolute ${t.id>0?"avatar":"group"}`,children:[t.id>0&&e.jsx(tt,{headOnly:!s,figure:t.figure,direction:s?2:3}),t.id<=0&&e.jsx(tt,{headOnly:!s,figure:t.id<=0&&t.figure==="ADM"?"ha-3409-1413-70.lg-285-89.ch-3032-1334-109.sh-3016-110.hd-185-1359.ca-3225-110-62.wa-3264-62-62.fa-1206-90.hr-3322-1403":t.figure,isgroup:t.id<=0?1:0,direction:s?2:3})]}),e.jsx("div",{className:"text-truncate",children:t.name}),s&&e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx(A,{className:"nitro-friends-spritesheet icon-friendbar-chat cursor-pointer",onClick:l=>Go(t.id)}),t.followingAllowed&&e.jsx(A,{className:"nitro-friends-spritesheet icon-friendbar-visit cursor-pointer",onClick:l=>a(t)}),e.jsx(A,{className:"nitro-friends-spritesheet icon-profile cursor-pointer",onClick:l=>ns(t.id)})]})]}):e.jsxs("div",{ref:r,className:"btn btn-friendsgen friend-bar-item friend-bar-search "+(s?"friend-bar-search-item-active":""),onClick:l=>n(c=>!c),children:[e.jsx("div",{className:"friend-bar-item-head position-absolute"}),e.jsx("div",{className:"friend-bar-text",children:u("friend.bar.find.title")}),s&&e.jsxs("div",{className:"search-content mt-3",children:[e.jsx("div",{className:"bg-white text-black px-1 py-1 font-size-friend",children:u("friend.bar.find.text")}),e.jsx(P,{className:"mt-2 mb-4",variant:"white",onClick:()=>D(new Em),children:u("friend.bar.find.button")})]})]})},xl=3,iw=i=>{const{onlineFriends:t=null}=i,[s,n]=o.useState(0),a=o.useRef();return e.jsxs(_,{innerRef:a,alignItems:"center",className:"friend-bar",children:[e.jsx(P,{variant:"black",className:"friend-bar-button",disabled:s<=0,onClick:r=>n(s-1),children:e.jsx(Es,{className:"fa-icon"})}),Array.from(Array(xl),(r,l)=>e.jsx(aw,{friend:t[s+l]||null},l)),e.jsx(P,{variant:"black",className:"friend-bar-button",disabled:!(t.length>xl&&s+xl<=t.length-1),onClick:r=>n(s+1),children:e.jsx(bs,{className:"fa-icon"})})]})},ow=i=>{const{friend:t=null,selected:s=!1,selectFriend:n=null}=i,[a,r]=o.useState(!1),{followFriend:l=null,updateRelationship:c=null}=cs(),m=j=>{j.stopPropagation(),l(t)},h=j=>{j.stopPropagation(),Go(t.id)},d=j=>{j.stopPropagation(),r(!0)},g=(j,p)=>{j.stopPropagation(),c(t,p),r(!1)},f=()=>{if(!t)return"none";switch(t.relationshipStatus){case os.RELATIONSHIP_HEART:return"heart";case os.RELATIONSHIP_SMILE:return"smile";case os.RELATIONSHIP_BOBBA:return"bobba";default:return"none"}};return t?e.jsxs(oo,{justifyContent:"between",className:`px-2 py-1 ${s&&"bg-primary text-white"}`,onClick:j=>n(t.id),children:[e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx(A,{onClick:j=>j.stopPropagation(),children:e.jsx(xs,{userId:t.id})}),e.jsx("div",{children:t.name})]}),e.jsxs(_,{alignItems:"center",gap:1,children:[!a&&e.jsxs(e.Fragment,{children:[t.followingAllowed&&e.jsx(A,{pointer:!0,onClick:m,className:"nitro-friends-spritesheet icon-follow",title:u("friendlist.tip.follow")}),t.online&&e.jsx(A,{pointer:!0,className:"nitro-friends-spritesheet icon-chat",onClick:h,title:u("friendlist.tip.im")}),t.id>0&&e.jsx(A,{className:`nitro-friends-spritesheet icon-${f()} cursor-pointer`,onClick:d,title:u("infostand.link.relationship")})]}),a&&e.jsxs(e.Fragment,{children:[e.jsx(A,{pointer:!0,className:"nitro-friends-spritesheet icon-heart",onClick:j=>g(j,os.RELATIONSHIP_HEART)}),e.jsx(A,{pointer:!0,className:"nitro-friends-spritesheet icon-smile",onClick:j=>g(j,os.RELATIONSHIP_SMILE)}),e.jsx(A,{pointer:!0,className:"nitro-friends-spritesheet icon-bobba",onClick:j=>g(j,os.RELATIONSHIP_BOBBA)}),e.jsx(A,{pointer:!0,className:"nitro-friends-spritesheet icon-none",onClick:j=>g(j,os.RELATIONSHIP_NONE)})]})]})]}):null},nd=i=>{const{list:t=null,selectedFriendsIds:s=null,selectFriend:n=null}=i;return!t||!t.length?null:e.jsx(e.Fragment,{children:t.map((a,r)=>e.jsx(ow,{friend:a,selected:s&&s.indexOf(a.id)>=0,selectFriend:n},r))})},lw=i=>{const{request:t=null}=i,{requestResponse:s=null}=cs();return t?e.jsxs(oo,{justifyContent:"between",className:"px-2 py-1",children:[e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx(xs,{userId:t.id}),e.jsx("div",{children:t.name})]}),e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx(A,{className:"nitro-friends-spritesheet icon-accept cursor-pointer",onClick:n=>s(t.id,!0)}),e.jsx(A,{className:"nitro-friends-spritesheet icon-deny cursor-pointer",onClick:n=>s(t.id,!1)})]})]}):null},cw=i=>{const{children:t=null,...s}=i,{requests:n=[],requestResponse:a=null}=cs();return n.length?e.jsxs(lo,{...s,children:[e.jsxs(N,{fullHeight:!0,justifyContent:"between",gap:1,children:[e.jsx(N,{gap:0,children:n.map((r,l)=>e.jsx(lw,{request:r},l))}),e.jsx(_,{justifyContent:"center",className:"px-2 py-1",children:e.jsx(P,{onClick:r=>a(-1,!1),children:u("friendlist.requests.dismissall")})})]}),t]}):null},uw=i=>{const{selectedFriendsIds:t=null,removeFriendsText:s=null,removeSelectedFriends:n=null,onCloseClick:a=null}=i;return e.jsxs(ne,{className:"nitro-friends-remove-confirmation",theme:"primary-slim",children:[e.jsx(se,{headerText:u("friendlist.removefriendconfirm.title"),onCloseClick:a}),e.jsxs(ee,{className:"text-black",children:[e.jsx("div",{children:s}),e.jsxs(_,{gap:1,children:[e.jsx(P,{fullWidth:!0,variant:"danger",disabled:t.length===0,onClick:n,children:u("generic.ok")}),e.jsx(P,{fullWidth:!0,onClick:a,children:u("generic.cancel")})]})]})]})},dw=i=>{const{selectedFriendsIds:t=null,onCloseClick:s=null,sendRoomInvite:n=null}=i,[a,r]=o.useState("");return e.jsxs(ne,{className:"nitro-friends-room-invite",uniqueKey:"nitro-friends-room-invite",theme:"primary-slim",children:[e.jsx(se,{headerText:u("friendlist.invite.title"),onCloseClick:s}),e.jsxs(ee,{className:"text-black",children:[u("friendlist.invite.summary",["count"],[t.length.toString()]),e.jsx("textarea",{className:"form-control",value:a,maxLength:255,onChange:l=>r(l.target.value)}),e.jsx(C,{center:!0,className:"bg-muted rounded p-1",children:u("friendlist.invite.note")}),e.jsxs(_,{gap:1,children:[e.jsx(P,{fullWidth:!0,variant:"success",disabled:a.length===0||t.length===0,onClick:()=>n(a),children:u("friendlist.invite.send")}),e.jsx(P,{fullWidth:!0,onClick:s,children:u("generic.cancel")})]})]})]})},mw=i=>{const{...t}=i,[s,n]=o.useState(""),[a,r]=o.useState(null),[l,c]=o.useState(null),{canRequestFriend:m=null,requestFriend:h=null}=cs();return M(Hj,d=>{const g=d.getParser();r(g.friends),c(g.others)}),o.useEffect(()=>{if(!s||!s.length)return;const d=setTimeout(()=>{!s||!s.length||D(new Wj(s))},500);return()=>clearTimeout(d)},[s]),e.jsxs(lo,{...t,children:[e.jsx("input",{type:"text",className:"search-input form-control form-control-sm w-100 rounded-0",placeholder:u("generic.search"),value:s,maxLength:50,onChange:d=>n(d.target.value)}),e.jsxs(N,{children:[a&&e.jsxs(e.Fragment,{children:[a.length===0&&e.jsx(C,{bold:!0,small:!0,className:"px-2 py-1",children:u("friendlist.search.nofriendsfound")}),a.length>0&&e.jsxs(N,{gap:0,children:[e.jsx(C,{bold:!0,small:!0,className:"px-2 py-1",children:u("friendlist.search.friendscaption",["cnt"],[a.length.toString()])}),e.jsx("hr",{className:"mx-2 mt-0 mb-1 text-black"}),e.jsx(N,{gap:0,children:a.map(d=>e.jsxs(oo,{justifyContent:"between",className:"px-2 py-1",children:[e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx(xs,{userId:d.avatarId}),e.jsx("div",{children:d.avatarName})]}),e.jsx(_,{alignItems:"center",gap:1,children:d.isAvatarOnline&&e.jsx(A,{className:"nitro-friends-spritesheet icon-chat cursor-pointer",onClick:g=>Go(d.avatarId),title:u("friendlist.tip.im")})})]},d.avatarId))})]})]}),l&&e.jsxs(e.Fragment,{children:[l.length===0&&e.jsx(C,{bold:!0,small:!0,className:"px-2 py-1",children:u("friendlist.search.noothersfound")}),l.length>0&&e.jsxs(N,{gap:0,children:[e.jsx(C,{bold:!0,small:!0,className:"px-2 py-1",children:u("friendlist.search.otherscaption",["cnt"],[l.length.toString()])}),e.jsx("hr",{className:"mx-2 mt-0 mb-1 text-black"}),e.jsx(N,{gap:0,children:l.map(d=>e.jsxs(oo,{justifyContent:"between",className:"px-2 py-1",children:[e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx(xs,{userId:d.avatarId}),e.jsx("div",{children:d.avatarName})]}),e.jsx(_,{alignItems:"center",gap:1,children:m(d.avatarId)&&e.jsx(A,{className:"nitro-friends-spritesheet icon-add cursor-pointer",onClick:g=>h(d.avatarId,d.avatarName),title:u("friendlist.tip.addfriend")})})]},d.avatarId))})]})]})]})]})},hw=i=>{const[t,s]=o.useState(!1),[n,a]=o.useState(!1),[r,l]=o.useState([]),[c,m]=o.useState(!1),[h,d]=o.useState(!1),{onlineFriends:g=[],offlineFriends:f=[],requests:j=[],requestFriend:p=null}=cs(),I=o.useMemo(()=>{if(!r||!r.length)return"";const b=[];for(const w of r){let S=g.find(T=>T.id===w);S||(S=f.find(T=>T.id===w)),S&&b.push(S.name)}return u("friendlist.removefriendconfirm.userlist",["user_names"],[b.join(", ")])},[f,g,r]),x=o.useCallback(b=>{b<0||l(w=>{const S=[...w],T=S.indexOf(b);return T>-1?S.splice(T,1):S.push(b),S})},[l]),E=b=>{!r.length||!b||!b.length||b.length>255||(D(new qj(b,r)),m(!1))},v=()=>{r.length!==0&&(l(b=>(D(new zj(...b)),[])),d(!1))};return o.useEffect(()=>{const b={linkReceived:w=>{const S=w.split("/");if(!(S.length<2))switch(S[1]){case"show":a(!0),s(!1);return;case"hide":a(!1),s(!1);return;case"toggle":a(T=>!T),s(!0);return;case"request":if(S.length<4)return;p(parseInt(S[2]),S[3])}},eventUrlPrefix:"friends/"};return ct(b),()=>ut(b)},[p]),n?e.jsxs(e.Fragment,{children:[e.jsxs(ne,{className:"nitro-friends",uniqueKey:"nitro-friends",theme:"primary-slim",children:[e.jsx(se,{headerText:u("friendlist.friends"),onCloseClick:b=>a(!1)}),e.jsxs(ee,{overflow:"hidden",gap:1,className:"text-black p-0",children:[e.jsxs(dN,{fullHeight:!0,overflow:"hidden",children:[e.jsx(lo,{headerText:u("friendlist.friends")+` (${g.length})`,isExpanded:!0,children:e.jsx(nd,{list:g,selectedFriendsIds:r,selectFriend:x})}),e.jsx(lo,{headerText:u("friendlist.friends.offlinecaption")+` (${f.length})`,children:e.jsx(nd,{list:f,selectedFriendsIds:r,selectFriend:x})}),e.jsx(cw,{headerText:u("friendlist.tab.friendrequests")+` (${j.length})`,isExpanded:!0}),e.jsx(mw,{headerText:u("people.search.title")})]}),r&&r.length>0&&e.jsxs(_,{gap:1,className:"p-1",children:[e.jsx(P,{fullWidth:!0,onClick:()=>m(!0),children:u("friendlist.tip.invite")}),e.jsx(P,{fullWidth:!0,variant:"danger",onClick:b=>d(!0),children:u("generic.delete")})]})]})]}),c&&e.jsx(dw,{selectedFriendsIds:r,onCloseClick:()=>m(!1),sendRoomInvite:E}),h&&e.jsx(uw,{selectedFriendsIds:r,removeFriendsText:I,onCloseClick:()=>d(!1),removeSelectedFriends:v})]}):null},gw=i=>{const{thread:t=null,group:s=null}=i,n=o.useMemo(()=>s.type===_r.GROUP_CHAT&&qm(s.chats[0].extraData),[s]),a=o.useMemo(()=>!t||!s?!1:!!(s.type===_r.PRIVATE_CHAT&&s.userId===V().userId||n&&s.chats.length&&n.userId===V().userId),[t,s,n]);return!t||!s?null:s.userId?e.jsxs(_,{fullWidth:!0,justifyContent:a?"end":"start",gap:2,children:[e.jsxs(A,{shrink:!0,className:"message-avatar",children:[s.type===_r.PRIVATE_CHAT&&!a&&e.jsx(tt,{figure:t.participant.figure,direction:2}),n&&!a&&e.jsx(tt,{figure:n.figure,direction:2})]}),e.jsxs(A,{className:"bg-light text-black border-radius mb-2 rounded py-1 px-2 messages-group-"+(a?"right":"left"),children:[e.jsxs(A,{className:"fw-bold",children:[a&&V().userName,!a&&(n?n.username:t.participant.name)]}),s.chats.map((r,l)=>e.jsx(A,{className:"text-break",children:r.message},l))]}),a&&e.jsx(A,{shrink:!0,className:"message-avatar",children:e.jsx(tt,{figure:V().figure,direction:4})})]}):e.jsx(e.Fragment,{children:s.chats.map((r,l)=>e.jsx(_,{fullWidth:!0,gap:2,justifyContent:"start",children:e.jsxs(A,{className:"w-100 text-break",children:[r.type===Pn.SECURITY_NOTIFICATION&&e.jsxs(_,{gap:2,alignItems:"center",className:"bg-light rounded mb-2 px-2 py-1 small text-muted",children:[e.jsx(A,{className:"nitro-friends-spritesheet icon-warning flex-shrink-0"}),e.jsx(A,{children:r.message})]}),r.type===Pn.ROOM_INVITE&&e.jsxs(_,{gap:2,alignItems:"center",className:"bg-light rounded mb-2 px-2 py-1 small text-black",children:[e.jsx(A,{className:"messenger-notification-icon flex-shrink-0"}),e.jsxs(A,{children:[u("messenger.invitation")+" ",r.message]})]})]})},l))})},fw=i=>{const{thread:t=null}=i;return t.setRead(),e.jsx(e.Fragment,{children:t.groups.length>0&&t.groups.map((s,n)=>e.jsx(gw,{thread:t,group:s},n))})},pw=i=>{const[t,s]=o.useState(!1),[n,a]=o.useState(-1),[r,l]=o.useState(""),{visibleThreads:c=[],activeThread:m=null,getMessageThread:h=null,sendMessage:d=null,setActiveThreadId:g=null,closeThread:f=null}=lh(),{report:j=null}=Fs(),p=o.useRef(),I=()=>m&&m.participant&&D(new lc(m.participant.id)),x=()=>m&&m.participant&&ns(m.participant.id),E=()=>{!m||!r.length||(d(m,V().userId,r),l(""))},v=b=>{b.key==="Enter"&&E()};return o.useEffect(()=>{const b={linkReceived:w=>{const S=w.split("/");if(S.length===2){if(S[1]==="open"){s(!0);return}if(S[1]==="toggle"){s(L=>!L);return}const T=h(parseInt(S[1]));if(!T)return;g(T.threadId),s(!0)}},eventUrlPrefix:"friends-messenger/"};return ct(b),()=>ut(b)},[h,g]),o.useEffect(()=>{!t||!m||(p.current.scrollTop=p.current.scrollHeight)},[t,m]),o.useEffect(()=>{if(t&&!m){n>0?g(n):c.length>0&&g(c[0].threadId);return}!t&&m&&(a(m.threadId),g(-1))},[t,m,n,c,g]),t?e.jsxs(ne,{className:"nitro-friends-messenger",uniqueKey:"nitro-friends-messenger",theme:"primary-slim",children:[e.jsx(se,{headerText:u("messenger.window.title",["OPEN_CHAT_COUNT"],[c.length.toString()]),onCloseClick:b=>s(!1)}),e.jsx(ee,{children:e.jsxs(te,{overflow:"hidden",children:[e.jsxs(N,{size:4,overflow:"hidden",children:[e.jsx(C,{bold:!0,children:u("toolbar.icon.label.messenger")}),e.jsx(N,{fit:!0,overflow:"auto",children:e.jsx(N,{children:c&&c.length>0&&c.map(b=>e.jsxs(Ce,{itemActive:m===b,onClick:w=>g(b.threadId),children:[b.unread&&e.jsx(pn,{count:b.unreadCount}),e.jsxs(_,{fullWidth:!0,alignItems:"center",gap:1,children:[e.jsx(_,{alignItems:"center",className:"friend-head px-2",children:e.jsx(tt,{figure:b.participant.id>0?b.participant.figure:b.participant.id<=0&&b.participant.figure==="ADM"?"ha-3409-1413-70.lg-285-89.ch-3032-1334-109.sh-3016-110.hd-185-1359.ca-3225-110-62.wa-3264-62-62.fa-1206-90.hr-3322-1403":b.participant.figure,headOnly:!0,direction:b.participant.id>0?2:3})}),e.jsx(C,{truncate:!0,grow:!0,children:b.participant.name})]})]},b.threadId))})})]}),e.jsx(N,{size:8,overflow:"hidden",children:m&&e.jsxs(e.Fragment,{children:[e.jsx(C,{bold:!0,center:!0,children:u("messenger.window.separator",["FRIEND_NAME"],[m.participant.name])}),e.jsxs(_,{alignItems:"center",justifyContent:"between",gap:1,children:[m&&m.participant.id>0&&e.jsxs(_,{gap:1,children:[e.jsxs(fn,{children:[e.jsx(P,{onClick:I,children:e.jsx(A,{className:"nitro-friends-spritesheet icon-follow"})}),e.jsx(P,{onClick:x,children:e.jsx(A,{className:"nitro-friends-spritesheet icon-profile-sm"})})]}),e.jsx(P,{variant:"danger",onClick:()=>j(Ze.IM,{reportedUserId:m.participant.id}),children:u("messenger.window.button.report")})]}),e.jsx(P,{onClick:b=>f(m.threadId),children:e.jsx(Us,{className:"fa-icon"})})]}),e.jsx(N,{fit:!0,className:"bg-muted p-2 rounded chat-messages",children:e.jsx(N,{innerRef:p,overflow:"auto",children:e.jsx(fw,{thread:m})})}),e.jsxs(_,{gap:1,children:[e.jsx("input",{type:"text",className:"form-control form-control-sm",maxLength:255,placeholder:u("messenger.window.input.default",["FRIEND_NAME"],[m.participant.name]),value:r,onChange:b=>l(b.target.value),onKeyDown:v}),e.jsx(P,{variant:"success",onClick:E,children:u("widgets.chatinput.say")})]})]})})]})})]}):null},xw=i=>{const{settings:t=null,onlineFriends:s=[]}=cs();return t?e.jsxs(e.Fragment,{children:[oc.createPortal(e.jsx(iw,{onlineFriends:s}),document.getElementById("toolbar-friend-bar-container")),e.jsx(hw,{}),e.jsx(pw,{})]}):null},jw=()=>{const{games:i,selectedGame:t,setSelectedGame:s}=zo(),n=r=>{let l=["game-icon"];return t===r&&l.push("selected"),l.join(" ")},a=r=>`url(${r.assetUrl}${r.gameNameId}_icon.png)`;return e.jsxs(A,{fullWidth:!0,className:"gameList-container bg-dark p-1",children:[u("gamecenter.game_list_title"),e.jsx(_,{gap:3,children:i&&i.map((r,l)=>e.jsx(A,{className:n(r),onClick:c=>s(r),style:{backgroundImage:a(r)}},l))})]})},Iw=()=>{const{gameURL:i,setGameURL:t}=zo(),[s,n]=o.useState(0),a=o.useRef();return o.useEffect(()=>{if(!a||a&&!a.current)return;n(0);let r=document.createElement("iframe");r.src=i,r.classList.add("game-center-stage"),r.classList.add("h-100"),r.onload=()=>{n(l=>l+=1)},a.current.innerHTML="",a.current.appendChild(r)},[a,i]),o.useEffect(()=>{s>1&&(t(null),D(new Yj))},[s,t]),i?e.jsx(A,{innerRef:a,className:"game-center-stage"}):null},Ew=()=>{const{selectedGame:i,accountStatus:t}=zo();o.useEffect(()=>{i&&(D(new $j(i.gameId)),D(new Kj(i.gameId)))},[i]);const s=()=>ls.uintHexColor(i.bgColor),n=()=>`url(${i.assetUrl}${i.gameNameId}_theme.png)`,a=()=>ls.uintHexColor(i.textColor),r=()=>{D(new Xj(i.gameId))};return e.jsxs(_,{className:"game-view py-4",fullHeight:!0,style:{backgroundColor:s(),backgroundImage:n(),color:a()},children:[e.jsxs(_,{className:"w-75",column:!0,alignItems:"center",gap:2,children:[e.jsx(C,{bold:!0,children:u(`gamecenter.${i.gameNameId}.description_title`)}),e.jsx("img",{src:i.assetUrl+i.gameNameId+"_logo.png"}),(t.hasUnlimitedGames||t.freeGamesLeft>0)&&e.jsx(e.Fragment,{children:e.jsxs(P,{variant:"light",position:"relative",className:"px-4",onClick:r,children:[u("gamecenter.play_now"),!t.hasUnlimitedGames&&e.jsx(pn,{className:"me-n1 mt-n1",count:t.freeGamesLeft})]})}),e.jsx(C,{bold:!0,className:"w-50",center:!0,children:u(`gamecenter.${i.gameNameId}.description_content`)})]}),e.jsx(A,{className:"w-25"})]})},bw=()=>{const{isVisible:i,setIsVisible:t,games:s,accountStatus:n}=zo();if(o.useEffect(()=>{const a=()=>{t(l=>!l)},r={linkReceived:l=>{switch(l.split("/")[1]){case"toggle":a();break}},eventUrlPrefix:"games/"};return ct(r),()=>ut(r)},[]),!(!i||!s||!n))return e.jsxs(_,{position:"absolute",className:"top-0 bottom-0 start-0 end-0 bg-black",justifyContent:"center",children:[e.jsxs(_,{className:"game-center-main",column:!0,children:[e.jsx(Ew,{}),e.jsx(jw,{})]}),e.jsx(Iw,{})]})},Cw=[0,1,2,3,4,5,6,7,8],Nw=i=>{const{badgeParts:t=[],setBadgeParts:s=null}=i,[n,a]=o.useState(-1),{groupCustomize:r=null}=di(),l=(c,m,h)=>{const d=[...t];d[c][m]=h,s(d),m==="key"&&a(-1)};return!t||!t.length?null:e.jsxs(e.Fragment,{children:[n<0&&t&&t.length>0&&t.map((c,m)=>e.jsxs(_,{alignItems:"center",justifyContent:"between",gap:2,className:"bg-muted rounded px-2 py-1",children:[e.jsxs(_,{pointer:!0,center:!0,className:"bg-muted rounded p-1",onClick:h=>a(m),children:[t[m].code&&t[m].code.length>0&&e.jsx(ze,{badgeCode:t[m].code,isGroup:!0}),(!t[m].code||!t[m].code.length)&&e.jsx(_,{center:!0,className:"badge-image group-badge",children:e.jsx(Lo,{className:"fa-icon"})})]}),c.type!==Xt.BASE&&e.jsx(te,{gap:1,columnCount:3,children:Cw.map((h,d)=>e.jsx(A,{pointer:!0,className:`group-badge-position-swatch ${t[m].position===h?"active":""}`,onClick:g=>l(m,"position",h)},d))}),e.jsx(te,{gap:1,columnCount:8,children:r.badgePartColors.length>0&&r.badgePartColors.map((h,d)=>e.jsx(A,{pointer:!0,className:`group-badge-color-swatch ${t[m].color===d+1?"active":""}`,style:{backgroundColor:"#"+h.color},onClick:g=>l(m,"color",d+1)},d))})]},m)),n>=0&&e.jsxs(te,{gap:1,columnCount:5,children:[t[n].type===Xt.SYMBOL&&e.jsx(N,{pointer:!0,center:!0,className:"bg-muted rounded p-1",onClick:c=>l(n,"key",0),children:e.jsx(_,{center:!0,className:"badge-image group-badge",children:e.jsx(Us,{className:"fa-icon"})})}),(t[n].type===Xt.BASE?r.badgeBases:r.badgeSymbols).map((c,m)=>e.jsx(N,{pointer:!0,center:!0,className:"bg-muted rounded p-1",onClick:h=>l(n,"key",c.id),children:e.jsx(ze,{badgeCode:Xt.getCode(t[n].type,c.id,t[n].color,4),isGroup:!0})},m))]})]})},Th=i=>{const{groupData:t=null,setGroupData:s=null,setCloseAction:n=null,skipDefault:a=null}=i,[r,l]=o.useState(null),{groupCustomize:c=null}=di(),m=()=>{if(!r||!r.length)return"";let d="";return r.forEach(g=>g.code&&(d+=g.code)),d},h=o.useCallback(()=>{if(!t||!r||!r.length)return!1;if(t.groupBadgeParts===r)return!0;if(t.groupId<=0)return s(g=>{const f={...g};return f.groupBadgeParts=r,f}),!0;const d=[];return r.forEach(g=>{g.code&&(d.push(g.key),d.push(g.color),d.push(g.position))}),D(new Qj(t.groupId,d)),!0},[t,r,s]);return o.useEffect(()=>{if(t.groupBadgeParts)return;const d=[new Xt(Xt.BASE,c.badgeBases[0].id,c.badgePartColors[0].id),new Xt(Xt.SYMBOL,0,c.badgePartColors[0].id),new Xt(Xt.SYMBOL,0,c.badgePartColors[0].id),new Xt(Xt.SYMBOL,0,c.badgePartColors[0].id),new Xt(Xt.SYMBOL,0,c.badgePartColors[0].id)];s(g=>({...g,groupBadgeParts:d}))},[t.groupBadgeParts,c,s]),o.useEffect(()=>{if(t.groupId<=0){l(t.groupBadgeParts?[...t.groupBadgeParts]:null);return}l(t.groupBadgeParts)},[t]),o.useEffect(()=>(n({action:h}),()=>n(null)),[n,h]),e.jsxs(te,{overflow:"hidden",gap:1,children:[e.jsx(N,{size:2,children:e.jsx(_,{center:!0,className:"bg-muted rounded p-1",children:e.jsx(ze,{badgeCode:m(),isGroup:!0})})}),e.jsx(N,{size:10,overflow:"auto",children:e.jsx(Nw,{badgeParts:r,setBadgeParts:l})})]})},Rh=i=>{const{groupData:t=null,setGroupData:s=null,setCloseAction:n=null}=i,[a,r]=o.useState(null),{groupCustomize:l=null}=di(),c=d=>d===0?l.groupColorsA.find(g=>g.id===a[d]).color:l.groupColorsB.find(g=>g.id===a[d]).color,m=(d,g)=>{r(f=>{const j=[...f];return j[d]=g,j})},h=o.useCallback(()=>!t||!a||!a.length?!1:t.groupColors===a?!0:t.groupId<=0?(s(d=>{const g={...d};return g.groupColors=[...a],g}),!0):(D(new Jj(t.groupId,a[0],a[1])),!0),[t,a,s]);return o.useEffect(()=>{if(!l.groupColorsA||!l.groupColorsB||t.groupColors)return;const d=[l.groupColorsA[0].id,l.groupColorsB[0].id];s(g=>({...g,groupColors:d}))},[l,t.groupColors,s]),o.useEffect(()=>{if(t.groupId<=0){r(t.groupColors?[...t.groupColors]:null);return}r(t.groupColors)},[t]),o.useEffect(()=>(n({action:h}),()=>n(null)),[n,h]),a?e.jsxs(te,{overflow:"hidden",children:[e.jsxs(N,{size:2,gap:1,children:[e.jsx(C,{bold:!0,children:u("group.edit.color.guild.color")}),t.groupColors&&t.groupColors.length>0&&e.jsxs(_,{overflow:"hidden",className:"rounded border",children:[e.jsx(A,{className:"group-color-swatch",style:{backgroundColor:"#"+c(0)}}),e.jsx(A,{className:"group-color-swatch",style:{backgroundColor:"#"+c(1)}})]})]}),e.jsxs(N,{size:5,gap:1,overflow:"hidden",children:[e.jsx(C,{bold:!0,children:u("group.edit.color.primary.color")}),e.jsx(ke,{gap:1,columnCount:7,columnMinWidth:16,columnMinHeight:16,children:t.groupColors&&l.groupColorsA&&l.groupColorsA.map((d,g)=>e.jsx("div",{className:Bt("group-badge-color-swatch cursor-pointer",t.groupColors[0]===d.id&&"active"),style:{backgroundColor:"#"+d.color},onClick:()=>m(0,d.id)},g))})]}),e.jsxs(N,{size:5,gap:1,overflow:"hidden",children:[e.jsx(C,{bold:!0,children:u("group.edit.color.secondary.color")}),e.jsx(ke,{gap:1,columnCount:7,columnMinWidth:16,columnMinHeight:16,children:t.groupColors&&l.groupColorsB&&l.groupColorsB.map((d,g)=>e.jsx("div",{className:Bt("group-badge-color-swatch cursor-pointer",t.groupColors[1]===d.id&&"active"),style:{backgroundColor:"#"+d.color},onClick:()=>m(1,d.id)},g))})]})]}):null},vw=i=>{const{groupData:t=null,setGroupData:s=null,purchaseCost:n=0}=i,{groupCustomize:a=null}=di(),r=()=>{if(!t||!t.groupBadgeParts||!t.groupBadgeParts.length)return"";let c="";return t.groupBadgeParts.forEach(m=>m.code&&(c+=m.code)),c},l=c=>c===0?a.groupColorsA.find(m=>m.id===t.groupColors[c]).color:a.groupColorsB.find(m=>m.id===t.groupColors[c]).color;return t?e.jsxs(te,{overflow:"hidden",gap:1,children:[e.jsxs(N,{size:3,children:[e.jsxs(N,{center:!0,className:"bg-muted rounded p-1",gap:2,children:[e.jsx(C,{bold:!0,center:!0,children:u("group.create.confirm.guildbadge")}),e.jsx(ze,{badgeCode:r(),isGroup:!0})]}),e.jsxs(N,{center:!0,className:"bg-muted rounded p-1",gap:2,children:[e.jsx(C,{bold:!0,center:!0,children:u("group.edit.color.guild.color")}),e.jsxs(_,{overflow:"hidden",className:"rounded border",children:[e.jsx(A,{className:"group-color-swatch",style:{backgroundColor:"#"+l(0)}}),e.jsx(A,{className:"group-color-swatch",style:{backgroundColor:"#"+l(1)}})]})]})]}),e.jsxs(N,{size:9,justifyContent:"between",children:[e.jsxs(N,{children:[e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:t.groupName}),e.jsx(C,{children:t.groupDescription})]}),e.jsx(C,{overflow:"auto",children:u("group.create.confirm.info")})]}),e.jsx(C,{center:!0,variant:"white",className:"bg-primary rounded p-1",children:u("group.create.confirm.buyinfo",["amount"],[n.toString()])})]})]}):null},yh=i=>{const{groupData:t=null,setGroupData:s=null,setCloseAction:n=null,onClose:a=null,isCreator:r=!1,availableRooms:l=[]}=i,[c,m]=o.useState(""),[h,d]=o.useState(""),[g,f]=o.useState(-1),{showConfirm:j=null}=Pe(),p=()=>{!t||t.groupId<=0||j(u("group.deleteconfirm.desc"),()=>{D(new eI(t.groupId)),a&&a()},null,null,null,u("group.deleteconfirm.title"))},I=o.useCallback(()=>!t||!c||!c.length?!1:c===t.groupName&&h===t.groupDescription?!0:t.groupId<=0?g<=0?!1:(s(x=>{const E={...x};return E.groupName=c,E.groupDescription=h,E.groupHomeroomId=g,E}),!0):(D(new Zj(t.groupId,c,h||"")),!0),[t,c,h,g,s]);return o.useEffect(()=>{m(t.groupName||""),d(t.groupDescription||""),f(t.groupHomeroomId)},[t]),o.useEffect(()=>(n({action:I}),()=>n(null)),[n,I]),t?e.jsxs(N,{justifyContent:"between",overflow:"auto",children:[e.jsxs(N,{gap:1,children:[e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx(C,{center:!0,className:"col-3",children:u("group.edit.name")}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:c,maxLength:29,onChange:x=>m(x.target.value)})]}),e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx(C,{center:!0,className:"col-3",children:u("group.edit.desc")}),e.jsx("textarea",{className:"form-control form-control-sm",value:h,maxLength:254,onChange:x=>d(x.target.value)})]}),r&&e.jsxs(e.Fragment,{children:[e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx(C,{center:!0,className:"col-3",children:u("group.edit.base")}),e.jsx(N,{fullWidth:!0,gap:1,children:e.jsxs("select",{className:"form-select form-select-sm",value:g,onChange:x=>f(parseInt(x.target.value)),children:[e.jsx("option",{value:-1,disabled:!0,children:u("group.edit.base.select.room")}),l&&l.map((x,E)=>e.jsx("option",{value:x.id,children:x.name},E))]})})]}),e.jsxs(_,{gap:1,children:[e.jsx(A,{className:"col-3",children:""}),e.jsx(C,{small:!0,children:u("group.edit.base.warning")})]})]})]}),!r&&e.jsx(P,{variant:"danger",onClick:p,children:u("group.delete")}),r&&e.jsx(C,{underline:!0,center:!0,fullWidth:!0,pointer:!0,onClick:x=>Q("navigator/create"),children:u("group.createroom")})]}):null},_w=[1,2,3,4],Sw=i=>{const{onClose:t=null}=i,[s,n]=o.useState(1),[a,r]=o.useState(null),[l,c]=o.useState(null),[m,h]=o.useState(null),[d,g]=o.useState(0),f=()=>{r(null),c(null),t&&t()},j=()=>{if(!l)return;const x=[];l.groupBadgeParts.forEach(E=>{E.code&&(x.push(E.key),x.push(E.color),x.push(E.position))}),D(new nI(l.groupName,l.groupDescription,l.groupHomeroomId,l.groupColors[0],l.groupColors[1],x))},p=()=>{if(!(a&&a.action&&!a.action())){if(s===1){t();return}n(x=>x-1)}},I=()=>{if(!(a&&a.action&&!a.action())){if(s===4){j();return}n(x=>x===4?x:x+1)}};return M(tI,x=>{const E=x.getParser(),v=[];E.availableRooms.forEach((b,w)=>v.push({id:w,name:b})),h(v),g(E.groupCost)}),o.useEffect(()=>{n(1),c({groupId:-1,groupName:null,groupDescription:null,groupHomeroomId:-1,groupState:1,groupCanMembersDecorate:!0,groupColors:null,groupBadgeParts:null}),D(new sI)},[c]),l?e.jsxs(ne,{className:"nitro-group-creator",theme:"primary-slim",children:[e.jsx(se,{headerText:u("group.create.title"),onCloseClick:f}),e.jsxs(ee,{children:[e.jsx(_,{center:!0,className:"creator-tabs",children:_w.map((x,E)=>e.jsx(_,{center:!0,className:`tab tab-${x===1?"blue-flat":x===4?"yellow":"blue-arrow"} ${s===x?"active":""}`,children:e.jsx(C,{variant:"white",children:u(`group.create.steplabel.${x}`)})},E))}),e.jsxs(N,{overflow:"hidden",children:[e.jsxs(_,{alignItems:"center",gap:2,children:[e.jsx(A,{className:`nitro-group-tab-image tab-${s}`}),e.jsxs(N,{grow:!0,gap:0,children:[e.jsx(C,{bold:!0,fontSize:4,children:u(`group.create.stepcaption.${s}`)}),e.jsx(C,{children:u(`group.create.stepdesc.${s}`)})]})]}),e.jsxs(N,{overflow:"hidden",children:[s===1&&e.jsx(yh,{groupData:l,setGroupData:c,setCloseAction:r,onClose:null,isCreator:!0,availableRooms:m}),s===2&&e.jsx(Th,{groupData:l,setGroupData:c,setCloseAction:r}),s===3&&e.jsx(Rh,{groupData:l,setGroupData:c,setCloseAction:r}),s===4&&e.jsx(vw,{groupData:l,setGroupData:c,purchaseCost:d})]}),e.jsxs(_,{justifyContent:"between",children:[e.jsx(P,{variant:"link",className:"text-black",onClick:p,children:u(s===1?"generic.cancel":"group.create.previousstep")}),e.jsx(P,{disabled:s===4&&!Cr(),variant:s===4?Cr()?"success":"danger":"primary",onClick:I,children:u(s===4?Cr()?"group.create.confirm.buy":"group.create.confirm.viprequired":"group.create.nextstep")})]})]})]})]}):null},ww=["regular","exclusive","private"],Oh=i=>{const{groupInformation:t=null,onClose:s=null,overflow:n="hidden",...a}=i,{showConfirm:r=null}=Pe(),l=t&&t.ownerName===V().userName,c=()=>t&&vc(t.id),m=()=>{r(u("group.leaveconfirm.desc"),()=>{D(new mc(t.id,V().userId)),s&&s()},null)},h=()=>t.membershipType===Tt.NOT_MEMBER||t.membershipType===Tt.REQUEST_PENDING?null:l?e.jsx("i",{className:"icon icon-group-owner",title:u("group.youareowner")}):t.isAdmin?e.jsx("i",{className:"icon icon-group-admin",title:u("group.youareadmin")}):e.jsx("i",{className:"icon icon-group-member",title:u("group.youaremember")}),d=()=>{if(l)return"group.youareowner";if(t.type===Cs.PRIVATE&&t.membershipType!==Tt.MEMBER)return"";if(t.membershipType===Tt.MEMBER)return"group.leave";if(t.membershipType===Tt.NOT_MEMBER&&t.type===Cs.REGULAR)return"group.join";if(t.membershipType===Tt.REQUEST_PENDING)return"group.membershippending";if(t.membershipType===Tt.NOT_MEMBER&&t.type===Cs.EXCLUSIVE)return"group.requestmembership"},g=()=>{if(!(t.type===Cs.PRIVATE&&t.membershipType===Tt.NOT_MEMBER)){if(t.membershipType===Tt.MEMBER){m();return}c()}},f=j=>{switch(j){case"members":Ru(t.id);break;case"members_pending":Ru(t.id,2);break;case"manage":Ym(t.id);break;case"homeroom":ss(t.roomId);break;case"furniture":Q("catalog/open/"+Zi.GUILD_CUSTOM_FURNI);break;case"popular_groups":Q("navigator/search/groups");break}};return t?e.jsxs(te,{overflow:n,...a,children:[e.jsxs(N,{center:!0,size:3,overflow:"hidden",children:[e.jsx(_,{alignItems:"center",overflow:"hidden",className:"group-badge",children:e.jsx(ze,{badgeCode:t.badge,isGroup:!0,scale:2})}),e.jsxs(N,{alignItems:"center",gap:1,children:[e.jsx(C,{small:!0,underline:!0,pointer:!0,onClick:()=>f("members"),children:u("group.membercount",["totalMembers"],[t.membersCount.toString()])}),t.pendingRequestsCount>0&&e.jsx(C,{small:!0,underline:!0,pointer:!0,onClick:()=>f("members_pending"),children:u("group.pendingmembercount",["amount"],[t.pendingRequestsCount.toString()])}),t.isOwner&&e.jsx(C,{small:!0,underline:!0,pointer:!0,onClick:()=>f("manage"),children:u("group.manage")})]}),h()]}),e.jsxs(N,{size:9,justifyContent:"between",overflow:"auto",children:[e.jsxs(N,{overflow:"hidden",children:[e.jsxs(N,{gap:1,children:[e.jsxs(_,{alignItems:"center",gap:2,children:[e.jsx(C,{bold:!0,children:t.title}),e.jsxs(_,{gap:1,children:[e.jsx("i",{className:"icon icon-group-type-"+t.type,title:u(`group.edit.settings.type.${ww[t.type]}.help`)}),t.canMembersDecorate&&e.jsx("i",{className:"icon icon-group-decorate",title:u("group.memberscandecorate")})]})]}),e.jsx(C,{small:!0,children:u("group.created",["date","owner"],[t.createdAt,t.ownerName])})]}),e.jsx(C,{small:!0,overflow:"auto",className:"group-description",children:t.description})]}),e.jsxs(N,{children:[e.jsxs(N,{gap:1,children:[e.jsx(C,{small:!0,underline:!0,pointer:!0,onClick:()=>f("homeroom"),children:u("group.linktobase")}),e.jsx(C,{small:!0,underline:!0,pointer:!0,onClick:()=>f("furniture"),children:u("group.buyfurni")}),e.jsx(C,{small:!0,underline:!0,pointer:!0,onClick:()=>f("popular_groups"),children:u("group.showgroups")})]}),(t.type!==Cs.PRIVATE||t.type===Cs.PRIVATE&&t.membershipType===Tt.MEMBER)&&e.jsx(P,{disabled:t.membershipType===Tt.REQUEST_PENDING||l,onClick:g,children:u(d())})]})]})]}):null},Tw=i=>{const[t,s]=o.useState(null);return M(ai,n=>{const a=n.getParser();(t&&t.id===a.id||a.flag)&&s(a)}),t?e.jsxs(ne,{className:"nitro-group-information-standalone",theme:"primary-slim",children:[e.jsx(se,{headerText:u("group.window.title"),onCloseClick:n=>s(null)}),e.jsx(ee,{children:e.jsx(Oh,{groupInformation:t,onClose:()=>s(null)})})]}):null},Rw=["regular","exclusive","private"],yw=i=>{const{groupData:t=null,setGroupData:s=null,setCloseAction:n=null}=i,[a,r]=o.useState(t.groupState),[l,c]=o.useState(t.groupCanMembersDecorate),m=o.useCallback(()=>t?a===t.groupState&&l===t.groupCanMembersDecorate?!0:t.groupId<=0?(s(h=>{const d={...h};return d.groupState=a,d.groupCanMembersDecorate=l,d}),!0):(D(new rI(t.groupId,a,l?0:1)),!0):!1,[t,a,l,s]);return o.useEffect(()=>{r(t.groupState),c(t.groupCanMembersDecorate)},[t]),o.useEffect(()=>(n({action:m}),()=>n(null)),[n,m]),e.jsxs(N,{overflow:"auto",children:[e.jsx(N,{children:Rw.map((h,d)=>e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"groupState",checked:a===d,onChange:g=>r(d)}),e.jsxs(N,{gap:0,children:[e.jsxs(_,{gap:1,children:[e.jsx("i",{className:`icon icon-group-type-${d}`}),e.jsx(C,{bold:!0,children:u(`group.edit.settings.type.${h}.label`)})]}),e.jsx(C,{children:u(`group.edit.settings.type.${h}.help`)})]})]},d))}),e.jsx(CN,{}),e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx("input",{className:"form-check-input flex-shrink-0",type:"checkbox",checked:l,onChange:h=>c(d=>!d)}),e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("group.edit.settings.rights.caption")}),e.jsx(C,{children:u("group.edit.settings.rights.members.help")})]})]})]})},Ow=[1,2,3,5],kw=i=>{const[t,s]=o.useState(1),[n,a]=o.useState(null),[r,l]=o.useState(null),c=()=>{a(h=>(h&&h.action&&h.action(),null)),l(null)},m=h=>{n&&n.action&&n.action(),s(h)};return M(ai,h=>{const d=h.getParser();!r||r.groupId!==d.id||l(g=>{const f={...g};return f.groupName=d.title,f.groupDescription=d.description,f.groupState=d.type,f.groupCanMembersDecorate=d.canMembersDecorate,f})}),M(aI,h=>{const d=h.getParser(),g=[];d.badgeParts.forEach((f,j)=>{g.push(new al(f.isBase?al.BASE:al.SYMBOL,f.key,f.color,f.position))}),l({groupId:d.id,groupName:d.title,groupDescription:d.description,groupHomeroomId:d.roomId,groupState:d.state,groupCanMembersDecorate:d.canMembersDecorate,groupColors:[d.colorA,d.colorB],groupBadgeParts:g})}),!r||r.groupId<=0?null:e.jsxs(ne,{className:"nitro-group-manager",children:[e.jsx(se,{headerText:u("group.window.title"),onCloseClick:c}),e.jsx(Mn,{children:Ow.map(h=>e.jsx(bn,{isActive:t===h,onClick:()=>m(h),children:u(`group.edit.tab.${h}`)},h))}),e.jsxs(ee,{children:[e.jsxs(_,{alignItems:"center",gap:2,children:[e.jsx(A,{className:`nitro-group-tab-image tab-${t}`}),e.jsxs(N,{grow:!0,gap:0,children:[e.jsx(C,{bold:!0,fontSize:4,children:u(`group.edit.tabcaption.${t}`)}),e.jsx(C,{children:u(`group.edit.tabdesc.${t}`)})]})]}),e.jsxs(N,{grow:!0,overflow:"hidden",children:[t===1&&e.jsx(yh,{groupData:r,setGroupData:l,setCloseAction:a,onClose:c}),t===2&&e.jsx(Th,{groupData:r,setGroupData:l,setCloseAction:a,skipDefault:!0}),t===3&&e.jsx(Rh,{groupData:r,setGroupData:l,setCloseAction:a}),t===5&&e.jsx(yw,{groupData:r,setGroupData:l,setCloseAction:a})]})]})]})},Aw=i=>{const[t,s]=o.useState(-1),[n,a]=o.useState(-1),[r,l]=o.useState(null),[c,m]=o.useState(-1),[h,d]=o.useState(0),[g,f]=o.useState(""),[j,p]=o.useState(null),{showConfirm:I=null}=Pe(),x=S=>{if(S.rank===as.OWNER)return"group.members.owner";if(r.admin){if(S.rank===as.ADMIN)return"group.members.removerights";if(S.rank===as.MEMBER)return"group.members.giverights"}return""},E=o.useCallback(()=>{t===-1||n===-1||c===-1||D(new iu(t,c,g,n))},[t,n,c,g]),v=S=>{!r.admin||S.rank===as.OWNER||(S.rank!==as.ADMIN?D(new lI(r.groupId,S.id)):D(new cI(r.groupId,S.id)),E())},b=S=>{!r.admin||S.rank!==as.REQUESTED||(D(new uI(r.groupId,S.id)),E())},w=S=>{if(r.admin){if(S.rank===as.REQUESTED){D(new dI(r.groupId,S.id)),E();return}p(S.name),D(new mI(r.groupId,S.id))}};return M(iI,S=>{const T=S.getParser();l(T),a(T.level),d(Math.ceil(T.totalMembersCount/T.pageSize))}),M(oI,S=>{const T=S.getParser();I(u(T.furnitureCount>0?"group.kickconfirm.desc":"group.kickconfirm_nofurni.desc",["user","amount"],[j,T.furnitureCount.toString()]),()=>{D(new mc(r.groupId,T.userId)),E()},null),p(null)}),o.useEffect(()=>{const S={linkReceived:T=>{const L=T.split("/");if(L.length<2)return;const k=parseInt(L[1])||-1,y=parseInt(L[2])||3;s(k),a(y),m(0)},eventUrlPrefix:"group-members/"};return ct(S),()=>ut(S)},[]),o.useEffect(()=>{m(0)},[t,n,g]),o.useEffect(()=>{t===-1||n===-1||c===-1||D(new iu(t,c,g,n))},[t,n,c,g]),o.useEffect(()=>{t!==-1&&(a(-1),l(null),d(0),f(""),p(null))},[t]),t===-1||!r?null:e.jsxs(ne,{className:"nitro-group-members",theme:"primary-slim",children:[e.jsx(se,{headerText:u("group.members.title",["groupName"],[r?r.groupTitle:""]),onCloseClick:S=>s(-1)}),e.jsxs(ee,{overflow:"hidden",children:[e.jsxs(_,{gap:2,children:[e.jsx(_,{center:!0,className:"group-badge",children:e.jsx(ze,{badgeCode:r.badge,isGroup:!0,className:"mx-auto d-block"})}),e.jsxs(N,{fullWidth:!0,gap:1,children:[e.jsx("input",{type:"text",className:"form-control form-control-sm w-100",placeholder:u("group.members.searchinfo"),value:g,onChange:S=>f(S.target.value)}),e.jsxs("select",{className:"form-select form-select-sm w-100",value:n,onChange:S=>a(parseInt(S.target.value)),children:[e.jsx("option",{value:"0",children:u("group.members.search.all")}),e.jsx("option",{value:"1",children:u("group.members.search.admins")}),e.jsx("option",{value:"2",children:u("group.members.search.pending")})]})]})]}),e.jsx(te,{columnCount:2,overflow:"auto",className:"nitro-group-members-list-grid",children:r.result.map((S,T)=>e.jsxs(_,{gap:2,alignItems:"center",overflow:"hidden",className:"member-list-item bg-white rounded p-2",children:[e.jsx("div",{className:"avatar-head cursor-pointer",onClick:()=>ns(S.id),children:e.jsx(tt,{figure:S.figure,headOnly:!0,direction:2})}),e.jsxs(N,{grow:!0,gap:1,children:[e.jsx(C,{bold:!0,small:!0,pointer:!0,onClick:L=>ns(S.id),children:S.name}),S.rank!==as.REQUESTED&&e.jsx(C,{small:!0,italics:!0,variant:"muted",children:u("group.members.since",["date"],[S.joinedAt])})]}),e.jsxs(N,{gap:1,children:[S.rank!==as.REQUESTED&&e.jsx(_,{center:!0,children:e.jsx(A,{pointer:r.admin,className:`icon icon-group-small-${S.rank===as.OWNER?"owner":S.rank===as.ADMIN?"admin":r.admin&&S.rank===as.MEMBER?"not-admin":""}`,title:u(x(S)),onClick:L=>v(S)})}),r.admin&&S.rank===as.REQUESTED&&e.jsx(_,{alignItems:"center",children:e.jsx(A,{pointer:!0,className:"nitro-friends-spritesheet icon-accept",title:u("group.members.accept"),onClick:L=>b(S)})}),r.admin&&S.rank!==as.OWNER&&S.id!==V().userId&&e.jsx(_,{alignItems:"center",children:e.jsx(A,{pointer:!0,className:"nitro-friends-spritesheet icon-deny",title:u(S.rank===as.REQUESTED?"group.members.reject":"group.members.kick"),onClick:L=>w(S)})})]})]},T))}),e.jsxs(_,{gap:1,justifyContent:"between",alignItems:"center",children:[e.jsx(P,{disabled:r.pageIndex===0,onClick:S=>m(T=>T-1),children:e.jsx(Es,{className:"fa-icon"})}),e.jsx(C,{small:!0,children:u("group.members.pageinfo",["amount","page","totalPages"],[r.totalMembersCount.toString(),(r.pageIndex+1).toString(),h.toString()])}),e.jsx(P,{disabled:r.pageIndex===h-1,onClick:S=>m(T=>T+1),children:e.jsx(bs,{className:"fa-icon"})})]})]})]})},Dw=i=>{const[t,s]=o.useState(!1);return di(),M(hI,n=>{const a=n.getParser();s(!1),ss(a.roomId)}),o.useEffect(()=>{const n={linkReceived:a=>{const r=a.split("/");if(!(r.length<2))switch(r[1]){case"create":s(!0);return;case"manage":if(!r[2])return;s(!1),D(new gI(Number(r[2])));return}},eventUrlPrefix:"groups/"};return ct(n),()=>ut(n)},[]),e.jsxs(e.Fragment,{children:[t&&e.jsx(Sw,{onClose:()=>s(!1)}),!t&&e.jsx(kw,{}),e.jsx(Aw,{}),e.jsx(Tw,{})]})},Pw=i=>{const{helpRequestDescription:t=null,helpRequestAverageTime:s=0}=i,n=a=>D(new fI(a));return e.jsxs(N,{children:[e.jsxs(N,{gap:0,className:"bg-muted p-2 rounded",children:[e.jsx(C,{bold:!0,children:u("guide.help.request.guide.accept.request.title")}),e.jsx(C,{variant:"muted",children:u("guide.help.request.type.1")}),e.jsx(C,{wrap:!0,textBreak:!0,children:t})]}),e.jsxs(N,{gap:1,children:[e.jsx(P,{variant:"success",onClick:a=>n(!0),children:u("guide.help.request.guide.accept.accept.button")}),e.jsx(P,{variant:"danger",onClick:a=>n(!1),children:u("guide.help.request.guide.accept.skip.link")})]})]})},Lw=i=>{const{isOnDuty:t=!1,isHandlingGuideRequests:s=!1,setIsHandlingGuideRequests:n=null,isHandlingHelpRequests:a=!1,setIsHandlingHelpRequests:r=null,isHandlingBullyReports:l=!1,setIsHandlingBullyReports:c=null,guidesOnDuty:m=0,helpersOnDuty:h=0,guardiansOnDuty:d=0,processAction:g=null}=i;return e.jsxs(N,{children:[e.jsxs(_,{alignItems:"center",gap:2,className:"bg-muted p-2 rounded",children:[e.jsx(A,{className:"duty-switch"+(t?"":" off"),onClick:f=>g("toggle_duty")}),e.jsxs(N,{gap:0,children:[e.jsx(C,{bold:!0,children:u("guide.help.guide.tool.yourstatus")}),e.jsx(C,{children:u(`guide.help.guide.tool.duty.${t?"on":"off"}`)})]})]}),e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("guide.help.guide.tool.tickettypeselection.caption")}),e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx("input",{className:"form-check-input",disabled:t,type:"checkbox",checked:s,onChange:f=>n(f.target.checked)}),e.jsx(C,{children:u("guide.help.guide.tool.tickettypeselection.guiderequests")})]}),e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx("input",{className:"form-check-input",disabled:t,type:"checkbox",checked:a,onChange:f=>r(f.target.checked)}),e.jsx(C,{children:u("guide.help.guide.tool.tickettypeselection.onlyhelprequests")})]}),e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx("input",{className:"form-check-input",disabled:t,type:"checkbox",checked:l,onChange:f=>c(f.target.checked)}),e.jsx(C,{children:u("guide.help.guide.tool.tickettypeselection.bullyreports")})]})]}),e.jsx("hr",{className:"bg-dark m-0"}),e.jsxs(_,{center:!0,gap:2,children:[e.jsx(A,{className:"info-icon"}),e.jsxs(N,{gap:1,children:[e.jsx(A,{dangerouslySetInnerHTML:{__html:u("guide.help.guide.tool.guidesonduty",["amount"],[m.toString()])}}),e.jsx(A,{dangerouslySetInnerHTML:{__html:u("guide.help.guide.tool.helpersonduty",["amount"],[h.toString()])}}),e.jsx(A,{dangerouslySetInnerHTML:{__html:u("guide.help.guide.tool.guardiansonduty",["amount"],[d.toString()])}})]})]}),e.jsx("hr",{className:"bg-dark m-0"}),e.jsxs(_,{justifyContent:"between",gap:2,children:[e.jsx(P,{disabled:!0,onClick:f=>g("forum_link"),children:u("guide.help.guide.tool.forum.link")}),e.jsx(P,{disabled:!0,children:u("guide.help.guide.tool.skill.link")})]})]})},Mw=i=>{const t=o.useRef(null),{isGuide:s=!1,userId:n=0,userName:a=null,userFigure:r=null,isTyping:l=!1,messageGroups:c=[]}=i,[m,h]=o.useState("");o.useEffect(()=>{var x;(x=t.current)==null||x.scrollIntoView({block:"end",behavior:"smooth"})},[c]);const d=o.useCallback(()=>{D(new pI)},[]),g=o.useCallback(()=>{D(new xI)},[]),f=o.useCallback(()=>{D(new jI)},[]);M(II,x=>{const E=x.getParser();ss(E.requesterRoomId)});const j=o.useCallback(()=>{!m||!m.length||(D(new EI(m)),h(""))},[m]),p=o.useCallback(x=>{x.key==="Enter"&&j()},[j]),I=o.useCallback(x=>x===V().userId,[]);return e.jsxs(N,{fullHeight:!0,children:[e.jsxs(_,{alignItems:"center",justifyContent:"between",gap:1,className:"bg-muted p-2 rounded",children:[s&&e.jsxs(fn,{children:[e.jsx(P,{onClick:d,children:u("guide.help.request.guide.ongoing.visit.button")}),e.jsx(P,{onClick:g,children:u("guide.help.request.guide.ongoing.invite.button")})]}),!s&&e.jsxs(N,{gap:0,children:[e.jsx(C,{bold:!0,children:a}),e.jsx(C,{children:u("guide.help.request.user.ongoing.guide.desc")})]}),e.jsx(P,{variant:"danger",disabled:!0,children:u("guide.help.common.report.link")})]}),e.jsx(N,{overflow:"hidden",gap:1,className:"bg-muted rounded chat-messages p-2",children:e.jsxs(N,{overflow:"auto",children:[c.map((x,E)=>e.jsxs(_,{fullWidth:!0,justifyContent:I(x.userId)?"end":"start",gap:2,children:[e.jsx(A,{shrink:!0,className:"message-avatar",children:!I(x.userId)&&e.jsx(tt,{figure:r,direction:2})}),e.jsxs(A,{className:"bg-light text-black border-radius mb-2 rounded py-1 px-2 messages-group-"+(I(x.userId)?"right":"left"),children:[e.jsxs(C,{bold:!0,children:[I(x.userId)&&V().userName,!I(x.userId)&&a]}),x.messages.map((v,b)=>e.jsx(A,{pointer:!!v.roomId,className:v.roomId?"text-break text-underline":"text-break",onClick:()=>v.roomId?ss(v.roomId):null,children:v.message},b))]}),I(x.userId)&&e.jsx(A,{className:"message-avatar flex-shrink-0",children:e.jsx(tt,{figure:V().figure,direction:4})})]},E)),e.jsx("div",{ref:t})]})}),e.jsxs(N,{gap:1,children:[e.jsxs(_,{gap:1,children:[e.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:u("guide.help.request.guide.ongoing.input.empty",["name"],[a]),value:m,onChange:x=>h(x.target.value),onKeyDown:p}),e.jsx(P,{variant:"success",onClick:j,children:u("widgets.chatinput.say")})]}),l&&e.jsx(C,{variant:"muted",children:u("guide.help.common.typing")})]}),e.jsx(P,{fullWidth:!0,variant:"success",onClick:f,children:u("guide.help.request."+(s?"guide":"user")+".ongoing.close.link")})]})},Uw=15,Fw=i=>{const{userRequest:t="",setUserRequest:s=null}=i,[n,a]=o.useState(!1),r=()=>{a(!0),D(new bI(1,t))};return e.jsxs(N,{children:[e.jsx(C,{children:u("guide.help.request.user.create.help")}),e.jsx("textarea",{className:"request-message",maxLength:140,value:t,onChange:l=>s(l.target.value),placeholder:u("guide.help.request.user.create.input.help")}),e.jsx(P,{fullWidth:!0,variant:"success",disabled:t.length<Uw||n,onClick:r,children:u("guide.help.request.user.create.input.button")})]})},Vw=i=>{const{userName:t=null}=i,s=n=>D(new CI(n));return e.jsxs(N,{children:[e.jsxs(_,{justifyContent:"between",gap:1,className:"bg-muted p-2 rounded",children:[e.jsxs(N,{gap:0,children:[e.jsx(C,{bold:!0,children:t}),e.jsx(C,{children:u("guide.help.request.user.feedback.guide.desc")})]}),e.jsx(P,{variant:"danger",disabled:!0,children:u("guide.help.common.report.link")})]}),e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("guide.help.request.user.feedback.closed.title")}),e.jsx(C,{children:u("guide.help.request.user.feedback.closed.desc")})]}),t&&t.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("hr",{className:"bg-dark m-0 mt-auto"}),e.jsxs(N,{children:[e.jsx(C,{center:!0,bold:!0,children:u("guide.help.request.user.feedback.question")}),e.jsxs(_,{gap:1,children:[e.jsx(P,{fullWidth:!0,variant:"success",onClick:n=>s(!0),children:u("guide.help.request.user.feedback.positive.button")}),e.jsx(P,{fullWidth:!0,variant:"danger",onClick:n=>s(!1),children:u("guide.help.request.user.feedback.negative.button")})]})]})]})]})},Gw=i=>e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("guide.help.request.no_tour_guides.title")}),e.jsx(C,{children:u("guide.help.request.no_tour_guides.message")})]}),Bw=i=>{const{helpRequestDescription:t=null,helpRequestAverageTime:s=0}=i,n=()=>D(new NI);return e.jsxs(N,{children:[e.jsxs(N,{gap:0,className:"bg-muted rounded p-2",children:[e.jsx(C,{bold:!0,children:u("guide.help.request.guide.accept.request.title")}),e.jsx(C,{variant:"muted",children:u("guide.help.request.type.1")}),e.jsx(C,{wrap:!0,textBreak:!0,children:t})]}),e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("guide.help.request.user.pending.info.title")}),e.jsx(C,{children:u("guide.help.request.user.pending.info.message")}),e.jsx(C,{children:u("guide.help.request.user.pending.info.waiting",["waitingtime"],[s.toString()])})]}),e.jsx(P,{variant:"danger",onClick:n,children:u("guide.help.request.user.pending.cancel.button")})]})},Hw=i=>e.jsx(N,{gap:1,children:e.jsx(C,{children:u("guide.help.request.user.guide.disconnected.error.desc")})}),Ww=i=>e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("guide.help.request.user.thanks.info.title")}),e.jsx(C,{children:u("guide.help.request.user.thanks.info.desc")})]}),qw=i=>{const[t,s]=o.useState(!1),[n,a]=o.useState(u("guide.help.guide.tool.title")),[r,l]=o.useState(!1),[c,m]=o.useState(Oe.GUIDE_TOOL_MENU),[h,d]=o.useState(!1),[g,f]=o.useState(!1),[j,p]=o.useState(!1),[I,x]=o.useState(!1),[E,v]=o.useState(0),[b,w]=o.useState(0),[S,T]=o.useState(0),[L,k]=o.useState(""),[y,R]=o.useState(null),[O,F]=o.useState(0),[U,q]=o.useState(0),[$,G]=o.useState(null),[re,Le]=o.useState(null),[Ye,jt]=o.useState(!1),[ds,ye]=o.useState([]),{simpleAlert:Dt=null}=Pe(),Se=o.useCallback((de,le)=>{switch(de){case Oe.GUIDE_TOOL_MENU:a(u("guide.help.guide.tool.title")),l(!1);break;case Oe.GUIDE_ACCEPT:a(u("guide.help.request.guide.accept.title")),l(!0);break;case Oe.GUIDE_ONGOING:a(u("guide.help.request.guide.ongoing.title",["name"],[le])),l(!0);break;case Oe.USER_CREATE:a(u("guide.help.request.user.create.title")),l(!1);break;case Oe.USER_PENDING:a(u("guide.help.request.user.pending.title")),l(!0);break;case Oe.USER_ONGOING:a(u("guide.help.request.user.ongoing.title",["name"],[le])),l(!0);break;case Oe.USER_FEEDBACK:a(u("guide.help.request.user.feedback.title")),l(!0);break;case Oe.USER_THANKS:a(u("guide.help.request.user.thanks.title")),l(!1);break;case Oe.USER_NO_HELPERS:a(u("guide.help.request.no_tour_guides.heading")),l(!1);break;case Oe.USER_SOMETHING_WRONG:a(u("guide.help.request.user.guide.disconnected.error.heading")),l(!1);break}m(de),s(!0)},[]),ms=o.useCallback(de=>{switch(de.type){case gs.SHOW_GUIDE_TOOL:s(!0);return;case gs.HIDE_GUIDE_TOOL:s(!1);return;case gs.TOGGLE_GUIDE_TOOL:s(le=>!le);return;case gs.CREATE_HELP_REQUEST:Se(Oe.USER_CREATE);return}},[Se]);rt(gs.SHOW_GUIDE_TOOL,ms),rt(gs.HIDE_GUIDE_TOOL,ms),rt(gs.TOGGLE_GUIDE_TOOL,ms),rt(gs.CREATE_HELP_REQUEST,ms),M(Cm,de=>{!de.getParser().isAllowed(bm.USE_GUIDE_TOOL)&&h&&(d(!1),D(new ou(!1,!1,!1,!1)))}),M(vI,de=>{const le=de.getParser();d(le.onDuty),w(le.guidesOnDuty),v(le.helpersOnDuty),T(le.guardiansOnDuty)}),M(_I,de=>{const le=de.getParser();R(le.helpRequestDescription),F(le.roleSpecificWaitTime),le.asGuide&&h&&Se(Oe.GUIDE_ACCEPT),le.asGuide||Se(Oe.USER_PENDING)}),M(SI,de=>{const le=de.getParser();h?(q(le.requesterUserId),G(le.requesterName),Le(le.requesterFigure),Se(Oe.GUIDE_ONGOING,le.requesterName)):(q(le.guideUserId),G(le.guideName),Le(le.guideFigure),Se(Oe.USER_ONGOING,le.guideName))}),M(wI,de=>{const le=de.getParser();jt(le.isTyping)}),M(TI,de=>{const le=de.getParser(),we=[...ds];let kt=we[we.length-1];(!kt||kt.userId!==le.senderId)&&(kt=new Ou(le.senderId),we.push(kt)),kt.addChat(new yu(le.chatMessage)),ye(we)}),M(RI,de=>{const le=de.getParser();if(le.roomId!==0){const we=[...ds];let kt=we[we.length-1];const _t=h?V().userId:U;(!kt||kt.userId!==_t)&&(kt=new Ou(_t),we.push(kt)),kt.addChat(new yu(le.roomName,le.roomId)),ye(we)}}),M(yI,de=>{h?(q(0),G(null),Le(null),jt(!1),ye([]),Se(Oe.GUIDE_TOOL_MENU)):Se(Oe.USER_FEEDBACK)}),M(OI,de=>{switch(de.getParser().errorCode){case 0:Se(Oe.USER_SOMETHING_WRONG);break;case 1:case 2:Se(Oe.USER_NO_HELPERS);break}}),M(kI,de=>{q(0),G(null),Le(null),jt(!1),ye([]),Se(h?Oe.GUIDE_TOOL_MENU:Oe.USER_THANKS)}),o.useEffect(()=>{const de={linkReceived:le=>{const we=le.split("/");if(!(we.length<2))switch(we[1]){case"tour":return}},eventUrlPrefix:"help/"};return ct(de),()=>ut(de)},[]);const ue=o.useCallback(de=>{switch(de){case"close":s(!1),k(""),m(Oe.GUIDE_TOOL_MENU);return;case"toggle_duty":if(!g&&!j&&!I){Dt(u("guide.help.guide.tool.noqueueselected.message"),null,null,null,u("guide.help.guide.tool.noqueueselected.caption"),null);return}d(we=>(D(new ou(!we,we?!1:j,we?!1:I,we?!1:g)),!we));return;case"forum_link":const le=K("group.homepage.url","").replace("%groupid%",K("guide.help.alpha.groupid","0"));window.open(le);return}},[g,j,I,Dt]);return t?e.jsxs(ne,{className:"nitro-guide-tool",theme:"primary-slim",children:[e.jsx(se,{headerText:n,onCloseClick:de=>ue("close"),noCloseButton:r}),e.jsxs(ee,{className:"text-black",children:[c===Oe.GUIDE_TOOL_MENU&&e.jsx(Lw,{isOnDuty:h,isHandlingGuideRequests:j,setIsHandlingGuideRequests:p,isHandlingHelpRequests:I,setIsHandlingHelpRequests:x,isHandlingBullyReports:g,setIsHandlingBullyReports:f,guidesOnDuty:b,helpersOnDuty:E,guardiansOnDuty:S,processAction:ue}),c===Oe.GUIDE_ACCEPT&&e.jsx(Pw,{helpRequestDescription:y,helpRequestAverageTime:O}),[Oe.GUIDE_ONGOING,Oe.USER_ONGOING].includes(c)&&e.jsx(Mw,{isGuide:h,userId:U,userName:$,userFigure:re,isTyping:Ye,messageGroups:ds}),c===Oe.USER_CREATE&&e.jsx(Fw,{userRequest:L,setUserRequest:k}),c===Oe.USER_PENDING&&e.jsx(Bw,{helpRequestDescription:y,helpRequestAverageTime:O}),c===Oe.USER_FEEDBACK&&e.jsx(Vw,{userName:$}),c===Oe.USER_THANKS&&e.jsx(Ww,{}),c===Oe.USER_NO_HELPERS&&e.jsx(Gw,{}),c===Oe.USER_SOMETHING_WRONG&&e.jsx(Hw,{})]})]}):null},zw=i=>{const[t,s]=o.useState(!1),[n,a]=o.useState(null),[r,l]=o.useState(0),[c,m]=o.useState(null),{userFigure:h=null}=Fn(),{purse:d=null,clubStatus:g=null}=Lr(),{badgeCodes:f=[],activate:j=null,deactivate:p=null}=mi(),I=()=>d.clubDays<=0?u("purse.clubdays.zero.amount.text"):d.minutesUntilExpiration>-1&&d.minutesUntilExpiration<60*24?Xs.shortFormat(d.minutesUntilExpiration*60):Xs.shortFormat((d.clubPeriods*31+d.clubDays)*86400),x=()=>{switch(g){case un.ACTIVE:return u(`hccenter.status.${g}.info`,["timeleft","joindate","streakduration"],[I(),n==null?void 0:n.firstSubscriptionDate,Xs.shortFormat((n==null?void 0:n.currentHcStreak)*86400)]);case un.EXPIRED:return u(`hccenter.status.${g}.info`,["joindate"],[n==null?void 0:n.firstSubscriptionDate]);default:return u(`hccenter.status.${g}.info`)}},E=()=>!n||n.timeUntilPayday<60?u("hccenter.special.time.soon"):Xs.shortFormat(n.timeUntilPayday*60),v=()=>u("hccenter.special.sum",["credits"],[((n==null?void 0:n.creditRewardForStreakBonus)+(n==null?void 0:n.creditRewardForMonthlySpent)).toString()]);if(M(Zd,w=>{const S=w.getParser();l(S.giftsAvailable)}),M(AI,w=>{const S=w.getParser();a(S.data)}),o.useEffect(()=>{const w={linkReceived:S=>{const T=S.split("/");if(!(T.length<2))switch(T[1]){case"open":if(T.length>2)switch(T[2]){case"hccenter":s(!0);break}return}},eventUrlPrefix:"habboUI/"};return ct(w),()=>ut(w)},[]),o.useEffect(()=>{m(zC(f))},[f]),o.useEffect(()=>{if(!t)return;const w=j();return()=>p(w)},[t,j,p]),o.useEffect(()=>{D(new em),D(new DI)},[]),!t)return null;const b=e.jsx(aa,{id:"popover-basic",children:e.jsxs(aa.Body,{className:"text-black py-2 px-3",children:[e.jsx("h5",{children:u("hccenter.breakdown.title")}),e.jsx("div",{children:u("hccenter.breakdown.creditsspent",["credits"],[n==null?void 0:n.totalCreditsSpent.toString()])}),e.jsx("div",{children:u("hccenter.breakdown.paydayfactor.percent",["percent"],[((n==null?void 0:n.kickbackPercentage)*100).toString()])}),e.jsx("div",{children:u("hccenter.breakdown.streakbonus",["credits"],[n==null?void 0:n.creditRewardForStreakBonus.toString()])}),e.jsx("hr",{className:"w-100 text-black my-1"}),e.jsx("div",{children:u("hccenter.breakdown.total",["credits","actual"],[v(),(((n==null?void 0:n.kickbackPercentage)*(n==null?void 0:n.totalCreditsSpent)+(n==null?void 0:n.creditRewardForStreakBonus))*100/100).toString()])}),e.jsx("div",{className:"btn btn-link text-primary p-0",onClick:()=>Q("habbopages/"+K("hc.center")["payday.habbopage"]),children:u("hccenter.special.infolink")})]})});return e.jsxs(ne,{theme:"primary-slim",className:"nitro-hc-center",children:[e.jsx(se,{headerText:u("generic.hccenter"),onCloseClick:()=>s(!1)}),e.jsxs(_,{position:"relative",className:"bg-muted p-2",children:[e.jsxs(N,{gap:1,children:[e.jsx("div",{className:"hc-logo"}),e.jsx(_,{children:e.jsx(P,{variant:"success",onClick:w=>Q("catalog/open/"+K("catalog.links")["hc.buy_hc"]),children:u(g===un.ACTIVE?"hccenter.btn.extend":"hccenter.btn.buy")})})]}),e.jsx(A,{position:"absolute",className:"end-0 p-4 top-0 habbo-avatar",children:e.jsx(tt,{figure:h,direction:4,scale:2})})]}),e.jsxs(ee,{children:[e.jsxs(_,{gap:2,children:[e.jsx(ze,{badgeCode:c,className:"align-self-center flex-shrink-0 me-1"}),e.jsxs(N,{size:5,className:"streak-info",gap:0,children:[e.jsx(C,{children:u("hccenter.status."+g)}),e.jsx(C,{dangerouslySetInnerHTML:{__html:x()}})]})]}),K("hc.center")["payday.info"]&&e.jsxs(_,{alignItems:"center",children:[e.jsxs(N,{className:"rounded-start bg-primary p-2 payday-special mb-1",children:[e.jsx("h4",{className:"mb-1",children:u("hccenter.special.title")}),e.jsx("div",{children:u("hccenter.special.info")}),e.jsx("div",{className:"btn btn-link text-white p-0 mt-auto align-self-baseline",onClick:()=>Q("habbopages/"+K("hc.center")["payday.habbopage"]),children:u("hccenter.special.infolink")})]}),e.jsxs("div",{className:"payday flex-shrink-0 p-2",children:[e.jsx("h5",{className:"mb-2 ms-2",children:u("hccenter.special.time.title")}),e.jsxs("div",{className:"d-flex flex-row mb-2",children:[e.jsx("div",{className:"clock me-2"}),e.jsx("h6",{className:"mb-0 align-self-center",children:E()})]}),g===un.ACTIVE&&e.jsxs("div",{className:"pe-3",children:[e.jsx("h5",{className:"ms-2 mb-1 bolder",children:u("hccenter.special.amount.title")}),e.jsxs("div",{className:"d-flex flex-column",children:[e.jsx("div",{className:"w-100 text-center ms-4n",children:v()}),e.jsx(Nm,{trigger:["hover","focus"],placement:"left",overlay:b,children:e.jsx("div",{className:"btn btn-link align-self-end text-primary",children:u("hccenter.breakdown.infolink")})})]})]})]})]}),K("hc.center")["gift.info"]&&e.jsxs("div",{className:"rounded bg-success p-2 d-flex flex-row mb-0",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"mb-1",children:u("hccenter.gift.title")}),e.jsx("div",{dangerouslySetInnerHTML:{__html:r>0?u("hccenter.unclaimedgifts",["unclaimedgifts"],[r.toString()]):u("hccenter.gift.info")}})]}),e.jsx("button",{className:"btn btn-primary btn-lg align-self-center ms-auto",onClick:()=>Q("catalog/open/"+K("catalog.links")["hc.hc_gifts"]),children:u(g===un.ACTIVE?"hccenter.btn.gifts.redeem":"hccenter.btn.gifts.view")})]}),K("hc.center")["benefits.info"]&&e.jsxs("div",{className:"benefits text-black py-2",children:[e.jsx("h5",{className:"mb-1 text-primary",children:u("hccenter.general.title")}),e.jsx("div",{className:"mb-2",dangerouslySetInnerHTML:{__html:u("hccenter.general.info")}}),e.jsx("button",{className:"btn btn-link p-0 text-primary",onClick:()=>Q("habbopages/"+K("hc.center")["benefits.habbopage"]),children:u("hccenter.general.infolink")})]})]})]})},Yw=i=>{const[t,s]=o.useState(""),{activeReport:n=null,setActiveReport:a=null}=Fs(),r=()=>{t.length<15||a(c=>{const m=qt.REPORT_SUMMARY;return{...c,message:t,currentStep:m}})},l=()=>{a(c=>({...c,currentStep:c.currentStep-1}))};return e.jsxs(e.Fragment,{children:[e.jsxs(N,{gap:1,children:[e.jsx(C,{fontSize:4,children:u("help.emergency.chat_report.subtitle")}),e.jsx(C,{children:u("help.cfh.input.text")})]}),e.jsx("textarea",{className:"form-control h-100",value:t,onChange:c=>s(c.target.value)}),e.jsxs(_,{gap:2,justifyContent:"between",children:[e.jsx(P,{variant:"secondary",disabled:!(n.reportType===Ze.BULLY||n.reportType===Ze.EMERGENCY),onClick:l,children:u("generic.back")}),e.jsx(P,{disabled:t.length<15,onClick:r,children:u("help.emergency.main.submit.button")})]})]})},$w=i=>{const{setActiveReport:t=null}=Fs(),s=()=>{t(n=>{const a=qt.SELECT_USER,r=Ze.BULLY;return{...n,currentStep:a,reportType:r}})};return e.jsxs(e.Fragment,{children:[e.jsxs(N,{grow:!0,center:!0,gap:1,children:[e.jsx(C,{fontSize:3,children:u("help.main.frame.title")}),e.jsx(C,{children:u("help.main.self.description")})]}),e.jsxs(N,{gap:1,children:[e.jsx(P,{onClick:s,children:u("help.main.bully.subtitle")}),e.jsx(P,{onClick:()=>pt(new gs(gs.CREATE_HELP_REQUEST)),disabled:!K("guides.enabled"),children:u("help.main.help.title")}),e.jsx(P,{disabled:!0,children:u("help.main.self.tips.title")})]}),e.jsx(P,{variant:"link",textColor:"black",onClick:()=>D(new PI(!1)),children:u("help.main.my.sanction.status")})]})},Kw=i=>{const{username:t="",onAction:s=null}=i,[n,a]=o.useState(!1),r=()=>{n||(a(!0),D(new MI(t)))};return M(LI,l=>{const c=l.getParser();c&&c.webId===V().userId&&s("close")}),e.jsxs("div",{className:"d-flex flex-column gap-4 h-100",children:[e.jsx("div",{className:"bg-muted rounded p-2 text-center",children:u("tutorial.name_change.info.confirm")}),e.jsxs("div",{className:"d-flex flex-column align-items-center gap-1 h-100",children:[e.jsx("div",{children:u("tutorial.name_change.confirm")}),e.jsx("div",{className:"fw-bold",children:t})]}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx("button",{className:"btn btn-success w-100",disabled:n,onClick:r,children:u("generic.ok")}),e.jsx("button",{className:"btn btn-primary w-100",onClick:()=>s("close"),children:u("cancel")})]})]})},Xw=i=>{const{onAction:t=null}=i;return e.jsxs("div",{className:"d-flex flex-column gap-4 h-100",children:[e.jsx("div",{className:"bg-muted rounded p-2 text-center",children:u("tutorial.name_change.info.main")}),e.jsx("div",{className:"fw-bold d-flex align-items-center justify-content-center h-100 w-100",children:u("tutorial.name_change.current",["name"],[V().userName])}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx("button",{className:"btn btn-success w-100",onClick:()=>t("start"),children:u("tutorial.name_change.change")}),e.jsx("button",{className:"btn btn-primary w-100",onClick:()=>t("confirmation",V().userName),children:u("tutorial.name_change.keep")})]})]})},Qw=0,Jw=2,Zw=3,eT=4,tT=5,sT=6,nT=i=>{const{onAction:t=null}=i,[s,n]=o.useState(""),[a,r]=o.useState(!1),[l,c]=o.useState(!1),[m,h]=o.useState(null),[d,g]=o.useState([]),f=()=>{s!==""&&(r(!1),g([]),h(null),c(!0),D(new FI(s)))},j=p=>{r(!1),g([]),h(null),n(p)};return M(UI,p=>{c(!1);const I=p.getParser();if(I)switch(I.resultCode){case Qw:r(!0);break;case Jw:h("short");break;case Zw:h("long");break;case eT:h("invalid");break;case tT:g(I.nameSuggestions),h("taken");break;case sT:h("change_not_allowed")}}),e.jsxs("div",{className:"d-flex flex-column gap-3 h-100",children:[e.jsx("div",{children:u("tutorial.name_change.info.select")}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx("input",{type:"text",className:"form-control form-control-sm",value:s,onChange:p=>j(p.target.value)}),e.jsx("button",{className:"btn btn-primary",disabled:s===""||l,onClick:f,children:u("tutorial.name_change.check")})]}),!m&&!a&&e.jsx("div",{className:"bg-muted rounded p-2 text-center",children:u("help.tutorial.name.info")}),m&&e.jsx("div",{className:"bg-danger rounded p-2 text-center text-white",children:u(`help.tutorial.name.${m}`,["name"],[s])}),a&&e.jsx("div",{className:"bg-success rounded p-2 text-center text-white",children:u("help.tutorial.name.available",["name"],[s])}),d&&e.jsx("div",{className:"d-flex flex-column gap-2",children:d.map((p,I)=>e.jsx("div",{className:"col bg-muted rounded p-1 cursor-pointer",onClick:()=>j(p),children:p},I))}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx("button",{className:"btn btn-success w-100",disabled:!a,onClick:()=>t("confirmation",s),children:u("tutorial.name_change.pick")}),e.jsx("button",{className:"btn btn-primary w-100",onClick:()=>t("close"),children:u("cancel")})]})]})},Li="INIT",jl="INPUT",Il="CONFIRMATION",rT=i=>{const[t,s]=o.useState(!1),[n,a]=o.useState(Li),[r,l]=o.useState(""),c=(h,d)=>{switch(h){case"start":a(jl);break;case"confirmation":l(d),a(Il);break;case"close":l(""),s(!1);break}},m=o.useMemo(()=>{switch(n){case Li:return"tutorial.name_change.title.main";case jl:return"tutorial.name_change.title.select";case Il:return"tutorial.name_change.title.confirm"}},[n]);return rt(ti.INIT,h=>{a(Li),s(!0)}),t?e.jsxs(ne,{className:"nitro-change-username",theme:"primary-slim",children:[e.jsx(se,{headerText:u(m),onCloseClick:()=>c("close")}),e.jsxs(ee,{className:"text-black",children:[n===Li&&e.jsx(Xw,{onAction:c}),n===jl&&e.jsx(nT,{onAction:c}),n===Il&&e.jsx(Kw,{username:r,onAction:c})]})]}):null},aT=i=>{const{activeReport:t=null,setActiveReport:s=null}=Fs(),n=()=>{const a=[];switch(t.reportType){case Ze.BULLY:case Ze.EMERGENCY:case Ze.ROOM:{const r=t.roomId<=0?t.reportedChats[0].roomId:t.roomId;t.reportedChats.forEach(l=>a.push(l.webId,l.message)),D(new WI(t.message,t.cfhTopic,t.reportedUserId,r,a));break}case Ze.IM:t.reportedChats.forEach(r=>a.push(r.webId,r.message)),D(new HI(t.message,t.cfhTopic,t.reportedUserId,a));break;case Ze.THREAD:D(new BI(t.groupId,t.threadId,t.cfhTopic,t.message));break;case Ze.MESSAGE:D(new GI(t.groupId,t.threadId,t.messageId,t.cfhTopic,t.message));break;case Ze.PHOTO:D(new VI(t.extraData,t.roomId,t.reportedUserId,t.cfhTopic,t.roomObjectId));break}s(null)};return e.jsxs(e.Fragment,{children:[e.jsxs(N,{gap:1,children:[e.jsx(C,{fontSize:4,children:u("help.cfh.button.send")}),e.jsx(C,{children:u("help.main.summary")})]}),e.jsx(P,{variant:"success",onClick:n,children:u("guide.help.request.emergency.submit.button")})]})},iT=i=>{const{sanctionInfo:t=null,setSanctionInfo:s=null}=Fs(),n=(a,r,l)=>{let c=`help.sanction.${a}`;switch(r){case"ALERT":c=c+".alert";break;case"MUTE":c=c+".mute";break;case"BAN_PERMANENT":c=c+".permban";break;default:if(c=c+".ban",l>24)return c=c+".days",u(c,["days"],[(l/24).toString()])}return u(c,["hours"],[l.toString()])};return t?e.jsxs(ne,{className:"nitro-help",theme:"primary-slim",children:[e.jsx(se,{headerText:u("help.sanction.info.title"),onCloseClick:()=>s(null)}),e.jsx(ee,{className:"text-black",children:e.jsxs(te,{children:[e.jsx(N,{center:!0,size:5,overflow:"hidden",children:e.jsx(A,{className:"index-image"})}),e.jsxs(N,{justifyContent:"between",size:7,overflow:"hidden",children:[t.sanctionReason==="cfh.reason.EMPTY"?e.jsx("div",{className:"col-12 fw-bold",children:u("help.sanction.current.none")}):e.jsxs(e.Fragment,{children:[(t.probationHoursLeft>0||t.isSanctionActive)&&e.jsx("div",{className:"col-12 fw-bold",children:u("help.sanction.probation.reminder")}),e.jsxs("div",{className:`col-12 fw-bold ${t.isSanctionNew?"text-danger":""}`,children:[u("help.sanction.last.sanction")," ",n("current",t.sanctionName,t.sanctionLengthHours)]}),e.jsxs("div",{className:"col-12",children:[u("generic.start.time")," ",t.sanctionCreationTime]}),e.jsxs("div",{className:"col-12",children:[u("generic.reason")," ",t.sanctionReason]}),e.jsxs("div",{className:"col-12",children:[u("help.sanction.probation.days.left")," ",Math.trunc(t.probationHoursLeft/24)+1]})]}),t.hasCustomMute&&!t.isSanctionActive&&e.jsx("div",{className:"col-12 fw-bold",children:u("help.sanction.custom.mute")}),t.tradeLockExpiryTime&&t.tradeLockExpiryTime.length>0&&e.jsxs("div",{className:"col-12 fw-bold",children:[u("trade.locked.until")," ",t.tradeLockExpiryTime]}),e.jsx("div",{className:"col-12",children:n("next",t.nextSanctionName,t.nextSanctionLengthHours)}),e.jsx(P,{variant:"success",onClick:a=>s(null),children:u("habbo.way.ok.button")})]})]})})]}):null},oT=i=>{const[t,s]=o.useState([]),{activeReport:n=null,setActiveReport:a=null}=Fs(),{chatHistory:r=[],messengerHistory:l=[]}=ui(),c=o.useMemo(()=>{switch(n.reportType){case Ze.BULLY:case Ze.EMERGENCY:return r.filter(g=>g.type===Qs.TYPE_CHAT&&g.webId===n.reportedUserId&&g.entityType===lt.USER);case Ze.IM:return l.filter(g=>g.webId===n.reportedUserId&&g.type===Qs.TYPE_IM)}return[]},[n,r,l]),m=g=>{s(f=>{const j=[...f],p=j.indexOf(g);return p>=0?j.splice(p,1):j.push(g),j})},h=()=>{!t||t.length<=0||a(g=>({...g,reportedChats:t,currentStep:qt.SELECT_TOPICS}))},d=()=>{a(g=>({...g,currentStep:g.currentStep-1}))};return e.jsxs(e.Fragment,{children:[e.jsxs(N,{gap:1,children:[e.jsx(C,{fontSize:4,children:u("help.emergency.chat_report.subtitle")}),e.jsx(C,{children:u("help.emergency.chat_report.description")})]}),e.jsxs(N,{gap:1,overflow:"hidden",children:[!c||!c.length&&e.jsx(C,{children:u("help.cfh.error.no_user_data")}),c.length>0&&e.jsx(ke,{gap:1,columnCount:1,columnMinHeight:25,overflow:"auto",children:c.map((g,f)=>e.jsx(Ce,{onClick:j=>m(g),itemActive:t.indexOf(g)>=0,children:e.jsx(C,{children:g.message})},g.id))})]}),e.jsxs(_,{gap:2,justifyContent:"between",children:[e.jsx(P,{variant:"secondary",onClick:d,disabled:n.reportType===Ze.IM,children:u("generic.back")}),e.jsx(P,{disabled:t.length<=0,onClick:h,children:u("help.emergency.main.submit.button")})]})]})},lT=i=>{const[t,s]=o.useState(-1),{chatHistory:n=[]}=ui(),{activeReport:a=null,setActiveReport:r=null}=Fs(),l=o.useMemo(()=>{const d=new Map;return n.forEach(g=>{g.type===Qs.TYPE_CHAT&&g.entityType===lt.USER&&g.webId!==V().userId&&!d.has(g.webId)&&d.set(g.webId,{id:g.webId,username:g.name})}),Array.from(d.values())},[n]),c=d=>{d<=0||r(g=>({...g,reportedUserId:d,currentStep:qt.SELECT_CHATS}))},m=d=>{s(g=>d===g?-1:d)},h=()=>{r(d=>({...d,currentStep:d.currentStep-1}))};return e.jsxs(e.Fragment,{children:[e.jsxs(N,{gap:1,children:[e.jsx(C,{fontSize:4,children:u("help.emergency.main.step.two.title")}),l.length>0&&e.jsx(C,{children:u("report.user.pick.user")})]}),e.jsxs(N,{gap:1,overflow:"hidden",children:[!l.length&&e.jsx(C,{children:u("report.user.error.nolist")}),l.length>0&&e.jsx(ke,{columnCount:1,columnMinHeight:25,gap:1,children:l.map((d,g)=>e.jsx(Ce,{onClick:f=>m(d.id),itemActive:t===d.id,children:e.jsx("span",{dangerouslySetInnerHTML:{__html:d.username}})},d.id))})]}),e.jsxs(_,{gap:2,justifyContent:"between",children:[e.jsx(P,{variant:"secondary",onClick:h,children:u("generic.back")}),e.jsx(P,{disabled:t<=0,onClick:()=>c(t),children:u("help.emergency.main.submit.button")})]})]})},cT=i=>{const[t,s]=o.useState(-1),[n,a]=o.useState(-1),{setActiveReport:r=null}=Fs(),{cfhCategories:l=[]}=ma(),c=()=>{t<0||n<0||r(h=>({...h,cfhCategory:t,cfhTopic:l[t].topics[n].id,currentStep:qt.INPUT_REPORT_MESSAGE}))},m=()=>{r(h=>({...h,currentStep:h.currentStep-1}))};return e.jsxs(e.Fragment,{children:[e.jsxs(N,{gap:1,children:[e.jsx(C,{fontSize:4,children:u("help.emergency.chat_report.subtitle")}),e.jsx(C,{children:u("help.cfh.pick.topic")})]}),e.jsxs(N,{gap:1,overflow:"auto",children:[t<0&&l.map((h,d)=>e.jsx(P,{variant:"danger",onClick:g=>s(d),children:u(`help.cfh.reason.${h.name}`)},d)),t>=0&&l[t].topics.map((h,d)=>e.jsx(P,{variant:"danger",onClick:g=>a(d),active:n===d,children:u(`help.cfh.topic.${h.id}`)},d))]}),e.jsxs(_,{gap:2,justifyContent:"between",children:[e.jsx(P,{variant:"secondary",onClick:m,children:u("generic.back")}),e.jsx(P,{disabled:n<0,onClick:c,children:u("help.emergency.main.submit.button")})]})]})},uT=i=>{const[t,s]=o.useState(!1),{activeReport:n=null,setActiveReport:a=null,report:r=null}=Fs(),l=()=>{a(null),s(!1)};o.useEffect(()=>{const m={linkReceived:h=>{const d=h.split("/");if(!(d.length<2))switch(d[1]){case"show":s(!0);return;case"hide":s(!1);return;case"toggle":s(g=>!g);return;case"tour":return;case"report":d.length>=5&&d[2]==="room"&&(parseInt(d[3]),unescape(d.splice(4).join("/")));return}},eventUrlPrefix:"help/"};return ct(m),()=>ut(m)},[]),o.useEffect(()=>{n&&s(!0)},[n]);const c=()=>{if(n)switch(n.currentStep){case qt.SELECT_USER:return e.jsx(lT,{});case qt.SELECT_CHATS:return e.jsx(oT,{});case qt.SELECT_TOPICS:return e.jsx(cT,{});case qt.INPUT_REPORT_MESSAGE:return e.jsx(Yw,{});case qt.REPORT_SUMMARY:return e.jsx(aT,{})}return e.jsx($w,{})};return e.jsxs(e.Fragment,{children:[t&&e.jsxs(ne,{className:"nitro-help",theme:"primary-slim",children:[e.jsx(se,{headerText:u("help.button.cfh"),onCloseClick:l}),e.jsx(ee,{className:"text-black",children:e.jsxs(te,{children:[e.jsx(N,{center:!0,size:5,overflow:"hidden",children:e.jsx(A,{className:"index-image"})}),e.jsx(N,{justifyContent:"between",size:7,overflow:"hidden",children:e.jsx(c,{})})]})})]}),e.jsx(iT,{}),e.jsx(rT,{})]})},dT=[{id:"room.rooftop",className:"rooftop-orange"},{id:"room.rooftop.pool",className:"rooftop-pool-orange"},{id:"room.pool",className:"pool-orange"},{id:"room.picnic",className:"picnic-orange"},{id:"room.peaceful",className:"peaceful-orange"},{id:"room.infobus",className:"infobus-orange"},{id:"room.lobby",className:"lobby"}],Ht=()=>{const i=K("hotelview"),t=s=>{Q(`navigator/goto/${s}`)};return e.jsx(_,{children:dT.map(s=>e.jsx(A,{className:`position-absolute ${s.className}`,onClick:()=>t(i[s.id]),children:e.jsx("i",{className:"active-arrow arrow"})},s.id))})},mT=()=>{const i=K("hotelview").images["background.colour"],t=new Date;t.getHours(),t.getMinutes();const s=i?{background:i}:{};return(a=>e.jsx("div",{className:"nitro-hotel-view",style:s,children:a}))(e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"left position-absolute",children:e.jsxs("div",{className:"hotelview-back position-relative",children:[e.jsx("div",{className:"stretch-blue position-relative"}),e.jsx("div",{className:"back-e-alt-ii position-absolute"})]})}),e.jsx("div",{className:"drape position-absolute"}),e.jsx("div",{className:"left position-absolute",children:e.jsxs("div",{className:"hotelview position-relative",children:[e.jsx("div",{className:"hotelview-orange position-relative"}),e.jsx(Ht,{})]})})]}))},hT=[{id:"room.rooftop",className:"rooftop-night"},{id:"room.rooftop.pool",className:"rooftop-pool-night"},{id:"room.picnic",className:"picnic-night"},{id:"room.peaceful",className:"peaceful-night"},{id:"room.pool",className:"pool-night"},{id:"room.infobus",className:"infobus-night"},{id:"room.lobby",className:"lobby-night"}],ho=()=>{const i=K("hotelview"),t=s=>{Q(`navigator/goto/${s}`)};return e.jsx(_,{children:hT.map(s=>e.jsx(A,{className:`position-absolute ${s.className}`,onClick:()=>t(i[s.id]),children:e.jsx("i",{className:"active-arrow arrow"})},s.id))})},gT=i=>{const t=K("hotelview").images["background.colour"],[s,n]=o.useState(!1),[a,r]=o.useState(!1);o.useEffect(()=>{setTimeout(()=>n(!0),7e3),setTimeout(()=>r(!0),0)},[]);const l=new Date,c=l.getHours()*60+l.getMinutes();return[{start:18*60,end:18*60+30},{start:19*60,end:19*60+30},{start:20*60,end:20*60+30},{start:21*60,end:21*60+30},{start:22*60,end:22*60+30},{start:23*60,end:23*60+30}].some(d=>c>=d.start&&c<=d.end)?e.jsxs("div",{className:"nitro-hotel-view",style:t&&t?{background:t}:{},children:[e.jsx("div",{className:"left position-absolute",children:e.jsxs("div",{className:"hotelview-back position-relative",children:[e.jsx("div",{className:"stretch-blue-night position-relative"}),e.jsx("div",{className:"back-c-alt position-absolute"})]})}),e.jsx("div",{className:"drape position-absolute"}),e.jsx("div",{className:"left position-absolute",children:e.jsxs("div",{className:"hotelview position-relative",children:[e.jsx("div",{className:"hotelview-night position-relative"}),e.jsx(ho,{}),e.jsx("div",{className:"light-i position-absolute"}),e.jsx("div",{className:"door position-absolute"}),e.jsx("div",{className:"door-b position-absolute"})]})})]}):e.jsxs("div",{className:"nitro-hotel-view",style:t&&t?{background:t}:{},children:[e.jsx("div",{className:"left position-absolute",children:e.jsxs("div",{className:"hotelview-back position-relative",children:[e.jsx("div",{className:"stretch-blue-night position-relative"}),e.jsx("div",{className:"back-c-alt position-absolute"})]})}),e.jsx("div",{className:"drape position-absolute"}),e.jsx("div",{className:"left position-absolute",children:e.jsxs("div",{className:"hotelview position-relative",children:[e.jsx("div",{className:"hotelview-night position-relative"}),e.jsx(ho,{}),e.jsx("div",{className:"light-i position-absolute"}),e.jsx("div",{className:"door position-absolute"}),e.jsx("div",{className:"door-b position-absolute"})]})})]})},fT=()=>{const i=K("hotelview").images["background.colour"],t=new Date,s=t.getHours(),n=t.getMinutes(),a=i&&i?{background:i}:{},r=l=>e.jsx("div",{className:"nitro-hotel-view",style:a,children:l});return e.jsxs(e.Fragment,{children:[s===6&&n<=30&&r(e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"left position-absolute",children:e.jsxs("div",{className:"hotelview-back position-relative",children:[e.jsx("div",{className:"stretch-blue-night position-relative"}),e.jsx("div",{className:"back-a position-absolute"}),e.jsx("div",{className:"back-a position-absolute"})]})}),e.jsx("div",{className:"drape position-absolute"}),e.jsx("div",{className:"left position-absolute",children:e.jsxs("div",{className:"hotelview position-relative",children:[e.jsx("div",{className:"hotelview-night position-relative"}),e.jsx(ho,{}),e.jsx("div",{className:"light-a position-absolute"}),e.jsx("div",{className:"light-a position-absolute"})]})})]})),s===6&&n>=30&&r(e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"left position-absolute",children:e.jsxs("div",{className:"hotelview-back position-relative",children:[e.jsx("div",{className:"stretch-blue-night position-relative"}),e.jsx("div",{className:"back-a-alt position-absolute"}),e.jsx("div",{className:"back-b position-absolute"})]})}),e.jsx("div",{className:"drape position-absolute"}),e.jsx("div",{className:"left position-absolute",children:e.jsxs("div",{className:"hotelview position-relative",children:[e.jsx("div",{className:"hotelview-orange position-relative"}),e.jsx(Ht,{}),e.jsx("div",{className:"front-a position-absolute"}),e.jsx("div",{className:"light-a position-absolute"})]})})]})),s===7&&n<=30&&r(e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"left position-absolute",children:e.jsxs("div",{className:"hotelview-back position-relative",children:[e.jsx("div",{className:"stretch-blue-night position-relative"}),e.jsx("div",{className:"back-a-alt position-absolute"}),e.jsx("div",{className:"back-c-alt position-absolute"}),e.jsx("div",{className:"back-b position-absolute"})]})}),e.jsx("div",{className:"drape position-absolute"}),e.jsx("div",{className:"left position-absolute",children:e.jsxs("div",{className:"hotelview position-relative",children:[e.jsx("div",{className:"hotelview-orange position-relative"}),e.jsx(Ht,{}),e.jsx("div",{className:"front-c position-absolute"}),e.jsx("div",{className:"front-b position-absolute"}),e.jsx("div",{className:"light-b position-absolute"})]})})]})),s===7&&n>=30&&r(e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"left position-absolute",children:e.jsxs("div",{className:"hotelview-back position-relative",children:[e.jsx("div",{className:"stretch-blue position-relative"}),e.jsx("div",{className:"back-d position-absolute"}),e.jsx("div",{className:"back-c position-absolute"}),e.jsx("div",{className:"back-b position-absolute"})]})}),e.jsx("div",{className:"drape position-absolute"}),e.jsx("div",{className:"left position-absolute",children:e.jsxs("div",{className:"hotelview position-relative",children:[e.jsx("div",{className:"hotelview-orange position-relative"}),e.jsx(Ht,{}),e.jsx("div",{className:"front-c position-absolute"}),e.jsx("div",{className:"front-b position-absolute"}),e.jsx("div",{className:"light-d position-absolute"})]})})]})),s===8&&n<=30&&r(e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"left position-absolute",children:e.jsxs("div",{className:"hotelview-back position-relative",children:[e.jsx("div",{className:"stretch-blue position-relative"}),e.jsx("div",{className:"back-d position-absolute"}),e.jsx("div",{className:"back-e-alt-ii position-absolute"})]})}),e.jsx("div",{className:"drape position-absolute"}),e.jsx("div",{className:"left position-absolute",children:e.jsxs("div",{className:"hotelview position-relative",children:[e.jsx("div",{className:"hotelview-orange position-relative"}),e.jsx(Ht,{}),e.jsx("div",{className:"front-c position-absolute"}),e.jsx("div",{className:"front-c position-absolute"}),e.jsx("div",{className:"front-c position-absolute"}),e.jsx("div",{className:"front-c position-absolute"}),e.jsx("div",{className:"light-e  position-absolute"})]})})]})),s===8&&n>=30&&r(e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"left position-absolute",children:e.jsxs("div",{className:"hotelview-back position-relative",children:[e.jsx("div",{className:"stretch-blue position-relative"}),e.jsx("div",{className:"back-e-alt-iii position-absolute"}),e.jsx("div",{className:"back-d position-absolute"})]})}),e.jsx("div",{className:"drape position-absolute"}),e.jsx("div",{className:"left position-absolute",children:e.jsxs("div",{className:"hotelview position-relative",children:[e.jsx("div",{className:"hotelview-orange position-relative"}),e.jsx(Ht,{}),e.jsx("div",{className:"front-c position-absolute"}),e.jsx("div",{className:"front-c position-absolute"}),e.jsx("div",{className:"front-c position-absolute"}),e.jsx("div",{className:"light-f position-absolute"})]})})]})),s===9&&n<=30&&r(e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"left position-absolute",children:e.jsxs("div",{className:"hotelview-back position-relative",children:[e.jsx("div",{className:"stretch-blue position-relative"}),e.jsx("div",{className:"back-e-alt-iv position-absolute"}),e.jsx("div",{className:"back-d position-absolute"})]})}),e.jsx("div",{className:"drape position-absolute"}),e.jsx("div",{className:"left position-absolute",children:e.jsxs("div",{className:"hotelview position-relative",children:[e.jsx("div",{className:"hotelview-orange position-relative"}),e.jsx(Ht,{}),e.jsx("div",{className:"front-d position-absolute"}),e.jsx("div",{className:"light-gg-alt position-absolute"}),e.jsx("div",{className:"light-g position-absolute"}),e.jsx("div",{className:"light-g position-absolute"})]})})]})),s===9&&n>=30&&r(e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"left position-absolute",children:e.jsxs("div",{className:"hotelview-back position-relative",children:[e.jsx("div",{className:"stretch-blue position-relative"}),e.jsx("div",{className:"back-e position-absolute"}),e.jsx("div",{className:"back-e-alt-v position-absolute"})]})}),e.jsx("div",{className:"drape position-absolute"}),e.jsx("div",{className:"left position-absolute",children:e.jsxs("div",{className:"hotelview position-relative",children:[e.jsx("div",{className:"hotelview-orange position-relative"}),e.jsx(Ht,{}),e.jsx("div",{className:"light-gg-alt position-absolute"}),e.jsx("div",{className:"light-g position-absolute"})]})})]})),s===10&&n<=30&&r(e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"left position-absolute",children:e.jsxs("div",{className:"hotelview-back position-relative",children:[e.jsx("div",{className:"stretch-blue position-relative"}),e.jsx("div",{className:"back-e-alt-ii position-absolute"})]})}),e.jsx("div",{className:"drape position-absolute"}),e.jsx("div",{className:"left position-absolute",children:e.jsxs("div",{className:"hotelview position-relative",children:[e.jsx("div",{className:"hotelview-orange position-relative"}),e.jsx(Ht,{}),e.jsx("div",{className:"light-i position-absolute"})]})})]}))]})},pT=i=>{const[t,s]=o.useState(!1),n=K("hotelview").images["background.colour"];return o.useEffect(()=>{setTimeout(()=>s(!0),15e3)},[]),e.jsxs("div",{className:"nitro-hotel-view",style:n&&n?{background:n}:{},children:[e.jsx("div",{className:"left position-absolute",children:e.jsxs("div",{className:"hotelview-back position-relative",children:[e.jsx("div",{className:"stretch-blue-night position-relative"}),e.jsx("div",{className:"back-c-alt position-absolute"})]})}),e.jsx("div",{className:"drape position-absolute"}),e.jsx("div",{className:"left position-absolute",children:e.jsxs("div",{className:"hotelview position-relative",children:[e.jsx("div",{className:"hotelview-night position-relative"}),e.jsx(ho,{}),e.jsx("div",{className:"light-i position-absolute"}),e.jsx("div",{className:"door position-absolute"})]})})]})},xT=()=>{const i=K("hotelview").images["background.colour"],t=new Date,s=t.getHours(),n=t.getMinutes(),a=i&&i?{background:i}:{},r=l=>e.jsx("div",{className:"nitro-hotel-view",style:a,children:l});return e.jsxs(e.Fragment,{children:[s===16&&n<=30&&r(e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"left position-absolute",children:e.jsxs("div",{className:"hotelview-back position-relative",children:[e.jsx("div",{className:"stretch-blue-af-1 position-relative"}),e.jsx("div",{className:"back-f-alt position-absolute"}),e.jsx("div",{className:"back-f position-absolute"})]})}),e.jsx("div",{className:"drape position-absolute"}),e.jsx("div",{className:"left position-absolute",children:e.jsxs("div",{className:"hotelview position-relative",children:[e.jsx("div",{className:"hotelview-orange position-relative"}),e.jsx(Ht,{}),e.jsx("div",{className:"front-j position-absolute"}),e.jsx("div",{className:"light-j position-absolute"}),e.jsx("div",{className:"light-j position-absolute"})]})})]})),s===16&&n>=30&&r(e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"left position-absolute",children:e.jsxs("div",{className:"hotelview-back position-relative",children:[e.jsx("div",{className:"stretch-blue-af-2 position-relative"}),e.jsx("div",{className:"back-g-alt position-absolute"}),e.jsx("div",{className:"back-g position-absolute"})]})}),e.jsx("div",{className:"drape position-absolute"}),e.jsx("div",{className:"left position-absolute",children:e.jsxs("div",{className:"hotelview position-relative",children:[e.jsx("div",{className:"hotelview-orange position-relative"}),e.jsx(Ht,{}),e.jsx("div",{className:"front-j position-absolute"}),e.jsx("div",{className:"front-j position-absolute"}),e.jsx("div",{className:"light-l position-absolute"}),e.jsx("div",{className:"light-l-alt position-absolute"})]})})]})),s===17&&n<=30&&r(e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"left position-absolute",children:e.jsxs("div",{className:"hotelview-back position-relative",children:[e.jsx("div",{className:"stretch-blue-af-3 position-relative"}),e.jsx("div",{className:"back-h-alt position-absolute"}),e.jsx("div",{className:"back-h position-absolute"})]})}),e.jsx("div",{className:"drape position-absolute"}),e.jsx("div",{className:"left position-absolute",children:e.jsxs("div",{className:"hotelview position-relative",children:[e.jsx("div",{className:"hotelview-orange position-relative"}),e.jsx(Ht,{}),e.jsx("div",{className:"front-j position-absolute"}),e.jsx("div",{className:"front-j position-absolute"}),e.jsx("div",{className:"front-j position-absolute"}),e.jsx("div",{className:"front-j position-absolute"}),e.jsx("div",{className:"light-m position-absolute"}),e.jsx("div",{className:"light-m-alt position-absolute"})]})})]})),s===17&&n>=30&&r(e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"left position-absolute",children:e.jsxs("div",{className:"hotelview-back position-relative",children:[e.jsx("div",{className:"stretch-blue-af-4 position-relative"}),e.jsx("div",{className:"back-h position-absolute"})]})}),e.jsx("div",{className:"left position-absolute",children:e.jsxs("div",{className:"hotelview position-relative",children:[e.jsx("div",{className:"hotelview-orange position-relative"}),e.jsx(Ht,{}),e.jsx("div",{className:"front-j position-absolute"}),e.jsx("div",{className:"front-j position-absolute"}),e.jsx("div",{className:"front-j position-absolute"}),e.jsx("div",{className:"front-j position-absolute"}),e.jsx("div",{className:"front-j position-absolute"}),e.jsx("div",{className:"front-j position-absolute"}),e.jsx("div",{className:"light-n position-absolute"}),e.jsx("div",{className:"light-n-alt position-absolute"})]})})]})),s===18&&n<=30&&r(e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"left position-absolute",children:e.jsxs("div",{className:"hotelview-back position-relative",children:[e.jsx("div",{className:"stretch-blue-af-5 position-relative"}),e.jsx("div",{className:"back-h position-absolute"}),e.jsx("div",{className:"back-n position-absolute"})]})}),e.jsx("div",{className:"drape position-absolute"}),e.jsx("div",{className:"left position-absolute",children:e.jsxs("div",{className:"hotelview position-relative",children:[e.jsx("div",{className:"hotelview-orange position-relative"}),e.jsx(Ht,{}),e.jsx("div",{className:"front-k position-absolute"}),e.jsx("div",{className:"front-j position-absolute"}),e.jsx("div",{className:"front-j position-absolute"}),e.jsx("div",{className:"front-j position-absolute"}),e.jsx("div",{className:"front-j position-absolute"}),e.jsx("div",{className:"front-j position-absolute"}),e.jsx("div",{className:"light-n position-absolute"}),e.jsx("div",{className:"light-n-alt-iii position-absolute"})]})})]})),s===18&&n>=30&&r(e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"left position-absolute",children:e.jsxs("div",{className:"hotelview-back position-relative",children:[e.jsx("div",{className:"stretch-blue-af-6 position-relative"}),e.jsx("div",{className:"back-h position-absolute"}),e.jsx("div",{className:"back-n position-absolute"}),e.jsx("div",{className:"back-k-final position-absolute"})]})}),e.jsx("div",{className:"drape position-absolute"}),e.jsx("div",{className:"left position-absolute",children:e.jsxs("div",{className:"hotelview position-relative",children:[e.jsx("div",{className:"hotelview-orange position-relative"}),e.jsx(Ht,{}),e.jsx("div",{className:"front-k position-absolute"}),e.jsx("div",{className:"front-j position-absolute"}),e.jsx("div",{className:"front-j position-absolute"}),e.jsx("div",{className:"front-j position-absolute"}),e.jsx("div",{className:"front-j position-absolute"}),e.jsx("div",{className:"front-j position-absolute"}),e.jsx("div",{className:"front-j position-absolute"}),e.jsx("div",{className:"front-j position-absolute"}),e.jsx("div",{className:"light-o position-absolute"}),e.jsx("div",{className:"light-o-alt position-absolute"}),e.jsx("div",{className:"light-o-alt-ii position-absolute"})]})})]})),s===19&&n<=30&&r(e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"left position-absolute",children:e.jsxs("div",{className:"hotelview-back position-relative",children:[e.jsx("div",{className:"stretch-blue-night position-relative"}),e.jsx("div",{className:"back-c-alt position-absolute"}),e.jsx("div",{className:"back-c-alt position-absolute"}),e.jsx("div",{className:"back-h position-absolute"}),e.jsx("div",{className:"back-k-alt position-absolute"})]})}),e.jsx("div",{className:"drape position-absolute"}),e.jsx("div",{className:"left position-absolute",children:e.jsxs("div",{className:"hotelview position-relative",children:[e.jsx("div",{className:"hotelview-orange position-relative"}),e.jsx(Ht,{}),e.jsx("div",{className:"front-m position-absolute"}),e.jsx("div",{className:"front-m position-absolute"}),e.jsx("div",{className:"front-j position-absolute"}),e.jsx("div",{className:"front-j position-absolute"}),e.jsx("div",{className:"front-j position-absolute"}),e.jsx("div",{className:"front-j position-absolute"}),e.jsx("div",{className:"light-p position-absolute"}),e.jsx("div",{className:"light-p-alt position-absolute"}),e.jsx("div",{className:"light-p-alt-ii position-absolute"})]})})]})),s===19&&n>=30&&r(e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"left position-absolute",children:e.jsxs("div",{className:"hotelview-back position-relative",children:[e.jsx("div",{className:"stretch-blue-night position-relative"}),e.jsx("div",{className:"back-e position-absolute"}),e.jsx("div",{className:"back-k-final position-absolute"}),e.jsx("div",{className:"back-l position-absolute"}),e.jsx("div",{className:"back-l position-absolute"})]})}),e.jsx("div",{className:"drape position-absolute"}),e.jsx("div",{className:"left position-absolute",children:e.jsxs("div",{className:"hotelview position-relative",children:[e.jsx("div",{className:"hotelview-orange position-relative"}),e.jsx(Ht,{}),e.jsx("div",{className:"front-a position-absolute"}),e.jsx("div",{className:"light-q position-absolute"}),e.jsx("div",{className:"light-q-alt-ii position-absolute"})]})})]}))]})},jT=i=>{const[t,s]=o.useState(null),[n,a]=o.useState(null),[r,l]=o.useState(null),[c,m]=o.useState(null);return M(qI,h=>{const d=h.getParser();s(d.productType),a(d.productClassId),l(d.totalCoinsForBonus),m(d.coinsStillRequiredToBuy)}),o.useEffect(()=>{D(new zI)},[]),t?e.jsxs("div",{className:"bonus-rare widget d-flex",children:[t,e.jsxs("div",{className:"bg-light-dark rounded overflow-hidden position-relative bonus-bar-container",children:[e.jsx("div",{className:"d-flex justify-content-center align-items-center w-100 h-100 position-absolute small top-0",children:r-c+"/"+r}),e.jsx("div",{className:"small bg-info rounded position-absolute top-0 h-100",style:{width:(r-c)/r*100+"%"}})]})]}):null},IT=i=>{const{data:t=null,goalCode:s=null}=i;return e.jsxs("div",{className:"hof-user-container",children:[e.jsxs("div",{className:"hof-tooltip px-2",children:[e.jsx(A,{className:"icon icon-sheet"}),e.jsx("b",{className:"text-black cursor-pointer px-2",onClick:()=>ns(t.userId),children:t.userName}),e.jsxs("div",{className:"small text-black text-muted fw-bold",children:[u("landing.view.competition.hof.points",["points"],[$a(t.currentScore).toString()])," points"]}),e.jsx("div",{className:"small text-black text-muted",children:u(`landing.view.competition.hof.${s}.rankdesc.leader`)})]}),e.jsx(tt,{figure:t.figure,direction:2})]})},ET=i=>{const{slot:t=-1,conf:s=null}=i,[n,a]=o.useState(null);return M(YI,r=>{const l=r.getParser();a(l.data)}),o.useEffect(()=>{const r=s?s.campaign:"";D(new $I(r))},[s]),n?e.jsx("div",{className:"hall-of-fame d-flex px-2",children:n.hof&&n.hof.length>0&&n.hof.map((r,l)=>e.jsx(IT,{data:r,goalCode:n.goalCode},l))}):null},bT=i=>{const[t,s]=o.useState(null),[n,a]=o.useState(0);return M(KI,r=>{const l=r.getParser();s(l.articles)}),o.useEffect(()=>{D(new XI)},[]),t?e.jsxs("div",{className:"promo-articles widget mb-2",children:[e.jsxs("div",{className:"d-flex flex-row align-items-center w-100 mb-1",children:[e.jsx("small",{className:"flex-shrink-0 pe-1",children:u("landing.view.promo.article.header")}),e.jsx("hr",{className:"w-100 my-0"})]}),e.jsx("div",{className:"d-flex flex-row mb-1",children:t&&t.length>0&&t.map((r,l)=>e.jsx("div",{className:"promo-articles-bullet cursor-pointer "+(r===t[n]?"promo-articles-bullet-active":""),onClick:c=>a(l)},r.id))}),t&&t[n]&&e.jsxs("div",{className:"promo-article d-flex flex-row row mx-0",children:[e.jsx("div",{className:"promo-article-image",style:{backgroundImage:`url(${t[n].imageUrl})`}}),e.jsxs("div",{className:"col-3 d-flex flex-column h-100",children:[e.jsx("h3",{className:"my-0",children:t[n].title}),e.jsx("b",{children:t[n].bodyText}),e.jsx("button",{className:"btn btn-sm mt-auto btn-gainsboro",onClick:r=>Ar(t[n].linkContent),children:t[n].buttonText})]})]})]}):null},CT=i=>{const{conf:t=null}=i,s=n=>{const a=t[n];if(!a)return null;switch(n){case"image":return nc.interpolate(a)}return a};return e.jsxs("div",{className:"widgetcontainer widget d-flex flex-row overflow-hidden",children:[e.jsx("div",{className:"widgetcontainer-image flex-shrink-0",style:{backgroundImage:`url(${s("image")})`}}),e.jsxs("div",{className:"d-flex flex-column align-self-center",children:[e.jsx("h3",{className:"my-0",children:u(`landing.view.${s("texts")}.header`)}),e.jsx("i",{children:u(`landing.view.${s("texts")}.body`)}),e.jsx("button",{className:"btn btn-sm btn-gainsboro align-self-start px-3 mt-auto",onClick:n=>Ar(s("btnLink")),children:u(`landing.view.${s("texts")}.button`)})]})]})},NT=i=>{switch(i.widgetType){case"promoarticle":return e.jsx(bT,{});case"achievementcompetition_hall_of_fame":return e.jsx(ET,{slot:i.slot,conf:i.widgetConf});case"bonusrare":return e.jsx(jT,{});case"widgetcontainer":return e.jsx(CT,{conf:i.widgetConf});default:return null}},vT=i=>{const{widgetType:t=null,widgetSlot:s=0,widgetConf:n=null,className:a="",...r}=i;return e.jsx("div",{className:`widget-slot slot-${s} ${a||""}`,...r,children:e.jsx(NT,{widgetType:t,slot:s,widgetConf:n})})},_T=()=>{const[i,t]=o.useState(!0);if(Ve([yt.CREATED,yt.ENDED],l=>{switch(l.type){case yt.CREATED:t(!1);return;case yt.ENDED:t(l.openLandingView);return}}),!i)return null;const s=K("hotelview"),n=s.images["background.colour"];K("asset.url");const a=l=>e.jsx(vT,{widgetSlot:l,widgetType:s.widgets[`slot.${l}.widget`],widgetConf:s.widgets[`slot.${l}.conf`],className:l===6?"mt-auto":l%2===0?"col-5":"col-7"},l),r=[1,2,3,4,5,6,7].map(l=>a(l));return e.jsx("div",{className:"nitro-hotel-view",style:n?{background:n}:{},children:e.jsx("div",{className:"container h-100 py-3 overflow-hidden landing-widgets",children:e.jsxs("div",{className:"row h-100",children:[e.jsx("div",{className:"col-9 h-100 d-flex flex-column",children:r.slice(0,6)}),e.jsx("div",{className:"col-3 h-100",children:r[6]})]})})})},ST=()=>{const[i,t]=o.useState(!0);Fn();const n=new Date().getHours(),a=n>5&&n<=9,r=n>9&&n<=16,l=n>16&&n<=19,c=n>19&&n<=23,m=n>23||n<=5;return Ve([yt.CREATED,yt.ENDED],h=>{t(h.type===yt.CREATED?!1:h.openLandingView)}),i?e.jsxs("div",{children:[e.jsx(_T,{}),a&&e.jsx(fT,{}),r&&e.jsx(mT,{}),l&&e.jsx(xT,{}),c&&e.jsx(gT,{}),m&&e.jsx(pT,{})]}):null},Xn=class Xn{};Xn.EVERYTHING="inventory.filter.option.everything",Xn.FLOOR="inventory.furni.tab.floor",Xn.WALL="inventory.furni.tab.wall",Xn.ANYWHERE="inventory.placement.option.anywhere",Xn.IN_ROOM="inventory.placement.option.inroom",Xn.IN_INVENTORY="inventory.placement.option.notinroom";let ys=Xn;const vr="inventory.furni",Zl="inventory.bots",ec="inventory.furni.tab.pets",_a="inventory.badges",tc=[vr,ec,_a,Zl],wT=[et.FURNI,et.PET,et.BADGE,et.BOT],sc=9,TT=i=>{const{currentTab:t=null,groupItems:s=[],badgeCodes:n=[],setGroupItems:a=null,setBadgeCodes:r=null}=i,[l,c]=o.useState(ys.EVERYTHING),[m,h]=o.useState(ys.IN_INVENTORY),[d,g]=o.useState("");return o.useEffect(()=>{if(t!==_a)return;let f=[...n];const j=n.filter(x=>x.startsWith("ACH_")),p={};j.forEach(x=>{const E=x.split(/[\d]+/)[0],v=Number(x.replace(E,""));(p[E]===void 0||v>p[E])&&(p[E]=v)}),f=Object.keys(p).map(x=>`${x}${p[x]}`).concat(n.filter(x=>!x.startsWith("ACH_"))).filter(x=>da(x).toLocaleLowerCase().includes(d==null?void 0:d.toLocaleLowerCase().replace(" ",""))),r(f)},[n,t,d,r]),o.useEffect(()=>{if(t!==vr)return;let f=[...s];const j=d.toLocaleLowerCase();if(l===ys.EVERYTHING)return a(s.filter(p=>p.name.toLocaleLowerCase().includes(j)));f=s.filter(p=>{const I=l===ys.WALL?p.isWallItem:!1,x=l===ys.FLOOR?!p.isWallItem:!1,E=!!p.name.toLocaleLowerCase().includes(j);return j&&j.length?E&&(I||x):I||x}),a(f)},[s,a,d,l,t]),o.useEffect(()=>{c(ys.EVERYTHING),h(ys.IN_INVENTORY),g("")},[t]),e.jsxs(_,{className:"nitro-inventory-category-filter rounded p-1 mt-n1",style:{width:t===_a?"320px":"100%"},children:[e.jsxs(_,{className:"position-relative",children:[e.jsx(_,{fullWidth:!0,alignItems:"center",position:"relative",children:e.jsx("input",{type:"text",className:"form-control form-control-sm",value:d,onChange:f=>g(f.target.value),placeholder:u("catalog.search")})}),d&&!!d.length&&e.jsx("i",{className:"icon icon-clear position-absolute cursor-pointer end-1 top-1",onClick:f=>g("")})]}),t!==_a&&e.jsx(e.Fragment,{children:e.jsx(_,{alignItems:"center",position:"relative",className:"ms-2",children:e.jsx("select",{className:"form-select form-select-sm",value:l,onChange:f=>c(f.target.value),children:[ys.EVERYTHING,ys.FLOOR,ys.WALL].map((f,j)=>e.jsx("option",{value:f,children:u(f)},j))})})})]})},rd=i=>{const{badgeCode:t=null,children:s=null,...n}=i,{selectedBadgeCode:a=null,setSelectedBadgeCode:r=null,toggleBadge:l=null,getBadgeId:c=null}=mi(),{isUnseen:m=null}=Ss(),h=m(et.BADGE,c(t));return e.jsxs(Ce,{className:"badge-container",itemActive:a===t,itemUnseen:h,onMouseDown:d=>r(t),onDoubleClick:d=>l(a),...n,children:[e.jsx(ze,{badgeCode:t}),s]})},RT=i=>{const{filteredBadgeCodes:t=[]}=i,[s,n]=o.useState(!1),{activeBadgeCodes:a=[],selectedBadgeCode:r=null,isWearingBadge:l=null,canWearBadges:c=null,toggleBadge:m=null,getBadgeId:h=null,activate:d=null,deactivate:g=null}=mi(),{isUnseen:f=null,removeUnseen:j=null}=Ss();return o.useEffect(()=>{!r||!f(et.BADGE,h(r))||j(et.BADGE,h(r))},[r,f,j,h]),o.useEffect(()=>{if(!s)return;const p=d();return()=>g(p)},[s,d,g]),o.useEffect(()=>(n(!0),()=>n(!1)),[]),e.jsxs("div",{className:"badge-wrapper calc-wrapper mt-n2",children:[e.jsxs(te,{gap:1,children:[e.jsx(N,{overflow:"hidden",className:"size-list-badges mt-1",children:e.jsx(ke,{gap:1,columnCount:5,children:t&&t.length>0&&t.map((p,I)=>l(p)?null:e.jsx(rd,{badgeCode:p},I))})}),e.jsx(N,{className:"justify-content-between size-badges position-absolute end-2 mt-n4",overflow:"auto",children:e.jsxs(N,{overflow:"hidden",children:[e.jsx(C,{center:!0,bold:!0,children:u("inventory.badges.activebadges")}),e.jsx(ke,{gap:1,columnCount:5,children:a&&a.length>0&&a.map((p,I)=>e.jsx(rd,{badgeCode:p},I))})]})})]}),e.jsx(N,{gap:0,position:"absolute",className:"bottom-2",style:{width:"96%"},children:!!r&&e.jsxs(_,{className:"bg-white pb-1 px-2 rounded mt-2",style:{height:"50px"},justifyContent:"between",alignItems:"end",gap:2,children:[e.jsxs(_,{alignItems:"start",gap:2,children:[e.jsx(ze,{shrink:!0,badgeCode:r}),e.jsx(C,{className:"font-bold mt-2",children:da(r)})]}),e.jsx(P,{className:"btn btn-primary mb-1",style:{fontSize:"12px"},disabled:!l(r)&&!c(),onClick:p=>m(r),children:u(l(r)?"inventory.badges.clearbadge":"inventory.badges.wearbadge")})]})})]})},Uc=i=>{const{title:t="",desc:s="",isTrading:n=!1,children:a=null,...r}=i;return e.jsxs(te,{...r,children:[e.jsxs(N,{center:!0,size:5,overflow:"hidden",children:[e.jsx("div",{className:"empty-image"}),!n&&e.jsx(_,{gap:2,position:"absolute",className:"bottom-2",children:e.jsx(P,{className:"py-1",onClick:()=>Q("catalog/open"),children:u("inventory.open.catalog")})})]}),e.jsxs(N,{justifyContent:"center",size:7,overflow:"hidden",children:[e.jsx(C,{fontWeight:"bold",fontSize:5,overflow:"unset",truncate:!0,children:t}),e.jsx(C,{overflow:"auto",children:s})]}),a]})},yT=i=>{const{botItem:t=null,children:s=null,...n}=i,[a,r]=o.useState(!1),{selectedBot:l=null,setSelectedBot:c=null}=ch(),{isUnseen:m=null}=Ss(),h=m(et.BOT,t.botData.id),d=g=>{switch(g.type){case Ne.MOUSE_DOWN:c(t),r(!0);return;case Ne.MOUSE_UP:r(!1);return;case Ne.ROLL_OUT:if(!a||l!==t)return;Wl(t);return;case"dblclick":Wl(t);return}};return e.jsxs(Ce,{itemActive:l===t,itemUnseen:h,onMouseDown:d,onMouseUp:d,onMouseOut:d,onDoubleClick:d,...n,children:[e.jsx(tt,{figure:t.botData.figure,direction:3,headOnly:!0}),s]})},OT=i=>{const{roomSession:t=null,roomPreviewer:s=null,isTrading:n=!1}=i,[a,r]=o.useState(!1),{botItems:l=[],selectedBot:c=null,activate:m=null,deactivate:h=null}=ch(),{isUnseen:d=null,removeUnseen:g=null}=Ss();return o.useEffect(()=>{if(!c||!s)return;const f=c.botData,j=W();let p=j.getRoomInstanceVariable(j.activeRoomId,Z.ROOM_WALL_TYPE),I=j.getRoomInstanceVariable(j.activeRoomId,Z.ROOM_FLOOR_TYPE),x=j.getRoomInstanceVariable(j.activeRoomId,Z.ROOM_LANDSCAPE_TYPE);p=p&&p.length?p:"101",I=I&&I.length?I:"101",x=x&&x.length?x:"1.1",s.reset(!1),s.updateRoomWallsAndFloorVisibility(!0,!0),s.updateObjectRoom(I,p,x),s.addAvatarIntoRoom(f.figure,0)},[s,c]),o.useEffect(()=>{!c||!d(et.BOT,c.botData.id)||g(et.BOT,c.botData.id)},[c,d,g]),o.useEffect(()=>{if(!a)return;const f=m();return()=>h(f)},[a,m,h]),o.useEffect(()=>(r(!0),()=>r(!1)),[]),!l||!l.length?e.jsx(Uc,{title:u("inventory.empty.bots.title"),desc:u("inventory.empty.bots.desc"),isTrading:n}):e.jsxs(te,{children:[e.jsx(N,{size:7,overflow:"hidden",children:e.jsx(ke,{columnCount:5,children:l&&l.length>0&&l.map(f=>e.jsx(yT,{botItem:f},f.botData.id))})}),e.jsxs(N,{size:5,overflow:"auto",children:[e.jsx(N,{overflow:"hidden",position:"relative",children:e.jsx(Ho,{roomPreviewer:s,height:140})}),c&&e.jsxs(N,{grow:!0,justifyContent:"between",gap:2,children:[e.jsx(C,{grow:!0,truncate:!0,children:c.botData.name}),!!t&&e.jsx(P,{variant:"success",onClick:f=>Wl(c),children:u("inventory.furni.placetoroom")})]})]})]})},kT=i=>{const{groupItem:t=null,isTrading:s=null,attemptItemOffer:n=null,setGroupItem:a=null,...r}=i,[l,c]=o.useState(!1),{selectedItem:m=null,setSelectedItem:h=null}=ar(),d=f=>{switch(f.type){case Ne.MOUSE_DOWN:h(t),c(!0);return;case Ne.MOUSE_UP:c(!1);return;case Ne.ROLL_OUT:if(!l||t!==m)return;s||oa(t);return;case"dblclick":s||oa(t),s&&(a(t),n(1));return}},g=t.getUnlockedCount();return e.jsx(Ce,{className:g?"inventory-items":"inventory-items opacity-0-5 ",itemImage:t.iconUrl,itemCount:t.getUnlockedCount(),itemActive:t===m,itemUniqueNumber:t.stuffData.uniqueNumber,itemUnseen:t.hasUnseenItems,onClick:f=>g&&a(t),onMouseDown:d,onMouseUp:d,onMouseOut:d,onDoubleClick:d,...r})},AT=i=>{const t=i.getLastItem();if(!t||!t.sellable)return!1;pt(new co(t))},DT=i=>{const t=i.getLastItem();if(!t)return!1;pt(new uo(t,i.getTotalCount()))},PT=i=>{const{roomSession:t=null,roomPreviewer:s=null,isTrading:n=null,filteredGroupItems:a=[]}=i,[r,l]=o.useState(!1),[c,m]=o.useState(null),[h,d]=o.useState(1),{groupItems:g=[],selectedItem:f=null,activate:j=null,deactivate:p=null}=ar(),{ownUser:I=null}=Oc(),{resetItems:x=null}=Ss(),{simpleAlert:E=null}=Pe(),v=(L,k)=>{(isNaN(Number(L))||Number(L)<0||!L)&&(L=1),L=Math.max(Number(L),1),L=Math.min(Number(L),k),L!==h&&d(L)},b=L=>{v(h,L),S(h)},w=(L,k,y,R,O)=>{if(!I||I.accepts||!I.userItems)return!1;if(I.userItems.length<sc)return!0;if(!R)return!1;let F=k.toString();return y===ce.POSTER?F=F+"poster"+O.getLegacyString():y===ce.GUILD_FURNI?F=TC(k,O):F=(L?"I":"S")+F,!!I.userItems.getValue(F)},S=L=>{if(!c)return;const k=c.getTradeItems(L);if(!k||!k.length)return;let y=null;const R=[];for(const F of k)R.push(F.id),y||(y=F);if(I.userItems.length+R.length<=1500)if(!y.isGroupable&&R.length)D(new lu(R.pop()));else{const F=[];for(const U of R)w(y.isWallItem,y.type,y.category,y.isGroupable,y.stuffData)&&F.push(U);F.length&&(F.length===1?D(new lu(F.pop())):D(new JI(...F)))}else E(u("trading.items.too_many_items.desc"),ge.DEFAULT,null,null,u("trading.items.too_many_items.title"));m(f)};if(o.useEffect(()=>{if(!f||!s)return;const L=f.getLastItem();if(!L)return;const k=W();let y=k.getRoomInstanceVariable(k.activeRoomId,Z.ROOM_WALL_TYPE),R=k.getRoomInstanceVariable(k.activeRoomId,Z.ROOM_FLOOR_TYPE),O=k.getRoomInstanceVariable(k.activeRoomId,Z.ROOM_LANDSCAPE_TYPE);if(y=y&&y.length?y:"101",R=R&&R.length?R:"101",O=O&&O.length?O:"1.1",s.reset(!1),s.updateObjectRoom(R,y,O),s.updateRoomWallsAndFloorVisibility(!0,!0),L.category===ce.WALL_PAPER||L.category===ce.FLOOR||L.category===ce.LANDSCAPE){if(R=L.category===ce.FLOOR?f.stuffData.getLegacyString():R,y=L.category===ce.WALL_PAPER?f.stuffData.getLegacyString():y,O=L.category===ce.LANDSCAPE?f.stuffData.getLegacyString():O,s.updateObjectRoom(R,y,O),L.category===ce.LANDSCAPE){const F=V().getWallItemDataByName("window_double_default");F&&s.addWallItemIntoRoom(F.id,new vt(90,0,0),F.customParams)}}else f.isWallItem?s.addWallItemIntoRoom(f.type,new vt(90),L.stuffData.getLegacyString()):s.addFurnitureIntoRoom(f.type,new vt(90),f.stuffData,L.extra.toString());m(f)},[s,f]),o.useEffect(()=>{!f||!f.hasUnseenItems||(x(et.FURNI,f.items.map(L=>L.id)),f.hasUnseenItems=!1)},[f,x]),o.useEffect(()=>{if(!r)return;const L=j();return()=>p(L)},[r,j,p]),o.useEffect(()=>(l(!0),()=>l(!1)),[]),o.useEffect(()=>{d(1)},[a]),!g||!g.length)return e.jsx(Uc,{title:u("inventory.empty.title"),desc:u("inventory.empty.desc"),isTrading:n});const T=n?f.getUnlockedCount():f.items.length;return e.jsxs(te,{className:"mt-n1",children:[e.jsx(N,{size:7,overflow:"hidden",style:{height:`calc(100% - ${n?"5px":"34px"})`},children:e.jsx(ke,{gap:1,columnCount:5,className:n?"trading-inventory":"",children:a&&a.length>0&&a.map((L,k)=>e.jsx(kT,{groupItem:L,isTrading:n,attemptItemOffer:y=>S(y),setGroupItem:y=>m(y)},k))})}),e.jsxs(N,{size:5,overflow:"auto",children:[e.jsxs(N,{overflow:"hidden",position:"relative",className:"cursor-pointer",children:[e.jsx(Ho,{roomPreviewer:s,height:140}),f&&e.jsx(P,{variant:"danger",className:"bottom-2 end-2",position:"absolute",onClick:L=>DT(f),children:e.jsx(QI,{className:"fa-icon"})}),f&&(f.items[0].isTradable||!f.items[0].isTradable)&&e.jsxs(_,{gap:2,position:"absolute",className:"top-2 start-2",children:[e.jsx(A,{className:`icon ${f.items[0].isTradable&&T>0?"icon-tradeable":"icon-not-tradeable"}`,title:u(f.items[0].isTradable&&T>0?"inventory.furni.preview.tradeable_amount":"inventory.furni.preview.not_tradeable")}),f.items[0].isTradable&&T>0&&e.jsx(C,{variant:"black",className:"text-shadow-around-text mt-n1",children:T})]}),f&&(f.items[0].recyclable||!f.items[0].recyclable)&&e.jsxs(_,{gap:2,position:"absolute",className:"top-4 start-2",children:[e.jsx(A,{className:`icon ${f.items[0].recyclable&&T>0?"icon-recyclable":"icon-not-recyclable"}`,title:u(f.items[0].recyclable&&T>0?"inventory.furni.preview.recyclable_amount":"inventory.furni.preview.not_recyclable")}),f.items[0].recyclable&&T>0&&e.jsx(C,{variant:"black",className:"text-shadow-around-text",children:T})]}),f&&f.stuffData.isUnique&&e.jsx(sh,{className:"top-2 end-2",position:"absolute",uniqueNumber:f.stuffData.uniqueNumber,uniqueSeries:f.stuffData.uniqueSeries}),f&&f.stuffData.rarityLevel>-1&&e.jsx(yc,{className:"top-2 end-2",position:"absolute",level:f.stuffData.rarityLevel})]}),f&&e.jsx(N,{grow:!0,justifyContent:"between",gap:2,children:e.jsxs(N,{gap:1,position:n?"relative":"absolute",className:"bottom-1",style:{width:n?"":"39%"},children:[e.jsx(C,{grow:!0,truncate:!0,bold:!0,children:f.name}),f.description&&e.jsx(C,{grow:!0,truncate:!0,small:!0,children:f.description}),!n&&e.jsxs(e.Fragment,{children:[!!t&&e.jsx(P,{className:"p-0 px-2",onClick:L=>oa(f),children:u("inventory.furni.placetoroom")}),f&&f.isSellable&&e.jsx(P,{className:"p-0 px-2",onClick:L=>AT(f),children:u("inventory.marketplace.sell")})]}),n&&e.jsxs(N,{gap:1,alignItems:"start",children:[e.jsx("input",{type:"number",className:"quantity-input remove-outline form-control",placeholder:u("catalog.bundlewidget.spinner.select.amount"),disabled:f.getUnlockedCount()===0,value:h||"",onChange:L=>d(L.target.valueAsNumber)}),e.jsx(P,{variant:"secondary",disabled:!h||f.getUnlockedCount()===0,onClick:L=>h?b(f.getUnlockedCount()):null,children:u("inventory.trading.areoffering")})]})]})})]})]})},LT=i=>{const{currentTab:t=null,setCurrentTab:s=null,cancelTrade:n=null}=i,[a,r]=o.useState(null),[l,c]=o.useState(null),[m,h]=o.useState(3),{ownUser:d=null,otherUser:g=null,tradeState:f=bt.TRADING_STATE_READY,progressTrade:j=null,removeItem:p=null,setTradeState:I=null}=Oc(),x=v=>v?e.jsx(A,{className:"mt-auto mb-5 pb-5 icon icon-lock-locked"}):e.jsx(A,{className:"mt-auto mb-5 pb-5 icon icon-lock-open"}),E=v=>v.getValues().map(b=>{var w;return Number((w=b.iconUrl.split("/")[b.iconUrl.split("/").length-1])==null?void 0:w.split("_")[1])*b.items.length}).reduce((b,w)=>b+(isNaN(w)?0:w),0);return o.useEffect(()=>{if(f!==bt.TRADING_STATE_COUNTDOWN)return;h(3);const v=window.setInterval(()=>{h(b=>{const w=b-1;return w===0&&clearInterval(v),w})},1e3);return()=>clearInterval(v)},[f,I]),o.useEffect(()=>{m===0&&I(bt.TRADING_STATE_CONFIRMING)},[m,I]),f===bt.TRADING_STATE_READY||!d||!g?null:e.jsx(N,{children:e.jsxs(N,{fullWidth:!0,size:12,overflow:"hidden",className:"trade-bg p-2 text-black",children:[t===vr&&e.jsxs(e.Fragment,{children:[e.jsx(C,{small:!0,children:u("inventory.trading.info.add")}),e.jsxs(te,{gap:0,overflow:"hidden",className:"px-2",children:[e.jsxs(N,{size:4,overflow:"hidden",children:[e.jsxs(_,{children:[d.accepts&&e.jsx(A,{className:"icon icon-confirmed"}),e.jsxs("small",{className:d.accepts?"px-2":"",children:[e.jsx("b",{children:u("inventory.trading.you")})," ",u("inventory.trading.areoffering")]})]}),e.jsx(ke,{columnCount:3,columnMinWidth:35,columnMinHeight:35,children:Array.from(Array(sc),(v,b)=>{const w=d.userItems.getWithIndex(b)||null;return w?e.jsx(Ce,{itemActive:a===w,itemImage:w.iconUrl,itemCount:w.getTotalCount(),itemUniqueNumber:w.stuffData.uniqueNumber,onClick:S=>r(w),onDoubleClick:S=>p(w),children:a===w&&e.jsx(A,{position:"absolute",onClick:S=>p(w)})},b):e.jsx(Ce,{},b)})}),e.jsxs(N,{gap:0,fullWidth:!0,children:[e.jsx("small",{children:u("inventory.trading.info.itemcount",["value"],[d.itemCount.toString()])}),e.jsx("small",{className:"credits-align",children:u("inventory.trading.info.creditvalue.own",["value"],[E(d.userItems).toString()])})]})]}),e.jsx(_,{className:"lock-design-left",children:x(d.accepts)}),e.jsx(_,{className:"divisor"}),e.jsxs(N,{size:4,overflow:"hidden",children:[e.jsxs(_,{children:[g.accepts&&e.jsx(A,{className:"icon icon-confirmed"}),e.jsxs("small",{className:g.accepts?"px-2":"",children:[e.jsx("b",{children:g.userName})," ",u("inventory.trading.isoffering")]})]}),e.jsx(ke,{columnCount:3,columnMinWidth:35,columnMinHeight:35,children:Array.from(Array(sc),(v,b)=>{const w=g.userItems.getWithIndex(b)||null;return w?e.jsx(Ce,{itemActive:l===w,itemImage:w.iconUrl,itemCount:w.getTotalCount(),itemUniqueNumber:w.stuffData.uniqueNumber,onClick:S=>c(w)},b):e.jsx(Ce,{},b)})}),e.jsxs(N,{gap:0,fullWidth:!0,children:[e.jsx("small",{children:u("inventory.trading.info.itemcount",["value"],[g.itemCount.toString()])}),e.jsx("small",{children:u("inventory.trading.info.creditvalue",["value"],[E(g.userItems).toString()])})]})]}),e.jsx(_,{className:"lock-design-right",children:x(g.accepts)})]})]}),t!==vr&&e.jsx(e.Fragment,{children:e.jsxs(_,{className:"px-2",children:[e.jsx(A,{className:"flex-shrink-0 icon icon-report-room"}),e.jsx(C,{bold:!0,children:u("inventory.trading.minimized.trade_in_progress")})]})}),e.jsxs(_,{grow:!0,justifyContent:"between",children:[t===vr&&e.jsxs(e.Fragment,{children:[f===bt.TRADING_STATE_READY&&e.jsx(P,{variant:"secondary",disabled:!d.itemCount&&!g.itemCount,onClick:j,children:u("inventory.trading.accept")}),f===bt.TRADING_STATE_RUNNING&&e.jsx(P,{variant:"secondary",disabled:!d.itemCount&&!g.itemCount,onClick:j,children:u(d.accepts?"inventory.trading.modify":"inventory.trading.accept")}),f===bt.TRADING_STATE_COUNTDOWN&&e.jsx(P,{variant:"secondary",disabled:!0,children:u("inventory.trading.countdown",["counter"],[m.toString()])}),f===bt.TRADING_STATE_CONFIRMING&&e.jsx(P,{variant:"secondary",onClick:j,children:u("inventory.trading.button.restore")}),f===bt.TRADING_STATE_CONFIRMED&&e.jsx(P,{variant:"secondary",children:u("inventory.trading.info.waiting")})]}),t!==vr&&e.jsx(P,{variant:"secondary",onClick:()=>s(tc[0]),children:u("inventory.trading.minimized.continue_trade")}),e.jsx(P,{variant:"danger",onClick:n,children:u("generic.cancel")})]})]})})},MT=i=>{const{petItem:t=null,children:s=null,...n}=i,[a,r]=o.useState(!1),{selectedPet:l=null,setSelectedPet:c=null}=uh(),{isUnseen:m}=Ss(),h=m(et.PET,t.petData.id),d=g=>{switch(g.type){case Ne.MOUSE_DOWN:c(t),r(!0);return;case Ne.MOUSE_UP:r(!1);return;case Ne.ROLL_OUT:if(!a||t!==l)return;Hl(t);return;case"dblclick":Hl(t);return}};return e.jsxs(Ce,{itemActive:t===l,itemUnseen:h,onMouseDown:d,onMouseUp:d,onMouseOut:d,onDoubleClick:d,...n,children:[e.jsx(mn,{figure:t.petData.figureData.figuredata,direction:3,headOnly:!0}),s]})},UT=i=>{const{roomSession:t=null,roomPreviewer:s=null,isTrading:n=!1}=i,[a,r]=o.useState(!1),{petItems:l=null,selectedPet:c=null,activate:m=null,deactivate:h=null}=uh(),{isUnseen:d=null,removeUnseen:g=null}=Ss();return o.useEffect(()=>{if(!c||!s)return;const f=c.petData,j=W();let p=j.getRoomInstanceVariable(j.activeRoomId,Z.ROOM_WALL_TYPE),I=j.getRoomInstanceVariable(j.activeRoomId,Z.ROOM_FLOOR_TYPE),x=j.getRoomInstanceVariable(j.activeRoomId,Z.ROOM_LANDSCAPE_TYPE);p=p&&p.length?p:"101",I=I&&I.length?I:"101",x=x&&x.length?x:"1.1",s.reset(!1),s.updateRoomWallsAndFloorVisibility(!0,!0),s.updateObjectRoom(I,p,x),s.addPetIntoRoom(f.figureString)},[s,c]),o.useEffect(()=>{!c||!d(et.PET,c.petData.id)||g(et.PET,c.petData.id)},[c,d,g]),o.useEffect(()=>{if(!a)return;const f=m();return()=>h(f)},[a,m,h]),o.useEffect(()=>(r(!0),()=>r(!1)),[]),!l||!l.length?e.jsx(Uc,{title:u("inventory.empty.pets.title"),desc:u("inventory.empty.pets.desc"),isTrading:n}):e.jsxs(te,{children:[e.jsx(N,{size:7,overflow:"hidden",children:e.jsx(ke,{columnCount:5,children:l&&l.length>0&&l.map(f=>e.jsx(MT,{petItem:f},f.petData.id))})}),e.jsxs(N,{size:5,overflow:"auto",children:[e.jsx(N,{overflow:"hidden",position:"relative",children:e.jsx(Ho,{roomPreviewer:s,height:140})}),c&&c.petData&&e.jsxs(N,{grow:!0,justifyContent:"between",gap:2,children:[e.jsx(C,{grow:!0,truncate:!0,children:c.petData.name}),!!t&&e.jsx(P,{variant:"success",onClick:f=>Hl(c),children:u("inventory.furni.placetoroom")})]})]})]})},FT=i=>{const[t,s]=o.useState(null),[n,a]=o.useState(1),[r,l]=o.useState("1"),[c,m]=o.useState(1),h=p=>{let I=parseInt(p);isNaN(I)||I===n||(I=Math.max(I,1),I=Math.min(I,c),I!==n&&(l(I.toString()),a(I)))},{showConfirm:d=null}=Pe();if(rt(uo.DELETE_ITEM_CONFIRM,p=>{s(p.item),m(p.amount)}),!t)return null;const g=t?u(t.isWallItem?"wallItem.name."+t.type:"roomItem.name."+t.type):"",f=t?u(t.isWallItem?"wallItem.desc."+t.type:"roomItem.desc."+t.type):"",j=()=>{t&&d(u("inventory.delete.confirm_delete.info",["furniname","amount"],[g,n.toString()]),()=>{D(new ZI(t.id,n)),s(null),a(1),m(1),l("1")},()=>{s(null),a(1),m(1),l("1")},null,null,u("inventory.delete.confirm_delete.title"))};return e.jsxs(ne,{className:"nitro-catalog-layout-marketplace-post-offer",theme:"primary-slim",children:[e.jsx(se,{headerText:u("inventory.delete.confirm_delete.title"),onCloseClick:p=>{s(null),a(1),m(1),l("1")}}),e.jsx(ee,{overflow:"hidden",children:e.jsxs(te,{fullHeight:!0,children:[e.jsx(N,{center:!0,className:"bg-muted rounded p-2",size:4,overflow:"hidden",children:e.jsx(Bo,{productType:t.isWallItem?me.WALL:me.FLOOR,productClassId:t.type,extraData:t.extra.toString()})}),e.jsxs(N,{size:8,justifyContent:"between",overflow:"hidden",children:[e.jsxs(N,{grow:!0,gap:1,children:[e.jsx(C,{fontWeight:"bold",children:g}),e.jsx(C,{truncate:!0,shrink:!0,children:f})]}),e.jsxs(N,{overflow:"auto",children:[e.jsx(C,{children:u("inventory.delete.amount")}),e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx(uc,{className:"text-black cursor-pointer fa-icon",onClick:p=>h((n-1).toString())}),e.jsx("input",{className:"form-control form-control-sm quantity-input",type:"number",min:1,max:c,value:r,onChange:p=>h(p.target.value),placeholder:u("inventory.delete.amount")}),e.jsx(dc,{className:"text-black cursor-pointer fa-icon",onClick:p=>h((n+1).toString())}),e.jsx(P,{onClick:p=>h(c.toString()),children:u("inventory.delete.max_amount.button")})]}),e.jsx(P,{disabled:n>c,onClick:j,children:u("inventory.delete.confirm_delete.button")})]})]})]})})]})},VT=i=>{const[t,s]=o.useState(!1),[n,a]=o.useState(tc[0]),[r,l]=o.useState(null),[c,m]=o.useState(null),[h,d]=o.useState([]),[g,f]=o.useState([]),{isTrading:j=!1,stopTrading:p=null}=Oc(),{getCount:I=null}=Ss(),{groupItems:x=[]}=ar(),{badgeCodes:E=[]}=mi(),v=()=>{j&&p(),s(!1)};return Ie(gt.PLACED,b=>{vC()&&(ii(!1),b.placedInRoom||s(!0))}),Ve([yt.CREATED,yt.ENDED],b=>{switch(b.type){case yt.CREATED:l(b.session);return;case yt.ENDED:l(null),s(!1);return}}),M(eE,b=>{const w=b.getParser();for(const S of w.data)Dm().setBadgePointLimit(S.badgeId,S.limit)}),o.useEffect(()=>{const b={linkReceived:w=>{const S=w.split("/");if(!(S.length<2))switch(S[1]){case"show":s(!0);return;case"hide":s(!1);return;case"toggle":s(T=>!T);return}},eventUrlPrefix:"inventory/"};return ct(b),()=>ut(b)},[]),o.useEffect(()=>(m(new Xi(W(),++Xi.PREVIEW_COUNTER)),()=>{m(b=>(b.dispose(),null))}),[]),o.useEffect(()=>{!t&&j&&s(!0)},[t,j]),t?e.jsxs(ne,{uniqueKey:"inventory",className:`${j?"nitro-inventory trading no-resize":"nitro-inventory"}`,theme:j?"primary":"",children:[e.jsx(se,{headerText:u("inventory.title"),onCloseClick:v}),e.jsxs(e.Fragment,{children:[e.jsx(Mn,{children:tc.map((b,w)=>e.jsx(bn,{isActive:n===b,onClick:S=>a(b),count:I(wT[w]),children:u(b)},w))}),e.jsxs(ee,{overflow:"hidden",children:[n!==ec&&n!==Zl&&e.jsx(TT,{currentTab:n,groupItems:x,setGroupItems:d,badgeCodes:E,setBadgeCodes:f}),n===vr&&e.jsx(PT,{roomSession:r,roomPreviewer:c,isTrading:j,filteredGroupItems:h}),n===ec&&e.jsx(UT,{roomSession:r,roomPreviewer:c,isTrading:j}),n===_a&&e.jsx(RT,{filteredBadgeCodes:g}),n===Zl&&e.jsx(OT,{roomSession:r,roomPreviewer:c,isTrading:j}),j&&e.jsx(LT,{currentTab:n,setCurrentTab:b=>a(b),cancelTrade:v})]}),e.jsx(FT,{})]})]}):null},Fc=i=>{const{records:t=null}=i,{openRoomInfo:s=null}=ma(),n=o.useMemo(()=>{const r=[];return t.forEach(l=>{r.push({isRoomInfo:!0,roomId:l.roomId,roomName:l.roomName}),l.chatlog.forEach(c=>{r.push({timestamp:c.timestamp,habboId:c.userId,username:c.userName,hasHighlighting:c.hasHighlighting,message:c.message,isRoomInfo:!1})})}),r},[t]),a=r=>e.jsxs(_,{gap:2,alignItems:"center",justifyContent:"between",className:"bg-muted rounded p-1",children:[e.jsxs(_,{gap:1,children:[e.jsx(C,{bold:!0,children:"Room name:"}),e.jsx(C,{children:r.roomName})]}),e.jsxs(_,{gap:1,children:[e.jsx(P,{onClick:l=>ss(r.roomId),children:"Visit Room"}),e.jsx(P,{onClick:l=>s(r.roomId),children:"Room Tools"})]})]});return e.jsx(e.Fragment,{children:e.jsxs(N,{fit:!0,gap:0,overflow:"hidden",children:[e.jsx(N,{gap:2,children:e.jsxs(te,{gap:1,className:"text-black fw-bold border-bottom pb-1",children:[e.jsx(A,{className:"g-col-2",children:"Time"}),e.jsx(A,{className:"g-col-3",children:"User"}),e.jsx(A,{className:"g-col-7",children:"Message"})]})}),t&&t.length>0&&e.jsx($o,{rows:n,rowRender:r=>e.jsxs(e.Fragment,{children:[r.isRoomInfo&&e.jsx(a,{roomId:r.roomId,roomName:r.roomName}),!r.isRoomInfo&&e.jsxs(te,{fullHeight:!1,gap:1,alignItems:"center",className:"log-entry py-1 border-bottom",children:[e.jsx(C,{className:"g-col-2",children:r.timestamp}),e.jsx(C,{className:"g-col-3",bold:!0,underline:!0,pointer:!0,onClick:l=>Q(`mod-tools/open-user-info/${r.habboId}`),children:r.username}),e.jsx(C,{textBreak:!0,wrap:!0,className:"g-col-7",children:r.message})]})]})})]})})},GT=i=>{const{roomId:t=null,onCloseClick:s=null}=i,[n,a]=o.useState(null);return M(tE,r=>{const l=r.getParser();!l||l.data.roomId!==t||a(l.data)}),o.useEffect(()=>{D(new sE(t))},[t]),n?e.jsxs(ne,{className:"nitro-mod-tools-chatlog",theme:"primary-slim",windowPosition:Ft.TOP_LEFT,children:[e.jsx(se,{headerText:`Room Chatlog ${n.roomName}`,onCloseClick:s}),e.jsx(ee,{className:"text-black",overflow:"hidden",children:n&&e.jsx(Fc,{records:[n]})})]}):null},BT=i=>{const{roomId:t=null,onCloseClick:s=null}=i,[n,a]=o.useState(!1),[r,l]=o.useState(null),[c,m]=o.useState(null),[h,d]=o.useState(null),[g,f]=o.useState(null),[j,p]=o.useState(!1),[I,x]=o.useState(0),[E,v]=o.useState(!1),[b,w]=o.useState(!1),[S,T]=o.useState(!1),[L,k]=o.useState(""),y=(R,O)=>{if(R)switch(R){case"alert_only":if(L.trim().length===0)return;D(new ji(ji.ACTION_ALERT,L,"")),D(new cu(t,b?1:0,S?1:0,E?1:0));return;case"send_message":if(L.trim().length===0)return;D(new ji(ji.ACTION_MESSAGE,L,"")),D(new cu(t,b?1:0,S?1:0,E?1:0));return}};return M(nE,R=>{const O=R.getParser();!O||O.data.flatId!==t||(l(O.data.flatId),m(O.data.room.name),d(O.data.ownerId),f(O.data.ownerName),p(O.data.ownerInRoom),x(O.data.userCount))}),o.useEffect(()=>{n||(D(new rE(t)),a(!0))},[t,n,a]),e.jsxs(ne,{className:"nitro-mod-tools-room",theme:"primary-slim",windowPosition:Ft.TOP_LEFT,children:[e.jsx(se,{headerText:"Room Info"+(c?": "+c:""),onCloseClick:R=>s()}),e.jsxs(ee,{className:"text-black",children:[e.jsxs(_,{gap:2,children:[e.jsxs(N,{justifyContent:"center",grow:!0,gap:1,children:[e.jsxs(_,{alignItems:"center",gap:2,children:[e.jsx(C,{bold:!0,align:"end",className:"col-7",children:"Room Owner:"}),e.jsx(C,{underline:!0,pointer:!0,truncate:!0,children:g})]}),e.jsxs(_,{alignItems:"center",gap:2,children:[e.jsx(C,{bold:!0,align:"end",className:"col-7",children:"Users in room:"}),e.jsx(C,{children:I})]}),e.jsxs(_,{alignItems:"center",gap:2,children:[e.jsx(C,{bold:!0,align:"end",className:"col-7",children:"Owner in room:"}),e.jsx(C,{children:j?"Yes":"No"})]})]}),e.jsxs(N,{gap:1,children:[e.jsx(P,{onClick:R=>ss(t),children:"Visit Room"}),e.jsx(P,{onClick:R=>Q(`mod-tools/open-room-chatlog/${t}`),children:"Chatlog"})]})]}),e.jsxs(N,{className:"bg-muted rounded p-2",gap:1,children:[e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx("input",{className:"form-check-input",type:"checkbox",checked:E,onChange:R=>v(R.target.checked)}),e.jsx(C,{small:!0,children:"Kick everyone out"})]}),e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx("input",{className:"form-check-input",type:"checkbox",checked:b,onChange:R=>w(R.target.checked)}),e.jsx(C,{small:!0,children:"Enable the doorbell"})]}),e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx("input",{className:"form-check-input",type:"checkbox",checked:S,onChange:R=>T(R.target.checked)}),e.jsx(C,{small:!0,children:"Change room name"})]})]}),e.jsx("textarea",{className:"form-control",placeholder:"Type a mandatory message to the users in this text box...",value:L,onChange:R=>k(R.target.value)}),e.jsxs(_,{justifyContent:"between",children:[e.jsx(P,{variant:"danger",onClick:R=>y("send_message"),children:"Send Caution"}),e.jsx(P,{onClick:R=>y("alert_only"),children:"Send Alert only"})]})]})]})},HT=i=>{const{onCloseClick:t=null,issueId:s=null}=i,[n,a]=o.useState(null);return M(aE,r=>{const l=r.getParser();!l||l.data.issueId!==s||a(l.data)}),o.useEffect(()=>{D(new iE(s))},[s]),e.jsxs(ne,{className:"nitro-mod-tools-chatlog",theme:"primary-slim",children:[e.jsx(se,{headerText:"Issue Chatlog",onCloseClick:t}),e.jsx(ee,{className:"text-black",children:n&&e.jsx(Fc,{records:[n.chatRecord]})})]})},WT=i=>{const{issueId:t=null,onIssueInfoClosed:s=null}=i,[n,a]=o.useState(!1),{tickets:r=[],openUserInfo:l=null}=ma(),c=r.find(d=>d.issueId===t),m=d=>{D(new vm([d])),s(d)},h=d=>{D(new Ii([t],d)),s(t)};return e.jsxs(e.Fragment,{children:[e.jsxs(ne,{className:"nitro-mod-tools-handle-issue",theme:"primary-slim",children:[e.jsx(se,{headerText:"Resolving issue "+t,onCloseClick:()=>s(t)}),e.jsxs(ee,{className:"text-black",children:[e.jsx(C,{fontSize:4,children:"Issue Information"}),e.jsxs(te,{overflow:"auto",children:[e.jsx(N,{size:8,children:e.jsx("table",{className:"table table-striped table-sm table-text-small text-black m-0",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("th",{children:"Source"}),e.jsx("td",{children:$C(c.categoryId)})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Category"}),e.jsx("td",{className:"text-break",children:u("help.cfh.topic."+c.reportedCategoryId)})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Description"}),e.jsx("td",{className:"text-break",children:c.message})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Caller"}),e.jsx("td",{children:e.jsx(C,{bold:!0,underline:!0,pointer:!0,onClick:d=>l(c.reporterUserId),children:c.reporterUserName})})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Reported User"}),e.jsx("td",{children:e.jsx(C,{bold:!0,underline:!0,pointer:!0,onClick:d=>l(c.reportedUserId),children:c.reportedUserName})})]})]})})}),e.jsxs(N,{size:4,gap:1,children:[e.jsx(P,{variant:"secondary",onClick:()=>a(!n),children:"Chatlog"}),e.jsx(P,{onClick:d=>h(Ii.RESOLUTION_USELESS),children:"Close as useless"}),e.jsx(P,{variant:"danger",onClick:d=>h(Ii.RESOLUTION_ABUSIVE),children:"Close as abusive"}),e.jsx(P,{variant:"success",onClick:d=>h(Ii.RESOLUTION_RESOLVED),children:"Close as resolved"}),e.jsx(P,{variant:"secondary",onClick:d=>m(t),children:"Release"})]})]})]})]}),n&&e.jsx(HT,{issueId:t,onCloseClick:()=>a(!1)})]})},qT=i=>{const{myIssues:t=null,handleIssue:s=null}=i;return e.jsxs(N,{gap:0,overflow:"hidden",children:[e.jsx(N,{gap:2,children:e.jsxs(te,{gap:1,className:"text-black fw-bold border-bottom pb-1",children:[e.jsx(A,{className:"g-col-2",children:"Type"}),e.jsx(A,{className:"g-col-3",children:"Room/Player"}),e.jsx(A,{className:"g-col-3",children:"Opened"}),e.jsx(A,{className:"g-col-2"}),e.jsx(A,{className:"g-col-2"})]})}),e.jsx(N,{overflow:"auto",className:"striped-children",gap:0,children:t&&t.length>0&&t.map(n=>e.jsxs(te,{gap:1,alignItems:"center",className:"text-black py-1 border-bottom",children:[e.jsx(A,{className:"g-col-2",children:n.categoryId}),e.jsx(A,{className:"g-col-3",children:n.reportedUserName}),e.jsx(A,{className:"g-col-3",children:new Date(Date.now()-n.issueAgeInMilliseconds).toLocaleTimeString()}),e.jsx(A,{className:"g-col-2",children:e.jsx(P,{variant:"primary",onClick:a=>s(n.issueId),children:"Handle"})}),e.jsx(A,{className:"g-col-2",children:e.jsx(P,{variant:"danger",onClick:a=>D(new vm([n.issueId])),children:"Release"})})]},n.issueId))})]})},zT=i=>{const{openIssues:t=null}=i;return e.jsxs(N,{gap:0,overflow:"hidden",children:[e.jsx(N,{gap:2,children:e.jsxs(te,{gap:1,className:"text-black fw-bold border-bottom pb-1",children:[e.jsx(A,{className:"g-col-2",children:"Type"}),e.jsx(A,{className:"g-col-3",children:"Room/Player"}),e.jsx(A,{className:"g-col-4",children:"Opened"}),e.jsx(A,{className:"g-col-3"})]})}),e.jsx(N,{overflow:"auto",className:"striped-children",gap:0,children:t&&t.length>0&&t.map(s=>e.jsxs(te,{gap:1,alignItems:"center",className:"text-black py-1 border-bottom",children:[e.jsx(A,{className:"g-col-2",children:s.categoryId}),e.jsx(A,{className:"g-col-3",children:s.reportedUserName}),e.jsx(A,{className:"g-col-4",children:new Date(Date.now()-s.issueAgeInMilliseconds).toLocaleTimeString()}),e.jsx(A,{className:"g-col-3",children:e.jsx(P,{variant:"success",onClick:n=>D(new oE([s.issueId],!1,0,"pick issue button")),children:"Pick Issue"})})]},s.issueId))})]})},YT=i=>{const{pickedIssues:t=null}=i;return e.jsxs(N,{gap:0,overflow:"hidden",children:[e.jsx(N,{gap:2,children:e.jsxs(te,{gap:1,className:"text-black fw-bold border-bottom pb-1",children:[e.jsx(A,{className:"g-col-2",children:"Type"}),e.jsx(A,{className:"g-col-3",children:"Room/Player"}),e.jsx(A,{className:"g-col-4",children:"Opened"}),e.jsx(A,{className:"g-col-3",children:"Picker"})]})}),e.jsx(N,{overflow:"auto",className:"striped-children",gap:0,children:t&&t.length>0&&t.map(s=>e.jsxs(te,{gap:1,alignItems:"center",className:"text-black py-1 border-bottom",children:[e.jsx(A,{className:"g-col-2",children:s.categoryId}),e.jsx(A,{className:"g-col-3",children:s.reportedUserName}),e.jsx(A,{className:"g-col-4",children:new Date(Date.now()-s.issueAgeInMilliseconds).toLocaleTimeString()}),e.jsx(A,{className:"g-col-3",children:s.pickerUserName})]},s.issueId))})]})},$T=["Open Issues","My Issues","Picked Issues"],KT=i=>{const{onCloseClick:t=null}=i,[s,n]=o.useState(0),[a,r]=o.useState([]),{tickets:l=[]}=ma(),c=l.filter(j=>j.state===il.STATE_OPEN),m=l.filter(j=>j.state===il.STATE_PICKED&&j.pickerUserId===V().userId),h=l.filter(j=>j.state===il.STATE_PICKED),d=j=>{r(p=>{const I=[...p],x=I.indexOf(j);return x>=0&&I.splice(x,1),I})},g=j=>{r(p=>{const I=[...p],x=I.indexOf(j);return x===-1?I.push(j):I.splice(x,1),I})},f=()=>{switch(s){case 0:return e.jsx(zT,{openIssues:c});case 1:return e.jsx(qT,{myIssues:m,handleIssue:g});case 2:return e.jsx(YT,{pickedIssues:h})}return null};return e.jsxs(e.Fragment,{children:[e.jsxs(ne,{className:"nitro-mod-tools-tickets",children:[e.jsx(se,{headerText:"Tickets",onCloseClick:t}),e.jsx(Mn,{children:$T.map((j,p)=>e.jsx(bn,{isActive:s===p,onClick:I=>n(p),children:j},p))}),e.jsx(ee,{gap:1,children:e.jsx(f,{})})]}),a&&a.length>0&&a.map(j=>e.jsx(WT,{issueId:j,onIssueInfoClosed:d},j))]})},XT=i=>{const{userId:t=null,onCloseClick:s=null}=i,[n,a]=o.useState(null),[r,l]=o.useState(null);return M(lE,c=>{const m=c.getParser();!m||m.data.userId!==t||(l(m.data.username),a(m.data.roomChatlogs))}),o.useEffect(()=>{D(new cE(t))},[t]),e.jsxs(ne,{className:"nitro-mod-tools-chatlog",theme:"primary-slim",windowPosition:Ft.TOP_LEFT,children:[e.jsx(se,{headerText:`User Chatlog: ${r||""}`,onCloseClick:s}),e.jsx(ee,{className:"text-black h-100",children:n&&e.jsx(Fc,{records:n})})]})},ad=[new Ue(1,"Alert",Ue.ALERT,1,0),new Ue(2,"Mute 1h",Ue.MUTE,2,0),new Ue(3,"Ban 18h",Ue.BAN,3,0),new Ue(4,"Ban 7 days",Ue.BAN,4,0),new Ue(5,"Ban 30 days (step 1)",Ue.BAN,5,0),new Ue(7,"Ban 30 days (step 2)",Ue.BAN,7,0),new Ue(6,"Ban 100 years",Ue.BAN,6,0),new Ue(106,"Ban avatar-only 100 years",Ue.BAN,6,0),new Ue(101,"Kick",Ue.KICK,0,0),new Ue(102,"Lock trade 1 week",Ue.TRADE_LOCK,0,168),new Ue(104,"Lock trade permanent",Ue.TRADE_LOCK,0,876e3),new Ue(105,"Message",Ue.MESSAGE,0,0)],QT=i=>{const{user:t=null,onCloseClick:s=null}=i,[n,a]=o.useState(-1),[r,l]=o.useState(-1),[c,m]=o.useState(""),{cfhCategories:h=null,settings:d=null}=ma(),{simpleAlert:g=null}=Pe(),f=o.useMemo(()=>{const x=[];if(h&&h.length)for(const E of h)for(const v of E.topics)x.push(v);return x},[h]),j=x=>g(x,ge.DEFAULT,null,null,"Error"),p=()=>{let x=null;const E=f[n];if(n===-1&&(x="You must select a CFH topic"),x)return j(x);const v=c.trim().length===0?u(`help.cfh.topic.${E.id}`):c;D(new uE(t.userId,n,v)),s()},I=()=>{let x=null;const E=f[n],v=ad[r];if(n===-1||r===-1?x="You must select a CFH topic and Sanction":!d||!d.cfhPermission?x="You do not have permission to do this":E?v||(x="You must select a sanction"):x="You must select a CFH topic",x){j(x);return}const b=c.trim().length===0?u(`help.cfh.topic.${E.id}`):c;switch(v.actionType){case Ue.ALERT:{if(!d.alertPermission){j("You have insufficient permissions");return}D(new fE(t.userId,b,E.id));break}case Ue.MUTE:D(new gE(t.userId,b,E.id));break;case Ue.BAN:{if(!d.banPermission){j("You have insufficient permissions");return}D(new hE(t.userId,b,E.id,r,v.actionId===106));break}case Ue.KICK:{if(!d.kickPermission){j("You have insufficient permissions");return}D(new mE(t.userId,b,E.id));break}case Ue.TRADE_LOCK:{const w=v.actionLengthHours*60;D(new dE(t.userId,b,w,E.id));break}case Ue.MESSAGE:{if(c.trim().length===0){j("Please write a message to user");return}D(new _m(t.userId,c,E.id));break}}s()};return t?e.jsxs(ne,{className:"nitro-mod-tools-user-action",theme:"primary-slim",windowPosition:Ft.TOP_LEFT,children:[e.jsx(se,{headerText:"Mod Action: "+(t?t.username:""),onCloseClick:()=>s()}),e.jsxs(ee,{className:"text-black",children:[e.jsxs("select",{className:"form-select form-select-sm",value:n,onChange:x=>a(parseInt(x.target.value)),children:[e.jsx("option",{value:-1,disabled:!0,children:"CFH Topic"}),f.map((x,E)=>e.jsx("option",{value:E,children:u("help.cfh.topic."+x.id)},E))]}),e.jsxs("select",{className:"form-select form-select-sm",value:r,onChange:x=>l(parseInt(x.target.value)),children:[e.jsx("option",{value:-1,disabled:!0,children:"Sanction Type"}),ad.map((x,E)=>e.jsx("option",{value:E,children:x.name},E))]}),e.jsxs(N,{gap:1,children:[e.jsx(C,{small:!0,children:"Optional message type, overrides default"}),e.jsx("textarea",{className:"form-control",value:c,onChange:x=>m(x.target.value)})]}),e.jsxs(_,{justifyContent:"between",gap:1,children:[e.jsx(P,{variant:"primary",onClick:p,children:"Default Sanction"}),e.jsx(P,{variant:"success",onClick:I,children:"Sanction"})]})]})]}):null},JT=i=>{const{userId:t=null,onCloseClick:s=null}=i,[n,a]=o.useState(null);return M(pE,r=>{const l=r.getParser();l.data.userId===t&&a(l.data)}),o.useEffect(()=>{D(new xE(t))},[t]),t?e.jsxs(ne,{className:"nitro-mod-tools-user-visits",theme:"primary-slim",windowPosition:Ft.TOP_LEFT,children:[e.jsx(se,{headerText:"User Visits",onCloseClick:s}),e.jsx(ee,{className:"text-black",gap:1,children:e.jsxs(N,{fullHeight:!0,gap:0,overflow:"hidden",children:[e.jsx(N,{gap:2,children:e.jsxs(te,{gap:1,className:"text-black fw-bold border-bottom pb-1",children:[e.jsx(A,{className:"g-col-2",children:"Time"}),e.jsx(A,{className:"g-col-7",children:"Room name"}),e.jsx(A,{className:"g-col-3",children:"Visit"})]})}),e.jsx($o,{rows:(n==null?void 0:n.rooms)??[],rowRender:r=>e.jsxs(te,{fullHeight:!1,gap:1,alignItems:"center",className:"text-black py-1 border-bottom",children:[e.jsxs(C,{className:"g-col-2",children:[r.enterHour.toString().padStart(2,"0"),": ",r.enterMinute.toString().padStart(2,"0")]}),e.jsx(C,{className:"g-col-7",children:r.roomName}),e.jsx(C,{bold:!0,underline:!0,pointer:!0,variant:"primary",className:"g-col-3",onClick:l=>ss(r.roomId),children:"Visit Room"})]})})]})})]}):null},ZT=i=>{const{user:t=null,onCloseClick:s=null}=i,[n,a]=o.useState(""),{simpleAlert:r=null}=Pe();if(!t)return null;const l=()=>{if(n.trim().length===0){r("Please write a message to user.",null,null,null,"Error",null);return}D(new _m(t.userId,n,-999)),s()};return e.jsxs(ne,{className:"nitro-mod-tools-user-message",theme:"primary-slim",windowPosition:Ft.TOP_LEFT,children:[e.jsx(se,{headerText:"Send Message",onCloseClick:()=>s()}),e.jsxs(ee,{className:"text-black",children:[e.jsxs(C,{children:["Message To: ",t.username]}),e.jsx("textarea",{className:"form-control",value:n,onChange:c=>a(c.target.value)}),e.jsx(P,{fullWidth:!0,onClick:l,children:"Send message"})]})]})},eR=i=>{const{onCloseClick:t=null,userId:s=null}=i,[n,a]=o.useState(null),[r,l]=o.useState(!1),[c,m]=o.useState(!1),[h,d]=o.useState(!1),g=o.useMemo(()=>n?[{localeKey:"modtools.userinfo.userName",value:n.userName,showOnline:!0},{localeKey:"modtools.userinfo.cfhCount",value:n.cfhCount.toString()},{localeKey:"modtools.userinfo.abusiveCfhCount",value:n.abusiveCfhCount.toString()},{localeKey:"modtools.userinfo.cautionCount",value:n.cautionCount.toString()},{localeKey:"modtools.userinfo.banCount",value:n.banCount.toString()},{localeKey:"modtools.userinfo.lastSanctionTime",value:n.lastSanctionTime},{localeKey:"modtools.userinfo.tradingLockCount",value:n.tradingLockCount.toString()},{localeKey:"modtools.userinfo.tradingExpiryDate",value:n.tradingExpiryDate},{localeKey:"modtools.userinfo.minutesSinceLastLogin",value:Xs.format(n.minutesSinceLastLogin*60,".ago",2)},{localeKey:"modtools.userinfo.lastPurchaseDate",value:n.lastPurchaseDate},{localeKey:"modtools.userinfo.primaryEmailAddress",value:n.primaryEmailAddress},{localeKey:"modtools.userinfo.identityRelatedBanCount",value:n.identityRelatedBanCount.toString()},{localeKey:"modtools.userinfo.registrationAgeInMinutes",value:Xs.format(n.registrationAgeInMinutes*60,".ago",2)},{localeKey:"modtools.userinfo.userClassification",value:n.userClassification}]:null,[n]);return M(jE,f=>{const j=f.getParser();!j||j.data.userId!==s||a(j.data)}),o.useEffect(()=>{D(new IE(s))},[s]),n?e.jsxs(e.Fragment,{children:[e.jsxs(ne,{className:"nitro-mod-tools-user",theme:"primary-slim",windowPosition:Ft.TOP_LEFT,children:[e.jsx(se,{headerText:u("modtools.userinfo.title",["username"],[n.userName]),onCloseClick:()=>t()}),e.jsx(ee,{className:"text-black",children:e.jsxs(te,{overflow:"hidden",children:[e.jsx(N,{size:8,overflow:"auto",children:e.jsx("table",{className:"table table-striped table-sm table-text-small text-black m-0",children:e.jsx("tbody",{children:g.map((f,j)=>e.jsxs("tr",{children:[e.jsx("th",{scope:"row",children:u(f.localeKey)}),e.jsxs("td",{children:[f.value,f.showOnline&&e.jsx("i",{className:`icon icon-pf-${n.online?"online":"offline"} ms-2`})]})]},j))})})}),e.jsxs(N,{size:4,gap:1,children:[e.jsx(P,{onClick:f=>Q(`mod-tools/open-user-chatlog/${s}`),children:"Room Chat"}),e.jsx(P,{onClick:f=>l(!r),children:"Send Message"}),e.jsx(P,{onClick:f=>d(!h),children:"Room Visits"}),e.jsx(P,{onClick:f=>m(!c),children:"Mod Action"})]})]})})]}),r&&e.jsx(ZT,{user:{userId:s,username:n.userName},onCloseClick:()=>l(!1)}),c&&e.jsx(QT,{user:{userId:s,username:n.userName},onCloseClick:()=>m(!1)}),h&&e.jsx(JT,{userId:s,onCloseClick:()=>d(!1)})]}):null},tR=i=>{const[t,s]=o.useState(!1),[n,a]=o.useState(-1),[r,l]=o.useState(null),[c,m]=o.useState(!1),{openRooms:h=[],openRoomChatlogs:d=[],openUserChatlogs:g=[],openUserInfos:f=[],openRoomInfo:j=null,closeRoomInfo:p=null,toggleRoomInfo:I=null,openRoomChatlog:x=null,closeRoomChatlog:E=null,toggleRoomChatlog:v=null,openUserInfo:b=null,closeUserInfo:w=null,toggleUserInfo:S=null,openUserChatlog:T=null,closeUserChatlog:L=null,toggleUserChatlog:k=null}=ma(),y=o.useRef(null);return Ie([Ns.INITIALIZED,Ns.DISPOSED],R=>{if(!Er.isRoomPreviewerId(R.roomId))switch(R.type){case Ns.INITIALIZED:a(R.roomId);return;case Ns.DISPOSED:a(-1);return}}),kc(R=>{if(R.category!==X.UNIT)return;const O=ve();if(!O)return;const F=O.userDataManager.getUserDataByIndex(R.id);!F||F.type!==lt.USER||l({userId:F.webID,username:F.name})}),o.useEffect(()=>{const R={linkReceived:O=>{const F=O.split("/");if(!(F.length<2))switch(F[1]){case"show":s(!0);return;case"hide":s(!1);return;case"toggle":s(U=>!U);return;case"open-room-info":j(Number(F[2]));return;case"close-room-info":p(Number(F[2]));return;case"toggle-room-info":I(Number(F[2]));return;case"open-room-chatlog":x(Number(F[2]));return;case"close-room-chatlog":E(Number(F[2]));return;case"toggle-room-chatlog":v(Number(F[2]));return;case"open-user-info":b(Number(F[2]));return;case"close-user-info":w(Number(F[2]));return;case"toggle-user-info":S(Number(F[2]));return;case"open-user-chatlog":T(Number(F[2]));return;case"close-user-chatlog":L(Number(F[2]));return;case"toggle-user-chatlog":k(Number(F[2]));return}},eventUrlPrefix:"mod-tools/"};return ct(R),()=>ut(R)},[j,p,I,x,E,v,b,w,S,T,L,k]),e.jsxs(e.Fragment,{children:[t&&e.jsxs(ne,{uniqueKey:"mod-tools",className:"nitro-mod-tools",windowPosition:Ft.TOP_LEFT,theme:"primary-slim",children:[e.jsx(se,{headerText:"Mod Tools",onCloseClick:R=>s(!1)}),e.jsxs(ee,{className:"text-black",gap:1,children:[e.jsxs(P,{gap:1,onClick:R=>Q(`mod-tools/toggle-room-info/${n}`),disabled:n<=0,className:"position-relative",children:[e.jsx(A,{className:"icon icon-small-room position-absolute start-1"})," Room Tool"]}),e.jsxs(P,{innerRef:y,gap:1,onClick:R=>Q(`mod-tools/toggle-room-chatlog/${n}`),disabled:n<=0,className:"position-relative",children:[e.jsx(A,{className:"icon icon-chat-history position-absolute start-1"})," Chatlog Tool"]}),e.jsxs(P,{gap:1,onClick:()=>Q(`mod-tools/toggle-user-info/${r.userId}`),disabled:!r,className:"position-relative",children:[e.jsx(A,{className:"icon icon-user position-absolute start-1"})," User: ",r?r.username:""]}),e.jsxs(P,{gap:1,onClick:()=>m(R=>!R),className:"position-relative",children:[e.jsx(A,{className:"icon icon-tickets position-absolute start-1"})," Report Tool"]})]})]}),h.length>0&&h.map(R=>e.jsx(BT,{roomId:R,onCloseClick:()=>Q(`mod-tools/close-room-info/${R}`)},R)),d.length>0&&d.map(R=>e.jsx(GT,{roomId:R,onCloseClick:()=>Q(`mod-tools/close-room-chatlog/${R}`)},R)),f.length>0&&f.map(R=>e.jsx(eR,{userId:R,onCloseClick:()=>Q(`mod-tools/close-user-info/${R}`)},R)),g.length>0&&g.map(R=>e.jsx(XT,{userId:R,onCloseClick:()=>Q(`mod-tools/close-user-chatlog/${R}`)},R)),c&&e.jsx(KT,{onCloseClick:()=>m(!1)})]})},sR=[Ge.START_DOORBELL,Ge.STATE_WAITING,Ge.STATE_NO_ANSWER,Ge.START_PASSWORD,Ge.STATE_WRONG_PASSWORD],nR=[Ge.START_DOORBELL,Ge.STATE_WAITING,Ge.STATE_NO_ANSWER],rR=i=>{const[t,s]=o.useState(""),{doorData:n=null,setDoorData:a=null}=Vs(),r=()=>{n&&n.state===Ge.STATE_WAITING&&Gl(),a(null)},l=()=>{!n||!n.roomInfo||(br(n.roomInfo.roomId),a(h=>{const d={...h};return d.state=Ge.STATE_PENDING_SERVER,d}))},c=()=>{!n||!n.roomInfo||(br(n.roomInfo.roomId,t),a(h=>{const d={...h};return d.state=Ge.STATE_PENDING_SERVER,d}))};if(o.useEffect(()=>{!n||n.state!==Ge.STATE_NO_ANSWER||Gl()},[n]),!n||n.state===Ge.NONE||sR.indexOf(n.state)===-1)return null;const m=nR.indexOf(n.state)>=0;return e.jsxs(ne,{className:"nitro-navigator-doorbell",theme:"primary",children:[e.jsx(se,{headerText:u(m?"navigator.doorbell.title":"navigator.password.title"),onCloseClick:r}),e.jsxs(ee,{className:"px-3 pb-4",children:[e.jsxs(N,{gap:1,children:[e.jsx(C,{small:!0,bold:!0,children:n&&n.roomInfo&&n.roomInfo.roomName}),n.state===Ge.START_DOORBELL&&e.jsx(C,{small:!0,children:u("navigator.doorbell.info")}),n.state===Ge.STATE_WAITING&&e.jsx(C,{small:!0,children:u("navigator.doorbell.waiting")}),n.state===Ge.STATE_NO_ANSWER&&e.jsx(C,{small:!0,children:u("navigator.doorbell.no.answer")}),n.state===Ge.START_PASSWORD&&e.jsx(C,{small:!0,children:u("navigator.password.info")}),n.state===Ge.STATE_WRONG_PASSWORD&&e.jsx(C,{small:!0,children:u("navigator.password.retryinfo")})]}),m&&e.jsxs(_,{fullWidth:!0,gap:1,className:"align-items-end mt-auto pt-3",children:[e.jsx(C,{small:!0,className:"cursor-pointer",underline:!0,onClick:r,children:u("generic.cancel")}),n.state===Ge.START_DOORBELL&&e.jsx(P,{className:"ms-auto",onClick:l,children:u("navigator.doorbell.button.ring")})]}),!m&&e.jsxs(e.Fragment,{children:[e.jsxs(_,{className:"pt-3 align-items-center",gap:1,children:[e.jsx(C,{small:!0,fullWidth:!0,children:u("navigator.password.enter")}),e.jsx("input",{type:"password",className:"form-control form-control-sm",onChange:h=>s(h.target.value)})]}),e.jsxs(_,{fullWidth:!0,gap:1,className:"align-items-end mt-auto pt-3",children:[e.jsx(C,{small:!0,className:"cursor-pointer",underline:!0,onClick:r,children:u("generic.cancel")}),e.jsx(P,{className:"ms-auto",onClick:c,children:u("navigator.password.button.try")})]})]})]})]})},aR=i=>{const[t,s]=o.useState(null),[n,a]=o.useState(null),[r,l]=o.useState(null),[c,m]=o.useState(null),[h,d]=o.useState(null),[g,f]=o.useState(0),[j,p]=o.useState([]),[I,x]=o.useState(""),{categories:E=null}=Vs(),v=K("hc.disabled",!1),b=T=>K("images.url")+`/navigator/models/model_${T}.png`,w=(T,L)=>{if(T){if(vs()<T.clubLevel)return Q("habboUI/open/hccenter");x(j[L].name)}},S=()=>{!n||n.length<3||D(new EE(n,r,"model_"+I,Number(c),Number(h),g))};return o.useEffect(()=>{if(!t){const T=[];for(let L=10;L<=100;L=L+10)T.push(L);s(T),d(T[0])}},[t]),o.useEffect(()=>{E&&E.length&&m(E[0].id)},[E]),o.useEffect(()=>{const T=K("navigator.room.models");T&&T.length&&(p(T),x(T[0].name))},[]),e.jsxs(ne,{className:"nitro-room-creator",theme:"primary",children:[e.jsx(se,{headerText:u("navigator.createroom.title"),onCloseClick:T=>Q("navigator/close-creator")}),e.jsx(ee,{children:e.jsx(N,{overflow:"hidden",children:e.jsxs(te,{overflow:"hidden",children:[e.jsxs(N,{size:5,gap:1,overflow:"auto",className:"px-2 py-1",children:[e.jsxs(N,{gap:1,children:[e.jsx(C,{children:u("navigator.createroom.roomnameinfo")}),e.jsx("input",{type:"text",className:`room-creator-form ${!n||n.length<3?"input-error":""}`,maxLength:60,onChange:T=>a(T.target.value),placeholder:u("navigator.createroom.roomnameinfo")}),(!n||n.length<3)&&e.jsx(pN,{text:u("navigator.createroom.nameerr")})]}),e.jsxs(N,{grow:!0,gap:1,children:[e.jsx(C,{children:u("navigator.createroom.roomdescinfo")}),e.jsx("textarea",{className:"flex-grow-1 room-creator-form",maxLength:255,onChange:T=>l(T.target.value),placeholder:u("navigator.createroom.roomdescinfo")})]}),e.jsxs(N,{gap:1,children:[e.jsx(C,{children:u("navigator.category")}),e.jsx("select",{className:"form-select form-select-sm",onChange:T=>m(Number(T.target.value)),children:E&&E.length>0&&E.map(T=>e.jsx("option",{value:T.id,children:u(T.name)},T.id))})]}),e.jsxs(N,{gap:1,children:[e.jsx(C,{children:u("navigator.maxvisitors")}),e.jsx("select",{className:"form-select form-select-sm",onChange:T=>d(Number(T.target.value)),children:t&&t.map(T=>e.jsx("option",{value:T,children:T},T))})]}),e.jsxs(N,{gap:1,children:[e.jsx(C,{children:u("navigator.tradesettings")}),e.jsxs("select",{className:"form-select form-select-sm",onChange:T=>f(Number(T.target.value)),children:[e.jsx("option",{value:"0",children:u("navigator.roomsettings.trade_not_allowed")}),e.jsx("option",{value:"1",children:u("navigator.roomsettings.trade_not_with_Controller")}),e.jsx("option",{value:"2",children:u("navigator.roomsettings.trade_allowed")})]})]}),e.jsxs(_,{gap:2,children:[e.jsx(P,{fullWidth:!0,className:"volter-bold-button text-black",onClick:S,children:u("navigator.createroom.create")}),e.jsx(P,{fullWidth:!0,className:"volter-button text-black",onClick:T=>Q("navigator/close-creator"),children:u("cancel")})]})]}),e.jsx(N,{size:7,gap:1,overflow:"auto",children:e.jsx(ke,{className:"room-creator-grid",gap:1,columnCount:2,columnMinWidth:100,columnMinHeight:50,overflow:"unset",children:j.map((T,L)=>e.jsxs(EN,{fullHeight:!0,onClick:()=>w(T,L),itemActive:I===T.name,overflow:"unset",gap:0,className:"py-3",children:[e.jsx(_,{fullHeight:!0,center:!0,overflow:"hidden",children:e.jsx("img",{alt:"",src:b(T.name)})}),e.jsxs(C,{position:"absolute",className:"bottom-1 start-1",children:[e.jsx(A,{className:`icon ${I===T.name?"icon-tiles_room_selected":"icon-tiles"}`})," ",T.tileSize," ",u("navigator.createroom.tilesize")]}),!v&&T.clubLevel>zt.NO_CLUB&&e.jsx(A,{className:"icon icon-hc_mini position-absolute top-1 end-1"}),I&&e.jsx("i",{className:"active-arrow"})]},T.name))})})]})})})]})},iR=i=>{const{onCloseClick:t=null}=i,[s,n]=o.useState(!1),[a,r]=o.useState(!1),{report:l=null}=Fs(),{navigatorData:c=null}=Vs(),{roomSession:m=null}=Re(),h=g=>{switch(g){case"settings":return V().userId===c.enteredGuestRoom.ownerId||V().isModerator;case"staff_pick":return V().securityLevel>=Qi.COMMUNITY;case"floor":return(m==null?void 0:m.controllerLevel)>=qe.GUEST;case"guest":return(m==null?void 0:m.controllerLevel)===qe.GUEST;default:return!1}},d=(g,f)=>{if(!(!c||!c.enteredGuestRoom))switch(g){case"set_home_room":let j=0;c.homeRoomId!==c.enteredGuestRoom.roomId&&(j=c.enteredGuestRoom.roomId),D(new SE(j));return;case"navigator_search_tag":Q(`navigator/search/${f}`),D(new wr("hotel_view",`tag:${f}`));return;case"open_room_thumbnail_camera":pt(new cn(cn.TOGGLE_THUMBNAIL));return;case"open_group_info":oi(c.enteredGuestRoom.habboGroupId);return;case"toggle_room_link":Q("navigator/toggle-room-link");return;case"open_room_settings":D(new hm(c.enteredGuestRoom.roomId));return;case"toggle_pick":n(p=>!p),D(new _E(c.enteredGuestRoom.roomId));return;case"toggle_mute":r(p=>!p),D(new vE);return;case"room_filter":D(new NE(c.enteredGuestRoom.roomId));return;case"open_floorplan_editor":Q("floor-editor/toggle");return;case"report_room":l(Ze.ROOM,{roomId:c.enteredGuestRoom.roomId,roomName:c.enteredGuestRoom.roomName});return;case"remove_rights":D(new CE(c.enteredGuestRoom.roomId));return;case"close":t();return}};return o.useEffect(()=>{c&&(n(c.currentRoomIsStaffPick),c.enteredGuestRoom&&r(c.enteredGuestRoom.allInRoomMuted))},[c]),c.enteredGuestRoom?e.jsxs(ne,{className:"nitro-room-info",theme:"primary-slim",children:[e.jsx(se,{headerText:u("navigator.roomsettings.roominfo"),onCloseClick:()=>d("close")}),e.jsx(ee,{className:"text-black",children:c.enteredGuestRoom&&e.jsxs(e.Fragment,{children:[e.jsxs(_,{gap:2,overflow:"hidden",children:[e.jsxs(_,{column:!0,gap:2,overflow:"hidden",shrink:!0,style:{maxWidth:"110px"},children:[e.jsx(Wo,{roomId:c.enteredGuestRoom.roomId,customUrl:c.enteredGuestRoom.officialRoomPicRef,children:h("settings")&&e.jsx("i",{className:"top-0 m-1 cursor-pointer icon icon-camera-small position-absolute b-0 r-0",onClick:()=>d("open_room_thumbnail_camera")})}),c.enteredGuestRoom.tags.length>0&&e.jsx(_,{column:!0,gap:1,children:c.enteredGuestRoom.tags.map((g,f)=>e.jsxs(C,{pointer:!0,className:"w-full p-1 rounded bg-muted",truncate:!0,onClick:j=>d("navigator_search_tag",g),children:["#",g]},"tag-"+f))})]}),e.jsxs(N,{grow:!0,gap:1,overflow:"hidden",children:[e.jsxs(_,{gap:1,children:[e.jsxs(N,{grow:!0,gap:1,overflow:"hidden",children:[e.jsx(C,{bold:!0,truncate:!0,children:c.enteredGuestRoom.roomName}),c.enteredGuestRoom.showOwner&&e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx(C,{variant:"muted",children:u("navigator.roomownercaption")}),e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx(xs,{userId:c.enteredGuestRoom.ownerId}),e.jsx(C,{children:c.enteredGuestRoom.ownerName})]})]}),e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx(C,{variant:"muted",children:u("navigator.roomrating")}),e.jsx(C,{children:c.currentRoomRating})]})]}),e.jsx(N,{children:e.jsxs(_,{column:!0,alignItems:"center",gap:1,className:"p-1 rounded bg-muted",children:[e.jsx("i",{onClick:()=>d("set_home_room"),className:Bt("flex-shrink-0 icon icon-house-small cursor-pointer",c.homeRoomId!==c.enteredGuestRoom.roomId&&"gray")}),h("settings")&&e.jsx("i",{className:"cursor-pointer icon icon-cog",title:u("navigator.room.popup.info.room.settings"),onClick:g=>d("open_room_settings")}),e.jsx("i",{title:u("navigator.embed.caption"),className:"cursor-pointer icon icon-navigator-link",onClick:g=>Q("navigator/toggle-room-link")}),h("guest")&&e.jsx(bE,{title:u("navigator.roominfo.removerights.tooltip"),className:"cursor-pointer fa-icon",onClick:g=>d("remove_rights")})]})})]}),e.jsxs(C,{variant:"muted",children:[u("navigator.roomsettings.desc"),": "]}),e.jsx(C,{small:!0,overflow:"auto",style:{maxWidth:250,maxHeight:50},children:c.enteredGuestRoom.description}),c.enteredGuestRoom.habboGroupId>0&&e.jsxs(_,{pointer:!0,alignItems:"center",gap:1,onClick:()=>d("open_group_info"),children:[e.jsx(ze,{className:"flex-none",badgeCode:c.enteredGuestRoom.groupBadgeCode,isGroup:!0}),e.jsx(C,{underline:!0,children:u("navigator.guildbase",["groupName"],[c.enteredGuestRoom.groupName])})]})]})]}),e.jsxs(N,{gap:1,children:[h("staff_pick")&&e.jsx(P,{onClick:()=>d("toggle_pick"),children:u(s?"navigator.staffpicks.unpick":"navigator.staffpicks.pick")}),h("settings")&&e.jsxs(e.Fragment,{children:[e.jsx(P,{onClick:()=>d("toggle_mute"),children:u(a?"navigator.muteall_on":"navigator.muteall_off")}),e.jsx(P,{onClick:()=>d("room_filter"),children:u("navigator.roomsettings.roomfilter")})]}),h("floor")&&e.jsx(P,{onClick:()=>d("open_floorplan_editor"),children:u("open.floor.plan.editor")}),e.jsx(P,{variant:"danger",onClick:()=>d("report_room"),children:u("help.emergency.main.report.room")})]})]})})]}):null},oR=i=>{const{onCloseClick:t=null}=i,{navigatorData:s=null}=Vs();return s.enteredGuestRoom?e.jsxs(ne,{className:"nitro-room-link no-resize",theme:"primary",children:[e.jsx(se,{headerText:u("navigator.embed.title"),onCloseClick:t}),e.jsx(ee,{className:"text-black d-flex align-items-center",children:e.jsxs(_,{gap:2,children:[e.jsx(Wo,{roomId:s.enteredGuestRoom.roomId,customUrl:s.enteredGuestRoom.officialRoomPicRef}),e.jsxs(N,{children:[e.jsx(C,{bold:!0,fontSize:5,children:u("navigator.embed.headline")}),e.jsx(C,{children:u("navigator.embed.info")}),e.jsxs(C,{children:[" ",u("navigator.embed.direct.info")]}),e.jsx("input",{type:"text",readOnly:!0,className:"form-control form-control-sm",value:u("navigator.embed.src",["roomId"],[s.enteredGuestRoom.roomId.toString()]).replace("${url.prefix}",K("url.prefix",""))})]})]})})]}):null},lR=i=>{const{roomData:t=null,handleChange:s=null}=i,[n,a]=o.useState(""),[r,l]=o.useState(""),[c,m]=o.useState(!1),h=()=>{!c||n.length<=0||r.length<=0||n!==r||s("password",n)};return o.useEffect(()=>{a(""),l(""),m(!1)},[t]),e.jsxs(e.Fragment,{children:[e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("navigator.roomsettings.roomaccess.caption")}),e.jsx(C,{children:u("navigator.roomsettings.roomaccess.info")})]}),e.jsxs(N,{overflow:"auto",children:[e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("navigator.roomsettings.doormode")}),e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"lockState",checked:t.lockState===Je.OPEN_STATE&&!c,onChange:d=>s("lock_state",Je.OPEN_STATE)}),e.jsx(C,{children:u("navigator.roomsettings.doormode.open")})]}),e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"lockState",checked:t.lockState===Je.DOORBELL_STATE&&!c,onChange:d=>s("lock_state",Je.DOORBELL_STATE)}),e.jsx(C,{children:u("navigator.roomsettings.doormode.doorbell")})]}),e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"lockState",checked:t.lockState===Je.INVISIBLE_STATE&&!c,onChange:d=>s("lock_state",Je.INVISIBLE_STATE)}),e.jsx(C,{children:u("navigator.roomsettings.doormode.invisible")})]}),e.jsxs(_,{fullWidth:!0,gap:1,children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"lockState",checked:t.lockState===Je.PASSWORD_STATE||c,onChange:d=>m(d.target.checked)}),!c&&t.lockState!==Je.PASSWORD_STATE&&e.jsx(C,{children:u("navigator.roomsettings.doormode.password")}),(c||t.lockState===Je.PASSWORD_STATE)&&e.jsxs(N,{gap:1,children:[e.jsx(C,{children:u("navigator.roomsettings.doormode.password")}),e.jsx("input",{type:"password",className:"form-control form-control-sm col-4",value:n,onChange:d=>a(d.target.value),placeholder:u("navigator.roomsettings.password"),onFocus:d=>m(!0)}),c&&n.length<=0&&e.jsx(C,{bold:!0,small:!0,variant:"danger",children:u("navigator.roomsettings.passwordismandatory")}),e.jsx("input",{type:"password",className:"form-control form-control-sm col-4",value:r,onChange:d=>l(d.target.value),onBlur:h,placeholder:u("navigator.roomsettings.passwordconfirm")}),c&&n.length>0&&n!==r&&e.jsx(C,{bold:!0,small:!0,variant:"danger",children:u("navigator.roomsettings.invalidconfirm")})]})]})]}),e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("navigator.roomsettings.pets")}),e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx("input",{className:"form-check-input",type:"checkbox",checked:t.allowPets,onChange:d=>s("allow_pets",d.target.checked)}),e.jsx(C,{children:u("navigator.roomsettings.allowpets")})]}),e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx("input",{className:"form-check-input",type:"checkbox",checked:t.allowPetsEat,onChange:d=>s("allow_pets_eat",d.target.checked)}),e.jsx(C,{children:u("navigator.roomsettings.allowfoodconsume")})]})]})]})]})},id=3,od=60,ld=255,Mi=15,cR=i=>{const{roomData:t=null,handleChange:s=null,onClose:n=null}=i,[a,r]=o.useState(""),[l,c]=o.useState(""),[m,h]=o.useState(""),[d,g]=o.useState(""),[f,j]=o.useState(0),[p,I]=o.useState(""),{showConfirm:x=null}=Pe(),{categories:E=null}=Vs();M(wE,T=>{const L=T.getParser();if(L)switch(L.code){case uu.ERROR_INVALID_TAG:I("navigator.roomsettings.unacceptablewords");case uu.ERROR_NON_USER_CHOOSABLE_TAG:I("navigator.roomsettings.nonuserchoosabletag");break;default:I("");break}});const v=()=>{x(u("navigator.roomsettings.deleteroom.confirm.message",["room_name"],[t.roomName]),()=>{D(new TE(t.roomId)),n&&n(),Q("navigator/search/myworld_view")},null,null,null,u("navigator.roomsettings.deleteroom.confirm.title"))},b=()=>{a===t.roomName||a.length<id||a.length>od||s("name",a)},w=()=>{l===t.roomDescription||l.length>ld||s("description",l)},S=T=>{T===0&&m===t.tags[0]||m.length>Mi||T===1&&d===t.tags[1]||d.length>Mi||(m===""&&d!==""&&g(""),I(""),j(T),s("tags",m===""&&d!==""?[d]:[m,d]))};return o.useEffect(()=>{r(t.roomName),c(t.roomDescription),h(t.tags.length>0&&t.tags[0]?t.tags[0]:""),g(t.tags.length>0&&t.tags[1]?t.tags[1]:"")},[t]),e.jsxs(e.Fragment,{children:[e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx(C,{className:"col-3",children:u("navigator.roomname")}),e.jsxs(N,{fullWidth:!0,gap:0,children:[e.jsx("input",{className:"form-control form-control-sm",value:a,maxLength:od,onChange:T=>r(T.target.value),onBlur:b}),a.length<id&&e.jsx(C,{bold:!0,small:!0,variant:"danger",children:u("navigator.roomsettings.roomnameismandatory")})]})]}),e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx(C,{className:"col-3",children:u("navigator.roomsettings.desc")}),e.jsx("textarea",{className:"form-control form-control-sm",value:l,maxLength:ld,onChange:T=>c(T.target.value),onBlur:w})]}),e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx(C,{className:"col-3",children:u("navigator.category")}),e.jsx("select",{className:"form-select form-select-sm",value:t.categoryId,onChange:T=>s("category",T.target.value),children:E&&E.map(T=>e.jsx("option",{value:T.id,children:u(T.name)},T.id))})]}),e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx(C,{className:"col-3",children:u("navigator.maxvisitors")}),e.jsx("select",{className:"form-select form-select-sm",value:t.userCount,onChange:T=>s("max_visitors",T.target.value),children:ku&&ku.map(T=>e.jsx("option",{value:T,children:T},T))})]}),e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx(C,{className:"col-3",children:u("navigator.tradesettings")}),e.jsxs("select",{className:"form-select form-select-sm",value:t.tradeState,onChange:T=>s("trade_state",T.target.value),children:[e.jsx("option",{value:"0",children:u("navigator.roomsettings.trade_not_allowed")}),e.jsx("option",{value:"1",children:u("navigator.roomsettings.trade_not_with_Controller")}),e.jsx("option",{value:"2",children:u("navigator.roomsettings.trade_allowed")})]})]}),e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx(C,{className:"col-3",children:u("navigator.tags")}),e.jsxs(N,{fullWidth:!0,gap:0,children:[e.jsx("input",{className:"form-control form-control-sm",value:m,onChange:T=>h(T.target.value),onBlur:()=>S(0)}),m.length>Mi&&e.jsx(C,{bold:!0,small:!0,variant:"danger",children:u("navigator.roomsettings.toomanycharacters")}),f===0&&p!=""&&e.jsx(C,{bold:!0,small:!0,variant:"danger",children:u(p)})]}),e.jsxs(N,{fullWidth:!0,gap:0,children:[e.jsx("input",{className:"form-control form-control-sm",value:d,onChange:T=>g(T.target.value),onBlur:()=>S(1)}),d.length>Mi&&e.jsx(C,{bold:!0,small:!0,variant:"danger",children:u("navigator.roomsettings.toomanycharacters")}),f===1&&p!=""&&e.jsx(C,{bold:!0,small:!0,variant:"danger",children:u(p)})]})]}),e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx(A,{className:"col-3"}),e.jsx("input",{className:"form-check-input",type:"checkbox",checked:t.allowWalkthrough,onChange:T=>s("allow_walkthrough",T.target.checked)}),e.jsx(C,{children:u("navigator.roomsettings.allow_walk_through")})]}),e.jsxs(C,{variant:"danger",underline:!0,bold:!0,pointer:!0,className:"d-flex justify-content-center align-items-center gap-1",onClick:v,children:[e.jsx(Us,{className:"fa-icon"}),u("navigator.roomsettings.delete")]})]})},uR=i=>{var m;const{roomData:t=null,handleChange:s=null}=i,[n,a]=o.useState(-1),[r,l]=o.useState([]),c=h=>{l(d=>{const g=[...d],f=g.findIndex(j=>j.userId===h);return f>=0&&g.splice(f,1),g}),D(new yE(h,t.roomId)),a(-1)};return M(RE,h=>{const d=h.getParser();!t||t.roomId!==d.roomId||l(d.bannedUsers)}),o.useEffect(()=>{D(new Sm(t.roomId))},[t.roomId]),e.jsxs(te,{overflow:"auto",children:[e.jsxs(N,{size:6,children:[e.jsxs(C,{bold:!0,children:[u("navigator.roomsettings.moderation.banned.users")," (",r.length,")"]}),e.jsx(_,{overflow:"hidden",className:"bg-white rounded list-container p-2",children:e.jsx(N,{fullWidth:!0,overflow:"auto",gap:1,children:r&&r.length>0&&r.map((h,d)=>e.jsxs(_,{shrink:!0,alignItems:"center",gap:1,overflow:"hidden",children:[e.jsx(xs,{userName:h.userId}),e.jsxs(C,{pointer:!0,grow:!0,onClick:g=>a(h.userId),children:[" ",h.userName]})]},d))})}),e.jsxs(P,{disabled:n<=0,onClick:h=>c(n),children:[u("navigator.roomsettings.moderation.unban")," ",n>0&&((m=r.find(h=>h.userId===n))==null?void 0:m.userName)]})]}),e.jsxs(N,{size:6,children:[e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("navigator.roomsettings.moderation.mute.header")}),e.jsx(_,{alignItems:"center",gap:1,children:e.jsxs("select",{className:"form-select form-select-sm",value:t.moderationSettings.allowMute,onChange:h=>s("moderation_mute",h.target.value),children:[e.jsx("option",{value:$s.MODERATION_LEVEL_NONE,children:u("navigator.roomsettings.moderation.none")}),e.jsx("option",{value:$s.MODERATION_LEVEL_USER_WITH_RIGHTS,children:u("navigator.roomsettings.moderation.rights")})]})})]}),e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("navigator.roomsettings.moderation.kick.header")}),e.jsx(_,{alignItems:"center",gap:1,children:e.jsxs("select",{className:"form-select form-select-sm",value:t.moderationSettings.allowKick,onChange:h=>s("moderation_kick",h.target.value),children:[e.jsx("option",{value:$s.MODERATION_LEVEL_NONE,children:u("navigator.roomsettings.moderation.none")}),e.jsx("option",{value:$s.MODERATION_LEVEL_USER_WITH_RIGHTS,children:u("navigator.roomsettings.moderation.rights")}),e.jsx("option",{value:$s.MODERATION_LEVEL_ALL,children:u("navigator.roomsettings.moderation.all")})]})})]}),e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("navigator.roomsettings.moderation.ban.header")}),e.jsx(_,{alignItems:"center",gap:1,children:e.jsxs("select",{className:"form-select form-select-sm",value:t.moderationSettings.allowBan,onChange:h=>s("moderation_ban",h.target.value),children:[e.jsx("option",{value:$s.MODERATION_LEVEL_NONE,children:u("navigator.roomsettings.moderation.none")}),e.jsx("option",{value:$s.MODERATION_LEVEL_USER_WITH_RIGHTS,children:u("navigator.roomsettings.moderation.rights")})]})})]})]})]})},dR=i=>{const{roomData:t=null}=i,[s,n]=o.useState(new Map),{onlineFriends:a=[],offlineFriends:r=[]}=cs(),l=[...a,...r],c=l.filter(m=>!s.has(m.id));return M(OE,m=>{const h=m.getParser();!t||t.roomId!==h.roomId||n(h.users)}),M(kE,m=>{const h=m.getParser();!t||t.roomId!==h.roomId||n(d=>{const g=new Map(d);return g.set(h.data.userId,h.data.userName),g})}),M(AE,m=>{const h=m.getParser();!t||t.roomId!==h.roomId||n(d=>{const g=new Map(d);return g.delete(h.userId),g})}),o.useEffect(()=>{D(new DE(t.roomId))},[t.roomId]),e.jsxs(te,{children:[e.jsxs(N,{size:6,children:[e.jsx(C,{bold:!0,children:u("navigator.flatctrls.userswithrights",["displayed","total"],[s.size.toString(),s.size.toString()])}),e.jsx(_,{overflow:"hidden",className:"p-2 bg-white rounded list-container",children:e.jsx(N,{fullWidth:!0,overflow:"auto",gap:1,children:Array.from(s.entries()).map(([m,h],d)=>e.jsxs(_,{shrink:!0,alignItems:"center",gap:1,overflow:"hidden",children:[e.jsx(xs,{userId:m}),e.jsxs(C,{pointer:!0,grow:!0,onClick:g=>D(new PE(m)),children:[" ",h]})]},d))})}),e.jsx(P,{variant:"danger",disabled:!s.size,onClick:m=>D(new LE(t.roomId)),children:u("navigator.flatctrls.clear")})]}),e.jsxs(N,{size:6,children:[e.jsx(C,{bold:!0,children:u("navigator.flatctrls.friends",["displayed","total"],[c.length.toString(),l.length.toString()])}),e.jsx(_,{overflow:"hidden",className:"p-2 bg-white rounded list-container",children:e.jsx(N,{fullWidth:!0,overflow:"auto",gap:1,children:c.map((m,h)=>e.jsxs(_,{shrink:!0,alignItems:"center",gap:1,overflow:"hidden",children:[e.jsx(xs,{userId:m.id}),e.jsxs(C,{pointer:!0,grow:!0,onClick:d=>D(new ME(m.id)),children:[" ",m.name]})]},h))})})]})]})},mR=i=>{const{roomData:t=null,handleChange:s=null}=i,[n,a]=o.useState(0);return o.useEffect(()=>{a(t.chatSettings.distance)},[t.chatSettings]),e.jsxs(e.Fragment,{children:[e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("navigator.roomsettings.vip.caption")}),e.jsx(C,{children:u("navigator.roomsettings.vip.info")})]}),e.jsxs(te,{overflow:"auto",children:[e.jsxs(N,{size:6,gap:1,children:[e.jsx(C,{bold:!0,children:u("navigator.roomsettings.chat_settings")}),e.jsx(C,{children:u("navigator.roomsettings.chat_settings.info")}),e.jsxs("select",{className:"form-select form-select-sm",value:t.chatSettings.mode,onChange:r=>s("bubble_mode",r.target.value),children:[e.jsx("option",{value:ft.CHAT_MODE_FREE_FLOW,children:u("navigator.roomsettings.chat.mode.free.flow")}),e.jsx("option",{value:ft.CHAT_MODE_LINE_BY_LINE,children:u("navigator.roomsettings.chat.mode.line.by.line")})]}),e.jsxs("select",{className:"form-select form-select-sm",value:t.chatSettings.weight,onChange:r=>s("chat_weight",r.target.value),children:[e.jsx("option",{value:ft.CHAT_BUBBLE_WIDTH_NORMAL,children:u("navigator.roomsettings.chat.bubbles.width.normal")}),e.jsx("option",{value:ft.CHAT_BUBBLE_WIDTH_THIN,children:u("navigator.roomsettings.chat.bubbles.width.thin")}),e.jsx("option",{value:ft.CHAT_BUBBLE_WIDTH_WIDE,children:u("navigator.roomsettings.chat.bubbles.width.wide")})]}),e.jsxs("select",{className:"form-select form-select-sm",value:t.chatSettings.speed,onChange:r=>s("bubble_speed",r.target.value),children:[e.jsx("option",{value:ft.CHAT_SCROLL_SPEED_FAST,children:u("navigator.roomsettings.chat.speed.fast")}),e.jsx("option",{value:ft.CHAT_SCROLL_SPEED_NORMAL,children:u("navigator.roomsettings.chat.speed.normal")}),e.jsx("option",{value:ft.CHAT_SCROLL_SPEED_SLOW,children:u("navigator.roomsettings.chat.speed.slow")})]}),e.jsxs("select",{className:"form-select form-select-sm",value:t.chatSettings.protection,onChange:r=>s("flood_protection",r.target.value),children:[e.jsx("option",{value:ft.FLOOD_FILTER_LOOSE,children:u("navigator.roomsettings.chat.flood.loose")}),e.jsx("option",{value:ft.FLOOD_FILTER_NORMAL,children:u("navigator.roomsettings.chat.flood.normal")}),e.jsx("option",{value:ft.FLOOD_FILTER_STRICT,children:u("navigator.roomsettings.chat.flood.strict")})]}),e.jsx(C,{children:u("navigator.roomsettings.chat_settings.hearing.distance")}),e.jsx("input",{type:"number",min:"0",className:"form-control form-control-sm",value:n,onChange:r=>a(r.target.valueAsNumber),onBlur:r=>s("chat_distance",n)})]}),e.jsxs(N,{size:6,gap:1,children:[e.jsx(C,{bold:!0,children:u("navigator.roomsettings.vip_settings")}),e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx("input",{className:"form-check-input",type:"checkbox",checked:t.hideWalls,onChange:r=>s("hide_walls",r.target.checked)}),e.jsx(C,{children:u("navigator.roomsettings.hide_walls")})]}),e.jsxs("select",{className:"form-select form-select-sm",value:t.wallThickness,onChange:r=>s("wall_thickness",r.target.value),children:[e.jsx("option",{value:"0",children:u("navigator.roomsettings.wall_thickness.normal")}),e.jsx("option",{value:"1",children:u("navigator.roomsettings.wall_thickness.thick")}),e.jsx("option",{value:"-1",children:u("navigator.roomsettings.wall_thickness.thin")}),e.jsx("option",{value:"-2",children:u("navigator.roomsettings.wall_thickness.thinnest")})]}),e.jsxs("select",{className:"form-select form-select-sm",value:t.floorThickness,onChange:r=>s("floor_thickness",r.target.value),children:[e.jsx("option",{value:"0",children:u("navigator.roomsettings.floor_thickness.normal")}),e.jsx("option",{value:"1",children:u("navigator.roomsettings.floor_thickness.thick")}),e.jsx("option",{value:"-1",children:u("navigator.roomsettings.floor_thickness.thin")}),e.jsx("option",{value:"-2",children:u("navigator.roomsettings.floor_thickness.thinnest")})]})]})]})]})},en=["navigator.roomsettings.tab.1","navigator.roomsettings.tab.2","navigator.roomsettings.tab.3","navigator.roomsettings.tab.4","navigator.roomsettings.tab.5"],hR=i=>{const[t,s]=o.useState(null),[n,a]=o.useState(en[0]);M(UE,c=>{const m=c.getParser();if(!m)return;const h=m.data;s({roomId:h.roomId,roomName:h.name,roomDescription:h.description,categoryId:h.categoryId,userCount:h.maximumVisitorsLimit,tags:h.tags,tradeState:h.tradeMode,allowWalkthrough:h.allowWalkThrough,lockState:h.doorMode,password:null,allowPets:h.allowPets,allowPetsEat:h.allowFoodConsume,hideWalls:h.hideWalls,wallThickness:h.wallThickness,floorThickness:h.floorThickness,chatSettings:{mode:h.chatSettings.mode,weight:h.chatSettings.weight,speed:h.chatSettings.speed,distance:h.chatSettings.distance,protection:h.chatSettings.protection},moderationSettings:{allowMute:h.roomModerationSettings.allowMute,allowKick:h.roomModerationSettings.allowKick,allowBan:h.roomModerationSettings.allowBan}}),D(new Sm(h.roomId))});const r=()=>{s(null),a(en[0])},l=(c,m)=>{s(h=>{const d={...h};switch(c){case"name":d.roomName=String(m);break;case"description":d.roomDescription=String(m);break;case"category":d.categoryId=Number(m);break;case"max_visitors":d.userCount=Number(m);break;case"trade_state":d.tradeState=Number(m);break;case"tags":d.tags=m;break;case"allow_walkthrough":d.allowWalkthrough=!!m;break;case"allow_pets":d.allowPets=!!m;break;case"allow_pets_eat":d.allowPetsEat=!!m;break;case"hide_walls":d.hideWalls=!!m;break;case"wall_thickness":d.wallThickness=Number(m);break;case"floor_thickness":d.floorThickness=Number(m);break;case"lock_state":d.lockState=Number(m);break;case"password":d.lockState=Je.PASSWORD_STATE,d.password=String(m);break;case"moderation_mute":d.moderationSettings.allowMute=Number(m);break;case"moderation_kick":d.moderationSettings.allowKick=Number(m);break;case"moderation_ban":d.moderationSettings.allowBan=Number(m);break;case"bubble_mode":d.chatSettings.mode=Number(m);break;case"chat_weight":d.chatSettings.weight=Number(m);break;case"bubble_speed":d.chatSettings.speed=Number(m);break;case"flood_protection":d.chatSettings.protection=Number(m);break;case"chat_distance":d.chatSettings.distance=Number(m);break}return D(new FE(d.roomId,d.roomName,d.roomDescription,d.lockState,d.password,d.userCount,d.categoryId,d.tags.length,d.tags,d.tradeState,d.allowPets,d.allowPetsEat,d.allowWalkthrough,d.hideWalls,d.wallThickness,d.floorThickness,d.moderationSettings.allowMute,d.moderationSettings.allowKick,d.moderationSettings.allowBan,d.chatSettings.mode,d.chatSettings.weight,d.chatSettings.speed,d.chatSettings.distance,d.chatSettings.protection)),d})};return t?e.jsxs(ne,{uniqueKey:"nitro-room-settings",className:"nitro-room-settings",children:[e.jsx(se,{headerText:u("navigator.roomsettings"),isInfoToHabboPages:n===en[3],onClickInfoHabboPages:()=>n===en[3]?Q("habbopages/chat/options"):null,onCloseClick:r}),e.jsx(Mn,{children:en.map(c=>e.jsx(bn,{isActive:n===c,onClick:m=>a(c),children:u(c)},c))}),e.jsxs(ee,{children:[n===en[0]&&e.jsx(cR,{roomData:t,handleChange:l,onClose:r}),n===en[1]&&e.jsx(lR,{roomData:t,handleChange:l}),n===en[2]&&e.jsx(dR,{roomData:t,handleChange:l}),n===en[3]&&e.jsx(mR,{roomData:t,handleChange:l}),n===en[4]&&e.jsx(uR,{roomData:t,handleChange:l})]})]}):null},cd=i=>{const{roomData:t=null}=i,[s,n]=o.useState(!1),a=o.useRef(),[r,l]=o.useState(!1);o.useEffect(()=>{r&&n(!1)},[r]),o.useEffect(()=>(document.addEventListener("mousedown",c),()=>{document.removeEventListener("mousedown",c)}),[]);const c=h=>{a.current.contains(h.target)||n(!1)},m=()=>{const h=100*(t.userCount/t.maxUserCount);let d="bg-primary";return h>=92?d="bg-danger":h>=50?d="bg-warning":h>0&&(d="bg-success"),d};return e.jsxs(e.Fragment,{children:[e.jsx(A,{pointer:!0,innerRef:a,className:"icon icon-navigator-info",onClick:h=>{n(!(s||r)),h.stopPropagation()}}),e.jsx(Mo,{show:s,target:a.current,placement:"right",rootClose:!0,children:e.jsx(aa,{children:e.jsxs(ee,{overflow:"hidden",className:"room-info bg-transparent",children:[e.jsxs(_,{gap:2,overflow:"hidden",className:"room-info-bg p-2",children:[e.jsxs(Wo,{roomId:t.roomId,customUrl:t.officialRoomPicRef,className:"d-flex flex-column align-items-center justify-content-end mb-1",children:[t.habboGroupId>0&&e.jsx(ze,{badgeCode:t.groupBadgeCode,isGroup:!0,className:"position-absolute top-0 start-0 m-1 "}),t.doorMode!==Je.OPEN_STATE&&e.jsx("i",{className:"position-absolute end-0 mb-1 me-1 icon icon-navigator-room-"+(t.doorMode===Je.DOORBELL_STATE?"locked":t.doorMode===Je.PASSWORD_STATE?"password":t.doorMode===Je.INVISIBLE_STATE?"invisible":"")})]}),e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,truncate:!0,className:"flex-grow-1",style:{maxHeight:13},children:t.roomName}),e.jsxs(_,{gap:2,children:[e.jsx(C,{italics:!0,variant:"muted",children:u("navigator.roomownercaption")}),e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx(xs,{userId:t.ownerId,onClick:h=>{l(!0)}}),e.jsx(C,{italics:!0,children:t.ownerName})]})]}),e.jsx(C,{className:"flex-grow-1",children:t.description}),e.jsxs(_,{className:"badge p-1 position-absolute m-1 bottom-0 end-0 m-2 "+m(),gap:1,children:[e.jsx(wm,{className:"fa-icon"}),t.userCount]})]})]}),e.jsxs(N,{children:[e.jsxs(_,{children:[e.jsxs(_,{gap:1,className:"align-items-center",children:[e.jsx(xs,{userId:t.ownerId}),e.jsx(C,{bold:!0,underline:!0,children:t.ownerName})]}),e.jsxs(_,{gap:1,className:"align-items-center",justifyContent:"end",fullWidth:!0,children:[e.jsx("i",{className:"icon icon-navigator-room-group"}),e.jsx(C,{bold:!0,underline:!0,children:t.groupName})]})]}),e.jsxs(_,{gap:1,children:[e.jsx(C,{bold:!0,children:u("navigator.roompopup.property.max_users")}),e.jsx(C,{children:t.maxUserCount})]})]})]})})})]})},ud=i=>{const{roomData:t=null,children:s=null,thumbnail:n=!1,...a}=i,{setDoorData:r=null}=Vs(),l=()=>{const m=100*(t.userCount/t.maxUserCount);let h="badge-empty";return m>=92?h="badge-danger":m>=50?h="badge-warning":m>0&&(h="badge-success"),h},c=m=>{if(t.ownerId!==V().userId){if(t.habboGroupId!==0){ss(t.roomId);return}switch(t.doorMode){case Je.DOORBELL_STATE:r(h=>{const d={...h};return d.roomInfo=t,d.state=Ge.START_DOORBELL,d});return;case Je.PASSWORD_STATE:r(h=>{const d={...h};return d.roomInfo=t,d.state=Ge.START_PASSWORD,d});return}}br(t.roomId)};return n?e.jsxs(N,{pointer:!0,overflow:"hidden",alignItems:"center",onClick:c,gap:0,className:"nav-thumbnail p-1 rounded-3 small mb-1 flex-column",...a,children:[e.jsxs(Wo,{roomId:t.roomId,customUrl:t.officialRoomPicRef,className:"d-flex flex-column align-items-center justify-content-end mb-1",children:[t.habboGroupId>0&&e.jsx(ze,{badgeCode:t.groupBadgeCode,isGroup:!0,className:"position-absolute top-0 start-0 m-1"}),e.jsxs(_,{center:!0,className:"badge p-1 position-absolute m-1 "+l(),gap:1,children:[e.jsx(wm,{className:"fa-icon"}),t.userCount]}),t.doorMode!==Je.OPEN_STATE&&e.jsx("i",{className:"position-absolute end-0 mb-1 me-1 icon icon-navigator-room-"+(t.doorMode===Je.DOORBELL_STATE?"locked":t.doorMode===Je.PASSWORD_STATE?"password":t.doorMode===Je.INVISIBLE_STATE?"invisible":"")})]}),e.jsxs(_,{className:"w-100",children:[e.jsx(C,{truncate:!0,className:"flex-grow-1",children:t.roomName}),e.jsx(_,{reverse:!0,alignItems:"center",gap:1,children:e.jsx(cd,{roomData:t})}),s]})]}):e.jsxs(_,{pointer:!0,overflow:"hidden",alignItems:"center",onClick:c,gap:2,className:"navigator-item px-2 small",...a,children:[e.jsxs(_,{center:!0,className:"p-1 fw-bold "+l(),gap:1,children:[e.jsx("div",{className:"nav-avatar-icon"}),t.userCount]}),e.jsx(C,{truncate:!0,grow:!0,children:t.roomName}),e.jsxs(_,{reverse:!0,alignItems:"center",gap:1,children:[e.jsx(cd,{roomData:t}),t.habboGroupId>0&&e.jsx("i",{className:"icon icon-navigator-room-group"}),t.doorMode!==Je.OPEN_STATE&&e.jsx("i",{className:"icon icon-navigator-room-"+(t.doorMode===Je.DOORBELL_STATE?"locked":t.doorMode===Je.PASSWORD_STATE?"password":t.doorMode===Je.INVISIBLE_STATE?"invisible":"")})]}),s]})},gR=i=>{const{searchResult:t=null,...s}=i,[n,a]=o.useState(!0),[r,l]=o.useState(0),{topLevelContext:c=null}=Vs(),m=()=>{let f=t.code;return!f||!f.length||u("navigator.searchcode.title."+f)=="navigator.searchcode.title."+f?t.data:f.startsWith("${")?f.slice(2,f.length-1):"navigator.searchcode.title."+f},h=()=>{l(f=>f===Wn.LIST?Wn.THUMBNAILS:Wn.LIST)},d=()=>{t.action==1?D(new wr(t.code,"")):t.action==2&&c&&D(new wr(c.code,""))};o.useEffect(()=>{t&&(a(!t.closed),l(t.mode))},[t]);const g=r>=Wn.THUMBNAILS;return e.jsxs(N,{className:"bg-white",gap:0,children:[e.jsxs(_,{fullWidth:!0,alignItems:"center",justifyContent:"between",className:"px-2 py-1",children:[e.jsxs(_,{grow:!0,pointer:!0,alignItems:"center",gap:1,onClick:f=>a(j=>!j),children:[n&&e.jsx(VE,{className:"text-secondary fa-icon"}),!n&&e.jsx(Lo,{className:"text-secondary fa-icon"}),e.jsxs("div",{className:"nav-category",children:[" ",u(m())]})]}),e.jsxs(_,{gap:2,children:[r===Wn.LIST&&e.jsx(GE,{className:"text-secondary fa-icon",onClick:h}),r>=Wn.THUMBNAILS&&e.jsx(BE,{className:"text-secondary fa-icon",onClick:h}),t.action>0&&t.action===1&&e.jsx(HE,{className:"text-secondary fa-icon",onClick:d}),t.action>0&&t.action!==1&&e.jsx(WE,{className:"text-secondary fa-icon",onClick:d}),c.code!=="official_view"&&e.jsx(rh,{title:u("navigator.tooltip.add.saved.search"),onClick:()=>D(new qE(m(),t.data))})]})]})," ",n&&e.jsx(e.Fragment,{children:g?e.jsx(ke,{columnCount:3,...s,columnMinWidth:110,columnMinHeight:130,className:"mx-2",children:t.rooms.length>0&&t.rooms.map((f,j)=>e.jsx(ud,{roomData:f,thumbnail:!0},j))}):e.jsx(te,{columnCount:1,className:"navigator-grid",gap:0,children:t.rooms.length>0&&t.rooms.map((f,j)=>e.jsx(ud,{roomData:f},j))})})]})},fR=i=>{const{search:t=null}=i,[s,n]=o.useState(!1),[a,r]=o.useState(0),l=h=>{r(h),n(!0)},c=()=>{r(0),n(!1)},m=()=>{let h=t.code;return!h||!h.length||u("navigator.searchcode.title."+h)=="navigator.searchcode.title."+h?t.code:h.startsWith("${")?h.slice(2,h.length-1):"navigator.searchcode.title."+h};return e.jsxs(_,{grow:!0,pointer:!0,alignItems:"center",gap:1,onMouseEnter:()=>l(t.id),onMouseLeave:()=>c(),children:[s&&a===t.id&&e.jsx(A,{className:"icon nitro-navigator-search-delete",title:u("navigator.tooltip.remove.saved.search"),onClick:()=>D(new zE(t.id))}),e.jsx(C,{small:!0,pointer:!0,variant:"black",title:u("navigator.tooltip.open.saved.search"),onClick:()=>D(new wr(t.code.split(".").reverse()[0],t.filter)),children:u(m())})]})},pR=i=>{const{searchs:t=[]}=i;return e.jsxs(N,{className:"nitro-navigator-search-saves-result",children:[e.jsxs(_,{className:"badge p-1 bg-orange",gap:1,children:[e.jsx(Xd,{color:"white"}),e.jsx(C,{variant:"white",children:u("navigator.quick.links.title")})]}),e.jsx(N,{className:"p-1",style:{overflowX:"hidden",overflowY:"auto"},children:t&&t.length>0&&t.map(s=>e.jsx(fR,{search:s},s.id))})]})},xR=i=>{const{sendSearch:t=null}=i,[s,n]=o.useState(0),[a,r]=o.useState(""),{topLevelContext:l=null,searchResult:c=null}=Vs(),m=()=>{if(!l)return;let d=Mr[s];d||(d=Mr[0]);const g=(d.query?d.query+":":"")+a;t(g||"",l.code)},h=d=>{d.key==="Enter"&&m()};return o.useEffect(()=>{if(!c)return;const d=c.data.split(":");let g=null,f="";if(d.length>=2){const[j,...p]=d;g=Mr.find(I=>I.query===j),f=p.join(":")}else f=c.data;g||(g=Mr[0]),n(Mr.findIndex(j=>j===g)),r(f)},[c]),e.jsxs(_,{fullWidth:!0,gap:1,className:"mb-2",children:[e.jsx(_,{shrink:!0,children:e.jsx("select",{className:"form-select form-select-sm",value:s,onChange:d=>n(parseInt(d.target.value)),children:Mr.map((d,g)=>e.jsx("option",{value:g,children:u("navigator.filter."+d.name)},g))})}),e.jsxs(_,{fullWidth:!0,gap:2,children:[e.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:u("navigator.filter.input.placeholder"),value:a,onChange:d=>r(d.target.value),onKeyDown:d=>h(d)}),e.jsx("i",{className:"icon icon-pen navigator-search-button position-absolute",onClick:m})]})]})},jR=i=>{const[t,s]=o.useState(!1),[n,a]=o.useState(!1),[r,l]=o.useState(!1),[c,m]=o.useState(!1),[h,d]=o.useState(!1),[g,f]=o.useState(!1),[j,p]=o.useState(!1),[I,x]=o.useState(!0),[E,v]=o.useState(!1),{searchResult:b=null,topLevelContext:w=null,topLevelContexts:S=null,navigatorData:T=null,navigatorSearches:L=null}=Vs(),k=o.useRef(null),y=o.useRef();Ve(yt.CREATED,F=>{s(!1),l(!1)});const R=o.useCallback((F,U)=>{D(new wr(U,F)),p(!0)},[]),O=o.useCallback(()=>{if(!n){v(!0);return}if(k.current){R(k.current.value,k.current.code),k.current=null;return}if(b){R(b.data,b.code);return}w&&R("",w.code)},[n,b,w,R]);return o.useEffect(()=>{const F={linkReceived:U=>{const q=U.split("/");if(!(q.length<2))switch(q[1]){case"show":{s(!0),v(!0);return}case"hide":s(!1);return;case"toggle":{if(t){s(!1);return}s(!0),v(!0);return}case"toggle-room-info":m($=>!$);return;case"toggle-room-link":d($=>!$);return;case"goto":if(q.length<=2)return;switch(q[2]){case"home":if(T.homeRoomId<=0)return;ss(T.homeRoomId);break;default:{const $=parseInt(q[2]);ss($)}}return;case"create":l($=>!$);return;case"close-creator":l(!1);return;case"search":if(q.length>2){const $=q[2];let G="";q.length>3&&(G=q[3]),k.current={value:G,code:$},s(!0),v(!0)}return}},eventUrlPrefix:"navigator/"};return ct(F),()=>ut(F)},[t,T]),o.useEffect(()=>{b&&(p(!1),y&&y.current&&(y.current.scrollTop=0))},[b]),o.useEffect(()=>{!t||!n||!E||(O(),v(!1))},[t,n,E,O]),o.useEffect(()=>{n||!w||a(!0)},[n,w]),o.useEffect(()=>{!t||!I||(D(new YE),x(!1))},[t,I]),o.useEffect(()=>{Ha.addCallback(ni.OPENROOM,(F,U=!1,q=null)=>D(new $E(F)))},[]),e.jsxs(e.Fragment,{children:[t&&e.jsxs(ne,{uniqueKey:"navigator",className:`nitro-navigator ${g?"expanded":""}`,children:[e.jsx(se,{headerText:u("navigator.title"),isInfoToHabboPages:!0,onClickInfoHabboPages:()=>Q("habbopages/navigator"),onCloseClick:F=>s(!1)}),e.jsxs(Mn,{children:[e.jsx(A,{className:"mt-1",children:e.jsx(rh,{style:{marginRight:g?"91px":"11px",marginLeft:"-2px",marginTop:"1px"},title:u("navigator.tooltip.left.show.hide"),onClick:()=>f(F=>!F)})}),S&&S.length>0&&S.map((F,U)=>e.jsx(bn,{isActive:w===F,onClick:q=>R("",F.code),children:u("navigator.toplevelview."+F.code)},U))]}),e.jsxs(ee,{position:"relative",children:[j&&e.jsx(A,{fit:!0,position:"absolute",className:"top-0 start-0 z-index-1 bg-muted opacity-0-5"}),e.jsx(N,{overflow:"hidden",children:e.jsxs(_,{fullWidth:!0,fullHeight:!0,children:[g&&e.jsx(N,{overflow:"hidden",className:"pe-5",children:e.jsx(pR,{searchs:L})}),e.jsxs(_,{column:!0,className:"w-100",children:[e.jsx(xR,{sendSearch:R}),e.jsx(N,{overflow:"auto",children:b&&b.results.map((F,U)=>e.jsx(gR,{searchResult:F},U))}),e.jsx(_,{className:"nav-bottom",children:e.jsxs(_,{className:"position-absolute bottom-3",children:[e.jsx(_,{className:"nav-create-room",onClick:F=>l(U=>!U),children:e.jsx(C,{variant:"white",bold:!0,className:"nav-bottom-buttons-text",children:u("navigator.createroom.create")})}),(b==null?void 0:b.code)!=="myworld_view"&&(b==null?void 0:b.code)!=="roomads_view"&&e.jsx(_,{className:"nav-random-room",onClick:()=>D(new Em),children:e.jsx(C,{variant:"white",bold:!0,className:"nav-bottom-buttons-text",children:u("navigator.random.room")})}),((b==null?void 0:b.code)==="myworld_view"||(b==null?void 0:b.code)==="roomads_view")&&e.jsx(_,{className:"nav-promote-room",onClick:()=>Q("catalog/open/room_event"),children:e.jsx(C,{variant:"white",bold:!0,className:"nav-bottom-buttons-text",children:u("navigator.promote.room")})})]})})]})]})})]})]}),r&&e.jsx(aR,{}),e.jsx(rR,{}),c&&e.jsx(iR,{onCloseClick:()=>m(!1)}),h&&e.jsx(oR,{onCloseClick:()=>d(!1)}),e.jsx(hR,{})]})},IR=i=>{const[t,s]=o.useState(!1),[n,a]=o.useState(""),{chatHistory:r=[]}=ui(),l=o.useRef(null);if(o.useMemo(()=>{if(n.length===0)return r;let m=n.toLowerCase();return r.filter(h=>h.message&&h.message.toLowerCase().includes(m)||h.name&&h.name.toLowerCase().includes(m))},[r,n]),o.useEffect(()=>{l&&l.current&&t&&(l.current.scrollTop=l.current.scrollHeight)},[t]),o.useEffect(()=>{const m={linkReceived:h=>{const d=h.split("/");if(!(d.length<2))switch(d[1]){case"show":s(!0);return;case"hide":s(!1);return;case"toggle":s(g=>!g);return}},eventUrlPrefix:"nitrobubblehidden/"};return ct(m),()=>ut(m)},[]),!t)return null;var c="<style>.newbubblehe { visibility: hidden !important; }</style>";return e.jsx("div",{dangerouslySetInnerHTML:{__html:c}})},ER=/\n\r|\n|\r/mg,bR=i=>{const[t,s]=o.useState(null),[n,a]=o.useState(""),[r,l]=o.useState(null),c=o.useRef(null);return o.useEffect(()=>{const m=async d=>{try{const g=await fetch(d);if(!g)return;const j=(await g.text()).split(ER),p=j.shift().split("|");a(p[0]),l(I=>p[1]&&p[1].split(";").length===2?{width:parseInt(p[1].split(";")[0]),height:parseInt(p[1].split(";")[1])}:null),s(j.join(""))}catch{Jd.error(`Failed to fetch ${d}`)}},h={linkReceived:d=>{const g=d.split("/");g.length<2||(g.shift(),m(K("habbopages.url")+g.join("/")))},eventUrlPrefix:"habbopages/"};return ct(h),()=>ut(h)},[]),o.useEffect(()=>{const m=h=>{if(!(h.target instanceof HTMLAnchorElement))return;h.preventDefault();const d=h.target.href;!d||!d.length||Ar(d)};return document.addEventListener("click",m),()=>{document.removeEventListener("click",m)}},[]),t?e.jsxs(ne,{className:"nitropedia",theme:"primary-slim",style:r?{width:r.width,height:r.height}:{},children:[e.jsx(se,{headerText:n,onCloseClick:()=>s(null)}),e.jsx(ee,{children:e.jsx(A,{fit:!0,innerRef:c,className:"text-black",dangerouslySetInnerHTML:{__html:t}})})]}):null},CR=i=>{const{offer:t=null,setOpen:s=null}=i;if(t)return e.jsxs(Tc,{fadesOut:!1,onClose:null,onClick:n=>s(!0),gap:2,children:[e.jsx(A,{className:"nitro-targeted-offer-icon",style:{backgroundImage:`url(${K("image.library.url")+t.iconImageUrl})`}}),e.jsx(C,{variant:"light",className:"ubuntu-bold",children:t.title})]})},NR=i=>{const{offer:t=null,setOpen:s=null}=i,{getCurrencyAmount:n}=Lr(),[a,r]=o.useState(1),l=o.useMemo(()=>{let h=!1,d=!1,g=!1;return t.priceInCredits>0&&(h=n(-1)>=t.priceInCredits),t.priceInActivityPoints>0?d=n(t.activityPointType)>=t.priceInActivityPoints:d=!0,t.purchaseLimit>0&&(g=!0),h&&d&&g},[t,n]),c=()=>{let h=Math.max(0,(t.expirationTime-Date.now())/1e3);return Xs.format(h)},m=()=>{D(new KE(t.id,a)),D(new Tm)};if(t)return e.jsxs(ne,{theme:"primary-slim",uniqueKey:"targeted-offer",className:"nitro-targeted-offer",children:[e.jsx(se,{headerText:u(t.title),onCloseClick:h=>s(!1)}),e.jsx(Zm,{position:"relative",className:"justify-content-center align-items-center cursor-pointer",variant:"danger",gap:3,children:u("targeted.offer.timeleft",["timeleft"],[c()])}),e.jsxs(ee,{gap:1,children:[e.jsxs(_,{gap:1,fullHeight:!0,children:[e.jsxs(_,{gap:1,column:!0,className:"w-75 text-black",children:[e.jsxs(N,{className:"bg-warning p-2",fullHeight:!0,children:[e.jsx("h4",{children:u(t.title)}),e.jsx(A,{dangerouslySetInnerHTML:{__html:t.description}})]}),e.jsxs(_,{alignSelf:"center",alignItems:"center",justifyContent:"center",gap:2,children:[t.purchaseLimit>1&&e.jsxs(_,{gap:1,children:[e.jsx(C,{variant:"muted",children:u("catalog.bundlewidget.quantity")}),e.jsx("input",{type:"number",value:a,onChange:h=>r(parseInt(h.target.value)),min:1,max:t.purchaseLimit})]}),e.jsx(P,{variant:"primary",disabled:!l,onClick:()=>m(),children:u("targeted.offer.button.buy")})]})]}),e.jsx(A,{className:"w-50",fullHeight:!0,style:{background:`url(${K("image.library.url")+t.imageUrl}) no-repeat center`}})]}),e.jsxs(_,{className:"price-ray position-absolute",alignItems:"center",justifyContent:"center",column:!0,children:[e.jsx(C,{children:u("targeted.offer.price.label")}),t.priceInCredits>0&&e.jsxs(_,{gap:1,children:[e.jsx(C,{variant:"light",children:t.priceInCredits}),e.jsx(Nt,{type:-1})]}),t.priceInActivityPoints>0&&e.jsxs(_,{gap:1,children:[e.jsxs(C,{className:"ubuntu-bold",variant:"light",children:["+",t.priceInActivityPoints]})," ",e.jsx(Nt,{type:t.activityPointType})]})]})]})]})},vR=()=>{const[i,t]=o.useState(null),[s,n]=o.useState(!1);if(M(XE,a=>{let r=a.getParser();r&&t(r.data)}),Dc(()=>{D(new Tm)}),!!i)return e.jsx(e.Fragment,{children:s?e.jsx(NR,{offer:i,setOpen:n}):e.jsx(CR,{offer:i,setOpen:n})})},_R=i=>{const[t,s]=o.useState(0),[n,a]=o.useState(null),[r,l]=o.useState(!0),{showConfirm:c=null}=Pe();M(Rm,f=>{s(0),a(null)}),M(lm,f=>{s(0),a(null)}),M(ua,f=>{const j=f.getParser();j.roomEnter&&(j.data.habboGroupId>0?(s(j.data.habboGroupId),D(new Ba(j.data.habboGroupId,!1))):(s(0),a(null)))}),M(QE,f=>{const j=f.getParser();!n||j.groupId!==n.id&&j.groupId!==t||(s(0),a(null))}),M(ai,f=>{const j=f.getParser();j.id===t&&a(j)});const m=()=>{c(u("group.leaveconfirm.desc"),()=>{D(new mc(n.id,V().userId))},null)},h=n&&n.ownerName===V().userName,d=()=>{if(h)return"group.manage";if(n.type===Cs.PRIVATE)return"";if(n.membershipType===Tt.MEMBER)return"group.leave";if(n.membershipType===Tt.NOT_MEMBER&&n.type===Cs.REGULAR)return"group.join";if(n.membershipType===Tt.REQUEST_PENDING)return"group.membershippending";if(n.membershipType===Tt.NOT_MEMBER&&n.type===Cs.EXCLUSIVE)return"group.requestmembership"},g=()=>{if(h)return Ym(n.id);if(!(n.type===Cs.PRIVATE&&n.membershipType===Tt.NOT_MEMBER)){if(n.membershipType===Tt.MEMBER){m();return}vc(n.id)}};return n?e.jsx(A,{className:"nitro-notification-bubble rounded",children:e.jsxs(N,{children:[e.jsxs(_,{alignItems:"center",justifyContent:"between",pointer:!0,onClick:f=>l(j=>!j),children:[e.jsx(C,{variant:"white",children:u("group.homeroominfo.title")}),r&&e.jsx(hc,{className:"fa-icon"}),!r&&e.jsx(gc,{className:"fa-icon"})]}),r&&e.jsxs(e.Fragment,{children:[e.jsxs(_,{pointer:!0,alignItems:"center",gap:2,onClick:f=>oi(n.id),children:[e.jsx(A,{className:"group-badge",children:e.jsx(ze,{badgeCode:n.badge,isGroup:!0})}),e.jsx(C,{variant:"white",children:n.title})]}),(n.type!==Cs.PRIVATE||h)&&e.jsx(P,{fullWidth:!0,variant:"success",disabled:n.membershipType===Tt.REQUEST_PENDING,onClick:g,children:u(d())})]})]})}):null},SR=i=>{const{title:t="Nitro Cool UI Edit",onClose:s=null,...n}=i;return e.jsx(jN,{title:t,onClose:s,...n,children:e.jsxs(te,{children:[e.jsxs(N,{size:12,children:[e.jsxs(N,{alignItems:"center",gap:0,children:[e.jsx(C,{bold:!0,fontSize:4,children:"Nitro React"}),e.jsxs(C,{children:["v",zm()]})]}),e.jsxs(N,{alignItems:"center",children:[e.jsxs(C,{children:[e.jsx("b",{children:"Renderer:"})," v",BC()]}),e.jsxs(N,{fullWidth:!0,gap:1,children:[e.jsx(P,{fullWidth:!0,variant:"success",onClick:a=>window.open("https://discord.nitrodev.co"),children:"Nitro Discord"}),e.jsxs(_,{gap:1,children:[e.jsx(P,{fullWidth:!0,onClick:a=>window.open("https://git.krews.org/nitro/nitro-react"),children:"Nitro Git"}),e.jsx(P,{fullWidth:!0,onClick:a=>window.open("https://git.krews.org/nitro/nitro-react/-/issues"),children:"Nitro Bug Report"})]})]})]})]}),e.jsx("div",{className:"nitro-coolui-logo"}),e.jsx(N,{size:10,children:e.jsxs(N,{alignItems:"left",gap:0,children:[e.jsx(C,{center:!0,bold:!0,fontSize:5,children:"Cool UI"}),e.jsx(C,{children:"Was created by Wassehk"}),e.jsx(C,{children:"- DuckieTM (Re-Design)"}),e.jsx(C,{children:"- Jonas (Contributing)"}),e.jsx(C,{children:"- Ohlucas (Sunset resources)"}),e.jsx(C,{center:!0,bold:!0,small:!0,children:"v1.2.0"}),e.jsx(P,{fullWidth:!0,onClick:a=>window.open("https://git.krews.org/nitro/nitro-react"),children:"Cool UI Git"})]})})]})})},wR=i=>{const{item:t=null,title:s=i.item&&i.item.title||"",onClose:n=null,...a}=i,[r,l]=o.useState(!1),c=()=>{Ar(t.clickUrl),n()},m=t.alertType===ge.DEFAULT,h=e.jsxs(N,{alignItems:"center",center:!0,gap:0,className:"my-1",children:[!t.clickUrl&&e.jsx(P,{onClick:n,variant:"success",children:u("generic.close")}),t.clickUrl&&t.clickUrl.length>0&&e.jsx(P,{variant:"success",onClick:c,children:u(t.clickUrlText)})]});return e.jsx(wc,{title:s,onClose:n,...a,type:m?ge.DEFAULT:t.alertType,options:h,children:e.jsxs(_,{fullHeight:!0,overflow:"auto",gap:m||t.imageUrl&&!r?2:0,children:[m&&!t.imageUrl&&e.jsx(A,{className:"notification-frank flex-shrink-0"}),t.imageUrl&&!r&&e.jsx("img",{src:t.imageUrl,alt:t.title,onError:()=>{l(!0)},className:"align-self-baseline"}),e.jsx(A,{classNames:["notification-text overflow-y-auto d-flex flex-column w-100",t.clickUrl&&!m?"justify-content-center":""],children:t.messages.length>0&&t.messages.map((d,g)=>{const f=d.replace(/\r\n|\r|\n/g,"<br />");return e.jsx(A,{dangerouslySetInnerHTML:{__html:f}},g)})})]})})},TR=i=>{const{item:t=null,title:s=i.item&&i.item.title||"",onClose:n=null,...a}=i,[r,l]=o.useState(""),[c,m]=o.useState([]),h=()=>{Ar(t.clickUrl),n()},d=f=>{let j=JSON.parse(t.messages[0]);m(j.filter(p=>p.includes(f))),l(f)};o.useEffect(()=>{m(JSON.parse(t.messages[0]))},[t]);const g=t.clickUrl&&t.clickUrl.startsWith("event:");return e.jsxs(wc,{title:s,onClose:n,...a,children:[e.jsx(_,{fullWidth:!0,alignItems:"center",position:"relative",children:e.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:u("generic.search"),value:r,onChange:f=>d(f.target.value)})}),e.jsx(N,{fullHeight:!0,className:"py-1",overflow:"hidden",children:e.jsx(ke,{gap:1,columnCount:1,children:c&&c.map((f,j)=>e.jsx("span",{children:f},j))})}),e.jsx("hr",{className:"my-2"}),e.jsxs(N,{alignItems:"center",center:!0,gap:1,children:[!g&&!t.clickUrl&&e.jsx(P,{onClick:n,children:u("generic.close")}),t.clickUrl&&t.clickUrl.length>0&&e.jsx(P,{onClick:h,children:u(t.clickUrlText)})]})]})},RR=(i,t)=>{if(!i)return null;const s={key:i.id,item:i,onClose:t};switch(i.alertType){case ge.NITRO:return e.jsx(SR,{...s});case ge.SEARCH:return e.jsx(TR,{...s});default:return e.jsx(wR,{...s})}},yR=i=>{const{item:t=null,onClose:s=null,...n}=i;return e.jsxs(Tc,{fadesOut:!1,className:"flex-column club-gift",onClose:s,...n,children:[e.jsxs("div",{className:"d-flex align-items-center gap-2 mb-2",children:[e.jsx(Nt,{type:"hc",className:"flex-shrink-0"}),e.jsx("span",{className:"ms-1",children:u("notifications.text.club_gift")})]}),e.jsxs("div",{className:"d-flex align-items-center justify-content-end gap-2",children:[e.jsx("button",{type:"button",className:"btn btn-success w-100 btn-sm",onClick:()=>Ar(t.linkUrl),children:u("notifications.button.show_gift_list")}),e.jsx("span",{className:"text-decoration-underline cursor-pointer text-nowrap",onClick:s,children:u("notifications.button.later")})]})]})},OR=i=>{const{item:t=null,onClose:s=null,...n}=i,a=t.message.replace(/\r\n|\r|\n/g,"<br />");return e.jsxs(Tc,{onClose:s,gap:2,alignItems:"center",onClick:r=>t.linkUrl&&t.linkUrl.length&&Ar(t.linkUrl),...n,children:[e.jsx(_,{center:!0,className:"bubble-image-container",children:t.iconUrl&&t.iconUrl.length&&e.jsx("img",{className:"no-select",src:t.iconUrl,alt:""})}),e.jsx(C,{wrap:!0,variant:"white",dangerouslySetInnerHTML:{__html:a}})]})},kR=(i,t)=>{if(!i)return null;const s={key:i.id,item:i,onClose:t};switch(i.notificationType){case Qt.CLUBGIFT:return e.jsx(yR,{...s});default:return e.jsx(OR,{...s})}},AR=i=>{const{item:t=null,onClose:s=null,...n}=i,{message:a=null,onConfirm:r=null,onCancel:l=null,confirmText:c=null,cancelText:m=null,title:h=null}=t,d=()=>{r&&r(),s()},g=()=>{l&&l(),s()};return e.jsxs(wc,{title:h,onClose:s,...n,type:ge.ALERT,children:[e.jsx(_,{grow:!0,center:!0,children:e.jsx(C,{children:a})}),e.jsxs(_,{gap:1,children:[e.jsx(P,{fullWidth:!0,variant:"danger",onClick:g,children:m}),e.jsx(P,{fullWidth:!0,onClick:d,children:c})]})]})},DR=(i,t)=>{if(!i)return null;const s={key:i.id,item:i,onClose:t};switch(i.confirmType){default:return e.jsx(AR,{...s})}},PR=i=>{const{alerts:t=[],bubbleAlerts:s=[],confirms:n=[],closeAlert:a=null,closeBubbleAlert:r=null,closeConfirm:l=null}=Pe(),c=o.useMemo(()=>{if(!t||!t.length)return null;const d=[];for(const g of t){const f=RR(g,()=>a(g));d.push(f)}return d},[t,a]),m=o.useMemo(()=>{if(!s||!s.length)return null;const d=[];for(const g of s){const f=kR(g,()=>r(g));if(g.notificationType===Qt.CLUBGIFT){d.unshift(f);continue}d.push(f)}return d},[s,r]),h=o.useMemo(()=>{if(!n||!n.length)return null;const d=[];for(const g of n){const f=DR(g,()=>l(g));d.push(f)}return d},[n,l]);return e.jsxs(e.Fragment,{children:[e.jsx(N,{gap:1,className:"topnotifications",children:m}),h,c]})},dd=i=>{const{type:t=-1,amount:s=-1,short:n=!1}=i,a=o.useMemo(()=>e.jsxs(P,{gap:1,className:`nitro-purse-button rounded allcurrencypurse nitro-purse-button currency-${t}`,variant:"f-grey",onClick:()=>Q("catalog/open/currency-"+t),children:[e.jsx(C,{truncate:!0,bold:!0,textEnd:!0,variant:"white",grow:!0,children:n?jC(s):$a(s)}),e.jsx(Nt,{type:t})]}),[s,n,t]);return n?e.jsx(Nm,{placement:"top",overlay:e.jsxs(JE,{id:`tooltip-${t}`,children:[" ",$a(s)," "]}),children:a}):a},LR=i=>{const{type:t=-1,amount:s=-1}=i;return e.jsx(_,{fullWidth:!0,justifyContent:"between",className:"nitro-purse-seasonal-currency nitro-notification "+K("currency.seasonal.color"),children:e.jsxs(_,{fullWidth:!0,children:[e.jsx(C,{bold:!0,truncate:!0,fullWidth:!0,variant:"white",className:"seasonal-padding seasonal-bold",children:u(`purse.seasonal.currency.${t}`)}),e.jsx(C,{bold:!0,truncate:!0,variant:"white",className:"seasonal-amount text-end",title:s>99999?$a(s):"",children:s>99999?"99 999":$a(s)}),e.jsx(_,{className:"nitro-seasonal-box seasonal-padding",children:e.jsx(Nt,{type:t})})]})})},MR=i=>{const{purse:t=null,hcDisabled:s=!1}=Lr(),n=o.useMemo(()=>K("system.currency.types",[]),[]),a=o.useMemo(()=>K("currency.display.number.short",!1),[]),r=(()=>{if(!t)return null;const c=t.clubPeriods*31+t.clubDays,m=t.minutesUntilExpiration;return t.clubLevel===zt.NO_CLUB?u("purse.clubdays.zero.amount.text"):m>-1&&m<60*24?Xs.shortFormat(m*60):Xs.shortFormat(c*86400)})(),l=(c,m=-1,h=!1)=>{if(!t||!t.activityPoints||!t.activityPoints.size)return null;const d=Array.from(t.activityPoints.keys()).filter(j=>n.indexOf(j)>=0);let g=0;for(;g<c;)d.shift(),g++;g=0;const f=[];for(const j of d){if(m>-1&&g===m)break;h?f.push(e.jsx(LR,{type:j,amount:t.activityPoints.get(j)},j)):f.push(e.jsx(dd,{type:j,amount:t.activityPoints.get(j),short:a},j)),g++}return f};return t?e.jsxs(N,{alignItems:"end",className:"nitro-purse-container",gap:1,children:[e.jsx(_,{className:"nitro-purse rounded-bottom p-1",children:e.jsxs(te,{fullWidth:!0,gap:1,children:[e.jsxs(N,{justifyContent:"center",size:s?10:6,gap:0,children:[e.jsx(dd,{type:-1,amount:t.credits,short:a}),l(0,2)]}),!s&&e.jsxs(N,{center:!0,pointer:!0,size:4,gap:1,className:"nitro-purse-subscription rounded borderhccontent",onClick:c=>Q("habboUI/open/hccenter"),children:[e.jsx(Nt,{type:"hc"}),e.jsx(C,{variant:"white",children:r})]}),e.jsxs(N,{justifyContent:"center",size:2,gap:0,children:[e.jsx(_,{center:!0,pointer:!0,fullHeight:!0,className:"nitro-purse-button p-1 rounded coffecurrencybutton",onClick:c=>Q("help/show"),children:e.jsx("i",{className:"icon icon-help"})}),e.jsx(_,{center:!0,pointer:!0,fullHeight:!0,className:"nitro-purse-button p-1 rounded coffecurrencybutton",onClick:c=>Q("user-settings/toggle"),children:e.jsx("i",{className:"icon icon-cog"})})]})]})}),l(2,-1,!0)]}):null},UR={purple:9452386,blue:3891856,green:6459451,yellow:10658089,lilac:6897548,orange:10841125,turquoise:2661026,red:10104881},FR=i=>{const[t,s]=o.useState(!0),[n,a]=o.useState(""),[r,l]=o.useState("");_N(ZE.MYSTERY_BOX_KEYS_UPDATE,m=>{a(m.keyColor),l(m.boxColor)});const c=m=>{const h=UR[m];return ls.int2rgb(h)};return n===""&&r===""?null:e.jsx(A,{className:"nitro-notification-bubble rounded mysterybox-extension",children:e.jsxs(N,{children:[e.jsxs(_,{alignItems:"center",justifyContent:"between",pointer:!0,onClick:m=>s(h=>!h),children:[e.jsx(C,{variant:"white",children:u("mysterybox.tracker.title")}),t&&e.jsx(hc,{className:"fa-icon"}),!t&&e.jsx(gc,{className:"fa-icon"})]}),t&&e.jsxs(e.Fragment,{children:[e.jsx(C,{variant:"white",children:u("mysterybox.tracker.description")}),e.jsxs(_,{justifyContent:"center",alignItems:"center",gap:2,children:[e.jsx(Ce,{className:"mysterybox-container",children:e.jsx("div",{className:"box-image flex-shrink-0",style:{backgroundColor:c(r)},children:e.jsx("div",{className:"chain-overlay-image"})})}),e.jsx(Ce,{className:"mysterybox-container",children:e.jsx("div",{className:"key-image flex-shrink-0",style:{backgroundColor:c(n)},children:e.jsx("div",{className:"key-overlay-image"})})})]})]})]})})},VR=i=>{const{eventId:t=-1,eventName:s="",eventDescription:n="",setIsEditingPromote:a=null}=i,[r,l]=o.useState(s),[c,m]=o.useState(n),h=()=>{D(new eb(t,r,c)),a(!1)};return e.jsxs(ne,{className:"nitro-guide-tool",theme:"primary-slim",children:[e.jsx(se,{headerText:u("navigator.eventsettings.editcaption"),onCloseClick:()=>a(!1)}),e.jsxs(ee,{className:"text-black",children:[e.jsxs(N,{children:[e.jsx(C,{bold:!0,children:u("navigator.eventsettings.name")}),e.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:u("navigator.eventsettings.name"),maxLength:64,value:r,onChange:d=>l(d.target.value)})]}),e.jsxs(N,{children:[e.jsx(C,{bold:!0,children:u("navigator.eventsettings.desc")}),e.jsx("textarea",{className:"form-control form-control-sm",placeholder:u("navigator.eventsettings.desc"),maxLength:64,value:c,onChange:d=>m(d.target.value)})]}),e.jsx(N,{children:e.jsx(P,{fullWidth:!0,disabled:!r||!c,variant:!r||!c?"danger":"success",onClick:d=>h(),children:u("navigator.eventsettings.edit")})})]})]})},GR=i=>{const{eventDescription:t="",setIsEditingPromote:s=null}=i,{setIsExtended:n}=Ac(),a=()=>{n(!0),Q("catalog/open/room_event")};return e.jsxs(e.Fragment,{children:[e.jsx(_,{alignItems:"center",gap:2,style:{overflowWrap:"anywhere"},children:e.jsx(C,{variant:"white",children:t})}),e.jsx("br",{}),e.jsx("br",{}),e.jsxs(te,{className:"d-flex align-items-center justify-content-end gap-2",children:[e.jsx(P,{className:"btn btn-primary w-100 btn-sm",onClick:r=>s(!0),children:u("navigator.roominfo.editevent")}),e.jsx(P,{className:"btn btn-success w-100 btn-sm",onClick:r=>a(),children:u("roomad.extend.event")})]})]})},BR=i=>{const{eventDescription:t=""}=i;return e.jsxs(e.Fragment,{children:[e.jsx(_,{alignItems:"center",gap:2,style:{overflowWrap:"anywhere"},children:e.jsx(C,{variant:"white",children:t})}),e.jsx("br",{}),e.jsx("br",{}),e.jsx(N,{alignItems:"center",gap:1,children:e.jsxs(A,{fullWidth:!0,overflow:"hidden",position:"relative",className:"bg-light-dark rounded",children:[e.jsx(_,{fit:!0,center:!0,position:"absolute",children:e.jsx(C,{variant:"white",center:!0,children:u("navigator.eventinprogress")})}),e.jsx(C,{children:""})]})})]})},HR=i=>{const[t,s]=o.useState(!1),[n,a]=o.useState(!0),{promoteInformation:r,setPromoteInformation:l}=Ac();return M(Rm,c=>{l(null)}),r?e.jsx(e.Fragment,{children:r.data.adId!==-1&&e.jsx(A,{className:"nitro-notification-bubble rounded",children:e.jsxs(N,{children:[e.jsxs(_,{alignItems:"center",justifyContent:"between",pointer:!0,onClick:c=>a(m=>!m),children:[e.jsx(C,{variant:"white",overflow:"hidden",children:r.data.eventName}),n&&e.jsx(hc,{className:"fa-icon"}),!n&&e.jsx(gc,{className:"fa-icon"})]}),n&&V().userId!==r.data.ownerAvatarId&&e.jsx(BR,{eventDescription:r.data.eventDescription}),n&&V().userId===r.data.ownerAvatarId&&e.jsx(GR,{eventDescription:r.data.eventDescription,setIsEditingPromote:()=>s(!0)}),t&&e.jsx(VR,{eventId:r.data.adId,eventName:r.data.eventName,eventDescription:r.data.eventDescription,setIsEditingPromote:()=>s(!1)})]})})}):null},WR=i=>e.jsx("div",{className:"nitro-right-side",children:e.jsxs(N,{position:"relative",gap:1,children:[e.jsx(MR,{}),e.jsx(_R,{}),e.jsx(FR,{}),e.jsx(vR,{}),e.jsx(HR,{}),e.jsx(PR,{})]})}),qR=i=>e.jsx("div",{className:"room-spectator"}),zR=i=>{const[t,s]=o.useState(null),[n,a]=o.useState(null),{chatStyleId:r=0}=Fn(),{roomSession:l=null}=Re();M(tb,m=>{const h=m.getParser();if(!h)return;const d=l.userDataManager.getPetData(h.petId);d&&(s(d),a(h))});const c=(m,h)=>{!m||!h||l==null||l.sendChatMessage(`${m} ${h}`,r)};return!t||!n?null:e.jsxs(ne,{uniqueKey:"user-settings",className:"user-settings-window no-resize",theme:"primary-slim",children:[e.jsx(se,{headerText:u("widgets.pet.commands.title"),onCloseClick:()=>a(null)}),e.jsxs(ee,{className:"text-black",children:[e.jsx(_,{alignItems:"center",justifyContent:"center",gap:2,children:e.jsxs(te,{columnCount:2,children:[e.jsx(N,{fullWidth:!0,overflow:"hidden",className:"body-image pet p-1",children:e.jsx(mn,{figure:t.figure,posture:"std",direction:2})}),e.jsx(C,{variant:"black",small:!0,wrap:!0,children:t.name})]})}),e.jsx(te,{columnCount:2,children:n.commands&&n.commands.length>0&&n.commands.map((m,h)=>e.jsx(P,{disabled:!n.enabledCommands.includes(m),onClick:()=>c(t.name,u(`pet.command.${m}`)),children:u(`pet.command.${m}`)},h))})]})]})},es=i=>{const{justifyContent:t="center",alignItems:s="center",classNames:n=[],...a}=i,r=o.useMemo(()=>{const l=["menu-header","p-1"];return n.length&&l.push(...n),l},[n]);return e.jsx(_,{justifyContent:t,alignItems:s,classNames:r,...a})},YR=i=>{const{chatEvent:t=null,onClose:s=null}=i,[n,a]=o.useState(t.chat==="${bot.skill.chatter.configuration.text.placeholder}"?"":t.chat),[r,l]=o.useState(t.automaticChat),[c,m]=o.useState(t.mixSentences),[h,d]=o.useState(t.chatDelay),g=o.useMemo(()=>xc(ve().roomId,t.objectId,t.category,1),[t]),f=p=>p.replace(/;#;/g," ").replace(/\r\n|\r|\n/g,"\r"),j=()=>{const p=f(n)+";#;"+r+";#;"+h+";#;"+c;D(new wn(t.botId,We.SETUP_CHAT,p)),s()};return e.jsx(rr,{windowPosition:Ft.NOTHING,handleSelector:".drag-handler",dragStyle:{top:g.y,left:g.x},children:e.jsxs(A,{className:"nitro-context-menu bot-chat",children:[e.jsx(es,{className:"drag-handler",children:u("bot.skill.chatter.configuration.title")}),e.jsxs(N,{className:"p-1",children:[e.jsxs(N,{gap:1,children:[e.jsx(C,{variant:"white",children:u("bot.skill.chatter.configuration.chat.text")}),e.jsx("textarea",{className:"form-control form-control-sm",placeholder:u("bot.skill.chatter.configuration.text.placeholder"),value:n,rows:7,onChange:p=>a(p.target.value)})]}),e.jsxs(N,{gap:1,children:[e.jsxs(_,{gap:1,alignItems:"center",justifyContent:"between",children:[e.jsx(C,{fullWidth:!0,variant:"white",children:u("bot.skill.chatter.configuration.automatic.chat")}),e.jsx("input",{type:"checkbox",className:"form-check-input",checked:r,onChange:p=>l(p.target.checked)})]}),e.jsxs(_,{gap:1,alignItems:"center",justifyContent:"between",children:[e.jsx(C,{fullWidth:!0,variant:"white",children:u("bot.skill.chatter.configuration.markov")}),e.jsx("input",{type:"checkbox",className:"form-check-input",checked:c,onChange:p=>m(p.target.checked)})]}),e.jsxs(_,{gap:1,alignItems:"center",justifyContent:"between",children:[e.jsx(C,{fullWidth:!0,variant:"white",children:u("bot.skill.chatter.configuration.chat.delay")}),e.jsx("input",{type:"number",className:"form-control form-control-sm",value:h,onChange:p=>d(p.target.valueAsNumber)})]})]}),e.jsxs(_,{alignItems:"center",justifyContent:"between",gap:1,children:[e.jsx(P,{fullWidth:!0,variant:"primary",onClick:s,children:u("cancel")}),e.jsx(P,{fullWidth:!0,variant:"success",onClick:j,children:u("save")})]})]})]})})},md=-1,hd=0,gd=1,fd=2,pd=3,xd=4,jd=5,Id=6,$R=i=>{const{item:t=null,onClose:s=null}=i,[n,a]=o.useState(md),[r,l]=o.useState(null),[c,m]=o.useState(null),{roomSession:h=null}=Re(),d=()=>{r&&W().selectRoomObject(h.roomId,r.roomIndex,X.UNIT)},g=()=>{h.usePetProduct(t.requestRoomObjectId,r.webID),s()},f=o.useMemo(()=>{if(!r||!c)return null;const j=new ra(r.figure),p=c.customParams.split(" "),I=parseInt(p[0]);switch(c.specialType){case ce.PET_SHAMPOO:{if(p.length<2)return null;const x=W().getPetColorResult(I,j.paletteId),E=W().getPetColorResultsForTag(I,p[1]);let v=-1;for(const b of E)if(b.breed===x.breed){v=parseInt(b.id);break}return e.jsx(mn,{typeId:j.typeId,paletteId:v,petColor:j.color,customParts:j.customParts,direction:2})}case ce.PET_CUSTOM_PART:{if(p.length<4)return null;const x=[],E=p[1].split(",").map(S=>parseInt(S)),v=p[2].split(",").map(S=>parseInt(S)),b=p[3].split(",").map(S=>parseInt(S));let w=0;for(;w<E.length;){const S=E[w],T=j.getCustomPart(S);let L=b[w];T!=null&&(L=T.paletteId),x.push(new ol(S,v[w],L)),w++}return e.jsx(mn,{typeId:j.typeId,paletteId:j.paletteId,petColor:j.color,customParts:x,direction:2})}case ce.PET_CUSTOM_PART_SHAMPOO:{if(p.length<3)return null;const x=[],E=p[1].split(",").map(w=>parseInt(w)),v=p[2].split(",").map(w=>parseInt(w));let b=0;for(;b<E.length;){const w=E[b],S=j.getCustomPart(w);let T=-1;S!=null&&(T=S.partId),x.push(new ol(E[b],T,v[b])),b++}return e.jsx(mn,{typeId:j.typeId,paletteId:j.paletteId,petColor:j.color,customParts:x,direction:2})}case ce.PET_SADDLE:{if(p.length<4)return null;const x=[],E=p[1].split(",").map(S=>parseInt(S)),v=p[2].split(",").map(S=>parseInt(S)),b=p[3].split(",").map(S=>parseInt(S));let w=0;for(;w<E.length;)x.push(new ol(E[w],v[w],b[w])),w++;for(const S of j.customParts)E.indexOf(S.layerId)===-1&&x.push(S);return e.jsx(mn,{typeId:j.typeId,paletteId:j.paletteId,petColor:j.color,customParts:x,direction:2})}case ce.MONSTERPLANT_REBREED:case ce.MONSTERPLANT_REVIVAL:case ce.MONSTERPLANT_FERTILIZE:{let x="rip";const E=W().getRoomObject(h.roomId,r.roomIndex,X.UNIT);if(E&&(x=E.model.getValue(Z.FIGURE_POSTURE),x==="rip")){const v=r.petLevel;v<7?x=`grw${v}`:x="std"}return e.jsx(mn,{typeId:j.typeId,paletteId:j.paletteId,petColor:j.color,customParts:j.customParts,posture:x,direction:2})}}},[r,c,h]);return o.useEffect(()=>{const j=h.userDataManager.getUserDataByIndex(t.id);l(j);const p=Uo(h.roomId,t.requestRoomObjectId,X.FLOOR);if(!p)return;m(p);let I=md;switch(p.specialType){case ce.PET_SHAMPOO:I=hd;break;case ce.PET_CUSTOM_PART:I=gd;break;case ce.PET_CUSTOM_PART_SHAMPOO:I=fd;break;case ce.PET_SADDLE:I=pd;break;case ce.MONSTERPLANT_REVIVAL:I=xd;break;case ce.MONSTERPLANT_REBREED:I=jd;break;case ce.MONSTERPLANT_FERTILIZE:I=Id;break}a(I)},[h,t]),r?e.jsxs(ne,{className:"nitro-use-product-confirmation",children:[e.jsx(se,{headerText:u("useproduct.widget.title",["name"],[r.name]),onCloseClick:s}),e.jsx(ee,{center:!0,children:e.jsxs(_,{gap:2,overflow:"hidden",children:[e.jsx(N,{children:e.jsx(A,{pointer:!0,className:"product-preview",onClick:d,children:f})}),e.jsxs(N,{justifyContent:"between",overflow:"auto",children:[e.jsxs(N,{gap:2,children:[n===hd&&e.jsxs(e.Fragment,{children:[e.jsx(C,{children:u("useproduct.widget.text.shampoo",["productName"],[c.name])}),e.jsx(C,{children:u("useproduct.widget.info.shampoo")})]}),n===gd&&e.jsxs(e.Fragment,{children:[e.jsx(C,{children:u("useproduct.widget.text.custompart",["productName"],[c.name])}),e.jsx(C,{children:u("useproduct.widget.info.custompart")})]}),n===fd&&e.jsxs(e.Fragment,{children:[e.jsx(C,{children:u("useproduct.widget.text.custompartshampoo",["productName"],[c.name])}),e.jsx(C,{children:u("useproduct.widget.info.custompartshampoo")})]}),n===pd&&e.jsxs(e.Fragment,{children:[e.jsx(C,{children:u("useproduct.widget.text.saddle",["productName"],[c.name])}),e.jsx(C,{children:u("useproduct.widget.info.saddle")})]}),n===xd&&e.jsxs(e.Fragment,{children:[e.jsx(C,{children:u("useproduct.widget.text.revive_monsterplant",["productName"],[c.name])}),e.jsx(C,{children:u("useproduct.widget.info.revive_monsterplant")})]}),n===jd&&e.jsxs(e.Fragment,{children:[e.jsx(C,{children:u("useproduct.widget.text.rebreed_monsterplant",["productName"],[c.name])}),e.jsx(C,{children:u("useproduct.widget.info.rebreed_monsterplant")})]}),n===Id&&e.jsxs(e.Fragment,{children:[e.jsx(C,{children:u("useproduct.widget.text.fertilize_monsterplant",["productName"],[c.name])}),e.jsx(C,{children:u("useproduct.widget.info.fertilize_monsterplant")})]})]}),e.jsxs(_,{alignItems:"center",justifyContent:"between",children:[e.jsx(P,{variant:"danger",onClick:s,children:u("useproduct.widget.cancel")}),e.jsx(P,{variant:"success",onClick:g,children:u("useproduct.widget.use")})]})]})]})})]}):null},H=i=>{const{disabled:t=!1,fullWidth:s=!0,justifyContent:n="center",alignItems:a="center",classNames:r=[],onClick:l=null,...c}=i,m=d=>{t||l&&l(d)},h=o.useMemo(()=>{const d=["menu-item","list-item"];return t&&d.push("disabled"),r.length&&d.push(...r),d},[t,r]);return e.jsx(_,{fullWidth:s,justifyContent:n,alignItems:a,classNames:h,onClick:m,...c})},KR=i=>{const{justifyContent:t="center",alignItems:s="center",classNames:n=[],collapsed:a=!0,...r}=i,l=o.useMemo(()=>{const c=["menu-footer"];return n.length&&c.push(...n),c},[n]);return e.jsxs(_,{justifyContent:t,alignItems:s,classNames:l,...r,children:[!a&&e.jsx(ic,{className:"fa-icon align-self-center"}),a&&e.jsx(ac,{className:"fa-icon align-self-center"})]})},XR=25,Ed=3,QR=5e3,JR=75,Vr=10;let El=!1,Ui=null,Fi=-1e6,bl=1;const vn=i=>{const{objectId:t=-1,category:s=-1,userType:n=-1,fades:a=!1,onClose:r=null,position:l="absolute",classNames:c=[],style:m={},children:h=null,collapsable:d=!1,...g}=i,[f,j]=o.useState({x:null,y:null}),[p,I]=o.useState(1),[x,E]=o.useState(!1),[v,b]=o.useState(El),w=o.useRef(),S=o.useCallback(y=>{if(!x)return;bl+=y;let R=(1-bl/JR)*1;if(R<=0)return r(),!1;I(R)},[x,r]),T=o.useCallback((y,R)=>{if(!y||!R||!Ui)return;let O=-w.current.offsetHeight;n>-1&&(n===lt.USER||n===lt.BOT||n===lt.RENTABLE_BOT)?O=O+(y.height>50?15:0):O=O-14,Ui.addValue(R.y-y.top);let F=Ui.getMax();F<Fi-Ed&&(F=Fi-Ed),Fi=F;const U=R.y-F;let q=~~(R.x-w.current.offsetWidth/2),$=~~(U+O);const G=pe().width-w.current.offsetWidth-Vr,re=pe().height-w.current.offsetHeight-Vr;q<Vr?q=Vr:q>G&&(q=G),$<Vr?$=Vr:$>re&&($=re),j({x:q,y:$})},[n]),L=o.useMemo(()=>{const y=["nitro-context-menu"];return v&&y.push("menu-hidden"),y.push(f.x!==null?"visible":"invisible"),c.length&&y.push(...c),y},[f,c,v]),k=o.useMemo(()=>{let y={};return y.left=f.x||0,y.top=f.y||0,y.opacity=p,Object.keys(m).length&&(y={...y,...m}),y},[f,p,m]);return o.useEffect(()=>{if(!w.current)return;const y=R=>{if(!w.current)return;S(R);const O=xc(ve().roomId,t,s),F=Mm(ve().roomId,t,s);T(O,F)};return Ln().add(y),()=>{Ln().remove(y)}},[t,s,S,T]),o.useEffect(()=>{if(!a)return;const y=setTimeout(()=>E(!0),QR);return()=>clearTimeout(y)},[a]),o.useEffect(()=>{El=v},[v]),o.useEffect(()=>{Ui=new sb(XR),Fi=-1e6,bl=1},[]),e.jsxs(A,{innerRef:w,position:l,classNames:L,style:k,...g,children:[!(d&&El)&&h,d&&e.jsx(KR,{onClick:()=>b(!v),collapsed:v})]})},bd=0,Cd=1,Nd=2,vd=3,_d=4,Sd=5,wd=6,Td=7,ZR=i=>{const{item:t=null,updateConfirmingProduct:s=null,onClose:n=null}=i,[a,r]=o.useState(0),{roomSession:l=null}=Re(),c=m=>{if(m)switch(m){case"use_product":case"use_product_shampoo":case"use_product_custom_part":case"use_product_custom_part_shampoo":case"use_product_saddle":case"replace_product_saddle":case"revive_monsterplant":case"rebreed_monsterplant":case"fertilize_monsterplant":s(t);break}};return o.useEffect(()=>{if(!t)return;const m=Uo(l.roomId,t.requestRoomObjectId,X.FLOOR);if(!m)return;let h=bd;switch(m.specialType){case ce.PET_SHAMPOO:h=Cd;break;case ce.PET_CUSTOM_PART:h=Nd;break;case ce.PET_CUSTOM_PART_SHAMPOO:h=vd;break;case ce.PET_SADDLE:h=_d;break;case ce.MONSTERPLANT_REVIVAL:h=Sd;break;case ce.MONSTERPLANT_REBREED:h=wd;break;case ce.MONSTERPLANT_FERTILIZE:h=Td;break}r(h)},[l,t]),e.jsxs(vn,{objectId:t.id,category:X.UNIT,userType:lt.PET,onClose:n,collapsable:!0,children:[e.jsx(es,{children:t.name}),a===bd&&e.jsx(H,{onClick:m=>c("use_product"),children:u("infostand.button.useproduct")}),a===Cd&&e.jsx(H,{onClick:m=>c("use_product_shampoo"),children:u("infostand.button.useproduct_shampoo")}),a===Nd&&e.jsx(H,{onClick:m=>c("use_product_custom_part"),children:u("infostand.button.useproduct_custom_part")}),a===vd&&e.jsx(H,{onClick:m=>c("use_product_custom_part_shampoo"),children:u("infostand.button.useproduct_custom_part_shampoo")}),a===_d&&e.jsxs(e.Fragment,{children:[t.replace&&e.jsx(H,{onClick:m=>c("replace_product_saddle"),children:u("infostand.button.replaceproduct_saddle")}),!t.replace&&e.jsx(H,{onClick:m=>c("use_product_saddle"),children:u("infostand.button.useproduct_saddle")})]}),a===Sd&&e.jsx(H,{onClick:m=>c("revive_monsterplant"),children:u("infostand.button.revive_monsterplant")}),a===wd&&e.jsx(H,{onClick:m=>c("rebreed_monsterplant"),children:u("infostand.button.rebreed_monsterplant")}),a===Td&&e.jsx(H,{onClick:m=>c("fertilize_monsterplant"),children:u("infostand.button.fertilize_monsterplant")})]})},ey=i=>{const{avatarInfo:t=null,onClose:s=null}=i;return t?e.jsx(N,{className:"nitro-infostand rounded",children:e.jsxs(N,{overflow:"visible",className:"container-fluid content-area",gap:1,children:[e.jsxs(N,{gap:1,children:[e.jsxs(_,{alignItems:"center",justifyContent:"between",gap:1,children:[e.jsx(C,{variant:"white",small:!0,wrap:!0,children:t.name}),e.jsx(Us,{className:"cursor-pointer fa-icon",onClick:s})]}),e.jsx("hr",{className:"m-0"})]}),e.jsxs(N,{gap:1,children:[e.jsxs(_,{gap:1,children:[e.jsx(N,{fullWidth:!0,className:"body-image bot",children:e.jsx(tt,{figure:t.figure,direction:4})}),e.jsx(N,{grow:!0,center:!0,gap:0,children:t.badges.length>0&&t.badges.map(n=>e.jsx(ze,{badgeCode:n,showInfo:!0},n))})]}),e.jsx("hr",{className:"m-0"})]}),e.jsx(_,{alignItems:"center",className:"bg-light-dark rounded py-1 px-2",children:e.jsx(C,{fullWidth:!0,wrap:!0,textBreak:!0,variant:"white",small:!0,className:"motto-content",children:t.motto})}),t.carryItem>0&&e.jsxs(N,{gap:1,children:[e.jsx("hr",{className:"m-0"}),e.jsx(C,{variant:"white",small:!0,wrap:!0,children:u("infostand.text.handitem",["item"],[u("handitem"+t.carryItem)])})]})]})}):null},Cl=0,Rd=1,yd=2,ty=i=>{const{avatarInfo:t=null,onClose:s=null}=i,{roomSession:n=null}=Re(),[a,r]=o.useState(0),[l,c]=o.useState(!1),[m,h]=o.useState(!1),[d,g]=o.useState(!1),[f,j]=o.useState([]),[p,I]=o.useState([]),[x,E]=o.useState([]),[v,b]=o.useState([]),[w,S]=o.useState(!1),[T,L]=o.useState(0),[k,y]=o.useState(0),[R,O]=o.useState(!1),[F,U]=o.useState(!1),[q,$]=o.useState(null),[G,re]=o.useState(!1),[Le,Ye]=o.useState(!1),[jt,ds]=o.useState(-1),[ye,Dt]=o.useState(""),[Se,ms]=o.useState(""),[ue,de]=o.useState({x:-1,y:-1,z:-1});pr(cm.NPE_SONG_CHANGED,fe=>{ds(fe.id)},G||Le),pr(rb.SIR_TRAX_SONG_INFO_RECEIVED,fe=>{if(fe.id!==jt)return;const Te=pe().soundManager.musicController.getSongInfo(fe.id);Te&&(Dt(Te.name),ms(Te.creator))},G||Le),o.useEffect(()=>{let fe=Cl,Te=!1,st=!1,he=!1,De=[],Be=[],Yt=[],gi=[],ha=!1,ga=0,or=0,Gn=!1,fa=!1,lr=!1,pa=!1,Bn=-1;const cr=W().getRoomObject(n.roomId,t.id,t.isWallItem?X.WALL:X.FLOOR).getLocation();cr&&de({x:cr.x,y:cr.y,z:cr.z});const ur=t.roomControllerLevel>=qe.GUEST;if((ur||t.isOwner||t.isRoomOwner||t.isAnyRoomController)&&(Te=!0,st=!t.isWallItem,t.roomControllerLevel>=qe.MODERATOR&&(Gn=!0)),t.isAnyRoomController&&(fa=!0),(t.usagePolicy===du.EVERYBODY||t.usagePolicy===du.CONTROLLER&&ur||t.extraParam===Tn.JUKEBOX&&ur||t.extraParam===Tn.USABLE_PRODUCT&&ur)&&(he=!0),t.extraParam){if(t.extraParam===Tn.CRACKABLE_FURNI){const hs=t.stuffData;he=!0,ha=!0,ga=hs.hits,or=hs.target}else if(t.extraParam===Tn.JUKEBOX){const hs=pe().soundManager.musicController.getRoomItemPlaylist();hs&&(Bn=hs.nowPlayingSongId),lr=!0}else t.extraParam.indexOf(Tn.SONGDISK)===0&&(Bn=parseInt(t.extraParam.substr(Tn.SONGDISK.length)),pa=!0);if(Gn){const hs=t.extraParam.substr(Tn.BRANDING_OPTIONS.length);if(hs){const rs=hs.split("	");for(const _n of rs){const Bs=_n.split("=");Bs&&Bs.length===2&&(De.push(Bs[0]),Be.push(Bs[1]))}}}}if(Gn){const hs=W().getRoomObject(n.roomId,t.id,t.isWallItem?X.WALL:X.FLOOR);if(hs){const rs=hs.model.getValue(Z.FURNITURE_CUSTOM_VARIABLES),_n=hs.model.getValue(Z.FURNITURE_DATA);if(rs&&rs.length)for(const Bs of rs)Yt.push(Bs),gi.push(_n[Bs]||"")}}t.isOwner||t.isAnyRoomController?fe=yd:(t.isRoomOwner||t.roomControllerLevel>=qe.GUILD_ADMIN)&&(fe=Rd),t.isStickie&&(fe=Cl),r(fe),c(Te),h(st),g(he),j(De),I(Be),E(Yt),b(gi),S(ha),L(ga),y(or),O(Gn),U(fa),$(null),re(lr),Ye(pa),ds(Bn),t.groupId&&D(new Ba(t.groupId,!1))},[n,t]),M(ai,fe=>{const Te=fe.getParser();!t||t.groupId!==Te.id||Te.flag||(q&&$(null),$(Te.title))}),o.useEffect(()=>{const fe=pe().soundManager.musicController.getSongInfo(jt);Dt((fe==null?void 0:fe.name)??""),ms((fe==null?void 0:fe.creator)??"")},[jt]);const le=o.useCallback((fe,Te)=>{const st=Array.from(p);st[fe]=Te,I(st)},[p]),we=o.useCallback((fe,Te)=>{const st=Array.from(v);st[fe]=Te,b(st)},[v]),kt=o.useCallback(()=>{if(f.length===0||p.length===0)return"";let fe="",Te=0;for(;Te<f.length;){const st=f[Te],he=p[Te];fe=fe+(st+"="+he+"	"),Te++}return fe},[f,p]),_t=o.useCallback(fe=>{if(!(!fe||fe===""))switch(fe){case"buy_one":Q(`catalog/open/offerId/${t.purchaseOfferId}`);return;case"move":W().processRoomObjectOperation(t.id,t.category,Ms.OBJECT_MOVE);break;case"rotate":W().processRoomObjectOperation(t.id,t.category,Ms.OBJECT_ROTATE_POSITIVE);break;case"pickup":a===yd?W().processRoomObjectOperation(t.id,t.category,Ms.OBJECT_PICKUP):W().processRoomObjectOperation(t.id,t.category,Ms.OBJECT_EJECT);break;case"use":W().useRoomObject(t.id,t.category);break;case"save_branding_configuration":{const Te=new Map,st=kt().split("	");if(st)for(const he of st){const[De,Be]=he.split("=",2);Te.set(De,Be)}W().modifyRoomObjectDataWithMap(t.id,t.category,Ms.OBJECT_SAVE_STUFF_DATA,Te);break}case"save_custom_variables":{const Te=new Map;for(let st=0;st<x.length;st++){const he=x[st],De=v[st];he&&he.length&&De&&De.length&&Te.set(he,De)}D(new nb(t.id,Te));break}}},[t,a,x,v,kt]),Gs=o.useCallback(()=>{const fe=t.stuffData;return!fe||!(fe instanceof ri)?null:fe.getValue(2)},[t]);return t?e.jsxs(N,{gap:1,alignItems:"end",children:[e.jsx(N,{className:"nitro-infostand",children:e.jsxs(N,{overflow:"visible",className:"container-fluid content-area",gap:1,children:[e.jsxs(N,{gap:1,children:[e.jsxs(_,{alignItems:"center",justifyContent:"between",gap:1,children:[!Le&&e.jsx(C,{variant:"white",wrap:!0,children:t.name}),ye.length>0&&e.jsx(C,{variant:"white",wrap:!0,children:ye}),e.jsx("i",{className:"infostand-close",onClick:s})]}),e.jsx("hr",{className:"m-0"})]}),e.jsxs(N,{gap:1,children:[e.jsxs(_,{position:"relative",gap:1,children:[t.stuffData.isUnique&&e.jsx("div",{className:"position-absolute end-0",children:e.jsx(sh,{uniqueNumber:t.stuffData.uniqueNumber,uniqueSeries:t.stuffData.uniqueSeries})}),t.stuffData.rarityLevel>-1&&e.jsx("div",{className:"position-absolute end-0",children:e.jsx(yc,{level:t.stuffData.rarityLevel})}),t.image&&t.image.src.length&&e.jsx("img",{className:"d-block mx-auto",src:t.image.src,alt:""})]}),e.jsx("hr",{className:"m-0"})]}),e.jsxs(N,{gap:1,children:[e.jsx(C,{fullWidth:!0,wrap:!0,textBreak:!0,variant:"white",children:t.description}),e.jsx("hr",{className:"m-0"})]}),e.jsxs(N,{gap:1,children:[e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx(xs,{userId:t.ownerId}),e.jsx(C,{variant:"white",wrap:!0,children:u("furni.owner",["name"],[t.ownerName])})]}),t.purchaseOfferId>0&&e.jsx(_,{children:e.jsx(P,{className:"volter-button",onClick:fe=>_t("buy_one"),children:u("infostand.button.buy")})})]}),(G||Le)&&e.jsxs(N,{gap:1,children:[e.jsx("hr",{className:"m-0"}),jt===-1&&e.jsx(C,{variant:"white",small:!0,wrap:!0,children:u("infostand.jukebox.text.not.playing")}),!!ye.length&&e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx(A,{className:"icon disk-icon"}),e.jsx(C,{variant:"white",small:!0,wrap:!0,children:ye})]}),!!Se.length&&e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx(A,{className:"icon disk-creator"}),e.jsx(C,{variant:"white",small:!0,wrap:!0,children:Se})]})]}),e.jsxs(N,{gap:1,children:[w&&e.jsxs(e.Fragment,{children:[e.jsx("hr",{className:"m-0"}),e.jsx(C,{variant:"white",wrap:!0,children:u("infostand.crackable_furni.hits_remaining",["hits","target"],[T.toString(),k.toString()])})]}),t.groupId>0&&e.jsxs(e.Fragment,{children:[e.jsx("hr",{className:"m-0"}),e.jsxs(_,{pointer:!0,alignItems:"center",gap:2,onClick:()=>oi(t.groupId),children:[e.jsx(ze,{badgeCode:Gs(),isGroup:!0}),e.jsx(C,{variant:"white",underline:!0,children:q})]})]}),e.jsxs(e.Fragment,{children:[e.jsx("hr",{className:"m-0"}),e.jsxs(C,{small:!0,wrap:!0,variant:"white",children:["X = ",ue.x,"  and  Y = ",ue.y,e.jsx("br",{}),"BuildHeight = ",ue.z<.01?0:ue.z,e.jsx("br",{}),F&&e.jsxs(C,{wrap:!0,variant:"white",children:[" Room Furnishing ID: ",t.id]})]})]}),ue.x>-1,R&&e.jsxs(e.Fragment,{children:[e.jsx("hr",{className:"m-0"}),f.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("hr",{className:"m-0"}),e.jsx(N,{gap:1,children:f.map((fe,Te)=>e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx(C,{wrap:!0,align:"end",variant:"white",className:"col-4",children:fe}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:p[Te],onChange:st=>le(Te,st.target.value)})]},Te))})]})]}),x.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("hr",{className:"m-0 my-1"}),e.jsx(N,{gap:1,children:x.map((fe,Te)=>e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx(C,{small:!0,wrap:!0,align:"end",variant:"white",className:"col-4",children:fe}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:v[Te],onChange:st=>we(Te,st.target.value)})]},Te))})]})]})]})}),e.jsxs(_,{gap:2,justifyContent:"end",children:[l&&e.jsx(P,{className:"infostand-buttons px-2",onClick:fe=>_t("move"),children:u("infostand.button.move")}),m&&e.jsx(P,{className:"infostand-buttons px-2",onClick:fe=>_t("rotate"),children:u("infostand.button.rotate")}),a!==Cl&&e.jsx(P,{className:"infostand-buttons px-2",onClick:fe=>_t("pickup"),children:u(a===Rd?"infostand.button.eject":"infostand.button.pickup")}),d&&e.jsx(P,{className:"infostand-buttons px-2",onClick:fe=>_t("use"),children:u("infostand.button.use")}),f.length>0&&p.length>0&&f.length===p.length&&e.jsx(P,{className:"infostand-buttons px-2",onClick:()=>_t("save_branding_configuration"),children:u("save")}),x.length>0&&v.length>0&&x.length===v.length&&e.jsx(P,{className:"infostand-buttons px-2",onClick:()=>_t("save_custom_variables"),children:u("save")})]})]}):null},sy=i=>{const{avatarInfo:t=null,onClose:s=null}=i,[n,a]=o.useState(0),[r,l]=o.useState(0),{roomSession:c=null}=Re(),{petRespectRemaining:m=0,respectPet:h=null}=Fn();if(o.useEffect(()=>{a(t.remainingGrowTime),l(t.remainingTimeToLive)},[t]),o.useEffect(()=>{if(t.petType!==Mt.MONSTERPLANT||t.dead)return;const g=setInterval(()=>{a(f=>f-1),l(f=>f-1)},1e3);return()=>clearInterval(g)},[t]),!t)return null;const d=g=>{let f=!0;if(!(!g||g=="")){switch(g){case"respect":h(t.id),m-1>=1&&(f=!1);break;case"buyfood":Q("catalog/open/"+K("catalog.links")["pets.buy_food"]);break;case"train":c==null||c.requestPetCommands(t.id);break;case"treat":D(new fc(t.id));break;case"compost":c==null||c.compostPlant(t.id);break;case"pick_up":c==null||c.pickupPet(t.id);break}f&&s()}};return e.jsxs(N,{gap:1,alignItems:"end",children:[e.jsx(N,{className:"nitro-infostand rounded",children:e.jsxs(N,{overflow:"visible",className:"container-fluid content-area",gap:1,children:[e.jsxs(N,{gap:1,children:[e.jsxs(_,{alignItems:"center",justifyContent:"between",gap:1,children:[e.jsx(C,{variant:"white",small:!0,wrap:!0,children:t.name}),e.jsx(Us,{className:"cursor-pointer fa-icon",onClick:s})]}),e.jsx(C,{variant:"white",small:!0,wrap:!0,children:u(`pet.breed.${t.petType}.${t.petBreed}`)}),e.jsx("hr",{className:"m-0"})]}),t.petType===Mt.MONSTERPLANT&&e.jsxs(e.Fragment,{children:[e.jsxs(N,{center:!0,gap:1,children:[e.jsx(mn,{figure:t.petFigure,posture:t.posture,direction:4}),e.jsx("hr",{className:"m-0"})]}),e.jsxs(N,{gap:2,children:[!t.dead&&e.jsx(N,{alignItems:"center",gap:1,children:e.jsx(C,{variant:"white",center:!0,small:!0,wrap:!0,children:u("pet.level",["level","maxlevel"],[t.level.toString(),t.maximumLevel.toString()])})}),e.jsxs(N,{alignItems:"center",gap:1,children:[e.jsx(C,{variant:"white",small:!0,truncate:!0,children:u("infostand.pet.text.wellbeing")}),e.jsxs(A,{fullWidth:!0,overflow:"hidden",position:"relative",className:"bg-light-dark rounded",children:[e.jsx(_,{fit:!0,center:!0,position:"absolute",children:e.jsx(C,{variant:"white",small:!0,children:t.dead?"00:00:00":mr(r==0?t.remainingTimeToLive:r).split(":")[1]+":"+mr(r==null||r==null?0:r).split(":")[2]+":"+mr(r==null||r==null?0:r).split(":")[3]})}),e.jsx(A,{className:"bg-success rounded pet-stats",style:{width:t.dead?"0":Math.round(t.maximumTimeToLive*100/r).toString()}})]})]}),n!=0&&n>0&&e.jsxs(N,{alignItems:"center",gap:1,children:[e.jsx(C,{variant:"white",small:!0,truncate:!0,children:u("infostand.pet.text.growth")}),e.jsx(gN,{className:"top-2 end-2",day:mr(n).split(":")[0],hour:mr(n).split(":")[1],minutes:mr(n).split(":")[2],seconds:mr(n).split(":")[3]})]}),e.jsxs(N,{alignItems:"center",gap:1,children:[e.jsx(C,{variant:"white",small:!0,truncate:!0,children:u("infostand.pet.text.raritylevel",["level"],[u(`infostand.pet.raritylevel.${t.rarityLevel}`)])}),e.jsx(yc,{className:"top-2 end-2",level:t.rarityLevel})]}),e.jsx("hr",{className:"m-0"})]}),e.jsxs(N,{gap:1,children:[e.jsx(C,{variant:"white",small:!0,wrap:!0,children:u("pet.age",["age"],[t.age.toString()])}),e.jsx("hr",{className:"m-0"})]})]}),t.petType!==Mt.MONSTERPLANT&&e.jsxs(e.Fragment,{children:[e.jsxs(N,{gap:1,children:[e.jsxs(_,{gap:1,children:[e.jsx(N,{fullWidth:!0,overflow:"hidden",className:"body-image pet p-1",children:e.jsx(mn,{figure:t.petFigure,posture:t.posture,direction:4})}),e.jsxs(N,{grow:!0,gap:1,children:[e.jsx(C,{variant:"white",center:!0,small:!0,wrap:!0,children:u("pet.level",["level","maxlevel"],[t.level.toString(),t.maximumLevel.toString()])}),e.jsxs(N,{alignItems:"center",gap:1,children:[e.jsx(C,{variant:"white",small:!0,truncate:!0,children:u("infostand.pet.text.happiness")}),e.jsxs(A,{fullWidth:!0,overflow:"hidden",position:"relative",className:"bg-light-dark rounded",children:[e.jsx(_,{fit:!0,center:!0,position:"absolute",children:e.jsx(C,{variant:"white",small:!0,children:t.happyness+"/"+t.maximumHappyness})}),e.jsx(A,{className:"bg-info rounded pet-stats",style:{width:t.happyness/t.maximumHappyness*100+"%"}})]})]}),e.jsxs(N,{alignItems:"center",gap:1,children:[e.jsx(C,{variant:"white",small:!0,truncate:!0,children:u("infostand.pet.text.experience")}),e.jsxs(A,{fullWidth:!0,overflow:"hidden",position:"relative",className:"bg-light-dark rounded",children:[e.jsx(_,{fit:!0,center:!0,position:"absolute",children:e.jsx(C,{variant:"white",small:!0,children:t.experience+"/"+t.levelExperienceGoal})}),e.jsx(A,{className:"bg-purple rounded pet-stats",style:{width:t.experience/t.levelExperienceGoal*100+"%"}})]})]}),e.jsxs(N,{alignItems:"center",gap:1,children:[e.jsx(C,{variant:"white",small:!0,truncate:!0,children:u("infostand.pet.text.energy")}),e.jsxs(A,{fullWidth:!0,overflow:"hidden",position:"relative",className:"bg-light-dark rounded",children:[e.jsx(_,{fit:!0,center:!0,position:"absolute",children:e.jsx(C,{variant:"white",small:!0,children:t.energy+"/"+t.maximumEnergy})}),e.jsx(A,{className:"bg-success rounded pet-stats",style:{width:t.energy/t.maximumEnergy*100+"%"}})]})]})]})]}),e.jsx("hr",{className:"m-0"})]}),e.jsxs(N,{gap:1,children:[t.petType!==Mt.MONSTERPLANT&&e.jsx(C,{variant:"white",small:!0,wrap:!0,children:u("infostand.text.petrespect",["count"],[t.respect.toString()])}),e.jsx(C,{variant:"white",small:!0,wrap:!0,children:u("pet.age",["age"],[t.age.toString()])}),e.jsx("hr",{className:"m-0"})]})]}),e.jsx(N,{gap:1,children:e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx(xs,{userId:t.ownerId}),e.jsx(C,{variant:"white",small:!0,wrap:!0,children:u("infostand.text.petowner",["name"],[t.ownerName])})]})})]})}),e.jsxs(_,{gap:1,justifyContent:"end",children:[t.petType!==Mt.MONSTERPLANT&&e.jsx(P,{variant:"dark",onClick:g=>d("buyfood"),children:u("infostand.button.buyfood")}),t.isOwner&&t.petType!==Mt.MONSTERPLANT&&e.jsx(P,{variant:"dark",onClick:g=>d("train"),children:u("infostand.button.train")}),!t.dead&&t.energy/t.maximumEnergy<.98&&t.petType===Mt.MONSTERPLANT&&e.jsx(P,{variant:"dark",onClick:g=>d("treat"),children:u("infostand.button.pettreat")}),(c==null?void 0:c.isRoomOwner)&&t.petType===Mt.MONSTERPLANT&&e.jsx(P,{variant:"dark",onClick:g=>d("compost"),children:u("infostand.button.compost")}),t.isOwner&&e.jsx(P,{variant:"dark",onClick:g=>d("pick_up"),children:u("inventory.pets.pickup")}),m>0&&t.petType!==Mt.MONSTERPLANT&&e.jsx(P,{variant:"dark",onClick:g=>d("respect"),children:u("infostand.button.petrespect",["count"],[m.toString()])})]})]})},ny=i=>{const{avatarInfo:t=null,onClose:s=null}=i,n=o.useMemo(()=>!(t.botSkills.indexOf(We.NO_PICK_UP)>=0||!t.amIOwner&&!t.amIAnyRoomController),[t]),a=()=>D(new ym(t.webID));if(t)return e.jsxs(N,{gap:1,children:[e.jsx(N,{className:"nitro-infostand rounded",children:e.jsxs(N,{overflow:"visible",className:"container-fluid content-area",gap:1,children:[e.jsxs(N,{gap:1,children:[e.jsxs(_,{alignItems:"center",justifyContent:"between",gap:1,children:[e.jsx(C,{variant:"white",small:!0,wrap:!0,children:t.name}),e.jsx(Us,{className:"cursor-pointer fa-icon",onClick:s})]}),e.jsx("hr",{className:"m-0"})]}),e.jsxs(N,{gap:1,children:[e.jsxs(_,{gap:1,children:[e.jsx(N,{fullWidth:!0,className:"body-image bot",children:e.jsx(tt,{figure:t.figure,direction:4})}),e.jsx(N,{grow:!0,center:!0,gap:0,children:t.badges.length>0&&t.badges.map(r=>e.jsx(ze,{badgeCode:r,showInfo:!0},r))})]}),e.jsx("hr",{className:"m-0"})]}),e.jsxs(N,{gap:1,children:[e.jsx(_,{alignItems:"center",className:"bg-light-dark rounded py-1 px-2",children:e.jsx(C,{fullWidth:!0,wrap:!0,textBreak:!0,variant:"white",small:!0,className:"motto-content",children:t.motto})}),e.jsx("hr",{className:"m-0"})]}),e.jsxs(N,{gap:1,children:[e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx(xs,{userId:t.ownerId}),e.jsx(C,{variant:"white",small:!0,wrap:!0,children:u("infostand.text.botowner",["name"],[t.ownerName])})]}),t.carryItem>0&&e.jsxs(e.Fragment,{children:[e.jsx("hr",{className:"m-0"}),e.jsx(C,{variant:"white",small:!0,wrap:!0,children:u("infostand.text.handitem",["item"],[u("handitem"+t.carryItem)])})]})]})]})}),n&&e.jsx(_,{justifyContent:"end",children:e.jsx(P,{variant:"dark",onClick:a,children:u("infostand.button.pickup")})})]})},Nl=i=>{const{type:t=-1,relationship:s=null}=i;if(!s)return null;const n=Ks.RELATIONSHIP_NAMES[t].toLocaleLowerCase();return e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx("i",{className:`nitro-friends-spritesheet icon-${n}`}),e.jsx(_,{alignItems:"center",gap:0,children:e.jsxs(C,{small:!0,variant:"white",onClick:a=>ns(s.randomFriendId),children:[e.jsx("u",{children:s.randomFriendName}),s.friendCount>1&&" "+u(`extendedprofile.relstatus.others.${n}`,["count"],[(s.friendCount-1).toString()])]})})]})},ry=i=>{const{relationships:t=null}=i;return!t||!t.relationshipStatusMap.length?null:e.jsxs(e.Fragment,{children:[e.jsx(Nl,{type:Ks.HEART,relationship:t.relationshipStatusMap.getValue(Ks.HEART)}),e.jsx(Nl,{type:Ks.SMILE,relationship:t.relationshipStatusMap.getValue(Ks.SMILE)}),e.jsx(Nl,{type:Ks.BOBBA,relationship:t.relationshipStatusMap.getValue(Ks.BOBBA)})]})},ay=i=>{Q(`navigator/search/${i}`),D(new wr("hotel_view",`tag:${i}`))},iy=i=>{const{tags:t=null}=i;return!t||!t.length?null:e.jsxs(e.Fragment,{children:[e.jsx("hr",{className:"m-0"}),e.jsx(_,{className:"flex-tags",children:t&&t.length>0&&t.map((s,n)=>e.jsx(C,{variant:"white",className:"text-tags",onClick:a=>ay(s),children:s},n))})]})},oy=i=>{const{avatarInfo:t=null,setAvatarInfo:s=null,onClose:n=null}=i,[a,r]=o.useState(null),[l,c]=o.useState(!1),[m,h]=o.useState(null),{roomSession:d=null}=Re(),g=p=>{!l||p.length>K("motto.max.length",38)||(d.sendMottoMessage(p),c(!1))},f=p=>g(p.target.value),j=p=>{switch(p.stopPropagation(),p.key){case"Enter":g(p.target.value);return}};return Ve(ab.RSUBE_BADGES,p=>{!t||t.webID!==p.userId||t.badges.join("")===p.badges.join("")||s(x=>{const E=ts(x);return E.badges=p.badges,E})}),Ve(ib.USER_FIGURE,p=>{!t||t.roomIndex!==p.roomIndex||s(I=>{const x=ts(I);return x.figure=p.figure,x.motto=p.customInfo,x.achievementScore=p.activityPoints,x})}),Ve(ob.FAVOURITE_GROUP_UPDATE,p=>{!t||t.roomIndex!==p.roomIndex||s(I=>{const x=ts(I),E=p.status===-1||p.habboGroupId<=0;return x.groupId=E?-1:p.habboGroupId,x.groupName=E?null:p.habboGroupName,x.groupBadgeId=E?null:V().getGroupBadge(p.habboGroupId),x})}),M(Om,p=>{const I=p.getParser();!t||t.webID!==I.userId||h(I)}),o.useEffect(()=>(c(!1),r(t.motto),D(new km(t.webID)),()=>{c(!1),r(null),h(null)}),[t]),t?e.jsx(N,{className:"nitro-infostand rounded",children:e.jsxs(N,{overflow:"visible",className:"container-fluid content-area",gap:1,children:[e.jsxs(N,{gap:1,children:[e.jsxs(_,{alignItems:"center",justifyContent:"between",children:[e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx(xs,{userId:t.webID}),e.jsx(C,{variant:"white",small:!0,wrap:!0,children:t.name})]}),e.jsx(Us,{className:"cursor-pointer fa-icon",onClick:n})]}),e.jsx("hr",{className:"m-0"})]}),e.jsxs(N,{gap:1,children:[e.jsxs(_,{gap:1,children:[e.jsx(N,{fullWidth:!0,className:"body-image",onClick:p=>ns(t.webID),children:e.jsx(tt,{figure:t.figure,direction:4})}),e.jsxs(N,{grow:!0,alignItems:"center",gap:0,children:[e.jsxs(_,{gap:1,children:[e.jsx(_,{center:!0,className:"badge-image",children:t.badges[0]&&e.jsx(ze,{badgeCode:t.badges[0],showInfo:!0})}),e.jsx(_,{center:!0,pointer:t.groupId>0,className:"badge-image",onClick:p=>oi(t.groupId),children:t.groupId>0&&e.jsx(ze,{badgeCode:t.groupBadgeId,isGroup:!0,showInfo:!0,customTitle:t.groupName})})]}),e.jsxs(_,{center:!0,gap:1,children:[e.jsx(_,{center:!0,className:"badge-image",children:t.badges[1]&&e.jsx(ze,{badgeCode:t.badges[1],showInfo:!0})}),e.jsx(_,{center:!0,className:"badge-image",children:t.badges[2]&&e.jsx(ze,{badgeCode:t.badges[2],showInfo:!0})})]}),e.jsxs(_,{center:!0,gap:1,children:[e.jsx(_,{center:!0,className:"badge-image",children:t.badges[3]&&e.jsx(ze,{badgeCode:t.badges[3],showInfo:!0})}),e.jsx(_,{center:!0,className:"badge-image",children:t.badges[4]&&e.jsx(ze,{badgeCode:t.badges[4],showInfo:!0})})]})]})]}),e.jsx("hr",{className:"m-0"})]}),e.jsxs(N,{gap:1,children:[e.jsxs(_,{alignItems:"center",className:"bg-light-dark rounded py-1 px-2",children:[t.type!==Et.OWN_USER&&e.jsx(_,{grow:!0,alignItems:"center",className:"motto-content",children:e.jsx(C,{fullWidth:!0,pointer:!0,wrap:!0,textBreak:!0,small:!0,variant:"white",children:a})}),t.type===Et.OWN_USER&&e.jsxs(_,{grow:!0,alignItems:"center",gap:2,children:[e.jsx(lb,{className:"small fa-icon"}),e.jsxs(_,{grow:!0,alignItems:"center",className:"motto-content",children:[!l&&e.jsxs(C,{fullWidth:!0,pointer:!0,wrap:!0,textBreak:!0,small:!0,variant:"white",onClick:p=>c(!0),children:[a,""]}),l&&e.jsx("input",{type:"text",className:"motto-input",maxLength:K("motto.max.length",38),value:a,onChange:p=>r(p.target.value),onBlur:f,onKeyDown:j,autoFocus:!0})]})]})]}),e.jsx("hr",{className:"m-0"})]}),e.jsxs(N,{gap:1,children:[e.jsx(C,{variant:"white",small:!0,wrap:!0,children:u("infostand.text.achievement_score")+" "+t.achievementScore}),t.carryItem>0&&e.jsxs(e.Fragment,{children:[e.jsx("hr",{className:"m-0"}),e.jsx(C,{variant:"white",small:!0,wrap:!0,children:u("infostand.text.handitem",["item"],[u("handitem"+t.carryItem)])})]})]}),e.jsx(N,{gap:1,children:e.jsx(ry,{relationships:m})}),K("user.tags.enabled")&&e.jsx(N,{gap:1,className:"mt-1",children:e.jsx(iy,{tags:V().tags})})]})}):null},Vi=0,vl=1,Od=2,kd=3,_l=4,Ad=5,Dd=6,ly=i=>{const{avatarInfo:t=null,onClose:s=null}=i,[n,a]=o.useState(Vi),{canRequestFriend:r=null}=cs(),{report:l=null}=Fs(),{roomSession:c=null}=Re(),{userRespectRemaining:m=0,respectUser:h=null}=Fn(),d=o.useMemo(()=>t.amIOwner&&t.targetRoomControllerLevel<qe.GUEST&&!t.isGuildRoom,[t]),g=o.useMemo(()=>t.amIOwner&&t.targetRoomControllerLevel===qe.GUEST&&!t.isGuildRoom,[t]),f=o.useMemo(()=>t.canBeKicked||t.canBeBanned||t.canBeMuted||d||g,[d,g,t]),j=o.useMemo(()=>{let I=!1;const x=Pr();if(x){const E=x.model.getValue(Z.FIGURE_CARRY_OBJECT);E>0&&E<999999&&(I=!0)}return I},[]),p=I=>{let x=!0;if(I)switch(I){case"moderate":x=!1,a(vl);break;case"ban":x=!1,a(Od);break;case"mute":x=!1,a(kd);break;case"ambassador":x=!1,a(_l);break;case"ambassador_mute":x=!1,a(Ad);break;case"back_moderate":x=!1,a(vl);break;case"back_ambassador":x=!1,a(_l);break;case"back":x=!1,a(Vi);break;case"whisper":pt(new Sr(Sr.WHISPER,t.name));break;case"friend":Q(`friends/request/${t.webID}/${t.name}`);break;case"relationship":x=!1,a(Dd);break;case"respect":{h(t.webID),m-1>=1&&(x=!1);break}case"ignore":V().ignoreUser(t.name);break;case"unignore":V().unignoreUser(t.name);break;case"kick":c.sendKickMessage(t.webID);break;case"ban_hour":c.sendBanMessage(t.webID,"RWUAM_BAN_USER_HOUR");break;case"ban_day":c.sendBanMessage(t.webID,"RWUAM_BAN_USER_DAY");break;case"perm_ban":c.sendBanMessage(t.webID,"RWUAM_BAN_USER_PERM");break;case"mute_2min":c.sendMuteMessage(t.webID,2);break;case"mute_5min":c.sendMuteMessage(t.webID,5);break;case"mute_10min":c.sendMuteMessage(t.webID,10);break;case"give_rights":c.sendGiveRightsMessage(t.webID);break;case"remove_rights":c.sendTakeRightsMessage(t.webID);break;case"trade":D(new ub(t.roomIndex));break;case"report":l(Ze.BULLY,{reportedUserId:t.webID});break;case"pass_hand_item":D(new cb(t.webID));break;case"ambassador_alert":c.sendAmbassadorAlertMessage(t.webID);break;case"ambassador_kick":c.sendKickMessage(t.webID);break;case"ambassador_mute_2min":c.sendMuteMessage(t.webID,2);break;case"ambassador_mute_10min":c.sendMuteMessage(t.webID,10);break;case"ambassador_mute_60min":c.sendMuteMessage(t.webID,60);break;case"ambassador_mute_18hour":c.sendMuteMessage(t.webID,1080);break;case"rship_heart":D(new Ea(t.webID,os.RELATIONSHIP_HEART));break;case"rship_smile":D(new Ea(t.webID,os.RELATIONSHIP_SMILE));break;case"rship_bobba":D(new Ea(t.webID,os.RELATIONSHIP_BOBBA));break;case"rship_none":D(new Ea(t.webID,os.RELATIONSHIP_NONE));break}x&&s()};return o.useEffect(()=>{a(Vi)},[t]),e.jsxs(vn,{objectId:t.roomIndex,category:X.UNIT,userType:t.userType,onClose:s,collapsable:!0,children:[e.jsx(es,{className:"cursor-pointer",onClick:I=>ns(t.webID),dangerouslySetInnerHTML:{__html:`${t.name}`}}),n===Vi&&e.jsxs(e.Fragment,{children:[r(t.webID)&&e.jsx(H,{onClick:I=>p("friend"),children:u("infostand.button.friend")}),e.jsx(H,{onClick:I=>p("trade"),children:u("infostand.button.trade")}),e.jsx(H,{onClick:I=>p("whisper"),children:u("infostand.button.whisper")}),m>0&&e.jsx(H,{onClick:I=>p("respect"),children:u("infostand.button.respect",["count"],[m.toString()])}),!r(t.webID)&&e.jsxs(H,{onClick:I=>p("relationship"),children:[u("infostand.link.relationship"),e.jsx(bs,{className:"right fa-icon"})]}),!t.isIgnored&&e.jsx(H,{onClick:I=>p("ignore"),children:u("infostand.button.ignore")}),t.isIgnored&&e.jsx(H,{onClick:I=>p("unignore"),children:u("infostand.button.unignore")}),e.jsx(H,{onClick:I=>p("report"),children:u("infostand.button.report")}),f&&e.jsxs(H,{onClick:I=>p("moderate"),children:[e.jsx(bs,{className:"right fa-icon"}),u("infostand.link.moderate")]}),t.isAmbassador&&e.jsxs(H,{onClick:I=>p("ambassador"),children:[e.jsx(bs,{className:"right fa-icon"}),u("infostand.link.ambassador")]}),j&&e.jsx(H,{onClick:I=>p("pass_hand_item"),children:u("avatar.widget.pass_hand_item")})]}),n===vl&&e.jsxs(e.Fragment,{children:[e.jsx(H,{onClick:I=>p("kick"),children:u("infostand.button.kick")}),e.jsxs(H,{onClick:I=>p("mute"),children:[e.jsx(bs,{className:"right fa-icon"}),u("infostand.button.mute")]}),e.jsxs(H,{onClick:I=>p("ban"),children:[e.jsx(bs,{className:"right fa-icon"}),u("infostand.button.ban")]}),d&&e.jsx(H,{onClick:I=>p("give_rights"),children:u("infostand.button.giverights")}),g&&e.jsx(H,{onClick:I=>p("remove_rights"),children:u("infostand.button.removerights")}),e.jsxs(H,{onClick:I=>p("back"),children:[e.jsx(Es,{className:"left fa-icon"}),u("generic.back")]})]}),n===Od&&e.jsxs(e.Fragment,{children:[e.jsx(H,{onClick:I=>p("ban_hour"),children:u("infostand.button.ban_hour")}),e.jsx(H,{onClick:I=>p("ban_day"),children:u("infostand.button.ban_day")}),e.jsx(H,{onClick:I=>p("perm_ban"),children:u("infostand.button.perm_ban")}),e.jsxs(H,{onClick:I=>p("back_moderate"),children:[e.jsx(Es,{className:"left fa-icon"}),u("generic.back")]})]}),n===kd&&e.jsxs(e.Fragment,{children:[e.jsx(H,{onClick:I=>p("mute_2min"),children:u("infostand.button.mute_2min")}),e.jsx(H,{onClick:I=>p("mute_5min"),children:u("infostand.button.mute_5min")}),e.jsx(H,{onClick:I=>p("mute_10min"),children:u("infostand.button.mute_10min")}),e.jsxs(H,{onClick:I=>p("back_moderate"),children:[e.jsx(Es,{className:"left fa-icon"}),u("generic.back")]})]}),n===_l&&e.jsxs(e.Fragment,{children:[e.jsx(H,{onClick:I=>p("ambassador_alert"),children:u("infostand.button.alert")}),e.jsx(H,{onClick:I=>p("ambassador_kick"),children:u("infostand.button.kick")}),e.jsxs(H,{onClick:I=>p("ambassador_mute"),children:[u("infostand.button.mute"),e.jsx(bs,{className:"right fa-icon"})]}),e.jsxs(H,{onClick:I=>p("back"),children:[e.jsx(Es,{className:"left fa-icon"}),u("generic.back")]})]}),n===Ad&&e.jsxs(e.Fragment,{children:[e.jsx(H,{onClick:I=>p("ambassador_mute_2min"),children:u("infostand.button.mute_2min")}),e.jsx(H,{onClick:I=>p("ambassador_mute_10min"),children:u("infostand.button.mute_10min")}),e.jsx(H,{onClick:I=>p("ambassador_mute_60min"),children:u("infostand.button.mute_60min")}),e.jsx(H,{onClick:I=>p("ambassador_mute_18hr"),children:u("infostand.button.mute_18hour")}),e.jsxs(H,{onClick:I=>p("back_ambassador"),children:[e.jsx(Es,{className:"left fa-icon"}),u("generic.back")]})]}),n===Dd&&e.jsxs(e.Fragment,{children:[e.jsxs(_,{className:"menu-list-split-3",children:[e.jsx(H,{onClick:I=>p("rship_heart"),children:e.jsx(A,{pointer:!0,className:"nitro-friends-spritesheet icon-heart"})}),e.jsx(H,{onClick:I=>p("rship_smile"),children:e.jsx(A,{pointer:!0,className:"nitro-friends-spritesheet icon-smile"})}),e.jsx(H,{onClick:I=>p("rship_bobba"),children:e.jsx(A,{pointer:!0,className:"nitro-friends-spritesheet icon-bobba"})})]}),e.jsx(H,{onClick:I=>p("rship_none"),children:u("avatar.widget.clear_relationship")}),e.jsxs(H,{onClick:I=>p("back"),children:[e.jsx(Es,{className:"left fa-icon"}),u("generic.back")]})]})]})},kh=i=>{const{classNames:t=[],...s}=i,n=o.useMemo(()=>{const a=["menu-list"];return t.length&&a.push(...t),a},[t]);return e.jsx(N,{classNames:n,...s})},cy=i=>{const{userId:t=-1,userName:s="",roomIndex:n=-1,setIsDecorating:a=null}=i;return e.jsx(vn,{objectId:n,category:X.UNIT,onClose:null,children:e.jsx(kh,{children:e.jsx(H,{onClick:r=>a(!1),children:u("widget.avatar.stop_decorating")})})})},uy=i=>{const{avatarInfo:t=null,onClose:s=null}=i,n=a=>{if(a)switch(a){case"move":Nr(t.id,t.category,Ms.OBJECT_MOVE);break;case"rotate":Nr(t.id,t.category,Ms.OBJECT_ROTATE_POSITIVE);break;case"pickup":Nr(t.id,t.category,Ms.OBJECT_PICKUP);break;case"eject":Nr(t.id,t.category,Ms.OBJECT_EJECT);break}};return e.jsxs(vn,{objectId:t.id,category:t.category,onClose:s,collapsable:!0,children:[e.jsx(es,{children:t.name}),e.jsxs(_,{className:"menu-list-split-3",children:[e.jsx(H,{onClick:a=>n("move"),children:e.jsx(db,{className:"center fa-icon"})}),e.jsx(H,{onClick:a=>n("rotate"),disabled:t.isWallItem,children:e.jsx(mb,{className:"center fa-icon"})}),(t.isOwner||t.isAnyRoomController)&&e.jsx(H,{onClick:a=>n("pickup"),children:e.jsx(mu,{className:"center fa-icon"})}),!t.isOwner&&!t.isAnyRoomController&&(t.isRoomOwner||t.roomControllerLevel>=qe.GUILD_ADMIN)&&e.jsx(H,{onClick:a=>n("eject"),children:e.jsx(mu,{className:"center fa-icon"})})]})]})},Pd=i=>{const{nameInfo:t=null,onClose:s=null}=i,n=o.useMemo(()=>{const a=["name-only"];return t.isFriend&&a.push("is-friend"),a},[t]);return e.jsx(vn,{objectId:t.roomIndex,category:t.category,userType:t.userType,fades:t.id!==V().userId,classNames:n,onClose:s,children:e.jsx("div",{className:"text-shadow",dangerouslySetInnerHTML:{__html:`${t.name}`}})})},Sl=0,wl=1,Ld=3,Md=4,dy=i=>{const{avatarInfo:t=null,isDancing:s=!1,setIsDecorating:n=null,onClose:a=null}=i,[r,l]=o.useState(s&&Cr()?wl:Sl),{roomSession:c=null}=Re(),m=g=>{let f=!0;if(g)if(g.startsWith("sign_")){const j=parseInt(g.split("_")[1]);c.sendSignMessage(j)}else switch(g){case"decorate":n(!0);break;case"change_name":pt(new ti(ti.INIT));break;case"change_looks":Q("avatar-editor/show");break;case"expressions":f=!1,l(Ld);break;case"sit":c.sendPostureMessage(ao.POSTURE_SIT);break;case"stand":c.sendPostureMessage(ao.POSTURE_STAND);break;case"wave":c.sendExpressionMessage(ln.WAVE.ordinal);break;case"blow":c.sendExpressionMessage(ln.BLOW.ordinal);break;case"laugh":c.sendExpressionMessage(ln.LAUGH.ordinal);break;case"idle":c.sendExpressionMessage(ln.IDLE.ordinal);break;case"dance_menu":f=!1,l(wl);break;case"dance":c.sendDanceMessage(1);break;case"dance_stop":c.sendDanceMessage(0);break;case"dance_1":case"dance_2":case"dance_3":case"dance_4":c.sendDanceMessage(parseInt(g.charAt(g.length-1)));break;case"signs":f=!1,l(Md);break;case"back":f=!1,l(Sl);break;case"drop_carry_item":D(new hb);break}f&&a()},h=()=>t.amIOwner||t.amIAnyRoomController||t.roomControllerLevel>qe.GUEST,d=mC();return e.jsxs(vn,{objectId:t.roomIndex,category:X.UNIT,userType:t.userType,onClose:a,collapsable:!0,children:[e.jsx(es,{className:"cursor-pointer",onClick:g=>ns(t.webID),children:t.name}),r===Sl&&e.jsxs(e.Fragment,{children:[t.allowNameChange&&e.jsx(H,{onClick:g=>m("change_name"),children:u("widget.avatar.change_name")}),h()&&e.jsx(H,{onClick:g=>m("decorate"),children:u("widget.avatar.decorate")}),e.jsx(H,{onClick:g=>m("change_looks"),children:u("widget.memenu.myclothes")}),Cr()&&!d&&e.jsxs(H,{onClick:g=>m("dance_menu"),children:[e.jsx(bs,{className:"right fa-icon"}),u("widget.memenu.dance")]}),!s&&!Cr()&&!d&&e.jsx(H,{onClick:g=>m("dance"),children:u("widget.memenu.dance")}),s&&!Cr()&&!d&&e.jsx(H,{onClick:g=>m("dance_stop"),children:u("widget.memenu.dance.stop")}),e.jsxs(H,{onClick:g=>m("expressions"),children:[e.jsx(bs,{className:"right fa-icon"}),u("infostand.link.expressions")]}),e.jsxs(H,{onClick:g=>m("signs"),children:[e.jsx(bs,{className:"right fa-icon"}),u("infostand.show.signs")]}),t.carryItem>0&&e.jsx(H,{onClick:g=>m("drop_carry_item"),children:u("avatar.widget.drop_hand_item")})]}),r===wl&&e.jsxs(e.Fragment,{children:[s&&e.jsx(H,{onClick:g=>m("dance_stop"),children:u("widget.memenu.dance.stop")}),e.jsx(H,{onClick:g=>m("dance_1"),children:u("widget.memenu.dance1")}),e.jsx(H,{onClick:g=>m("dance_2"),children:u("widget.memenu.dance2")}),e.jsx(H,{onClick:g=>m("dance_3"),children:u("widget.memenu.dance3")}),e.jsx(H,{onClick:g=>m("dance_4"),children:u("widget.memenu.dance4")}),e.jsxs(H,{onClick:g=>m("back"),children:[e.jsx(Es,{className:"left fa-icon"}),u("generic.back")]})]}),r===Ld&&e.jsxs(e.Fragment,{children:[uC()===ta.POSTURE_STAND&&e.jsx(H,{onClick:g=>m("sit"),children:u("widget.memenu.sit")}),Jb()&&e.jsx(H,{onClick:g=>m("stand"),children:u("widget.memenu.stand")}),gl()&&e.jsx(H,{onClick:g=>m("wave"),children:u("widget.memenu.wave")}),gl()&&e.jsxs(H,{disabled:!Ti(),onClick:g=>m("laugh"),children:[!Ti()&&e.jsx(Nt,{type:"hc"}),u("widget.memenu.laugh")]}),gl()&&e.jsxs(H,{disabled:!Ti(),onClick:g=>m("blow"),children:[!Ti()&&e.jsx(Nt,{type:"hc"}),u("widget.memenu.blow")]}),e.jsx(H,{onClick:g=>m("idle"),children:u("widget.memenu.idle")}),e.jsxs(H,{onClick:g=>m("back"),children:[e.jsx(Es,{className:"left fa-icon"}),u("generic.back")]})]}),r===Md&&e.jsxs(e.Fragment,{children:[e.jsxs(_,{className:"menu-list-split-3",children:[e.jsx(H,{onClick:g=>m("sign_1"),children:"1"}),e.jsx(H,{onClick:g=>m("sign_2"),children:"2"}),e.jsx(H,{onClick:g=>m("sign_3"),children:"3"})]}),e.jsxs(_,{className:"menu-list-split-3",children:[e.jsx(H,{onClick:g=>m("sign_4"),children:"4"}),e.jsx(H,{onClick:g=>m("sign_5"),children:"5"}),e.jsx(H,{onClick:g=>m("sign_6"),children:"6"})]}),e.jsxs(_,{className:"menu-list-split-3",children:[e.jsx(H,{onClick:g=>m("sign_7"),children:"7"}),e.jsx(H,{onClick:g=>m("sign_8"),children:"8"}),e.jsx(H,{onClick:g=>m("sign_9"),children:"9"})]}),e.jsxs(_,{className:"menu-list-split-3",children:[e.jsx(H,{onClick:g=>m("sign_10"),children:"10"}),e.jsx(H,{onClick:g=>m("sign_11"),children:e.jsx("i",{className:"icon icon-sign-heart"})}),e.jsx(H,{onClick:g=>m("sign_12"),children:e.jsx("i",{className:"icon icon-sign-skull"})})]}),e.jsxs(_,{className:"menu-list-split-3",children:[e.jsx(H,{onClick:g=>m("sign_0"),children:"0"}),e.jsx(H,{onClick:g=>m("sign_13"),children:e.jsx("i",{className:"icon icon-sign-exclamation"})}),e.jsx(H,{onClick:g=>m("sign_15"),children:e.jsx("i",{className:"icon icon-sign-smile"})})]}),e.jsxs(_,{className:"menu-list-split-3",children:[e.jsx(H,{onClick:g=>m("sign_14"),children:e.jsx("i",{className:"icon icon-sign-soccer"})}),e.jsx(H,{onClick:g=>m("sign_17"),children:e.jsx("i",{className:"icon icon-sign-yellow"})}),e.jsx(H,{onClick:g=>m("sign_16"),children:e.jsx("i",{className:"icon icon-sign-red"})})]}),e.jsxs(H,{onClick:g=>m("back"),children:[e.jsx(Es,{className:"left fa-icon"}),u("generic.back")]})]})]})},Tl=0,Ud=1,Fd=2,Vd=3,my=i=>{const{avatarInfo:t=null,onClose:s=null}=i,[n,a]=o.useState(Tl),{roomSession:r=null}=Re(),{petRespectRemaining:l=0,respectPet:c=null}=Fn(),m=o.useMemo(()=>{let d=!1;const g=Pr();if(g){const f=g.model.getValue(Z.FIGURE_CARRY_OBJECT);f>0&&f<999999&&(d=!0)}return d},[]),h=d=>{let g=!0;if(d)switch(d){case"respect":c(t.id),l-1>=1&&(g=!1);break;case"treat":D(new fc(t.id));break;case"pass_handitem":D(new Am(t.id));break;case"train":r.requestPetCommands(t.id);break;case"pick_up":r.pickupPet(t.id);break;case"mount":r.mountPet(t.id);break;case"toggle_riding_permission":r.togglePetRiding(t.id);break;case"toggle_breeding_permission":r.togglePetBreeding(t.id);break;case"dismount":r.dismountPet(t.id);break;case"saddle_off":r.removePetSaddle(t.id);break;case"breed":break;case"harvest":r.harvestPet(t.id);break;case"revive":break;case"compost":r.compostPlant(t.id);break;case"buy_saddle":Q("catalog/open/"+K("catalog.links")["pets.buy_saddle"]);break}g&&s()};return o.useEffect(()=>{a(d=>t.petType===Mt.MONSTERPLANT?Vd:t.saddle&&!t.rider?Ud:t.rider?Fd:Tl)},[t]),e.jsxs(vn,{objectId:t.roomIndex,category:X.UNIT,userType:lt.PET,onClose:s,collapsable:!0,children:[e.jsx(es,{children:t.name}),n===Tl&&e.jsxs(e.Fragment,{children:[l>0&&e.jsx(H,{onClick:d=>h("respect"),children:u("infostand.button.petrespect",["count"],[l.toString()])}),e.jsx(H,{onClick:d=>h("train"),children:u("infostand.button.train")}),e.jsx(H,{onClick:d=>h("pick_up"),children:u("infostand.button.pickup")}),t.petType===Mt.HORSE&&e.jsx(H,{onClick:d=>h("buy_saddle"),children:u("infostand.button.buy_saddle")}),[Mt.BEAR,Mt.TERRIER,Mt.CAT,Mt.DOG,Mt.PIG].indexOf(t.petType)>-1&&e.jsx(H,{onClick:d=>h("breed"),children:u("infostand.button.breed")})]}),n===Ud&&e.jsxs(e.Fragment,{children:[e.jsx(H,{onClick:d=>h("mount"),children:u("infostand.button.mount")}),e.jsxs(H,{onClick:d=>h("toggle_riding_permission"),gap:1,children:[e.jsx("input",{type:"checkbox",checked:!!t.publiclyRideable,readOnly:!0}),u("infostand.button.toggle_riding_permission")]}),l>0&&e.jsx(H,{onClick:d=>h("respect"),children:u("infostand.button.petrespect",["count"],[l.toString()])}),e.jsx(H,{onClick:d=>h("train"),children:u("infostand.button.train")}),e.jsx(H,{onClick:d=>h("pick_up"),children:u("infostand.button.pickup")}),e.jsx(H,{onClick:d=>h("saddle_off"),children:u("infostand.button.saddleoff")})]}),n===Fd&&e.jsxs(e.Fragment,{children:[e.jsx(H,{onClick:d=>h("dismount"),children:u("infostand.button.dismount")}),l>0&&e.jsx(H,{onClick:d=>h("respect"),children:u("infostand.button.petrespect",["count"],[l.toString()])})]}),n===Vd&&e.jsxs(e.Fragment,{children:[e.jsx(H,{onClick:d=>h("pick_up"),children:u("infostand.button.pickup")}),t.dead&&e.jsx(H,{onClick:d=>h("revive"),children:u("infostand.button.revive")}),r.isRoomOwner&&e.jsx(H,{onClick:d=>h("compost"),children:u("infostand.button.compost")}),!t.dead&&t.energy/t.maximumEnergy<.98&&e.jsx(H,{onClick:d=>h("treat"),children:u("infostand.button.pettreat")}),!t.dead&&t.level===t.maximumLevel&&t.breedable&&e.jsxs(e.Fragment,{children:[e.jsxs(H,{onClick:d=>h("toggle_breeding_permission"),gap:1,children:[e.jsx("input",{type:"checkbox",checked:t.publiclyBreedable,readOnly:!0}),u("infostand.button.toggle_breeding_permission")]}),e.jsx(H,{onClick:d=>h("breed"),children:u("infostand.button.breed")})]})]}),m&&e.jsx(H,{onClick:d=>h("pass_hand_item"),children:u("infostand.button.pass_hand_item")})]})},Rl=0,Gd=1,Bd=2,Hd=3,hy=i=>{const{avatarInfo:t=null,onClose:s=null}=i,[n,a]=o.useState(Rl),{roomSession:r=null}=Re(),{petRespectRemaining:l=0,respectPet:c=null}=Fn(),m=o.useMemo(()=>r.isRoomOwner||r.controllerLevel>=qe.GUEST||V().isModerator,[r]),h=o.useMemo(()=>{let g=!1;const f=Pr();if(f){const j=f.model.getValue(Z.FIGURE_CARRY_OBJECT);j>0&&j<999999&&(g=!0)}return g},[]),d=g=>{let f=!0;if(g)switch(g){case"respect":c(t.id),l-1>=1&&(f=!1);break;case"treat":D(new fc(t.id));break;case"pass_handitem":D(new Am(t.id));break;case"pick_up":r.pickupPet(t.id);break;case"mount":r.mountPet(t.id);break;case"dismount":r.dismountPet(t.id);break}f&&s()};return o.useEffect(()=>{a(g=>t.petType===Mt.MONSTERPLANT?Hd:t.saddle&&!t.rider?Gd:t.rider?Bd:Rl)},[t]),e.jsxs(vn,{objectId:t.roomIndex,category:X.UNIT,userType:lt.PET,onClose:s,collapsable:!0,children:[e.jsx(es,{children:t.name}),n===Rl&&l>0&&e.jsx(H,{onClick:g=>d("respect"),children:u("infostand.button.petrespect",["count"],[l.toString()])}),n===Gd&&e.jsxs(e.Fragment,{children:[!!t.publiclyRideable&&e.jsx(H,{onClick:g=>d("mount"),children:u("infostand.button.mount")}),l>0&&e.jsx(H,{onClick:g=>d("respect"),children:u("infostand.button.petrespect",["count"],[l.toString()])})]}),n===Bd&&e.jsxs(e.Fragment,{children:[e.jsx(H,{onClick:g=>d("dismount"),children:u("infostand.button.dismount")}),l>0&&e.jsx(H,{onClick:g=>d("respect"),children:u("infostand.button.petrespect",["count"],[l.toString()])})]}),n===Hd&&!t.dead&&t.energy/t.maximumEnergy<.98&&e.jsx(H,{onClick:g=>d("treat"),children:u("infostand.button.pettreat")}),m&&e.jsx(H,{onClick:g=>d("pick_up"),children:u("infostand.button.pickup")}),h&&e.jsx(H,{onClick:g=>d("pass_hand_item"),children:u("infostand.button.pass_hand_item")})]})},yl=0,Wd=1,qd=2,gy=i=>{const{avatarInfo:t=null,onClose:s=null}=i,[n,a]=o.useState(yl),[r,l]=o.useState(""),[c,m]=o.useState("");M(gb,f=>{const j=f.getParser();if(j.botId===t.webID)switch(j.commandId){case We.CHANGE_BOT_NAME:l(j.data),a(Wd);return;case We.CHANGE_BOT_MOTTO:m(j.data),a(qd);return;case We.SETUP_CHAT:{const p=j.data,I=p.split(p.indexOf(";#;")===-1?";":";#;");(I.length===3||I.length===4)&&(pt(new ro(t.roomIndex,X.UNIT,t.webID,I[0],I[1].toLowerCase()==="true"||I[1]==="1",parseInt(I[2]),I[3]?I[3].toLowerCase()==="true"||I[3]==="1":!1)),s());return}}});const h=f=>D(new fb(t.webID,f)),d=f=>{let j=!0;if(f)switch(f){case"donate_to_all":h(We.DONATE_TO_ALL),D(new wn(t.webID,We.DONATE_TO_ALL,""));break;case"donate_to_user":h(We.DONATE_TO_USER),D(new wn(t.webID,We.DONATE_TO_USER,""));break;case"change_bot_name":h(We.CHANGE_BOT_NAME),j=!1;break;case"save_bot_name":D(new wn(t.webID,We.CHANGE_BOT_NAME,r));break;case"change_bot_motto":h(We.CHANGE_BOT_MOTTO),j=!1;break;case"save_bot_motto":D(new wn(t.webID,We.CHANGE_BOT_MOTTO,c));break;case"dress_up":D(new wn(t.webID,We.DRESS_UP,""));break;case"random_walk":D(new wn(t.webID,We.RANDOM_WALK,""));break;case"setup_chat":h(We.SETUP_CHAT),j=!1;break;case"dance":D(new wn(t.webID,We.DANCE,""));break;case"nux_take_tour":pe().createLinkEvent("help/tour"),D(new wn(t.webID,We.NUX_TAKE_TOUR,""));break;case"pick":D(new ym(t.webID));break}j&&s()};o.useEffect(()=>{a(yl)},[t]);const g=t.amIOwner||t.amIAnyRoomController;return e.jsxs(vn,{objectId:t.roomIndex,category:X.UNIT,userType:lt.RENTABLE_BOT,onClose:s,collapsable:!0,children:[e.jsx(es,{children:t.name}),n===yl&&g&&e.jsxs(e.Fragment,{children:[t.botSkills.indexOf(We.DONATE_TO_ALL)>=0&&e.jsx(H,{onClick:f=>d("donate_to_all"),children:u("avatar.widget.donate_to_all")}),t.botSkills.indexOf(We.DONATE_TO_USER)>=0&&e.jsx(H,{onClick:f=>d("donate_to_user"),children:u("avatar.widget.donate_to_user")}),t.botSkills.indexOf(We.CHANGE_BOT_NAME)>=0&&e.jsx(H,{onClick:f=>d("change_bot_name"),children:u("avatar.widget.change_bot_name")}),t.botSkills.indexOf(We.CHANGE_BOT_MOTTO)>=0&&e.jsx(H,{onClick:f=>d("change_bot_motto"),children:u("avatar.widget.change_bot_motto")}),t.botSkills.indexOf(We.DRESS_UP)>=0&&e.jsx(H,{onClick:f=>d("dress_up"),children:u("avatar.widget.dress_up")}),t.botSkills.indexOf(We.RANDOM_WALK)>=0&&e.jsx(H,{onClick:f=>d("random_walk"),children:u("avatar.widget.random_walk")}),t.botSkills.indexOf(We.SETUP_CHAT)>=0&&e.jsx(H,{onClick:f=>d("setup_chat"),children:u("avatar.widget.setup_chat")}),t.botSkills.indexOf(We.DANCE)>=0&&e.jsx(H,{onClick:f=>d("dance"),children:u("avatar.widget.dance")}),t.botSkills.indexOf(We.NO_PICK_UP)===-1&&e.jsx(H,{onClick:f=>d("pick"),children:u("avatar.widget.pick_up")})]}),n===Wd&&e.jsxs(N,{className:"menu-item",onClick:null,gap:1,children:[e.jsx(C,{variant:"white",children:u("bot.skill.name.configuration.new.name")}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:r,maxLength:K("bot.name.max.length",15),onChange:f=>l(f.target.value)}),e.jsxs(_,{alignItems:"center",justifyContent:"between",gap:1,children:[e.jsx(P,{fullWidth:!0,variant:"secondary",onClick:f=>d(null),children:u("cancel")}),e.jsx(P,{fullWidth:!0,variant:"success",onClick:f=>d("save_bot_name"),children:u("save")})]})]}),n===qd&&e.jsxs(N,{className:"menu-item",onClick:null,gap:1,children:[e.jsx(C,{variant:"white",children:u("bot.skill.name.configuration.new.motto")}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:c,maxLength:K("motto.max.length",38),onChange:f=>m(f.target.value)}),e.jsxs(_,{alignItems:"center",justifyContent:"between",gap:1,children:[e.jsx(P,{fullWidth:!0,variant:"secondary",onClick:f=>d(null),children:u("cancel")}),e.jsx(P,{fullWidth:!0,variant:"success",onClick:f=>d("save_bot_motto"),children:u("save")})]})]})]})},fy=i=>{const[t,s]=o.useState(!1),[n,a]=o.useState(!1),[r,l]=o.useState(null),{avatarInfo:c=null,setAvatarInfo:m=null,activeNameBubble:h=null,setActiveNameBubble:d=null,nameBubbles:g=[],removeNameBubble:f=null,productBubbles:j=[],confirmingProduct:p=null,updateConfirmingProduct:I=null,removeProductBubble:x=null,isDecorating:E=!1,setIsDecorating:v=null}=a_(),{roomSession:b=null}=Re();Ie(Ns.NORMAL_MODE,T=>{t&&s(!1)}),Ie(Ns.GAME_MODE,T=>{t||s(!0)}),Ve(pb.RSDE_DANCE,T=>{T.roomIndex===b.ownRoomIndex&&a(T.danceId!==0)}),rt(ro.UPDATE_CHAT,T=>l(T));const w=()=>{if(!b||t)return null;if(h)return e.jsx(Pd,{nameInfo:h,onClose:()=>d(null)});if(c)switch(c.type){case Tr.FURNI:{const T=c;return E?e.jsx(uy,{avatarInfo:T,onClose:()=>m(null)}):null}case Et.OWN_USER:case Et.PEER:{const T=c;return K("user.tags.enabled")&&V().getUserTags(T.roomIndex),T.isSpectatorMode?null:T.isOwnUser?Pl.isRunning()?null:e.jsx(dy,{avatarInfo:T,isDancing:n,setIsDecorating:v,onClose:()=>m(null)}):e.jsx(ly,{avatarInfo:T,onClose:()=>m(null)})}case Rr.PET_INFO:{const T=c;return T.isOwner?e.jsx(my,{avatarInfo:T,onClose:()=>m(null)}):e.jsx(hy,{avatarInfo:T,onClose:()=>m(null)})}case yr.RENTABLE_BOT:return e.jsx(gy,{avatarInfo:c,onClose:()=>m(null)})}return null},S=()=>{if(!c)return null;switch(c.type){case Tr.FURNI:return e.jsx(ty,{avatarInfo:c,onClose:()=>m(null)});case Et.OWN_USER:case Et.PEER:return e.jsx(oy,{avatarInfo:c,setAvatarInfo:m,onClose:()=>m(null)});case Et.BOT:return e.jsx(ey,{avatarInfo:c,onClose:()=>m(null)});case yr.RENTABLE_BOT:return e.jsx(ny,{avatarInfo:c,onClose:()=>m(null)});case Rr.PET_INFO:return e.jsx(sy,{avatarInfo:c,onClose:()=>m(null)})}};return e.jsxs(e.Fragment,{children:[E&&e.jsx(cy,{userId:V().userId,userName:V().userName,roomIndex:b.ownRoomIndex,setIsDecorating:v}),w(),c&&e.jsx(N,{alignItems:"end",className:"nitro-infostand-container",children:S()}),g.length>0&&g.map((T,L)=>e.jsx(Pd,{nameInfo:T,onClose:()=>f(L)},L)),j.length>0&&j.map((T,L)=>e.jsx(ZR,{item:T,updateConfirmingProduct:I,onClose:()=>x(L)},T.id)),r&&e.jsx(YR,{chatEvent:r,onClose:()=>l(null)}),p&&e.jsx($R,{item:p,onClose:()=>I(null)}),e.jsx(zR,{})]})},py=i=>{const{chatStyleId:t=0,chatStyleIds:s=null,selectChatStyleId:n=null}=i,[a,r]=o.useState(null),[l,c]=o.useState(!1),m=d=>{n(d),c(!1)},h=d=>{let g=!1;c(f=>(g=!f,g)),g&&r(d.target)};return o.useEffect(()=>{l||r(null)},[l]),e.jsxs(e.Fragment,{children:[e.jsx(A,{pointer:!0,className:"icon chatstyles-icon",onClick:h}),e.jsx(Mo,{show:l,target:a,placement:"top",children:e.jsx(aa,{className:"nitro-chat-style-selector-container",children:e.jsx(ee,{overflow:"hidden",className:"bg-transparent bubble-window image-rendering-pixelated",children:e.jsx(te,{gap:1,columnCount:3,overflow:"auto",children:s&&s.length>0&&s.map(d=>e.jsx(_,{center:!0,pointer:!0,className:"bubble-parent-container",onClick:g=>m(d),children:e.jsx(A,{className:"bubble-container",children:e.jsx(A,{className:`chat-bubble bubble-${d}`,children:""})},d)},d))})})})})]})},xy=i=>{const{addChatEmoji:t=null}=i,[s,n]=o.useState(!1),[a,r]=o.useState(null),l=o.useRef(null),c=o.useRef(null),m=g=>{t(g.native),n(!1)},h=g=>{c.current&&!c.current.contains(g.target)&&!g.target.classList.contains("emoji-icon")&&(n(!1),document.removeEventListener("mousedown",h),r(null))},d=g=>{n(f=>!f)};return o.useEffect(()=>{s?document.addEventListener("mousedown",h):r(null)},[c,s]),e.jsxs(e.Fragment,{children:[e.jsx(A,{pointer:!0,onClick:d,innerRef:l,children:""}),e.jsx(Mo,{show:s,target:l,placement:"top-end",children:e.jsx(aa,{children:e.jsx(xb,{data:jb,onEmojiSelect:m})})})]})},jy=i=>{const{chatColour:t="black",selectColour:s=null}=i,[n,a]=o.useState(!1),[r,l]=o.useState(null),c=o.useRef(null);o.useEffect(()=>{const d=new Set(["r","b","g","y","w","o","c","br","pr","pk"]),g=new Map;Y.forEach((f,j)=>{!d.has(j)&&!Array.from(g.values()).includes(f)&&g.set(j,f)}),l(g)},[]);const m=d=>{s(d),a(!1)},h=()=>{a(d=>!d)};return e.jsxs(e.Fragment,{children:[e.jsx(A,{pointer:!0,onClick:()=>h(),innerRef:c,style:{color:(r&&r.get(t))??"black"},children:e.jsx(Ib,{})}),e.jsx(Mo,{show:n,target:c,placement:"top",children:e.jsx(aa,{className:"nitro-chat-style-selector-container",children:e.jsx(ee,{overflow:"hidden",className:"bg-transparent colour-container image-rendering-pixelated",children:e.jsx(ke,{gap:1,columnCount:6,columnMinWidth:20,columnMinHeight:20,children:r&&r.size>0&&Array.from(r).map(([d,g])=>e.jsx(Ce,{itemHighlight:!0,itemColor:g,itemActive:t===d,className:"clear-bg",onClick:f=>m(d)},d))})})})})]})},Iy=i=>{const[t,s]=o.useState(""),{chatStyleId:n=0,updateChatStyleId:a=null,chatColour:r="",updateChatColour:l=null}=Fn(),{selectedUsername:c="",floodBlocked:m=!1,floodBlockedSeconds:h=0,setIsTyping:d=null,setIsIdle:g=null,sendChat:f=null}=o_(),[j,p]=o.useState(!1),{roomSession:I=null}=Re(),x=o.useRef(),E=o.useMemo(()=>u("widgets.chatinput.mode.whisper"),[]),v=o.useMemo(()=>u("widgets.chatinput.mode.shout"),[]),b=o.useMemo(()=>u("widgets.chatinput.mode.speak"),[]),w=o.useMemo(()=>K("chat.input.maxlength",100),[]),S=o.useCallback(()=>{const U=document.activeElement;return!(!U||x&&x.current===U||!(U instanceof HTMLInputElement)&&!(U instanceof HTMLTextAreaElement))},[x]),T=o.useCallback(()=>{x.current.focus(),x.current.setSelectionRange(x.current.value.length*2,x.current.value.length*2)},[x]),L=o.useCallback(()=>{s(U=>U!==E||!c.length?U:`${U} ${c}`)},[c,E]),k=o.useCallback((U,q=!1)=>{if(!U||U==="")return;let $=q?dn.CHAT_SHOUT:dn.CHAT_DEFAULT,G=U;const re=G.split(" ");let Le="",Ye="";switch(re[0]){case E:$=dn.CHAT_WHISPER,Le=re[1],Ye=E+" "+Le+" ",re.shift(),re.shift();break;case v:$=dn.CHAT_SHOUT,re.shift();break;case b:$=dn.CHAT_DEFAULT,re.shift();break}G=re.join(" "),d(!1),g(!1),G.length<=w&&(/%CC%/g.test(encodeURIComponent(G))?s(""):(s(""),f(G,$,Le,n,r))),s(Ye)},[E,v,b,w,n,d,g,f,r]),y=o.useCallback(U=>{!U||!U.length?d(!1):(d(!0),g(!0)),s(U)},[d,g]),R=o.useCallback(U=>{if(m||!x.current||S())return;document.activeElement!==x.current&&T();const q=U.target.value;switch(U.key){case" ":case"Space":L();return;case"NumpadEnter":case"Enter":k(q,U.shiftKey);return;case"Backspace":if(q){const $=q.split(" ");$[0]===E&&$.length===3&&$[2]===""&&s("")}return}},[m,x,E,S,T,L,k]);rt(Sr.CHAT_INPUT_CONTENT,U=>{switch(U.chatMode){case Sr.WHISPER:{s(`${E} ${U.userName} `);return}case Sr.SHOUT:return}});const O=o.useMemo(()=>{let U=[];const q=K("chat.styles");for(const $ of q)if($){if($.minRank>0){V().hasSecurity($.minRank)&&U.push($.styleId);continue}if($.isSystemStyle&&V().hasSecurity(qe.MODERATOR)){U.push($.styleId);continue}if(!(K("chat.styles.disabled").indexOf($.styleId)>=0)){if($.isHcOnly&&vs()>=zt.CLUB){U.push($.styleId);continue}if($.isAmbassadorOnly&&V().isAmbassador){U.push($.styleId);continue}!$.isHcOnly&&!$.isAmbassadorOnly&&U.push($.styleId)}}return U},[]),F=U=>{s(t+U),d(!0)};return o.useEffect(()=>(document.body.addEventListener("keydown",R),()=>{document.body.removeEventListener("keydown",R)}),[R]),o.useEffect(()=>{x.current&&(x.current.parentElement.dataset.value=t)},[t]),!I||I.isSpectator?null:oc.createPortal(e.jsxs("div",{className:"nitro-chat-input-container",onMouseEnter:()=>p(!0),onMouseLeave:()=>setTimeout(()=>p(!1),100),children:[e.jsxs("div",{className:"input-sizer align-items-center",children:[!m&&e.jsx("input",{ref:x,type:"text",className:"chat-input",placeholder:u("widgets.chatinput.default"),value:t,maxLength:w,onChange:U=>y(U.target.value),onMouseDown:U=>T()}),m&&e.jsxs(C,{variant:"danger",children:[u("chat.input.alert.flood",["time"],[h.toString()])," "]})]}),e.jsxs(_,{children:[e.jsx(xy,{addChatEmoji:F}),e.jsx(jy,{chatColour:r,selectColour:l}),e.jsx(py,{chatStyleId:n,chatStyleIds:O,selectChatStyleId:a}),j&&e.jsx(A,{className:"info-habbopages",onClick:()=>Q("habbopages/chat/chatting")})]})]}),document.getElementById("toolbar-chat-input-container"))},Ey=()=>{let i=null;self.onmessage=t=>{if(!t)return;const s=t.data;switch(s.action){case"START":i=setInterval(()=>postMessage(null),s.content);break;case"STOP":i&&(clearInterval(i),i=null);break}}};class by extends Worker{constructor(t){const s=t.toString(),n=new Blob([`(${s})()`]);super(URL.createObjectURL(n))}}const Cy=i=>{const{chat:t=null,makeRoom:s=null,bubbleWidth:n=ft.CHAT_BUBBLE_WIDTH_NORMAL,selectedEmoji:a}=i,[r,l]=o.useState(!1),[c,m]=o.useState(!1),{onClickChat:h=null}=fh(),d=o.useRef(),g=o.useMemo(()=>{switch(n){case ft.CHAT_BUBBLE_WIDTH_NORMAL:return 350;case ft.CHAT_BUBBLE_WIDTH_THIN:return 240;case ft.CHAT_BUBBLE_WIDTH_WIDE:return 2e3}},[n]);return o.useEffect(()=>{l(!1);const f=d.current;if(!f)return;const j=f.offsetWidth,p=f.offsetHeight;t.width=j,t.height=p,t.elementRef=f;let I=t.left,x=t.top;return!I&&!x&&(I=t.location.x-j/2,x=f.parentElement.offsetHeight-p,t.left=I,t.top=x),m(!0),()=>{t.elementRef=null,m(!1)}},[t]),o.useEffect(()=>{!c||!t||r||(s&&s(t),l(!0))},[t,c,r,s]),e.jsxs("div",{ref:d,className:`bubble-container newbubblehe ${r?"visible":"invisible"}`,onClick:f=>W().selectRoomObject(t.roomId,t.senderId,X.UNIT),children:[a&&e.jsx("span",{children:DOMPurify.sanitize(a)}),t.styleId===0&&e.jsx("div",{className:"user-container-bg",style:{backgroundColor:t.color}}),e.jsxs("div",{className:`chat-bubble bubble-${t.styleId} type-${t.type}`,style:{maxWidth:g},children:[e.jsx("div",{className:"user-container",children:t.imageUrl&&t.imageUrl.length>0&&e.jsx("div",{className:"user-image",style:{backgroundImage:`url(${t.imageUrl})`}})}),e.jsxs("div",{className:"chat-content",children:[e.jsx("b",{className:"username mr-1",dangerouslySetInnerHTML:{__html:`${t.username}: `}}),e.jsx("span",{className:"message",style:{color:t.chatColours},dangerouslySetInnerHTML:{__html:`${t.formattedText}`},onClick:f=>h(f)})]}),e.jsx("div",{className:"pointer"})]})]})},Ny=i=>{const{chatMessages:t=[],setChatMessages:s=null,chatSettings:n=null,getScrollSpeed:a=6e3}=c_(),r=o.useRef(),l=o.useCallback(()=>{s(h=>{if(h){const d=h.filter(g=>g.top>-g.height*2);if(d.length!==h.length)return d}return h})},[s]),c=o.useCallback((h,d,g)=>{for(let f=t.indexOf(h)-1;f>=0;f--){const j=t[f];if(!(!j||h===j||g.indexOf(j)>=0||j.top+j.height-d>h.top+h.height)&&XC(h,j,-d,0)){const p=Math.abs(j.top+j.height-h.top);g.push(j),j.top-=p,j.skipMovement=!0,c(j,p,g)}}},[t]),m=o.useCallback(h=>{if(n.mode===ft.CHAT_MODE_FREE_FLOW)h.skipMovement=!0,c(h,0,[h]),l();else{const d=h.top+h.height,g=h.height,f=r.current.offsetHeight-d,j=g-f;f<g&&(s(p=>(p.forEach(I=>{I!==h&&(I.top-=j)}),p)),l())}},[n,c,l,s]);return o.useEffect(()=>{const h=(d=null)=>{if(!r||!r.current)return;const g=r.current.offsetHeight,f=Math.round(document.body.offsetHeight*K("chat.viewer.height.percentage"));r.current.style.height=`${f}px`,s(j=>(j&&j.forEach(p=>p.top-=g-f),j))};return window.addEventListener("resize",h),h(),()=>{window.removeEventListener("resize",h)}},[s]),o.useEffect(()=>{const h=g=>{s(f=>(f.forEach(j=>{if(j.skipMovement){j.skipMovement=!1;return}j.top-=g}),f)),l()},d=new by(Ey);return d.onmessage=()=>h(15),d.postMessage({action:"START",content:a}),()=>{d.postMessage({action:"STOP"}),d.terminate()}},[a,l,s]),e.jsx("div",{ref:r,className:"nitro-chat-widget",children:t.map(h=>e.jsx(Cy,{chat:h,makeRoom:m,bubbleWidth:n.weight},h.id))})},zd=100,Ah=i=>{const{title:t=null,items:s=[],selectItem:n=null,onClose:a=null}=i,[r,l]=o.useState(null),[c,m]=o.useState(""),h=V().isModerator,[d,g]=o.useState(!1),[f,j]=o.useState([]),p=v=>{if(v)I(v)?j(f.filter(b=>b!==v)):f.length<zd&&j([...f,v]);else if(g(b=>!b),d)j([]);else{const b=E.map(w=>w.id).slice(0,zd);j(b)}},I=v=>f.includes(v),x=()=>{D(new Eb(...f)),j([]),g(!1)},E=o.useMemo(()=>{const v=c.toLocaleLowerCase();return s.filter(S=>{var T;return(T=S.name)==null?void 0:T.toLocaleLowerCase().includes(v)}).sort((S,T)=>S.name.localeCompare(T.name))},[s,c]);return o.useEffect(()=>{r&&n(r)},[r,n]),e.jsxs(ne,{className:"nitro-chooser-widget",theme:"primary-slim",children:[e.jsx(se,{headerText:t+" ("+E.length+")",onCloseClick:a}),e.jsxs(ee,{overflow:"hidden",gap:1,children:[e.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:u("generic.search"),value:c,onChange:v=>m(v.target.value)}),i.pickallFurni&&e.jsxs(_,{gap:2,className:"text-black",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",checked:d,onChange:v=>p()}),e.jsx("label",{className:"form-check-label",children:u("widget.chooser.checkall")})]}),e.jsx($o,{rows:E,rowRender:v=>e.jsxs(_,{alignItems:"center",className:Bt("rounded p-1",r===v&&"bg-muted"),pointer:!0,onClick:b=>l(v),children:[i.pickallFurni&&e.jsx("input",{className:"flex-shrink-0 mx-1 form-check-input",type:"checkbox",name:"showMyFace",checked:I(v.id),onChange:b=>p(v.id)}),e.jsxs(C,{truncate:!0,children:[v.name," ",h&&" - "+v.id]})]})}),i.pickallFurni&&e.jsx(P,{variant:"secondary",onClick:v=>x(),disabled:!f.length,children:u("widget.chooser.btn.pickall")})]})]})},vy=i=>{const{items:t=null,onClose:s=null,selectItem:n=null,populateChooser:a=null}=x_(),{roomSession:r=null}=Re();return o.useEffect(()=>{const l={linkReceived:c=>{c.split("/"),a()},eventUrlPrefix:"furni-chooser/"};return ct(l),()=>ut(l)},[a]),t?e.jsx(Ah,{title:u("widget.chooser.furni.title"),items:t,selectItem:n,onClose:s,pickallFurni:r==null?void 0:r.isRoomOwner}):null},_y=i=>{const{items:t=null,onClose:s=null,selectItem:n=null,populateChooser:a=null}=N_();return o.useEffect(()=>{const r={linkReceived:l=>{l.split("/"),a()},eventUrlPrefix:"user-chooser/"};return ct(r),()=>ut(r)},[a]),t?e.jsx(Ah,{title:u("widget.chooser.user.title"),items:t,selectItem:n,onClose:s}):null},Sy=i=>{const[t,s]=o.useState(!1),{users:n=[],answer:a=null}=d_();return o.useEffect(()=>{s(!!n.length)},[n]),t?e.jsxs(ne,{className:"nitro-widget-doorbell",theme:"primary-slim",children:[e.jsx(se,{headerText:u("navigator.doorbell.title"),onCloseClick:r=>s(!1)}),e.jsxs(ee,{overflow:"hidden",gap:0,children:[e.jsx(N,{gap:2,children:e.jsxs(te,{gap:1,className:"text-black fw-bold border-bottom px-1 pb-1",children:[e.jsx(A,{className:"g-col-6",children:u("generic.username")}),e.jsx(A,{className:"g-col-6"})]})}),e.jsx(N,{overflow:"auto",className:"striped-children",gap:0,children:n&&n.length>0&&n.map(r=>e.jsxs(te,{gap:1,alignItems:"center",className:"text-black border-bottom p-1",children:[e.jsx(A,{className:"g-col-6",children:r}),e.jsx(A,{className:"g-col-6",children:e.jsxs(_,{alignItems:"center",justifyContent:"end",gap:1,children:[e.jsx(P,{variant:"success",onClick:()=>a(r,!0),children:u("generic.accept")}),e.jsx(P,{variant:"danger",onClick:()=>a(r,!1),children:u("generic.deny")})]})})]},r))})]})]}):null},Vc=i=>{const{objectId:t=-1,category:s=-1,noFollow:n=!1,position:a="absolute",...r}=i,[l,c]=o.useState({x:-1,y:-1}),m=o.useRef();return o.useEffect(()=>{let h=!1;const d=()=>{const f=ve();return xc(f.roomId,t,s,1)},g=()=>{const f=d();!f||!m.current||c({x:Math.round(f.left+f.width/2-m.current.offsetWidth/2),y:Math.round(f.top-m.current.offsetHeight+10)})};return n?g():(h=!0,Ln().add(g)),()=>{h&&Ln().remove(g)}},[t,s,n]),e.jsx(A,{innerRef:m,position:a,visible:l.x+(m.current?m.current.offsetWidth:0)>-1,className:"object-location",style:{left:l.x,top:l.y},...r})},wy=i=>{const{roomIndex:t=-1,request:s=null,hideFriendRequest:n=null,requestResponse:a=null}=i;return e.jsx(Vc,{objectId:t,category:X.UNIT,children:e.jsx(A,{className:"nitro-friend-request-dialog nitro-context-menu p-2",children:e.jsxs(N,{children:[e.jsxs(_,{alignItems:"center",justifyContent:"between",gap:2,children:[e.jsx(C,{variant:"white",fontSize:6,children:u("widget.friendrequest.from",["username"],[s.name])}),e.jsx(Us,{className:"cursor-pointer fa-icon",onClick:r=>n(s.requesterUserId)})]}),e.jsxs(_,{justifyContent:"end",gap:1,children:[e.jsx(P,{variant:"danger",onClick:r=>a(s.requesterUserId,!1),children:u("widget.friendrequest.decline")}),e.jsx(P,{variant:"success",onClick:r=>a(s.requesterUserId,!0),children:u("widget.friendrequest.accept")})]})]})})})},Ty=i=>{const{displayedRequests:t=[],hideFriendRequest:s=null}=f_(),{requestResponse:n=null}=cs();return t.length?e.jsx(e.Fragment,{children:t.map((a,r)=>e.jsx(wy,{roomIndex:a.roomIndex,request:a.request,hideFriendRequest:s,requestResponse:n},r))}):null},Ry=i=>{const{productType:t=me.FLOOR,classId:s=-1,extraParam:n=void 0}=i;switch(t){case me.WALL:case me.FLOOR:return e.jsx(Bo,{productType:t,productClassId:s});case me.BADGE:return e.jsx(ze,{badgeCode:n});case me.HABBO_CLUB:return e.jsx(Nt,{type:"hc"})}return null},yy=i=>{const{ownerId:t=-1}=i,[s,n]=o.useState(0),[a,r]=o.useState(void 0),l=()=>{s===1&&D(new vb(t)),n(0),r(void 0)};M(bb,m=>{n(1)}),M(Cb,m=>{n(0),r(void 0)}),M(Nb,m=>{const h=m.getParser();r({contentType:h.contentType,classId:h.classId}),n(2)});const c=V().userId===t;return s===0?null:e.jsxs(ne,{className:"nitro-mysterybox-dialog",theme:"primary-slim",children:[e.jsx(se,{headerText:u(s===1?`mysterybox.dialog.${c?"owner":"other"}.title`:"mysterybox.reward.title"),onCloseClick:l}),e.jsxs(ee,{children:[s===1&&e.jsxs(e.Fragment,{children:[e.jsxs(C,{variant:"primary",children:[" ",u(`mysterybox.dialog.${c?"owner":"other"}.subtitle`)," "]}),e.jsxs(C,{children:[" ",u(`mysterybox.dialog.${c?"owner":"other"}.description`)," "]}),e.jsxs(C,{children:[" ",u(`mysterybox.dialog.${c?"owner":"other"}.waiting`)]}),e.jsxs(P,{variant:"danger",onClick:l,className:"mt-auto",children:[" ",u(`mysterybox.dialog.${c?"owner":"other"}.cancel`)," "]})]}),s===2&&a&&e.jsxs(e.Fragment,{children:[e.jsxs(C,{variant:"black",children:[" ",u("mysterybox.reward.text")," "]}),e.jsx(_,{className:"prize-container justify-content-center mx-auto",children:e.jsx(Ry,{classId:a.classId,productType:a.contentType})}),e.jsxs(P,{variant:"success",onClick:l,className:"mt-auto",children:[" ",u("mysterybox.reward.close")," "]})]})]})]})},Oy=i=>{const{objectId:t=-1,onClose:s=null}=i,[n,a]=o.useState(""),r=()=>{D(new _b(t,n)),s()};return t===-1?null:e.jsxs(ne,{className:"nitro-mysterytrophy-dialog no-resize",theme:"primary-slim",children:[e.jsx(se,{center:!0,headerText:u("mysterytrophy.header.title"),onCloseClick:s}),e.jsxs(ee,{children:[e.jsxs(_,{className:"mysterytrophy-dialog-top p-3",children:[e.jsx("div",{className:"mysterytrophy-image flex-shrink-0"}),e.jsx("div",{className:"m-2",children:e.jsx(C,{variant:"white",className:"mysterytrophy-text-big",children:u("mysterytrophy.header.description")})})]}),e.jsx(_,{className:"mysterytrophy-dialog-bottom p-2",children:e.jsxs(N,{gap:1,children:[e.jsxs(_,{alignItems:"center",className:"bg-white rounded py-1 px-2 input-mysterytrophy-dialog",children:[e.jsx("textarea",{className:"form-control form-control-sm input-mysterytrophy",value:n,onChange:l=>a(l.target.value)}),e.jsx("div",{className:"mysterytrophy-pencil-image flex-shrink-0 small fa-icon"})]}),e.jsxs(_,{className:"mt-2",gap:5,display:"flex",justifyContent:"center",alignItems:"center",children:[e.jsx(C,{pointer:!0,className:"text-decoration",onClick:()=>s(),children:u("cancel")}),e.jsx(P,{variant:"success",onClick:()=>r(),children:u("generic.ok")})]})]})})]})]})},ky=i=>{const{objectId:t=-1,onClose:s=null}=i,{roomSession:n=null}=Re(),a=()=>{n.useMultistateItem(t),s()};return e.jsxs(ne,{className:"nitro-use-product-confirmation",children:[e.jsx(se,{headerText:u("effectbox.header.title"),onCloseClick:s}),e.jsx(ee,{center:!0,children:e.jsx(_,{gap:2,children:e.jsxs(N,{justifyContent:"between",children:[e.jsx(C,{children:u("effectbox.header.description")}),e.jsxs(_,{alignItems:"center",justifyContent:"between",children:[e.jsx(P,{variant:"danger",onClick:s,children:u("generic.cancel")}),e.jsx(P,{variant:"success",onClick:a,children:u("generic.ok")})]})]})})})]})},Gi=-1,Ay=0,Dy=i=>{const{objectId:t=-1,onClose:s=null}=i,[n,a]=o.useState(null),[r,l]=o.useState(Gi),{roomSession:c=null}=Re(),m=()=>{c.useMultistateItem(t),s()};return o.useEffect(()=>{if(!c||t===-1)return;const h=Uo(c.roomId,t,X.FLOOR);if(!h)return;a(h);let d=Gi;switch(h.specialType){case ce.MONSTERPLANT_SEED:d=Ay;break}if(d===Gi){s();return}l(d)},[c,t,s]),r===Gi?null:e.jsxs(ne,{className:"nitro-use-product-confirmation",children:[e.jsx(se,{headerText:u("useproduct.widget.title.plant_seed",["name"],[n.name]),onCloseClick:s}),e.jsx(ee,{center:!0,children:e.jsxs(_,{gap:2,overflow:"hidden",children:[e.jsx(N,{children:e.jsx(A,{className:"product-preview",children:e.jsx(A,{className:"monsterplant-image"})})}),e.jsxs(N,{justifyContent:"between",overflow:"auto",children:[e.jsxs(N,{gap:2,children:[e.jsx(C,{children:u("useproduct.widget.text.plant_seed",["productName"],[n.name])}),e.jsx(C,{children:u("useproduct.widget.info.plant_seed")})]}),e.jsxs(_,{alignItems:"center",justifyContent:"between",children:[e.jsx(P,{variant:"danger",onClick:s,children:u("useproduct.widget.cancel")}),e.jsx(P,{variant:"success",onClick:m,children:u("widget.monsterplant_seed.button.use")})]})]})]})})]})},Bi=-1,Py=0,Ly=i=>{const{objectId:t=-1,onClose:s=null}=i,[n,a]=o.useState(Bi),[r,l]=o.useState(je.MALE),[c,m]=o.useState(null),{roomSession:h=null}=Re(),d=()=>{Fl().send(new Sb(t)),Fl().send(new gm(r,c)),s()};return o.useEffect(()=>{let g=Bi;const f=V().figure,j=V().gender,p=[];if(h&&t>=0){const I=Uo(h.roomId,t,X.FLOOR);if(I)switch(I.specialType){case ce.FIGURE_PURCHASABLE_SET:g=Py;const x=I.customParams.split(",").map(E=>parseInt(E));for(const E of x)xt().isValidFigureSetForGender(E,j)&&p.push(E);break}}if(g===Bi){s();return}l(j),m(xt().getFigureStringWithFigureIds(f,j,p)),a(g)},[h,t,s]),n===Bi?null:e.jsxs(ne,{className:"nitro-use-product-confirmation",children:[e.jsx(se,{headerText:u("useproduct.widget.title.bind_clothing"),onCloseClick:s}),e.jsx(ee,{center:!0,children:e.jsxs(_,{gap:2,overflow:"hidden",children:[e.jsx(N,{children:e.jsx(A,{className:"mannequin-preview",children:e.jsx(tt,{figure:c,direction:2})})}),e.jsxs(N,{justifyContent:"between",overflow:"auto",children:[e.jsxs(N,{gap:2,children:[e.jsx(C,{children:u("useproduct.widget.text.bind_clothing")}),e.jsx(C,{children:u("useproduct.widget.info.bind_clothing")})]}),e.jsxs(_,{alignItems:"center",justifyContent:"between",children:[e.jsx(P,{variant:"danger",onClick:s,children:u("useproduct.widget.cancel")}),e.jsx(P,{variant:"success",onClick:d,children:u("useproduct.widget.bind_clothing")})]})]})]})})]})},My=i=>{const{closeConfirm:t=null,processAction:s=null,onClose:n=null,objectId:a=-1,mode:r=null,confirmMode:l=null,confirmingObjectId:c=-1,groupData:m=null,isGroupMember:h=!1,objectOwnerId:d=-1}=gv(),{simpleAlert:g=null}=Pe();M(wb,j=>{const p=j.getParser();if(p)switch(p.count){case 1:g(u("costumehopper.costumerequired.bodytext"),null,"catalog/open/temporary_effects",u("costumehopper.costumerequired.buy"),u("costumehopper.costumerequired.header"),null);break;case 2:g(u("viphopper.viprequired.bodytext"),null,"catalog/open/habbo_club",u("viprequired.buy.vip"),u("viprequired.header"),null);break;case 3:g(u("gate.viprequired.bodytext"),null,"catalog/open/habbo_club",u("viprequired.buy.vip"),u("gate.viprequired.title"),null);break}});const f=V().userId===d;return e.jsxs(e.Fragment,{children:[l===Kl&&e.jsx(Dy,{objectId:c,onClose:t}),l===Xl&&e.jsx(Ly,{objectId:c,onClose:t}),l===gh&&e.jsx(ky,{objectId:c,onClose:t}),l===Ql&&e.jsx(Oy,{objectId:c,onClose:t}),e.jsx(yy,{ownerId:d}),a>=0&&r&&e.jsxs(vn,{objectId:a,category:X.FLOOR,onClose:n,fades:!0,children:[r===Lt.FRIEND_FURNITURE&&e.jsxs(e.Fragment,{children:[e.jsx(es,{children:u("friendfurni.context.title")}),e.jsx(H,{onClick:j=>s("use_friend_furni"),children:u("friendfurni.context.use")})]}),r===Lt.MONSTERPLANT_SEED&&e.jsxs(e.Fragment,{children:[e.jsx(es,{children:u("furni.mnstr_seed.name")}),e.jsx(H,{onClick:j=>s("use_monsterplant_seed"),children:u("widget.monsterplant_seed.button.use")})]}),r===Lt.RANDOM_TELEPORT&&e.jsxs(e.Fragment,{children:[e.jsx(es,{children:u("furni.random_teleport.name")}),e.jsx(H,{onClick:j=>s("use_random_teleport"),children:u("widget.random_teleport.button.use")})]}),r===Lt.PURCHASABLE_CLOTHING&&e.jsxs(e.Fragment,{children:[e.jsx(es,{children:u("furni.generic_usable.name")}),e.jsx(H,{onClick:j=>s("use_purchaseable_clothing"),children:u("widget.generic_usable.button.use")})]}),r===Lt.MYSTERY_BOX&&e.jsxs(e.Fragment,{children:[e.jsx(es,{children:u("mysterybox.context.title")}),e.jsx(H,{onClick:j=>s("use_mystery_box"),children:u("mysterybox.context."+(f?"owner":"other")+".use")})]}),r===Lt.MYSTERY_TROPHY&&e.jsxs(e.Fragment,{children:[e.jsx(es,{children:u("mysterytrophy.header.title")}),e.jsx(H,{onClick:j=>s("use_mystery_trophy"),children:u("friendfurni.context.use")})]}),r===hh&&m&&e.jsxs(e.Fragment,{children:[e.jsx(es,{className:"cursor-pointer text-truncate",onClick:()=>oi(m.guildId),children:m.guildName}),!h&&e.jsx(H,{onClick:j=>s("join_group"),children:u("widget.furniture.button.join.group")}),e.jsx(H,{onClick:j=>s("go_to_group_homeroom"),children:u("widget.furniture.button.go.to.group.home.room")}),m.guildHasReadableForum&&e.jsx(H,{onClick:j=>s("open_forum"),children:u("widget.furniture.button.open_group_forum")})]})]})]})},Uy=i=>{const{objectId:t=-1,color:s=0,setColor:n=null,applyToner:a=null,toggleToner:r=null,onClose:l=null}=uv();return t===-1?null:e.jsxs(ne,{theme:"primary-slim",className:"nitro-room-widget-toner",children:[e.jsx(se,{headerText:u("widget.backgroundcolor.title"),onCloseClick:l}),e.jsxs(ee,{overflow:"hidden",justifyContent:"between",children:[e.jsx(N,{overflow:"auto",gap:1,children:e.jsx("input",{type:"color",className:"form-control",value:ls.makeColorNumberHex(s),onChange:c=>n(ls.convertFromHex(c.target.value))})}),e.jsxs(N,{gap:1,children:[e.jsx(P,{fullWidth:!0,variant:"primary",onClick:r,children:u("widget.backgroundcolor.button.on")}),e.jsx(P,{fullWidth:!0,variant:"primary",onClick:a,children:u("widget.backgroundcolor.button.apply")})]})]})]})},Fy=i=>{const{objectId:t=-1,color:s="1",badgeName:n="",badgeDesc:a="",date:r="",senderName:l="",onClose:c=null}=mv();return t===-1?null:e.jsx(nh,{color:s,message:a,date:r,senderName:l,customTitle:n,onCloseClick:c})},Vy=i=>{const{objectId:t=-1,recipes:s=[],ingredients:n=[],selectedRecipe:a=null,requiredIngredients:r=null,isCrafting:l=!1,craft:c=null,selectRecipe:m=null,onClose:h=null}=pv(),{roomSession:d=null}=Re(),[g,f]=o.useState(!1),j=o.useMemo(()=>{const x=W().getRoomObject(d.roomId,t,X.FLOOR);return Wt(x)},[t,d.roomId]),p=o.useMemo(()=>{if(!r||!r.length)return!1;for(const x of r){const E=n.find(v=>v.name===x.itemName);if(!E||E.count<x.count)return!1}return!0},[n,r]),I=()=>{if(!g){f(!0);return}c(),f(!1)};return o.useEffect(()=>{f(!1)},[a]),t===-1?null:e.jsxs(ne,{className:"nitro-widget-crafting",theme:"primary-slim",children:[e.jsx(se,{headerText:u("crafting.title"),onCloseClick:h}),e.jsx(ee,{children:e.jsxs(_,{grow:!0,overflow:"hidden",gap:2,children:[e.jsxs(_,{column:!0,fullWidth:!0,gap:2,children:[e.jsxs(N,{overflow:"hidden",fullHeight:!0,children:[e.jsx("div",{className:"bg-muted rounded py-1 text-center",children:u("crafting.title.products")}),e.jsx(ke,{columnCount:5,children:s.length>0&&s.map(x=>e.jsx(Ce,{itemImage:x.iconUrl,itemActive:a&&a.name===x.name,onClick:()=>m(x)},x.name))})]}),e.jsxs(N,{overflow:"hidden",fullHeight:!0,children:[e.jsx("div",{className:"bg-muted rounded py-1 text-center",children:u("crafting.title.mixer")}),e.jsx(ke,{columnCount:5,children:n.length>0&&n.map(x=>e.jsx(Ce,{itemImage:x.iconUrl,itemCount:x.count,itemCountMinimum:0,className:(x.count?"":"opacity-0-5 ")+"cursor-default"},x.name))})]})]}),e.jsxs(_,{column:!0,fullWidth:!0,gap:2,children:[!a&&e.jsx(N,{center:!0,fullHeight:!0,className:"text-black text-center",children:u("crafting.info.start")}),a&&e.jsxs(e.Fragment,{children:[e.jsxs(N,{overflow:"hidden",fullHeight:!0,children:[e.jsx("div",{className:"bg-muted rounded py-1 text-center",children:u("crafting.current_recipe")}),e.jsx(ke,{columnCount:5,children:!!r&&r.length>0&&r.map(x=>{const E=n.find(b=>b.name===x.itemName),v=[];for(let b=0;b<x.count;b++)v.push(e.jsx(Ce,{itemImage:E.iconUrl,className:(E.count-b<=0?"opacity-0-5 ":"")+"cursor-default"},b));return v})})]}),e.jsxs(_,{gap:2,column:!0,fullHeight:!0,children:[e.jsxs(_,{gap:2,className:"bg-muted rounded",column:!0,fullHeight:!0,children:[e.jsx("div",{className:"py-1 text-center",children:u("crafting.result")}),e.jsxs(_,{gap:1,center:!0,column:!0,fullHeight:!0,className:"pb-1",children:[e.jsx(N,{fullHeight:!0,children:e.jsx("img",{src:a.iconUrl})}),e.jsx("div",{className:"text-black",children:a.localizedName})]})]}),e.jsxs(P,{variant:!j||!p?"danger":g?"warning":l?"primary":"success",disabled:!j||!p||l,onClick:I,children:[!l&&u(j?p?g?"generic.confirm":"crafting.btn.craft":"crafting.status.recipe.incomplete":"crafting.btn.notowner"),l&&e.jsx(Sc,{})]})]})]})]})]})})]})},Gy=i=>{const[t,s]=o.useState(!1),{presets:n=[],dimmerState:a=0,selectedPresetId:r=0,color:l=16777215,brightness:c=255,effectId:m=0,selectedColor:h=0,setSelectedColor:d=null,selectedBrightness:g=0,setSelectedBrightness:f=null,selectedEffectId:j=0,setSelectedEffectId:p=null,selectPresetId:I=null,applyChanges:x}=jv(),E=()=>{Ps.previewDimmer(l,c,m===2),s(!1)};Ie(be.REMOVE_DIMMER,b=>s(!1)),o.useEffect(()=>{!n||!n.length||s(!0)},[n]);const v=o.useMemo(()=>K("widget.dimmer.colorwheel",!1),[]);return t?e.jsxs(ne,{className:"nitro-room-widget-dimmer",children:[e.jsx(se,{headerText:u("widget.dimmer.title"),onCloseClick:E}),a===1&&e.jsx(Mn,{children:n.map(b=>e.jsx(bn,{isActive:r===b.id,onClick:w=>I(b.id),children:u(`widget.dimmer.tab.${b.id}`)},b.id))}),e.jsxs(ee,{children:[a===0&&e.jsxs(N,{alignItems:"center",children:[e.jsx(A,{className:"dimmer-banner"}),e.jsx(C,{center:!0,className:"bg-muted rounded p-1",children:u("widget.dimmer.info.off")}),e.jsx(P,{fullWidth:!0,variant:"success",onClick:()=>Ps.changeState(),children:u("widget.dimmer.button.on")})]}),a===1&&e.jsxs(e.Fragment,{children:[e.jsxs(N,{gap:1,children:[e.jsx(C,{fontWeight:"bold",children:u("widget.backgroundcolor.hue")}),v&&e.jsx("input",{type:"color",className:"form-control",value:ls.makeColorNumberHex(h),onChange:b=>d(ls.convertFromHex(b.target.value))}),!v&&e.jsx(te,{gap:1,columnCount:7,children:Ps.AVAILABLE_COLORS.map((b,w)=>e.jsx(N,{fullWidth:!0,pointer:!0,className:Bt("color-swatch rounded",b===h&&"active"),onClick:()=>d(b),style:{backgroundColor:Ps.HTML_COLORS[w]}},w))})]}),e.jsxs(N,{gap:1,children:[e.jsx(C,{fontWeight:"bold",children:u("widget.backgroundcolor.lightness")}),e.jsx(Ot,{min:Ps.MIN_BRIGHTNESS,max:Ps.MAX_BRIGHTNESS,value:g,onChange:b=>f(b),thumbClassName:"thumb percent",renderThumb:(b,w)=>e.jsx("div",{...b,children:Ps.scaleBrightness(w.valueNow)})})]}),e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx("input",{className:"form-check-input",type:"checkbox",checked:j===2,onChange:b=>p(b.target.checked?2:1)}),e.jsx(C,{children:u("widget.dimmer.type.checkbox")})]}),e.jsxs(_,{gap:1,children:[e.jsx(P,{fullWidth:!0,variant:"danger",onClick:()=>Ps.changeState(),children:u("widget.dimmer.button.off")}),e.jsx(P,{fullWidth:!0,variant:"success",onClick:x,children:u("widget.dimmer.button.apply")})]})]})]})]}):null},By=i=>{const{objectId:t=-1,value:s=0,onClose:n=null,redeem:a=null}=Ev();return t===-1?null:e.jsxs(ne,{className:"nitro-widget-exchange-credit",theme:"primary-slim",children:[e.jsx(se,{headerText:u("catalog.redeem.dialog.title"),onCloseClick:n}),e.jsx(ee,{center:!0,children:e.jsxs(_,{overflow:"hidden",gap:2,children:[e.jsx(N,{center:!0,children:e.jsx(A,{className:"exchange-image"})}),e.jsxs(N,{grow:!0,justifyContent:"between",overflow:"hidden",children:[e.jsxs(N,{gap:1,overflow:"auto",children:[e.jsx(C,{fontWeight:"bold",children:u("creditfurni.description",["credits"],[s.toString()])}),e.jsx(C,{children:u("creditfurni.prompt")})]}),e.jsx(P,{variant:"success",onClick:a,children:u("catalog.redeem.dialog.button.exchange")})]})]})})]})},Hy=i=>{const{currentIndex:t=-1,currentPhotos:s=null}=i,[n,a]=o.useState(0),r=s&&s.length?s[n]:null,l=()=>{a(h=>{let d=h+1;return d>=s.length&&(d=0),d})},c=()=>{a(h=>{let d=h-1;return d<0&&(d=s.length-1),d})},m=(h,d,g)=>{const f=W().getRoomObject(h,d,X.WALL);if(f)return g=="username"?f.model.getValue(Z.FURNITURE_OWNER_NAME):f.model.getValue(Z.FURNITURE_OWNER_ID)};return o.useEffect(()=>{a(t)},[t]),r?e.jsxs(te,{style:{display:"flex",flexDirection:"column"},children:[e.jsx(_,{center:!0,className:"picture-preview border border-black",style:r.w?{backgroundImage:"url("+r.w+")"}:{},children:!r.w&&e.jsx(C,{bold:!0,children:u("camera.loading")})}),r.m&&r.m.length&&e.jsx(C,{center:!0,children:r.m}),e.jsxs(_,{alignItems:"center",justifyContent:"between",children:[e.jsxs(C,{children:[" ",new Date(r.t*1e3).toLocaleDateString(void 0,{day:"numeric",month:"long",year:"numeric"})," "]}),e.jsxs(C,{className:"username",onClick:()=>ns(Number(m(r.s,Number(r.u),"id"))),children:[" ",m(r.s,Number(r.u),"username")," "]})]}),s.length>1&&e.jsxs(_,{className:"picture-preview-buttons",children:[e.jsx(xm,{className:"cursor-pointer",onClick:c}),e.jsx(jm,{className:"cursor-pointer",onClick:l})]})]}):null},Wy=i=>{const{objectId:t=-1,currentPhotoIndex:s=-1,currentPhotos:n=null,onClose:a=null}=Cv(),{report:r=null}=Fs();return t===-1||s===-1?null:e.jsxs(ne,{className:"nitro-external-image-widget",theme:"primary-slim",children:[e.jsx(se,{headerText:u("camera.interface.title"),isGalleryPhoto:!0,onReportPhoto:()=>r(Ze.PHOTO,{extraData:n[s].w,roomId:n[s].s,reportedUserId:V().userId,roomObjectId:Number(n[s].u)}),onCloseClick:a}),e.jsx(ee,{children:e.jsx(Hy,{currentIndex:s,currentPhotos:n})})]})},qy=i=>{const{objectId:t=-1,type:s=0,stage:n=0,usernames:a=[],figures:r=[],date:l=null,onClose:c=null,respond:m=null}=vv();if(t===-1)return null;if(n>0)return e.jsxs(ne,{className:"nitro-engraving-lock",theme:"primary-slim",children:[e.jsx(se,{headerText:u("friend.furniture.confirm.lock.caption"),onCloseClick:c}),e.jsxs(ee,{children:[e.jsx("h5",{className:"text-black text-center fw-bold mt-2 mb-2",children:u("friend.furniture.confirm.lock.subtitle")}),e.jsx("div",{className:"d-flex justify-content-center mb-2",children:e.jsx("div",{className:`engraving-lock-stage-${n}`})}),n===2&&e.jsx("div",{className:"text-small text-black text-center mb-2",children:u("friend.furniture.confirm.lock.other.locked")}),e.jsxs(_,{gap:1,children:[e.jsx(P,{fullWidth:!0,onClick:h=>m(!1),children:u("friend.furniture.confirm.lock.button.cancel")}),e.jsx(P,{fullWidth:!0,variant:"success",onClick:h=>m(!0),children:u("friend.furniture.confirm.lock.button.confirm")})]})]})]});if(a.length>0)return e.jsx(rr,{handleSelector:".nitro-engraving-lock-view",children:e.jsxs("div",{className:`nitro-engraving-lock-view engraving-lock-${s}`,children:[e.jsx("div",{className:"engraving-lock-close",onClick:c}),e.jsxs(_,{justifyContent:"center",children:[e.jsx("div",{className:"engraving-lock-avatar",children:e.jsx(tt,{figure:r[0],direction:2})}),e.jsx("div",{className:"engraving-lock-avatar",children:e.jsx(tt,{figure:r[1],direction:4})})]}),e.jsxs(N,{justifyContent:"between",className:"mt-1",children:[e.jsxs(N,{alignItems:"center",justifyContent:"center",gap:1,children:[e.jsxs("div",{children:[s===0&&u("lovelock.engraving.caption"),s===3&&u("wildwest.engraving.caption")]}),e.jsx("div",{children:l})]}),e.jsxs(_,{justifyContent:"center",gap:4,children:[e.jsx("div",{children:a[0]}),e.jsx("div",{children:a[1]})]})]})]})})},zy=i=>{const{objectId:t=-1,classId:s=-1,itemType:n=null,text:a=null,isOwnerOfFurniture:r=!1,senderName:l=null,senderFigure:c=null,placedItemId:m=-1,placedItemType:h=null,placedInRoom:d=!1,imageUrl:g=null,openPresent:f=null,onClose:j=null}=Fv(),{groupItems:p=[]}=ar();if(t===-1)return null;const I=E=>{const v=p.find(b=>{var w;return((w=b.getItemById(E))==null?void 0:w.id)===E});v&&oa(v),j()},x=E=>{Nr(E,n===me.WALL?X.WALL:X.FLOOR,Ms.OBJECT_PICKUP),j()};return e.jsxs(ne,{className:"nitro-gift-opening",theme:"primary-slim",children:[e.jsx(se,{headerText:u(l?"widget.furni.present.window.title_from":"widget.furni.present.window.title",["name"],[l]),onCloseClick:j}),e.jsxs(ee,{children:[m===-1&&e.jsxs(N,{overflow:"hidden",children:[e.jsx(_,{center:!0,overflow:"auto",children:e.jsx(th,{userName:l,figure:c,message:a})}),r&&e.jsxs(_,{gap:1,children:[l&&e.jsx(P,{fullWidth:!0,onClick:E=>Q("catalog/open"),children:u("widget.furni.present.give_gift",["name"],[l])}),e.jsx(P,{fullWidth:!0,variant:"success",onClick:f,children:u("widget.furni.present.open_gift")})]})]}),m>-1&&e.jsxs(_,{gap:2,overflow:"hidden",children:[e.jsx(N,{center:!0,className:"p-2",children:e.jsx(Nn,{imageUrl:g})}),e.jsxs(N,{grow:!0,children:[e.jsxs(N,{center:!0,gap:1,children:[e.jsx(C,{wrap:!0,small:!0,children:u("widget.furni.present.message_opened")}),e.jsx(C,{bold:!0,fontSize:5,children:a})]}),e.jsxs(N,{grow:!0,gap:1,children:[e.jsxs(_,{gap:1,children:[d&&e.jsx(P,{fullWidth:!0,onClick:E=>x(m),children:u("widget.furni.present.put_in_inventory")}),e.jsx(P,{fullWidth:!0,variant:"success",onClick:E=>I(m),children:u(d?"widget.furni.present.keep_in_room":"widget.furni.present.place_in_room")})]}),l&&l.length&&e.jsx(P,{fullWidth:!0,onClick:E=>Q("catalog/open"),children:u("widget.furni.present.give_gift",["name"],[l])})]})]})]})]})]})},Yy=i=>{const{stuffDatas:t=null,getScoreType:s=null,getClearType:n=null}=Tv();return!t||!t.size?null:e.jsx(e.Fragment,{children:Array.from(t.entries()).map(([a,r],l)=>e.jsx(Vc,{objectId:a,category:X.FLOOR,children:e.jsxs(N,{className:"nitro-widget-high-score nitro-context-menu",gap:0,children:[e.jsx(es,{children:u("high.score.display.caption",["scoretype","cleartype"],[u(`high.score.display.scoretype.${s(r.scoreType)}`),u(`high.score.display.cleartype.${n(r.clearType)}`)])}),e.jsxs(kh,{overflow:"hidden",gap:1,className:"h-100",children:[e.jsxs(N,{gap:1,children:[e.jsxs(_,{alignItems:"center",className:"px-2",children:[e.jsx(C,{bold:!0,variant:"white",className:"col-8",children:u("high.score.display.users.header")}),e.jsx(C,{align:"end",bold:!0,variant:"white",className:"col-4",children:u("high.score.display.score.header")})]}),e.jsx("hr",{className:"m-0"})]}),e.jsx(N,{overflow:"auto",gap:1,className:"px-2 overflow-y-scroll",children:r.entries.map((c,m)=>e.jsxs(_,{alignItems:"center",children:[e.jsx(C,{variant:"white",className:"col-8",children:c.users.join(", ")}),e.jsx(C,{align:"end",variant:"white",className:"col-4",children:c.score})]},m))})]})]})},l))})},$y=i=>(Ov(),null),Ky=-1,Hi=0,Ol=1,kl=2,Al=3,Dl=4,Xy=i=>{const[t,s]=o.useState(null),[n,a]=o.useState(Ky),{objectId:r=-1,figure:l=null,gender:c=null,clubLevel:m=zt.NO_CLUB,name:h=null,setName:d=null,saveFigure:g=null,wearFigure:f=null,saveName:j=null,onClose:p=null}=Av();return o.useEffect(()=>{if(r===-1)return;const I=ve();if(I.isRoomOwner||I.controllerLevel>=qe.GUEST||V().isModerator){a(Hi);return}if(V().gender.toLowerCase()!==c.toLowerCase()){a(Dl);return}if(vs()<m){a(Al);return}a(kl)},[r,c,m]),o.useEffect(()=>{switch(n){case Hi:case Dl:{const I=xt().createFigureContainer(l);na.transformAsMannequinFigure(I),s(I.getFigureString());break}case Ol:{const I=xt().createFigureContainer(V().figure);na.transformAsMannequinFigure(I),s(I.getFigureString());break}case kl:case Al:{const I=na.getMergedMannequinFigureContainer(V().figure,l);s(I.getFigureString());break}}},[n,l,m]),r===-1?null:e.jsxs(ne,{className:"nitro-mannequin no-resize",theme:"primary-slim",children:[e.jsx(se,{headerText:u("mannequin.widget.title"),onCloseClick:p}),e.jsx(ee,{center:!0,children:e.jsxs(_,{fullWidth:!0,gap:2,overflow:"hidden",children:[e.jsx(N,{children:e.jsxs(A,{position:"relative",className:"mannequin-preview",children:[e.jsx(tt,{position:"absolute",figure:t,direction:2}),m>0&&e.jsx(Nt,{className:"position-absolute end-2 bottom-2",type:"hc"})]})}),e.jsxs(N,{grow:!0,justifyContent:"between",overflow:"auto",children:[n===Hi&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",className:"form-control form-control-sm",value:h,onChange:I=>d(I.target.value),onBlur:j}),e.jsxs(N,{gap:1,children:[e.jsx(P,{variant:"success",onClick:I=>a(Ol),children:u("mannequin.widget.style")}),e.jsx(P,{variant:"success",onClick:f,children:u("mannequin.widget.wear")})]})]}),n===Ol&&e.jsxs(e.Fragment,{children:[e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:h}),e.jsx(C,{wrap:!0,children:u("mannequin.widget.savetext")})]}),e.jsxs(_,{alignItems:"center",justifyContent:"between",children:[e.jsx(C,{underline:!0,pointer:!0,onClick:I=>a(Hi),children:u("mannequin.widget.back")}),e.jsx(P,{variant:"success",onClick:g,children:u("mannequin.widget.save")})]})]}),n===kl&&e.jsxs(e.Fragment,{children:[e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:h}),e.jsx(C,{children:u("mannequin.widget.weartext")})]}),e.jsx(P,{variant:"success",onClick:f,children:u("mannequin.widget.wear")})]}),n===Al&&e.jsx(_,{center:!0,grow:!0,children:e.jsx(C,{children:u("mannequin.widget.clubnotification")})}),n===Dl&&e.jsx(C,{children:u("mannequin.widget.wronggender")})]})]})})]})},Qy=i=>(Bv(),null),Dh=["9CCEFF","FF9CFF","9CFF9C","FFFF33"],Jy=["blue","pink","green","yellow"],Zy=i=>{let t=Dh.indexOf(i);return t===-1&&(t=0),Jy[t]},eO=i=>{const{objectId:t=-1,color:s="0",setColor:n=null,text:a="",setText:r=null,canModify:l=!1,onClose:c=null}=Wv();return t===-1?null:e.jsx(rr,{handleSelector:".drag-handler",windowPosition:Ft.TOP_LEFT,children:e.jsxs("div",{className:"nitro-stickie nitro-stickie-image stickie-"+Zy(s),children:[e.jsxs("div",{className:"d-flex align-items-center stickie-header drag-handler",children:[e.jsx("div",{className:"d-flex align-items-center flex-grow-1 h-100",children:l&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"nitro-stickie-image stickie-trash header-trash",onClick:c}),Dh.map(m=>e.jsx("div",{className:"stickie-color ms-1",onClick:h=>n(m),style:{backgroundColor:ls.makeColorHex(m)}},m))]})}),e.jsx("div",{className:"d-flex align-items-center nitro-stickie-image stickie-close header-close",onClick:c})]}),e.jsx("div",{className:"stickie-context",children:e.jsx("textarea",{className:"context-text",value:a,onChange:m=>r(m.target.value),tabIndex:0,autoFocus:!0})})]})})},tO=i=>{const{objectId:t=-1,height:s=0,maxHeight:n=40,onClose:a=null,updateHeight:r=null}=zv(),[l,c]=o.useState(""),m=h=>{c(h);const d=parseFloat(h);isNaN(d)||d===s||r(d)};return o.useEffect(()=>{c(s.toString())},[s]),t===-1?null:e.jsxs(ne,{className:"nitro-widget-custom-stack-height",theme:"primary-slim",children:[e.jsx(se,{headerText:u("widget.custom.stack.height.title"),onCloseClick:a}),e.jsxs(ee,{justifyContent:"between",children:[e.jsx(C,{children:u("widget.custom.stack.height.text")}),e.jsxs(_,{gap:2,children:[e.jsx(Ot,{min:0,max:n,step:.01,value:s,onChange:h=>r(h),renderThumb:(h,d)=>e.jsx("div",{...h,children:d.valueNow})}),e.jsx("input",{className:"show-number-arrows",style:{width:50},type:"number",min:0,max:n,value:l,onChange:h=>m(h.target.value)})]}),e.jsxs(N,{gap:1,children:[e.jsx(P,{onClick:h=>D(new Ul(t,-100)),children:u("furniture.above.stack")}),e.jsx(P,{onClick:h=>D(new Ul(t,0)),children:u("furniture.floor.level")})]})]})]})},Ph=["9CCEFF","FF9CFF","9CFF9C","FFFF33"],sO=["blue","pink","green","yellow"],nO=["post_it","post_it_shakesp","post_it_dreams","post_it_xmas","post_it_vd","post_it_juninas"],rO=["post_it","shakesp","dreams","christmas","heart","juninas"],aO=i=>{let t=Ph.indexOf(i);return t===-1&&(t=0),sO[t]},iO=i=>{let t=nO.indexOf(i);return t===-1&&(t=0),rO[t]},oO=i=>{const{objectId:t=-1,color:s="0",text:n="",type:a="",canModify:r=!1,updateColor:l=null,updateText:c=null,trash:m=null,onClose:h=null}=$v(),[d,g]=o.useState(!1);return o.useEffect(()=>{g(!1)},[t,s,n,a]),t===-1?null:e.jsx(rr,{handleSelector:".drag-handler",windowPosition:Ft.TOP_LEFT,children:e.jsxs("div",{className:"nitro-stickie nitro-stickie-image stickie-"+(a=="post_it"?aO(s):iO(a)),children:[e.jsxs("div",{className:"d-flex align-items-center stickie-header drag-handler",children:[e.jsx("div",{className:"d-flex align-items-center flex-grow-1 h-100",children:r&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"nitro-stickie-image stickie-trash header-trash",onClick:m}),a=="post_it"&&e.jsx(e.Fragment,{children:Ph.map(f=>e.jsx("div",{className:"stickie-color ms-1",onClick:j=>l(f),style:{backgroundColor:ls.makeColorHex(f)}},f))})]})}),e.jsx("div",{className:"d-flex align-items-center nitro-stickie-image stickie-close header-close",onClick:h})]}),e.jsx("div",{className:"stickie-context",children:!d||!r?e.jsx("div",{className:"context-text",onClick:f=>r&&g(!0),children:n}):e.jsx("textarea",{className:"context-text",defaultValue:n,tabIndex:0,onBlur:f=>c(f.target.value),autoFocus:!0})})]})})},lO=i=>{const{objectId:t=-1,color:s="1",senderName:n="",date:a="",message:r="",onClose:l=null}=Xv();return t===-1?null:e.jsx(nh,{color:s,message:r,date:a,senderName:n,onCloseClick:l})},cO=i=>{const[t,s]=o.useState(null),{objectId:n=-1,videoId:a=null,videoStart:r=0,videoEnd:l=0,currentVideoState:c=null,selectedVideo:m=null,playlists:h=[],onClose:d=null,previous:g=null,next:f=null,pause:j=null,play:p=null,selectVideo:I=null}=s_(),x=v=>{if(s(v.target),n!==-1)switch(v.target.getPlayerState()){case-1:case 1:c!==1&&p();return;case 2:c!==2&&j()}};if(o.useEffect(()=>{if(!(c===null||!t)){if(c===Jn.PLAYING&&t.getPlayerState()!==Jn.PLAYING){t.playVideo();return}if(c===Jn.PAUSED&&t.getPlayerState()!==Jn.PAUSED){t.pauseVideo();return}}},[c,t]),n===-1)return null;const E={height:"375",width:"500",playerVars:{autoplay:1,disablekb:1,controls:0,origin:window.origin,modestbranding:1,start:r,end:l}};return e.jsxs(ne,{className:"youtube-tv-widget",children:[e.jsx(se,{headerText:u("catalog.page.youtube_tvs"),onCloseClick:d}),e.jsx(ee,{children:e.jsxs("div",{className:"row w-100 h-100",children:[e.jsxs("div",{className:"youtube-video-container col-9 overflow-hidden",children:[a&&a.length>0&&e.jsx(Tb,{videoId:a,opts:E,onReady:v=>s(v.target),onStateChange:x,containerClassName:"youtubeContainer"}),(!a||a.length===0)&&e.jsx("div",{className:"empty-video w-100 h-100 justify-content-center align-items-center d-flex",children:u("widget.furni.video_viewer.no_videos")})]}),e.jsxs("div",{className:"playlist-container col-3 d-flex flex-column",children:[e.jsxs("span",{className:"playlist-controls justify-content-center d-flex",children:[e.jsx("i",{className:"icon icon-youtube-prev cursor-pointer",onClick:g}),e.jsx("i",{className:"icon icon-youtube-next cursor-pointer",onClick:f})]}),e.jsx("div",{className:"mb-1",children:u("widget.furni.video_viewer.playlists")}),e.jsx(ke,{columnCount:1,columnMinWidth:80,columnMinHeight:100,className:"mb-1",overflow:"auto",children:h&&h.map((v,b)=>e.jsx(Ce,{onClick:w=>I(v.video),itemActive:v.video===m,children:e.jsx("b",{children:v.title})},b))})]})]})})]})},uO=i=>{const{diskInventory:t=null,addToPlaylist:s=null}=i,[n,a]=o.useState(-1),[r,l]=o.useState(-1),c=o.useCallback((d,g)=>{d.stopPropagation(),l(f=>f===g?-1:g)},[]),m=o.useCallback((d,g)=>{var f,j;d.stopPropagation(),s(g,(j=(f=pe().soundManager.musicController)==null?void 0:f.getRoomItemPlaylist())==null?void 0:j.length)},[s]),h=()=>{Q("catalog/open/"+Zi.TRAX_SONGS)};return o.useEffect(()=>{var d;if(r!==-1)return(d=pe().soundManager.musicController)==null||d.playSong(r,Ca.PRIORITY_SONG_PLAY,0,0,0,0),()=>{var g;(g=pe().soundManager.musicController)==null||g.stop(Ca.PRIORITY_SONG_PLAY)}},[r]),o.useEffect(()=>()=>l(-1),[]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-success py-3 container-fluid justify-content-center d-flex rounded",children:[e.jsx("img",{src:K("image.library.url")+"playlist/title_mymusic.gif",className:"my-music"}),e.jsx("h2",{className:"ms-4",children:u("playlist.editor.my.music")})]}),e.jsx("div",{className:"h-100 overflow-y-scroll mt-4 py-2",children:e.jsx(ke,{columnCount:3,columnMinWidth:95,gap:1,children:t&&t.getKeys().map((d,g)=>{var I;const f=t.getKey(g),j=t.getWithIndex(g),p=(I=pe().soundManager.musicController)==null?void 0:I.getSongInfo(j);return e.jsxs(Ce,{itemActive:n===g,onClick:()=>a(x=>x===g?-1:g),classNames:["text-black"],children:[e.jsx("div",{className:"disk-image flex-shrink-0 mb-n2",style:{backgroundColor:Km(p==null?void 0:p.songData)}}),e.jsx(C,{truncate:!0,fullWidth:!0,className:"text-center",children:p==null?void 0:p.name}),n===g&&e.jsxs(_,{position:"absolute",className:"bottom-0 mb-1 bg-secondary p-1 rounded",alignItems:"center",justifyContent:"center",gap:2,children:[e.jsx(P,{onClick:x=>c(x,j),variant:"light",children:e.jsx(A,{className:r===j?"pause-btn":"preview-song"})}),e.jsx(P,{onClick:x=>m(x,f),variant:"light",children:e.jsx(A,{className:"move-disk"})})]})]},g)})})}),e.jsxs("div",{className:"playlist-bottom text-black p-1",children:[e.jsx("h5",{children:u("playlist.editor.text.get.more.music")}),e.jsx("div",{children:u("playlist.editor.text.you.have.no.songdisks.available")}),e.jsx("div",{children:u("playlist.editor.text.you.can.buy.some.from.the.catalogue")}),e.jsx("button",{className:"btn btn-primary btn-sm",onClick:()=>h(),children:u("playlist.editor.button.open.catalogue")})]}),e.jsx("img",{src:K("image.library.url")+"playlist/background_get_more_music.gif",className:"get-more"})]})},dO=i=>{var d,g;const{furniId:t=-1,playlist:s=null,currentPlayingIndex:n=-1,removeFromPlaylist:a=null,togglePlayPause:r=null}=i,[l,c]=o.useState(-1),m=f=>{l===f&&a(f)},h=(f,j)=>{r(f,j!==-1?j:0)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-primary py-3 container-fluid justify-content-center d-flex rounded",children:[e.jsx("img",{src:K("image.library.url")+"playlist/title_playlist.gif",className:"playlist-img"}),e.jsx("h2",{className:"ms-4",children:u("playlist.editor.playlist")})]}),e.jsx("div",{className:"h-100 overflow-y-scroll py-2",children:e.jsx(_,{column:!0,gap:2,children:s&&s.map((f,j)=>e.jsxs(_,{gap:1,className:"text-black cursor-pointer "+(l===j?"border border-muted border-2 rounded":"border-2"),alignItems:"center",onClick:()=>c(p=>p===j?-1:j),children:[e.jsx(A,{onClick:()=>m(j),className:"disk-2 "+(l===j?"selected-song":""),style:{backgroundColor:l===j?"":Km(f.songData)}}),f.name]},j))})}),(!s||s.length===0)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"playlist-bottom text-black p-1 ms-5",children:[e.jsx("h5",{children:u("playlist.editor.add.songs.to.your.playlist")}),e.jsx("div",{children:u("playlist.editor.text.click.song.to.choose.click.again.to.move")})]}),e.jsx("img",{src:K("image.library.url")+"playlist/background_add_songs.gif",className:"add-songs"})]}),s&&s.length>0&&e.jsxs(e.Fragment,{children:[n===-1&&e.jsx(P,{variant:"success",size:"lg",onClick:()=>h(t,l),children:u("playlist.editor.button.play.now")}),n!==-1&&e.jsxs(_,{gap:1,children:[e.jsx(P,{variant:"danger",onClick:()=>h(t,l),children:e.jsx(A,{className:"pause-song"})}),e.jsxs(_,{column:!0,children:[e.jsx(C,{bold:!0,display:"block",children:u("playlist.editor.text.now.playing.in.your.room")}),e.jsx(C,{children:((d=s[n])==null?void 0:d.name)+" - "+((g=s[n])==null?void 0:g.creator)})]})]})]})]})},mO=i=>{const{objectId:t=-1,currentPlayingIndex:s=-1,playlist:n=null,diskInventory:a=null,onClose:r=null,togglePlayPause:l=null,removeFromPlaylist:c=null,addToPlaylist:m=null}=Pv();return t===-1?null:e.jsxs(ne,{className:"nitro-playlist-editor-widget",theme:"primary-slim",children:[e.jsx(se,{headerText:u("playlist.editor.title"),onCloseClick:r}),e.jsx(ee,{children:e.jsxs("div",{className:"d-flex flex-row gap-1 h-100",children:[e.jsx("div",{className:"w-50 position-relative overflow-hidden h-100 rounded d-flex flex-column",children:e.jsx(uO,{addToPlaylist:m,diskInventory:a})}),e.jsx("div",{className:"w-50 position-relative overflow-hidden h-100 rounded d-flex flex-column",children:e.jsx(dO,{furniId:t,removeFromPlaylist:c,playlist:n,togglePlayPause:l,currentPlayingIndex:s})})]})})]})},hO=i=>e.jsxs(A,{fit:!0,position:"absolute",className:"nitro-room-widgets top-0 start-0",children:[e.jsx(Uy,{}),e.jsx(Fy,{}),e.jsx(Vy,{}),e.jsx(Gy,{}),e.jsx(By,{}),e.jsx(Wy,{}),e.jsx(qy,{}),e.jsx(zy,{}),e.jsx(Yy,{}),e.jsx($y,{}),e.jsx(Xy,{}),e.jsx(mO,{}),e.jsx(Qy,{}),e.jsx(eO,{}),e.jsx(tO,{}),e.jsx(oO,{}),e.jsx(lO,{}),e.jsx(My,{}),e.jsx(cO,{})]}),gO=i=>{const{isVisible:t=!1,errorResult:s=null,petName:n=null,objectType:a=null,onChangePetName:r=null,onConfirm:l=null,onClose:c=null}=I_();return e.jsx(e.Fragment,{children:t&&e.jsxs(ne,{className:"nitro-pet-package no-resize",theme:"primary-slim",children:[e.jsx(se,{center:!0,headerText:u(a==="gnome_box"?"widgets.gnomepackage.name.title":"furni.petpackage.open"),onCloseClick:()=>c()}),e.jsxs(ee,{children:[e.jsxs(_,{className:"pet-package-container-top p-3",children:[e.jsx("div",{className:`package-image-${a} flex-shrink-0`}),e.jsx("div",{className:"m-2",children:e.jsx(C,{variant:"white",className:"package-text-big",children:u(a==="gnome_box"?"widgets.gnomepackage.name.title":"furni.petpackage")})})]}),e.jsx(_,{className:"pet-package-container-bottom p-2",children:e.jsxs(N,{gap:1,children:[e.jsxs(_,{alignItems:"center",className:"bg-white rounded py-1 px-2 input-pet-package-container",children:[e.jsx("input",{type:"text",className:"form-control form-control-sm input-pet-package",maxLength:K("pet.package.name.max.length"),placeholder:u(a==="gnome_box"?"widgets.gnomepackage.name.select":"widgets.petpackage.name.title"),value:n,onChange:m=>r(m.target.value)}),e.jsx("div",{className:"package-pencil-image flex-shrink-0 small fa-icon"})]}),s.length>0&&e.jsx(A,{className:"invalid-feedback d-block m-0",children:s}),e.jsxs(_,{className:"mt-2",gap:5,display:"flex",justifyContent:"center",alignItems:"center",children:[e.jsx(C,{pointer:!0,className:"text-decoration",onClick:()=>c(),children:u("cancel")}),e.jsx(Rb,{variant:n.length<3?"danger":"success",disabled:n.length<3,onClick:()=>l(),children:u(a==="gnome_box"?"widgets.gnomepackage.name.pick":"furni.petpackage.confirm")})]})]})})]})]})})},fO=i=>{const[t,s]=o.useState("bobba"),[n,a]=o.useState(""),[r,l]=o.useState(!1),{wordsFilter:c=[],isVisible:m=null,setWordsFilter:h,onClose:d=null}=h_(),{navigatorData:g=null}=Vs(),f=I=>{(r?!n:!t)||(D(new yb(g.enteredGuestRoom.roomId,I,r?n:t)),a(""),s("bobba"),l(!1),!(I&&c.includes(r?n:t))&&h(x=>{const E=[...x];return I?E.push(r?n:t):E.splice(E.indexOf(r?n:t),1),E}))},j=I=>{s(I),l(!1)},p=I=>{a(I),l(!0)};return m?e.jsxs(ne,{className:"nitro-guide-tool no-resize",theme:"primary-slim",children:[e.jsx(se,{headerText:u("navigator.roomsettings.roomfilter"),onCloseClick:()=>d()}),e.jsxs(ee,{className:"text-black",children:[e.jsxs(te,{className:"d-flex align-items-center justify-content-end gap-2",children:[e.jsx("input",{type:"text",className:"form-control form-control-sm",maxLength:255,value:t,onChange:I=>j(I.target.value)}),e.jsx(P,{onClick:()=>f(!0),children:u("navigator.roomsettings.roomfilter.addword")})]}),e.jsx(N,{overflow:"auto",gap:0,className:"form-control form-control-sm",style:{height:"100px"},children:c&&c.length>0&&c.map((I,x)=>e.jsx(_,{alignItems:"center",className:Bt("rounded p-1",n===I&&"bg-muted"),pointer:!0,onClick:E=>p(I),children:e.jsx(C,{truncate:!0,children:I})},x))}),e.jsx(te,{className:"d-flex align-items-center justify-content-end gap-2",children:e.jsx(P,{variant:"danger",onClick:()=>f(!1),disabled:c.length===0||!r,children:u("navigator.roomsettings.roomfilter.removeword")})})]})]}):null},pO=i=>{const[t,s]=o.useState(!1),{roomSession:n=null}=Re();rt([cn.SHOW_THUMBNAIL,cn.HIDE_THUMBNAIL,cn.TOGGLE_THUMBNAIL],r=>{switch(r.type){case cn.SHOW_THUMBNAIL:s(!0);return;case cn.HIDE_THUMBNAIL:s(!1);return;case cn.TOGGLE_THUMBNAIL:s(l=>!l);return}});const a=r=>{W().saveTextureAsScreenshot(r,!0),s(!1)};return t?e.jsx(xN,{roomId:n.roomId,textureReceiver:a,onClose:()=>s(!1)}):null},xO=i=>{var L,k,y,R;const[t,s]=o.useState(!1),[n,a]=o.useState(!1),[r,l]=o.useState(null),[c,m]=o.useState(null),[h,d]=o.useState(null),[g,f]=o.useState(!1),[j,p]=o.useState(!1),[I,x]=o.useState(!0),[E,v]=o.useState([]),{navigatorData:b=null}=Vs(),{roomSession:w=null}=Re();o.useEffect(()=>{r||l(u("landing.view.generic.welcome.first_login"))},[r]);const S=(O,F)=>{switch(O){case"settings":Q("navigator/toggle-room-info");return;case"zoom":a(G=>{let re=W().getRoomInstanceRenderingCanvasScale(w.roomId,1);return G?re*=2:re/=2,W().setRoomInstanceRenderingCanvasScale(w.roomId,1,re),!G});return;case"chat_history":Q("chat-history/toggle");return;case"hiddenbubbles":Q("nitrobubblehidden/toggle");const U=document.getElementById("bubble");U&&U.classList.toggle("icon-chat-disablebubble");const q=document.getElementById("hiddenbubblesText");if(q){const G=u(t?"room.unmute.button.text":"room.mute.button.text");q.innerText=G}s(!t);const $=document.getElementById("bubbleIcon");$&&$.classList.toggle("icon-chat-disablebubble");return;case"like_room":D(new Ob(1));return;case"toggle_room_link":Q("navigator/toggle-room-link");return;case"navigator_search_tag":Q(`navigator/search/${F}`),D(new wr("hotel_view",`tag:${F}`));return;case"room_history":E.length>0&&p(G=>!G);return;case"room_history_back":ss(E[E.findIndex(G=>G.roomId===b.currentRoomId)-1].roomId);return;case"room_history_next":ss(E[E.findIndex(G=>G.roomId===b.currentRoomId)+1].roomId);return}},T=(O,F)=>{let U=JSON.parse(window.localStorage.getItem("nitro.room.history"));if(U&&U.filter($=>$.roomId===O).length>0)return;U&&U.length>=10&&U.shift();const q=U?[...U,{roomId:O,roomName:F}]:[{roomId:O,roomName:F}];return v(q),Nc("nitro.room.history",q)};return M(ua,O=>{const F=O.getParser();!F.roomEnter||F.data.roomId!==w.roomId||(r!==F.data.roomName&&l(F.data.roomName),c!==F.data.ownerName&&m(F.data.ownerName),h!==F.data.tags&&d(F.data.tags),T(F.data.roomId,F.data.roomName))}),o.useEffect(()=>{const O=()=>{JSON.parse(window.localStorage.getItem("nitro.room.history"))&&window.localStorage.removeItem("nitro.room.history")};return window.addEventListener("beforeunload",O),()=>{window.removeEventListener("beforeunload",O)}},[]),o.useEffect(()=>{f(!0);const O=setTimeout(()=>f(!1),5e3);return()=>clearTimeout(O)},[r,c,h,I]),o.useEffect(()=>{v(JSON.parse(window.localStorage.getItem("nitro.room.history"))??[])},[]),e.jsxs(_,{className:"nitro-room-tools-container",gap:2,children:[e.jsx("div",{className:"btn-toggle toggle-roomtool d-flex align-items-center",onClick:()=>x(!I),children:e.jsx("div",{className:"toggle-icon "+(I?"left":"right")})}),I&&e.jsxs(e.Fragment,{children:[e.jsxs(N,{gap:0,center:!0,className:"nitro-room-tools p-3 px-3",children:[e.jsxs(_,{children:[e.jsxs(N,{center:!0,className:"margin-icons p-2 gap-2",children:[e.jsx(A,{pointer:!0,title:u("room.settings.button.text"),className:"icon icon-cog",onClick:()=>S("settings")}),e.jsx(A,{pointer:!0,title:u("room.zoom.button.text"),onClick:()=>S("zoom"),className:Bt("icon",!n&&"icon-zoom-less",n&&"icon-zoom-more")}),e.jsx(A,{pointer:!0,title:u("room.chathistory.button.text"),onClick:()=>S("chat_history"),className:"icon icon-chat-history"}),b.canRate&&e.jsx(A,{pointer:!0,title:u("room.like.button.text"),onClick:()=>S("like_room"),className:"icon icon-like-room"}),e.jsx(A,{pointer:!0,onClick:()=>S("toggle_room_link"),className:"icon icon-room-link"}),e.jsx(A,{pointer:!0,onClick:()=>S("hiddenbubbles"),className:`icon ${t?"icon-chat-disablebubble":"icon-chat-enablebubble"}`})]}),e.jsxs(N,{className:"d-flex flex-column",children:[e.jsx(_,{className:"w-100 room-tool-item",children:e.jsx(C,{variant:"muted",underline:!0,small:!0,onClick:()=>S("settings"),children:u("room.settings.button.text")})}),e.jsx(_,{className:"w-100 room-tool-item",children:e.jsx(C,{variant:"muted",underline:!0,small:!0,onClick:()=>S("zoom"),children:u("room.zoom.button.text")})}),e.jsx(_,{className:"w-100 room-tool-item",children:e.jsx(C,{variant:"muted",underline:!0,small:!0,onClick:()=>S("chat_history"),children:u("room.chathistory.button.text")})}),b.canRate&&e.jsx(_,{className:"w-100 room-tool-item",children:e.jsx(C,{variant:"muted",underline:!0,small:!0,onClick:()=>S("like_room"),children:u("room.like.button.text")})}),e.jsx(_,{className:"w-100 room-tool-item",children:e.jsx(C,{variant:"muted",underline:!0,small:!0,onClick:()=>S("toggle_room_link"),children:u("navigator.embed.caption")})}),e.jsx(_,{className:"w-100 room-tool-item",children:e.jsxs(C,{variant:"muted",underline:!0,small:!0,onClick:()=>S("hiddenbubbles"),children:[" ",u(t?"room.unmute.button.text":"room.mute.button.text")]})})]})]}),e.jsxs(_,{justifyContent:"center",children:[e.jsx(A,{pointer:E.length>1&&((L=E[0])==null?void 0:L.roomId)!==b.currentRoomId,title:u("room.history.button.back.tooltip"),className:`icon ${(E==null?void 0:E.length)===0||((k=E[0])==null?void 0:k.roomId)===b.currentRoomId?"icon-room-history-back-disabled":"icon-room-history-back-enabled"}`,onClick:()=>{var O;return(E==null?void 0:E.length)===0||((O=E[0])==null?void 0:O.roomId)===b.currentRoomId?null:S("room_history_back")}}),e.jsx(A,{pointer:(E==null?void 0:E.length)>0,title:u("room.history.button.tooltip"),className:`icon ${(E==null?void 0:E.length)===0?"icon-room-history-disabled":"icon-room-history-enabled"} margin-button-history`,onClick:()=>(E==null?void 0:E.length)===0?null:S("room_history")}),e.jsx(A,{pointer:E.length>1&&((y=E[E.length-1])==null?void 0:y.roomId)!==b.currentRoomId,title:u("room.history.button.forward.tooltip"),className:`icon ${(E==null?void 0:E.length)===0||((R=E[E.length-1])==null?void 0:R.roomId)===b.currentRoomId?"icon-room-history-next-disabled":"icon-room-history-next-enabled"}`,onClick:()=>{var O;return(E==null?void 0:E.length)===0||((O=E[E.length-1])==null?void 0:O.roomId)===b.currentRoomId?null:S("room_history_next")}})]})]}),e.jsx(_,{className:"nitro-room-tools-history",style:{bottom:b.canRate?"210px":"180px"},children:e.jsx(ca,{type:Zt.SLIDE_LEFT,inProp:j,children:e.jsx(N,{center:!0,children:e.jsx(N,{className:"px-3 py-2 rounded nitro-room-history",children:e.jsx(N,{gap:1,children:E.length>0&&E.map(O=>e.jsx(C,{bold:O.roomId===b.currentRoomId,variant:O.roomId===b.currentRoomId?"white":"muted",pointer:!0,onClick:()=>ss(O.roomId),children:O.roomName},O.roomId))})})})})}),e.jsx(N,{justifyContent:"center",children:e.jsx(ca,{type:Zt.SLIDE_LEFT,inProp:g,timeout:300,children:e.jsx(N,{center:!0,children:e.jsxs(N,{className:"px-3 py-2 rounded nitro-room-tools-info",overflow:"hidden",children:[e.jsxs(N,{gap:1,children:[" ",e.jsx(C,{wrap:!0,variant:"white",fontSize:4,truncate:!0,children:r})," ",e.jsx(C,{variant:"muted",fontSize:5,truncate:!0,children:c})," "]}),h&&h.length>0?e.jsxs(_,{gap:2,children:[" ",h.map((O,F)=>e.jsxs(C,{small:!0,pointer:!0,truncate:!0,variant:"white",className:"rounded bg-primary p-1",onClick:()=>S("navigator_search_tag",O),children:[" #",O," "]},F))]}):e.jsxs(C,{variant:"muted",children:[" ",u("navigator.notagsfound")," "]})]})})})})]})]})},jO=i=>{const{question:t=null,canVote:s=null,vote:n=null,noVotes:a=null,yesVotes:r=null}=i;return e.jsxs(N,{gap:2,className:"wordquiz-question p-2",children:[!s&&e.jsxs(_,{fullWidth:!0,alignItems:"center",gap:2,children:[e.jsx(_,{center:!0,pointer:!0,className:"bg-danger rounded p-2",children:e.jsx(C,{variant:"white",children:a})}),e.jsx(C,{variant:"white",center:!0,textBreak:!0,children:t}),e.jsx(_,{center:!0,pointer:!0,className:"bg-success rounded p-2",children:e.jsx(C,{variant:"white",children:r})})]}),s&&e.jsxs(N,{children:[e.jsx(C,{variant:"white",center:!0,textBreak:!0,children:t}),e.jsxs(_,{fullWidth:!0,justifyContent:"center",gap:1,children:[e.jsx(_,{center:!0,pointer:!0,className:"bg-danger rounded p-1",onClick:l=>n(io),children:e.jsx(A,{className:"word-quiz-dislike"})}),e.jsx(_,{center:!0,pointer:!0,className:"bg-success rounded p-1",onClick:l=>n(Xm),children:e.jsx(A,{className:"word-quiz-like"})})]})]})]})},IO=i=>{const{userIndex:t=null,vote:s=null,...n}=i;return e.jsx(Vc,{objectId:t,category:X.UNIT,...n,children:e.jsx(_,{center:!0,pointer:!0,className:`bg-${s===io?"danger":"success"} rounded p-1`,children:e.jsx(A,{className:`word-quiz-${s===io?"dislike":"like"}-sm`})})})},EO=i=>{const{question:t=null,answerSent:s=!1,answerCounts:n=null,userAnswers:a=null,vote:r=null}=S_();return e.jsxs(e.Fragment,{children:[t&&e.jsx(jO,{question:t.content,canVote:!s,vote:r,noVotes:n.get(io)||0,yesVotes:n.get(Xm)||0}),a&&Array.from(a.entries()).map(([l,c],m)=>e.jsx(IO,{userIndex:l,vote:c.value},m))]})},bO=i=>{const{roomSession:t=null}=Re(),{simpleAlert:s=null}=Pe();return Ie(ba.ROOM_ZOOM,n=>W().setRoomInstanceRenderingCanvasScale(n.roomId,1,n.level,null,null,!1,n.asDelta)),Ie([be.REQUEST_TEASER,be.REQUEST_ECOTRONBOX,be.REQUEST_CLOTHING_CHANGE,be.REQUEST_PLAYLIST_EDITOR,be.OPEN_WIDGET,be.CLOSE_WIDGET,Ei.FURNI_CLICK,Ei.FURNI_DOUBLE_CLICK,Ei.TOOLTIP_SHOW,Ei.TOOLTIP_HIDE],n=>{if(t)switch(n.objectId,n.category,n.type){}}),Ve([mt.RSEME_KICKED,mt.RSEME_PETS_FORBIDDEN_IN_HOTEL,mt.RSEME_PETS_FORBIDDEN_IN_FLAT,mt.RSEME_MAX_PETS,mt.RSEME_MAX_NUMBER_OF_OWN_PETS,mt.RSEME_NO_FREE_TILES_FOR_PET,mt.RSEME_SELECTED_TILE_NOT_FREE_FOR_PET,mt.RSEME_BOTS_FORBIDDEN_IN_HOTEL,mt.RSEME_BOTS_FORBIDDEN_IN_FLAT,mt.RSEME_BOT_LIMIT_REACHED,mt.RSEME_SELECTED_TILE_NOT_FREE_FOR_BOT,mt.RSEME_BOT_NAME_NOT_ACCEPTED],n=>{let a=u("error.title"),r="";switch(n.type){case mt.RSEME_MAX_PETS:r=u("room.error.max_pets");break;case mt.RSEME_MAX_NUMBER_OF_OWN_PETS:r=u("room.error.max_own_pets");break;case mt.RSEME_KICKED:r=u("room.error.kicked"),a=u("generic.alert.title");break;case mt.RSEME_PETS_FORBIDDEN_IN_HOTEL:r=u("room.error.pets.forbidden_in_hotel");break;case mt.RSEME_PETS_FORBIDDEN_IN_FLAT:r=u("room.error.pets.forbidden_in_flat");break;case mt.RSEME_NO_FREE_TILES_FOR_PET:r=u("room.error.pets.no_free_tiles");break;case mt.RSEME_SELECTED_TILE_NOT_FREE_FOR_PET:r=u("room.error.pets.selected_tile_not_free");break;case mt.RSEME_BOTS_FORBIDDEN_IN_HOTEL:r=u("room.error.bots.forbidden_in_hotel");break;case mt.RSEME_BOTS_FORBIDDEN_IN_FLAT:r=u("room.error.bots.forbidden_in_flat");break;case mt.RSEME_BOT_LIMIT_REACHED:r=u("room.error.max_bots");break;case mt.RSEME_SELECTED_TILE_NOT_FREE_FOR_BOT:r=u("room.error.bots.selected_tile_not_free");break;case mt.RSEME_BOT_NAME_NOT_ACCEPTED:r=u("room.error.bots.name.not.accepted");break;default:return}s(r,ge.DEFAULT,null,null,a)}),e.jsxs(e.Fragment,{children:[e.jsx(fy,{}),e.jsx(Ny,{}),e.jsx(Iy,{}),e.jsx(Sy,{}),e.jsx(hO,{}),e.jsx(xO,{}),e.jsx(fO,{}),e.jsx(pO,{}),e.jsx(vy,{}),e.jsx(gO,{}),e.jsx(_y,{}),e.jsx(EO,{}),e.jsx(Ty,{})]})},CO=i=>{const{roomSession:t=null}=Re(),s=o.useRef();return o.useEffect(()=>{const n=pe().application.renderer.view;if(!n)return;n.onclick=r=>vi(r),n.onmousemove=r=>vi(r),n.onmousedown=r=>vi(r),n.onmouseup=r=>vi(r),n.ontouchstart=r=>wi(r),n.ontouchmove=r=>wi(r),n.ontouchend=r=>wi(r),n.ontouchcancel=r=>wi(r);const a=s.current;a&&a.appendChild(n)},[]),e.jsx(A,{fit:!0,innerRef:s,className:!t&&"d-none",children:t&&e.jsxs(e.Fragment,{children:[e.jsx(bO,{}),t.isSpectator&&e.jsx(qR,{})]})})},NO=i=>{const{useGuideTool:t=!1,unseenAchievementCount:s=0,setMeExpanded:n=null,children:a=null,...r}=i,l=o.useRef();return o.useEffect(()=>{const c=ve();c&&W().selectRoomObject(c.roomId,c.ownRoomIndex,X.UNIT)},[]),o.useEffect(()=>{const c=m=>n(!1);return document.addEventListener("click",c),()=>document.removeEventListener(Ne.MOUSE_CLICK,c)},[n]),e.jsxs(_,{innerRef:l,alignItems:"center",className:"nitro-toolbar-me p-2",gap:2,children:[K("guides.enabled")&&t&&e.jsx(A,{pointer:!0,className:"navigation-item icon icon-me-helper-tool click-box",onClick:c=>pt(new gs(gs.TOGGLE_GUIDE_TOOL))}),e.jsx(A,{pointer:!0,className:"navigation-item icon icon-me-achievements click-box",onClick:c=>Q("achievements/toggle"),children:s>0&&e.jsx(pn,{count:s})}),e.jsx(A,{pointer:!0,className:"navigation-item icon icon-me-profile click-box",onClick:c=>ns(V().userId)}),e.jsx(A,{pointer:!0,className:"navigation-item icon icon-me-rooms click-box",onClick:c=>Q("navigator/search/myworld_view")}),e.jsx(A,{pointer:!0,className:"navigation-item icon icon-me-clothing click-box",onClick:c=>Q("avatar-editor/toggle")}),e.jsx(A,{pointer:!0,className:"navigation-item icon icon-me-settings click-box",onClick:c=>Q("user-settings/toggle")}),a]})},vO=i=>{const{isInRoom:t}=i,[s,n]=o.useState(!1),[a,r]=o.useState(!1),{userFigure:l=null}=Fn(),{getFullCount:c=0}=Ss(),{getTotalUnseen:m=0}=qo(),{requests:h=[]}=cs(),{iconState:d=hn.HIDDEN}=lh(),g=V().isModerator;return M(Cm,f=>{const j=f.getParser();r(j.isAllowed(bm.USE_GUIDE_TOOL))}),Ie(kb.ANIMATE_ICON,f=>{((p,I,x,E)=>{const v=document.body.getElementsByClassName(p)[0];if(!v)return;I.className="toolbar-icon-animation",I.style.visibility="visible",I.style.left=x+"px",I.style.top=E+"px",document.body.append(I);const b=v.getBoundingClientRect(),w=I.getBoundingClientRect(),S=w.x-b.x,T=w.y-b.y,L=Math.sqrt(S*S+T*T),k=500-Math.abs(1/L*100*500*.5),y=20,R=`ToolbarBouncing[${p}]`;ll.getMotionByTag(R)||(ll.runMotion(new hu(new Ab(k+8),new Db(v,400,12))).tag=R);const O=new hu(new Pb(new Lb(I,k,b.x-w.x+y,b.y-w.y,100,1),1),new Mb(I));ll.runMotion(O)})("icon-inventory",f.image,f.x,f.y)}),e.jsxs(e.Fragment,{children:[e.jsx(ca,{type:Zt.FADE_IN,inProp:s,timeout:300,children:e.jsx(NO,{useGuideTool:a,unseenAchievementCount:m,setMeExpanded:n})}),e.jsxs(_,{alignItems:"center",justifyContent:"between",gap:2,className:"nitro-toolbar py-1 px-3",children:[e.jsxs(_,{gap:2,alignItems:"center",className:"widthsizemax",children:[e.jsxs(_,{alignItems:"center",gap:2,children:[e.jsxs(_,{center:!0,pointer:!0,className:"navigation-item item-avatar "+(s?"active ":""),onClick:f=>n(!s),children:[e.jsx(tt,{figure:l,headOnly:!0,direction:2,position:"absolute"}),m>0&&e.jsx(pn,{count:m})]}),t&&e.jsx(A,{pointer:!0,className:"navigation-item icon icon-habbo click-box",onClick:f=>pc()}),!t&&e.jsx(A,{pointer:!0,className:"navigation-item icon icon-house click-box",onClick:f=>Q("navigator/goto/home")}),e.jsx(A,{pointer:!0,className:"navigation-item icon icon-rooms click-box",onClick:f=>Q("navigator/toggle")}),K("game.center.enabled")&&e.jsx(A,{pointer:!0,className:"navigation-item icon icon-game click-box",onClick:f=>Q("games/toggle")}),e.jsx(A,{pointer:!0,className:"navigation-item icon icon-catalog click-box",onClick:f=>Q("catalog/toggle")}),e.jsx(A,{pointer:!0,className:"navigation-item icon icon-inventory click-box",onClick:f=>Q("inventory/toggle"),children:c>0&&e.jsx(pn,{count:c})}),t&&e.jsx(A,{pointer:!0,className:"navigation-item icon icon-camera click-box",onClick:f=>Q("camera/toggle")}),g&&e.jsx(A,{pointer:!0,className:"navigation-item icon icon-modtools click-box",onClick:f=>Q("mod-tools/toggle")})]}),e.jsx(_,{alignItems:"center",id:"toolbar-chat-input-container"})]}),e.jsxs(_,{alignItems:"center",gap:2,children:[e.jsxs(_,{gap:2,children:[e.jsx(A,{pointer:!0,className:"navigation-item icon icon-friendall click-box friendsmovilgen",onClick:f=>Q("friends/toggle"),children:h.length>0&&e.jsx(pn,{count:h.length})}),(d===hn.SHOW||d===hn.UNREAD)&&e.jsx(A,{pointer:!0,className:`navigation-item icon icon-message click-box mensajesmovilgen ${d===hn.UNREAD&&"is-unseen"}`,onClick:f=>Go()})]}),e.jsx(A,{id:"toolbar-friend-bar-container",className:"d-none d-lg-block"})]})]})]})},_O=i=>{const{badges:t=null,gap:s=1,justifyContent:n="between",...a}=i;return e.jsx(e.Fragment,{children:t&&t.length>0&&t.map((r,l)=>e.jsx(N,{center:!0,children:e.jsx(ze,{badgeCode:r},r)},r))})},SO=i=>{const{relationships:t=null}=i,s=({type:n})=>{const a=t&&t.relationshipStatusMap.hasKey(n)?t.relationshipStatusMap.getValue(n):null,r=Ks.RELATIONSHIP_NAMES[n].toLocaleLowerCase();return e.jsxs(_,{fullWidth:!0,gap:1,children:[e.jsx(_,{center:!0,className:"user-relationship",children:e.jsx("i",{className:`nitro-friends-spritesheet icon-${r}`})}),e.jsxs(N,{grow:!0,gap:0,children:[e.jsxs(_,{alignItems:"center",justifyContent:"between",className:"bg-white rounded px-2 py-1 user-relationship",children:[e.jsxs(C,{small:!0,underline:!0,pointer:!0,onClick:l=>a&&a.randomFriendId>=1&&ns(a.randomFriendId),children:[(!a||a.friendCount===0)&&u("extendedprofile.add.friends"),a&&a.friendCount>=1&&a.randomFriendName]}),a&&a.friendCount>=1&&e.jsx(_,{center:!0,position:"relative",className:"avatar-image-container",children:e.jsx(tt,{figure:a.randomFriendFigure,headOnly:!0,direction:4})})]}),e.jsxs(C,{small:!0,italics:!0,className:"user-relationship-count",children:[(!a||a.friendCount===0)&&u("extendedprofile.no.friends.in.this.category"),a&&a.friendCount>1&&u(`extendedprofile.relstatus.others.${r}`,["count"],[(a.friendCount-1).toString()]),""]})]})]})};return e.jsxs(e.Fragment,{children:[e.jsx(s,{type:Ks.HEART}),e.jsx(s,{type:Ks.SMILE}),e.jsx(s,{type:Ks.BOBBA})]})},wO=i=>{const{relationships:t=null,friendsCount:s=null}=i;return e.jsxs(N,{gap:1,children:[e.jsxs(C,{small:!0,children:[e.jsx("b",{children:u("extendedprofile.friends.count")})," ",s]}),e.jsx(C,{bold:!0,small:!0,children:u("extendedprofile.relstatus")}),e.jsx(N,{children:e.jsx(SO,{relationships:t})})]})},TO=i=>{const{itsMe:t=null,groups:s=null,onLeaveGroup:n=null,overflow:a="hidden",gap:r=2,...l}=i,[c,m]=o.useState(null),[h,d]=o.useState(null);return M(ai,g=>{const f=g.getParser();!c||c!==f.id||f.flag||d(f)}),o.useEffect(()=>{c&&D(new Ba(c,!1))},[c]),o.useEffect(()=>{d(null),s.length>0&&m(g=>(g===s[0].groupId&&D(new Ba(s[0].groupId,!1)),s[0].groupId))},[s]),!s||!s.length?e.jsx(N,{center:!0,fullHeight:!0,children:e.jsxs(_,{justifyContent:"center",gap:2,children:[e.jsx(A,{className:"no-group-spritesheet image-1"}),e.jsx(A,{className:"no-group-spritesheet image-2"}),e.jsx(A,{className:"no-group-spritesheet image-3"})]})}):e.jsxs(te,{overflow:a,gap:2,...l,children:[e.jsx(N,{alignItems:"center",size:2,overflow:"auto",children:e.jsx(ke,{overflow:null,columnCount:1,columnMinHeight:50,className:"user-groups-container",children:s.map((g,f)=>e.jsxs(Ce,{overflow:"unset",itemActive:c===g.groupId,onClick:()=>m(g.groupId),className:"p-1",children:[t&&e.jsx("i",{className:"position-absolute end-0 top-0 z-index-1 icon icon-group-"+(g.favourite?"favorite":"not-favorite"),onClick:()=>HC(g)}),e.jsx(ze,{badgeCode:g.badgeCode,isGroup:!0})]},f))})}),e.jsx(N,{size:10,overflow:"hidden",children:h&&e.jsx(Oh,{groupInformation:h,onClose:n})})]})},RO=i=>{const{userProfile:t=null}=i,[s,n]=o.useState(t.requestSent),a=t.id===V().userId,r=!s&&!a&&!t.isMyFriend&&!t.requestSent,l=()=>{n(!0),D(new nm(t.username))};return o.useEffect(()=>{n(t.requestSent)},[t]),e.jsxs(_,{gap:2,children:[e.jsx(N,{center:!0,className:"avatar-container",children:e.jsx(tt,{figure:t.figure,direction:2})}),e.jsxs(N,{children:[e.jsxs(N,{gap:0,children:[e.jsx(C,{bold:!0,children:t.username}),e.jsxs(C,{italics:!0,textBreak:!0,small:!0,children:[t.motto,""]})]}),e.jsxs(N,{gap:1,children:[e.jsxs(C,{small:!0,children:[e.jsx("b",{children:u("extendedprofile.created")})," ",t.registration]}),e.jsxs(C,{small:!0,children:[e.jsx("b",{children:u("extendedprofile.last.login")})," ",Xs.format(t.secondsSinceLastVisit,".ago",2)]}),e.jsxs(C,{small:!0,children:[e.jsx("b",{children:u("extendedprofile.achievementscore")})," ",t.achievementPoints]})]}),e.jsxs(_,{gap:1,children:[t.isOnline&&e.jsx("i",{className:"icon icon-pf-online"}),!t.isOnline&&e.jsx("i",{className:"icon icon-pf-offline"}),e.jsxs(_,{alignItems:"center",gap:1,children:[r&&e.jsx(C,{small:!0,underline:!0,pointer:!0,onClick:l,children:u("extendedprofile.addasafriend")}),!r&&e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"icon icon-pf-tick"}),a&&e.jsx(C,{children:u("extendedprofile.me")}),t.isMyFriend&&e.jsx(C,{children:u("extendedprofile.friend")}),(s||t.requestSent)&&e.jsx(C,{children:u("extendedprofile.friendrequestsent")})]})]})]})]})]})},yO=i=>{const[t,s]=o.useState(null),[n,a]=o.useState([]),[r,l]=o.useState(null),c=()=>{s(null),a([]),l(null)},m=()=>{!t||t.id!==V().userId||ns(t.id)};return M(Ub,h=>{const d=h.getParser();!t||d.userId!==t.id||a(d.badges)}),M(Om,h=>{const d=h.getParser();!t||d.userId!==t.id||l(d)}),M(Vb,h=>{const d=h.getParser();let g=!1;s(f=>(f&&f.id&&(g=f.id===d.id),d)),g||(a([]),l(null)),D(new Fb(d.id)),D(new km(d.id))}),M(Gb,h=>{const d=h.getParser();d.userId==(t==null?void 0:t.id)&&ns(d.userId)}),Ie(gt.SELECTED,h=>{if(!t||h.category!==X.UNIT)return;const d=ve().userDataManager.getUserDataByIndex(h.objectId);d.type===lt.USER&&ns(d.webID)}),t?e.jsxs(ne,{uniqueKey:"nitro-user-profile",theme:"primary-slim",className:"user-profile",children:[e.jsx(se,{headerText:u("extendedprofile.caption"),onCloseClick:c}),e.jsxs(ee,{overflow:"hidden",children:[e.jsxs(te,{fullHeight:!1,gap:2,children:[e.jsxs(N,{size:7,gap:1,className:"user-container pe-2",children:[e.jsx(RO,{userProfile:t}),e.jsx(te,{columnCount:5,fullHeight:!0,className:"bg-muted rounded px-2 py-1",children:e.jsx(_O,{fullWidth:!0,center:!0,badges:n})})]}),e.jsx(N,{size:5,children:r&&e.jsx(wO,{relationships:r,friendsCount:t.friendsCount})})]}),e.jsx(_,{alignItems:"center",className:"rooms-button-container px-2 py-1",children:e.jsxs(_,{alignItems:"center",gap:1,onClick:h=>Q(`navigator/search/hotel_view/owner:${t.username}`),children:[e.jsx("i",{className:"icon icon-rooms"}),e.jsx(C,{bold:!0,underline:!0,pointer:!0,children:u("extendedprofile.rooms")})]})}),e.jsx(TO,{fullWidth:!0,itsMe:t.id===V().userId,groups:t.groups,onLeaveGroup:m})]})]}):null},OO=i=>{const[t,s]=o.useState(!1),[n,a]=o.useState(null),[r,l]=ih(),[c,m]=oh(),h=(g,f)=>{let j=!0;const p=n.clone();switch(g){case"close_view":s(!1),j=!1;return;case"oldchat":p.oldChat=f,D(new Wb(p.oldChat));break;case"room_invites":p.roomInvites=f,D(new Hb(p.roomInvites));break;case"camera_follow":p.cameraFollow=f,D(new Bb(p.cameraFollow));break;case"system_volume":p.volumeSystem=f,p.volumeSystem=Math.max(0,p.volumeSystem),p.volumeSystem=Math.min(100,p.volumeSystem);break;case"furni_volume":p.volumeFurni=f,p.volumeFurni=Math.max(0,p.volumeFurni),p.volumeFurni=Math.min(100,p.volumeFurni);break;case"trax_volume":p.volumeTrax=f,p.volumeTrax=Math.max(0,p.volumeTrax),p.volumeTrax=Math.min(100,p.volumeTrax);break}j&&a(p),Bl(p)},d=g=>{switch(g){case"volume":D(new qb(Math.round(n.volumeSystem),Math.round(n.volumeFurni),Math.round(n.volumeTrax)));break}};return M(Yb,g=>{const f=g.getParser(),j=new zb;j.volumeSystem=f.volumeSystem,j.volumeFurni=f.volumeFurni,j.volumeTrax=f.volumeTrax,j.oldChat=f.oldChat,j.roomInvites=f.roomInvites,j.cameraFollow=f.cameraFollow,j.flags=f.flags,j.chatType=f.chatType,a(j),Bl(j)}),o.useEffect(()=>{const g={linkReceived:f=>{const j=f.split("/");if(!(j.length<2))switch(j[1]){case"show":s(!0);return;case"hide":s(!1);return;case"toggle":s(p=>!p);return}},eventUrlPrefix:"user-settings/"};return ct(g),()=>ut(g)},[]),o.useEffect(()=>{n&&pt(n)},[n]),!t||!n?null:e.jsxs(ne,{uniqueKey:"user-settings",className:"user-settings-window",theme:"primary-slim",children:[e.jsx(se,{headerText:u("widget.memenu.settings.title"),onCloseClick:g=>h("close_view")}),e.jsxs(ee,{className:"text-black",children:[e.jsxs(N,{gap:1,children:[e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx("input",{className:"form-check-input",type:"checkbox",checked:n.oldChat,onChange:g=>h("oldchat",g.target.checked)}),e.jsx(C,{children:u("memenu.settings.chat.prefer.old.chat")})]}),e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx("input",{className:"form-check-input",type:"checkbox",checked:n.roomInvites,onChange:g=>h("room_invites",g.target.checked)}),e.jsx(C,{children:u("memenu.settings.other.ignore.room.invites")})]}),e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx("input",{className:"form-check-input",type:"checkbox",checked:n.cameraFollow,onChange:g=>h("camera_follow",g.target.checked)}),e.jsx(C,{children:u("memenu.settings.other.disable.room.camera.follow")})]}),e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx("input",{className:"form-check-input",type:"checkbox",checked:r,onChange:g=>l(g.target.checked)}),e.jsx(C,{children:u("memenu.settings.other.place.multiple.objects")})]}),e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx("input",{className:"form-check-input",type:"checkbox",checked:c,onChange:g=>m(g.target.checked)}),e.jsx(C,{children:u("memenu.settings.other.skip.purchase.confirmation")})]})]}),e.jsxs(N,{children:[e.jsx(C,{bold:!0,children:u("widget.memenu.settings.volume")}),e.jsxs(N,{gap:1,children:[e.jsx(C,{children:u("widget.memenu.settings.volume.ui")}),e.jsxs(_,{alignItems:"center",gap:1,children:[n.volumeSystem===0&&e.jsx(cl,{className:Bt(n.volumeSystem>=50&&"text-muted","fa-icon")}),n.volumeSystem>0&&e.jsx(ul,{className:Bt(n.volumeSystem>=50&&"text-muted","fa-icon")}),e.jsx("input",{type:"range",className:"custom-range w-100",min:"0",max:"100",step:"1",id:"volumeSystem",value:n.volumeSystem,onChange:g=>h("system_volume",g.target.value),onMouseUp:()=>d("volume")}),e.jsx(dl,{className:Bt(n.volumeSystem<50&&"text-muted","fa-icon")})]})]}),e.jsxs(N,{gap:1,children:[e.jsx(C,{children:u("widget.memenu.settings.volume.furni")}),e.jsxs(_,{alignItems:"center",gap:1,children:[n.volumeFurni===0&&e.jsx(cl,{className:Bt(n.volumeFurni>=50&&"text-muted","fa-icon")}),n.volumeFurni>0&&e.jsx(ul,{className:Bt(n.volumeFurni>=50&&"text-muted","fa-icon")}),e.jsx("input",{type:"range",className:"custom-range w-100",min:"0",max:"100",step:"1",id:"volumeFurni",value:n.volumeFurni,onChange:g=>h("furni_volume",g.target.value),onMouseUp:()=>d("volume")}),e.jsx(dl,{className:Bt(n.volumeFurni<50&&"text-muted","fa-icon")})]})]}),e.jsxs(N,{gap:1,children:[e.jsx(C,{children:u("widget.memenu.settings.volume.trax")}),e.jsxs(_,{alignItems:"center",gap:1,children:[n.volumeTrax===0&&e.jsx(cl,{className:Bt(n.volumeTrax>=50&&"text-muted","fa-icon")}),n.volumeTrax>0&&e.jsx(ul,{className:Bt(n.volumeTrax>=50&&"text-muted","fa-icon")}),e.jsx("input",{type:"range",className:"custom-range w-100",min:"0",max:"100",step:"1",id:"volumeTrax",value:n.volumeTrax,onChange:g=>h("trax_volume",g.target.value),onMouseUp:()=>d("volume")}),e.jsx(dl,{className:Bt(n.volumeTrax<50&&"text-muted","fa-icon")})]})]})]})]})]})},kO=i=>{const{maxItemSelectionCount:t}=i,{trigger:s=null,furniIds:n=[]}=Ee(),a=u("wiredfurni.pickfurnis.caption",["count","limit"],[n.length.toString(),t.toString()]);return e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:a}),e.jsx(C,{small:!0,children:u("wiredfurni.pickfurnis.desc")})]})},Gc=i=>{const{wiredType:t="",requiresFurni:s=oe.STUFF_SELECTION_OPTION_NONE,save:n=null,validate:a=null,children:r=null,hasSpecialInput:l=!1,maxItemSelectionCount:c=5}=i,[m,h]=o.useState(null),[d,g]=o.useState(null),[f,j]=o.useState(!1),{trigger:p=null,setTrigger:I=null,setIntParams:x=null,setStringParam:E=null,setFurniIds:v=null,setAllowsFurni:b=null,saveWired:w=null}=Ee(),S=()=>I(null),T=()=>{a&&!a()||(n&&n(),j(!0))};return o.useEffect(()=>{f&&(w(),j(!1))},[f,w]),o.useEffect(()=>{if(!p)return;const L=p.spriteId||-1,k=V().getFloorItemData(L);k?(h(k.name),g(k.description)):(h("NAME: "+L),g("NAME: "+L)),l&&(x(p.intData),E(p.stringData)),s>oe.STUFF_SELECTION_OPTION_NONE&&v(y=>(y&&y.length&&tr.clearSelectionShaderFromFurni(y),p.selectedItems&&p.selectedItems.length?(tr.applySelectionShaderToFurni(p.selectedItems),p.selectedItems):[])),b(s),tr.setMaxItemSelectionCount(c)},[p,l,s,x,E,v,b,c]),e.jsxs(ne,{uniqueKey:"nitro-wired",className:"nitro-wired",theme:"primary-slim",children:[e.jsx(se,{headerText:u("wiredfurni.title"),onCloseClick:S}),e.jsxs(ee,{children:[e.jsxs(N,{gap:1,children:[e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx("i",{className:`icon icon-wired-${t}`}),e.jsx(C,{bold:!0,children:m})]}),e.jsx(C,{small:!0,children:d})]}),!!r&&e.jsx("hr",{className:"m-0 bg-dark"}),r,s>oe.STUFF_SELECTION_OPTION_NONE&&e.jsxs(e.Fragment,{children:[e.jsx("hr",{className:"m-0 bg-dark"}),e.jsx(kO,{maxItemSelectionCount:c})," "]}),e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx(P,{fullWidth:!0,variant:"success",onClick:T,children:u("wiredfurni.ready")}),e.jsx(P,{fullWidth:!0,variant:"secondary",onClick:S,children:u("cancel")})]})]})]})},dt=i=>{const{requiresFurni:t=oe.STUFF_SELECTION_OPTION_NONE,save:s=null,hasSpecialInput:n=!1,children:a=null}=i,{trigger:r=null,actionDelay:l=0,setActionDelay:c=null}=Ee();return o.useEffect(()=>{c(r.delayInPulses)},[r,c]),e.jsxs(Gc,{wiredType:"action",requiresFurni:t,save:s,hasSpecialInput:n,children:[a,!!a&&e.jsx("hr",{className:"m-0 bg-dark"}),e.jsxs(N,{children:[e.jsx(C,{bold:!0,children:u("wiredfurni.params.delay",["seconds"],[ci(l)])}),e.jsx(Ot,{min:0,max:20,value:l,snapDragDisabled:!1,onChange:m=>c(m)})]})]})},AO="hd-180-1.ch-210-66.lg-270-82.sh-290-81",DO=i=>{const[t,s]=o.useState(""),[n,a]=o.useState(""),{trigger:r=null,setStringParam:l=null}=Ee(),c=()=>l(t+la+n);return o.useEffect(()=>{const m=r.stringData.split(la);m.length>0&&s(m[0]),m.length>1&&a(m[1].length>0?m[1]:AO)},[r]),e.jsxs(dt,{requiresFurni:oe.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:c,children:[e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("wiredfurni.params.bot.name")}),e.jsx("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:t,onChange:m=>s(m.target.value)})]}),e.jsxs(_,{center:!0,children:[e.jsx(tt,{figure:n,direction:4}),e.jsx(P,{onClick:m=>a(V().figure),children:u("wiredfurni.params.capture.figure")})]})]})},PO=i=>{const[t,s]=o.useState(""),[n,a]=o.useState(-1),{trigger:r=null,setStringParam:l=null,setIntParams:c=null}=Ee(),m=()=>{l(t),c([n])};return o.useEffect(()=>{s(r.stringData),a(r.intData.length>0?r.intData[0]:0)},[r]),e.jsxs(dt,{requiresFurni:oe.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:m,children:[e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("wiredfurni.params.bot.name")}),e.jsx("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:t,onChange:h=>s(h.target.value)})]}),e.jsxs(N,{gap:1,children:[e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"followMode",id:"followMode1",checked:n===1,onChange:h=>a(1)}),e.jsx(C,{children:u("wiredfurni.params.start.following")})]}),e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"followMode",id:"followMode2",checked:n===0,onChange:h=>a(0)}),e.jsx(C,{children:u("wiredfurni.params.stop.following")})]})]})]})},LO=[2,5,7,8,9,10,27],MO=i=>{const[t,s]=o.useState(""),[n,a]=o.useState(-1),{trigger:r=null,setStringParam:l=null,setIntParams:c=null}=Ee(),m=()=>{l(t),c([n])};return o.useEffect(()=>{s(r.stringData),a(r.intData.length>0?r.intData[0]:0)},[r]),e.jsxs(dt,{requiresFurni:oe.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:m,children:[e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("wiredfurni.params.bot.name")}),e.jsx("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:t,onChange:h=>s(h.target.value)})]}),e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("wiredfurni.params.handitem")}),e.jsxs("select",{className:"form-select form-select-sm",value:n,onChange:h=>a(parseInt(h.target.value)),children:[e.jsx("option",{value:"0",children:"------"}),LO.map(h=>e.jsx("option",{value:h,children:u(`handitem${h}`)},h))]})]})]})},UO=i=>{const[t,s]=o.useState(""),{trigger:n=null,setStringParam:a=null}=Ee(),r=()=>a(t);return o.useEffect(()=>{s(n.stringData)},[n]),e.jsx(dt,{requiresFurni:oe.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!0,save:r,children:e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("wiredfurni.params.bot.name")}),e.jsx("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:t,onChange:l=>s(l.target.value)})]})})},FO=i=>{const[t,s]=o.useState(""),[n,a]=o.useState(""),[r,l]=o.useState(-1),{trigger:c=null,setStringParam:m=null,setIntParams:h=null}=Ee(),d=()=>{m(t+la+n),h([r])};return o.useEffect(()=>{const g=c.stringData.split(la);g.length>0&&s(g[0]),g.length>1&&a(g[1].length>0?g[1]:""),l(c.intData.length>0?c.intData[0]:0)},[c]),e.jsxs(dt,{requiresFurni:oe.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:d,children:[e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("wiredfurni.params.bot.name")}),e.jsx("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:t,onChange:g=>s(g.target.value)})]}),e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("wiredfurni.params.message")}),e.jsx("input",{type:"text",className:"form-control form-control-sm",maxLength:K("wired.action.bot.talk.to.avatar.max.length",64),value:n,onChange:g=>a(g.target.value)})]}),e.jsxs(N,{gap:1,children:[e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"talkMode",id:"talkMode1",checked:r===0,onChange:g=>l(0)}),e.jsx(C,{children:u("wiredfurni.params.talk")})]}),e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"talkMode",id:"talkMode2",checked:r===1,onChange:g=>l(1)}),e.jsx(C,{children:u("wiredfurni.params.whisper")})]})]})]})},VO=i=>{const[t,s]=o.useState(""),[n,a]=o.useState(""),[r,l]=o.useState(-1),{trigger:c=null,setStringParam:m=null,setIntParams:h=null}=Ee(),d=()=>{m(t+la+n),h([r])};return o.useEffect(()=>{const g=c.stringData.split(la);g.length>0&&s(g[0]),g.length>1&&a(g[1].length>0?g[1]:""),l(c.intData.length>0?c.intData[0]:0)},[c]),e.jsxs(dt,{requiresFurni:oe.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:d,children:[e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("wiredfurni.params.bot.name")}),e.jsx("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:t,onChange:g=>s(g.target.value)})]}),e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("wiredfurni.params.message")}),e.jsx("input",{type:"text",className:"form-control form-control-sm",maxLength:K("wired.action.bot.talk.max.length",64),value:n,onChange:g=>a(g.target.value)})]}),e.jsxs(N,{gap:1,children:[e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"talkMode",id:"talkMode1",checked:r===0,onChange:g=>l(0)}),e.jsx(C,{children:u("wiredfurni.params.talk")})]}),e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"talkMode",id:"talkMode2",checked:r===1,onChange:g=>l(1)}),e.jsx(C,{children:u("wiredfurni.params.shout")})]})]})]})},GO=i=>{const[t,s]=o.useState(""),{trigger:n=null,setStringParam:a=null}=Ee(),r=()=>a(t);return o.useEffect(()=>{s(n.stringData)},[n]),e.jsx(dt,{requiresFurni:oe.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!0,save:r,children:e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("wiredfurni.params.bot.name")}),e.jsx("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:t,onChange:l=>s(l.target.value)})]})})},BO=i=>e.jsx(dt,{requiresFurni:oe.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!1,save:null}),HO=i=>e.jsx(dt,{requiresFurni:oe.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!1,save:null}),WO=i=>{const[t,s]=o.useState(""),{trigger:n=null,setStringParam:a=null}=Ee(),r=()=>a(t);return o.useEffect(()=>{s(n.stringData)},[n]),e.jsx(dt,{requiresFurni:oe.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:r,children:e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("wiredfurni.params.message")}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:t,onChange:l=>s(l.target.value),maxLength:K("wired.action.chat.max.length",100)})]})})},qO=i=>e.jsx(dt,{requiresFurni:oe.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!1,save:null}),zO=i=>{const[t,s]=o.useState(!1),[n,a]=o.useState(1),[r,l]=o.useState(!1),[c,m]=o.useState(1),[h,d]=o.useState(1),[g,f]=o.useState([]),{trigger:j=null,setIntParams:p=null,setStringParam:I=null}=Ee(),x=()=>f(w=>[...w,{isBadge:!1,itemCode:"",probability:null}]),E=w=>{f(S=>{const T=Array.from(S);return T.splice(w,1),T})},v=(w,S,T,L)=>{const k=Array.from(g),y=k[w];y&&(y.isBadge=S,y.itemCode=T,y.probability=L,f(k))},b=()=>{let w=[];for(const S of g){if(!S.itemCode)continue;const T=[S.isBadge?"0":"1",S.itemCode,S.probability.toString()];w.push(T.join(","))}w.length>0&&(I(w.join(";")),p([n,r?1:0,c,h]))};return o.useEffect(()=>{const w=[];if(j.stringData.length>0&&j.stringData.includes(";")){const S=j.stringData.split(";");for(const T of S){const L=T.split(",");L.length===3&&w.push({isBadge:L[0]==="0",itemCode:L[1],probability:Number(L[2])})}}w.length===0&&w.push({isBadge:!1,itemCode:"",probability:null}),a(j.intData.length>0?j.intData[0]:0),l(j.intData.length>1?j.intData[1]===1:!1),m(j.intData.length>2?j.intData[2]:0),d(j.intData.length>3?j.intData[3]:0),s(j.intData.length>3?j.intData[3]>0:!1),f(w)},[j]),e.jsxs(dt,{requiresFurni:oe.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:b,children:[e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx("input",{className:"form-check-input",type:"checkbox",id:"limitEnabled",onChange:w=>s(w.target.checked)}),e.jsx(C,{children:u("wiredfurni.params.prizelimit",["amount"],[t?c.toString():""])})]}),!t&&e.jsx(C,{center:!0,small:!0,className:"bg-muted rounded p-1",children:"Reward limit not set. Make sure rewards are badges or non-tradeable items."}),t&&e.jsx(Ot,{min:1,max:1e3,value:c,onChange:w=>m(w)}),e.jsx("hr",{className:"m-0 bg-dark"}),e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:"How often can a user be rewarded?"}),e.jsxs(_,{gap:1,children:[e.jsxs("select",{className:"form-select form-select-sm w-100",value:n,onChange:w=>a(Number(w.target.value)),children:[e.jsx("option",{value:"0",children:"Once"}),e.jsxs("option",{value:"3",children:["Once every ",h," minutes"]}),e.jsxs("option",{value:"2",children:["Once every ",h," hours"]}),e.jsxs("option",{value:"1",children:["Once every ",h," days"]})]}),n>0&&e.jsx("input",{type:"number",className:"form-control form-control-sm",value:h,onChange:w=>d(Number(w.target.value))})]})]}),e.jsx("hr",{className:"m-0 bg-dark"}),e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx("input",{className:"form-check-input",type:"checkbox",id:"uniqueRewards",checked:r,onChange:w=>l(w.target.checked)}),e.jsx(C,{children:"Unique rewards"})]}),e.jsx(C,{center:!0,small:!0,className:"bg-muted rounded p-1",children:"If checked each reward will be given once to each user. This will disable the probabilities option."}),e.jsx("hr",{className:"m-0 bg-dark"}),e.jsxs(_,{justifyContent:"between",alignItems:"center",children:[e.jsx(C,{bold:!0,children:"Rewards"}),e.jsx(P,{variant:"success",onClick:x,children:e.jsx(Lo,{className:"fa-icon"})})]}),e.jsx(N,{gap:1,children:g&&g.map((w,S)=>e.jsxs(_,{gap:1,children:[e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx("input",{className:"form-check-input",type:"checkbox",checked:w.isBadge,onChange:T=>v(S,T.target.checked,w.itemCode,w.probability)}),e.jsx(C,{small:!0,children:"Badge?"})]}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:w.itemCode,onChange:T=>v(S,w.isBadge,T.target.value,w.probability),placeholder:"Item Code"}),e.jsx("input",{type:"number",className:"form-control form-control-sm",value:w.probability,onChange:T=>v(S,w.isBadge,w.itemCode,Number(T.target.value)),placeholder:"Probability"}),S>0&&e.jsx(P,{variant:"danger",onClick:T=>E(S),children:e.jsx(cc,{className:"fa-icon"})})]},S))})]})},YO=i=>{const[t,s]=o.useState(1),[n,a]=o.useState(1),[r,l]=o.useState(1),{trigger:c=null,setIntParams:m=null}=Ee(),h=()=>m([t,n,r]);return o.useEffect(()=>{c.intData.length>=2?(s(c.intData[0]),a(c.intData[1]),l(c.intData[2])):(s(1),a(1),l(1))},[c]),e.jsxs(dt,{requiresFurni:oe.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:h,children:[e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("wiredfurni.params.setpoints",["points"],[t.toString()])}),e.jsx(Ot,{min:1,max:100,value:t,onChange:d=>s(d)})]}),e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("wiredfurni.params.settimesingame",["times"],[n.toString()])}),e.jsx(Ot,{min:1,max:10,value:n,onChange:d=>a(d)})]}),e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("wiredfurni.params.team")}),[1,2,3,4].map(d=>e.jsxs(_,{gap:1,children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"selectedTeam",id:`selectedTeam${d}`,checked:r===d,onChange:g=>l(d)}),e.jsx(C,{children:u("wiredfurni.params.team."+d)})]},d))]})]})},$O=i=>{const[t,s]=o.useState(1),[n,a]=o.useState(1),{trigger:r=null,setIntParams:l=null}=Ee(),c=()=>l([t,n]);return o.useEffect(()=>{r.intData.length>=2?(s(r.intData[0]),a(r.intData[1])):(s(1),a(1))},[r]),e.jsxs(dt,{requiresFurni:oe.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:c,children:[e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("wiredfurni.params.setpoints",["points"],[t.toString()])}),e.jsx(Ot,{min:1,max:100,value:t,onChange:m=>s(m)})]}),e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("wiredfurni.params.settimesingame",["times"],[n.toString()])}),e.jsx(Ot,{min:1,max:10,value:n,onChange:m=>a(m)})]})]})},KO=i=>{const[t,s]=o.useState(-1),{trigger:n=null,setIntParams:a=null}=Ee(),r=()=>a([t]);return o.useEffect(()=>{s(n.intData.length>0?n.intData[0]:0)},[n]),e.jsx(dt,{requiresFurni:oe.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:r,children:e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("wiredfurni.params.team")}),[1,2,3,4].map(l=>e.jsxs(_,{gap:1,children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"selectedTeam",id:`selectedTeam${l}`,checked:t===l,onChange:c=>s(l)}),e.jsx(C,{children:u(`wiredfurni.params.team.${l}`)})]},l))]})})},XO=i=>{const[t,s]=o.useState(""),{trigger:n=null,setStringParam:a=null}=Ee(),r=()=>a(t);return o.useEffect(()=>{s(n.stringData)},[n]),e.jsx(dt,{requiresFurni:oe.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:r,children:e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("wiredfurni.params.message")}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:t,onChange:l=>s(l.target.value),maxLength:K("wired.action.kick.from.room.max.length",100)})]})})},QO=i=>e.jsx(dt,{requiresFurni:oe.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!1,save:null}),JO=[{value:0,icon:"ne"},{value:2,icon:"se"},{value:4,icon:"sw"},{value:6,icon:"nw"}],ZO=[0,1,2,3,4,5,6],e1=i=>{const[t,s]=o.useState(-1),[n,a]=o.useState(-1),{trigger:r=null,setIntParams:l=null}=Ee(),c=()=>l([t,n]);return o.useEffect(()=>{r.intData.length>=2?(s(r.intData[0]),a(r.intData[1])):(s(-1),a(-1))},[r]),e.jsxs(dt,{requiresFurni:oe.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!0,save:c,children:[e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("wiredfurni.params.startdir")}),e.jsx(_,{gap:1,children:JO.map(m=>e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"movement",id:`movement${m.value}`,checked:t===m.value,onChange:h=>s(m.value)}),e.jsx(C,{children:e.jsx("i",{className:`icon icon-${m.icon}`})})]},m.value))})]}),e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("wiredfurni.params.turn")}),ZO.map(m=>e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"rotation",id:`rotation${m}`,checked:n===m,onChange:h=>a(m)}),e.jsx(C,{children:u(`wiredfurni.params.turn.${m}`)})]},m))]})]})},t1=[{value:0,icon:"ne"},{value:2,icon:"se"},{value:4,icon:"sw"},{value:6,icon:"nw"}],s1=i=>{const[t,s]=o.useState(-1),[n,a]=o.useState(-1),{trigger:r=null,setIntParams:l=null}=Ee(),c=()=>l([n,t]);return o.useEffect(()=>{r.intData.length>=2?(s(r.intData[1]),a(r.intData[0])):(s(-1),a(-1))},[r]),e.jsxs(dt,{requiresFurni:oe.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE,hasSpecialInput:!0,save:c,children:[e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("wiredfurni.params.emptytiles",["tiles"],[t.toString()])}),e.jsx(Ot,{min:1,max:5,value:t,onChange:m=>s(m)})]}),e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("wiredfurni.params.startdir")}),e.jsx(_,{gap:1,children:t1.map(m=>e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"movement",id:`movement${m.value}`,checked:n===m.value,onChange:h=>a(m.value)}),e.jsx(C,{children:e.jsx("i",{className:`icon icon-${m.icon}`})})]},m.value))})]})]})},n1=[{value:4,icon:"ne"},{value:5,icon:"se"},{value:6,icon:"sw"},{value:7,icon:"nw"},{value:2,icon:"mv-2"},{value:3,icon:"mv-3"},{value:1,icon:"mv-1"}],r1=[0,1,2,3],a1=i=>{const[t,s]=o.useState(-1),[n,a]=o.useState(-1),{trigger:r=null,setIntParams:l=null}=Ee(),c=()=>l([t,n]);return o.useEffect(()=>{r.intData.length>=2?(s(r.intData[0]),a(r.intData[1])):(s(-1),a(-1))},[r]),e.jsxs(dt,{requiresFurni:oe.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!0,save:c,children:[e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("wiredfurni.params.movefurni")}),e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"selectedTeam",id:"movement0",checked:t===0,onChange:m=>s(0)}),e.jsx(C,{children:u("wiredfurni.params.movefurni.0")})]}),e.jsxs(_,{gap:1,children:[n1.map(m=>e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"movement",id:`movement${m.value}`,checked:t===m.value,onChange:h=>s(m.value)}),e.jsx("i",{className:`icon icon-${m.icon}`})]},m.value)),e.jsx("div",{className:"col"})]})]}),e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("wiredfurni.params.rotatefurni")}),r1.map(m=>e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"rotation",id:`rotation${m}`,checked:n===m,onChange:h=>a(m)}),e.jsxs(C,{children:[[1,2].includes(m)&&e.jsx("i",{className:`icon icon-rot-${m}`}),u(`wiredfurni.params.rotatefurni.${m}`)]})]},m))]})]})},i1=i=>{const[t,s]=o.useState(-1),[n,a]=o.useState(""),{trigger:r=null,setIntParams:l=null,setStringParam:c=null}=Ee(),m=()=>{l([t]),c(n)};return o.useEffect(()=>{s(r.intData.length>0?r.intData[0]:0),a(r.stringData)},[r]),e.jsxs(dt,{requiresFurni:oe.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:m,children:[e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("wiredfurni.params.length.minutes",["minutes"],[t.toString()])}),e.jsx(Ot,{min:1,max:10,value:t,onChange:h=>s(h)})]}),e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("wiredfurni.params.message")}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:n,onChange:h=>a(h.target.value),maxLength:K("wired.action.mute.user.max.length",100)})]})]})},o1=i=>e.jsx(dt,{requiresFurni:oe.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!1,save:null}),l1=i=>{const[t,s]=o.useState(0),[n,a]=o.useState(0),[r,l]=o.useState(0),{trigger:c=null,setIntParams:m=null}=Ee(),h=()=>m([t,n,r]);return o.useEffect(()=>{s(c.getBoolean(0)?1:0),a(c.getBoolean(1)?1:0),l(c.getBoolean(2)?1:0)},[c]),e.jsx(dt,{requiresFurni:oe.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!0,save:h,children:e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("wiredfurni.params.conditions")}),e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx("input",{className:"form-check-input",type:"checkbox",id:"stateFlag",checked:!!t,onChange:d=>s(d.target.checked?1:0)}),e.jsx(C,{children:u("wiredfurni.params.condition.state")})]}),e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx("input",{className:"form-check-input",type:"checkbox",id:"directionFlag",checked:!!n,onChange:d=>a(d.target.checked?1:0)}),e.jsx(C,{children:u("wiredfurni.params.condition.direction")})]}),e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx("input",{className:"form-check-input",type:"checkbox",id:"positionFlag",checked:!!r,onChange:d=>l(d.target.checked?1:0)}),e.jsx(C,{children:u("wiredfurni.params.condition.position")})]})]})})},c1=i=>e.jsx(dt,{requiresFurni:oe.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!1,save:null}),u1=i=>e.jsx(dt,{requiresFurni:oe.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!1,save:null}),d1=i=>{switch(i){case Qe.BOT_CHANGE_FIGURE:return e.jsx(DO,{});case Qe.BOT_FOLLOW_AVATAR:return e.jsx(PO,{});case Qe.BOT_GIVE_HAND_ITEM:return e.jsx(MO,{});case Qe.BOT_MOVE:return e.jsx(UO,{});case Qe.BOT_TALK:return e.jsx(VO,{});case Qe.BOT_TALK_DIRECT_TO_AVTR:return e.jsx(FO,{});case Qe.BOT_TELEPORT:return e.jsx(GO,{});case Qe.CALL_ANOTHER_STACK:return e.jsx(BO,{});case Qe.CHASE:return e.jsx(HO,{});case Qe.CHAT:return e.jsx(WO,{});case Qe.FLEE:return e.jsx(qO,{});case Qe.GIVE_REWARD:return e.jsx(zO,{});case Qe.GIVE_SCORE:return e.jsx($O,{});case Qe.GIVE_SCORE_TO_PREDEFINED_TEAM:return e.jsx(YO,{});case Qe.JOIN_TEAM:return e.jsx(KO,{});case Qe.KICK_FROM_ROOM:return e.jsx(XO,{});case Qe.LEAVE_TEAM:return e.jsx(QO,{});case Qe.MOVE_FURNI:return e.jsx(a1,{});case Qe.MOVE_AND_ROTATE_FURNI:return e.jsx(e1,{});case Qe.MOVE_FURNI_TO:return e.jsx(s1,{});case Qe.MUTE_USER:return e.jsx(i1,{});case Qe.RESET:return e.jsx(o1,{});case Qe.SET_FURNI_STATE:return e.jsx(l1,{});case Qe.TELEPORT:return e.jsx(c1,{});case Qe.TOGGLE_FURNI_STATE:return e.jsx(u1,{})}return null},us=i=>{const{requiresFurni:t=oe.STUFF_SELECTION_OPTION_NONE,save:s=null,hasSpecialInput:n=!1,children:a=null,maxItemSelectionCount:r=5}=i,l=()=>s&&s();return e.jsx(Gc,{wiredType:"condition",requiresFurni:t,hasSpecialInput:n,save:l,maxItemSelectionCount:r,children:a})},m1=[2,5,7,8,9,10,27],h1=i=>{const[t,s]=o.useState(-1),{trigger:n=null,setIntParams:a=null}=Ee(),r=()=>a([t]);return o.useEffect(()=>{s(n.intData.length>0?n.intData[0]:0)},[n]),e.jsx(us,{requiresFurni:oe.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:r,children:e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("wiredfurni.params.handitem")}),e.jsx("select",{className:"form-select form-select-sm",value:t,onChange:l=>s(parseInt(l.target.value)),children:m1.map(l=>e.jsx("option",{value:l,children:u(`handitem${l}`)},l))})]})})},g1=i=>e.jsx(us,{requiresFurni:oe.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!1,save:null}),f1=i=>e.jsx(us,{requiresFurni:oe.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!1,save:null}),p1=[1,2,3,4],x1=i=>{const[t,s]=o.useState(-1),{trigger:n=null,setIntParams:a=null}=Ee(),r=()=>a([t]);return o.useEffect(()=>{s(n.intData.length>0?n.intData[0]:0)},[n]),e.jsx(us,{requiresFurni:oe.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:r,children:e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("wiredfurni.params.team")}),p1.map(l=>e.jsxs(_,{gap:1,alignItems:"center",children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"selectedTeam",id:`selectedTeam${l}`,checked:t===l,onChange:c=>s(l)}),e.jsx(C,{children:u(`wiredfurni.params.team.${l}`)})]},l))]})})},j1=i=>{const[t,s]=o.useState(""),{trigger:n=null,setStringParam:a=null}=Ee(),r=()=>a(t);return o.useEffect(()=>{s(n.stringData)},[n]),e.jsx(us,{requiresFurni:oe.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:r,children:e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("wiredfurni.params.badgecode")}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:t,onChange:l=>s(l.target.value)})]})})},I1=i=>{const[t,s]=o.useState(-1),{trigger:n=null,setIntParams:a=null}=Ee(),r=()=>a([t]);return o.useEffect(()=>{s((n==null?void 0:n.intData[0])??0)},[n]),e.jsx(us,{requiresFurni:oe.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:r,children:e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("wiredfurni.tooltip.effectid")}),e.jsx("input",{type:"number",className:"form-control form-control-sm",value:t,onChange:l=>s(parseInt(l.target.value))})]})})},E1=i=>{const[t,s]=o.useState(""),[n,a]=o.useState(""),{trigger:r=null,setIntParams:l=null}=Ee(),c=()=>{let m=0,h=0;const d=new Date(t),g=new Date(n);d&&g&&(m=d.getTime()/1e3,h=g.getTime()/1e3),l([m,h])};return o.useEffect(()=>{if(r.intData.length>=2){let m=new Date,h=new Date;r.intData[0]>0&&(m=new Date(r.intData[0]*1e3)),r.intData[1]>0&&(h=new Date(r.intData[1]*1e3)),s(Du(m)),a(Du(h))}},[r]),e.jsxs(us,{requiresFurni:oe.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:c,children:[e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("wiredfurni.params.startdate")}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:t,onChange:m=>s(m.target.value)})]}),e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("wiredfurni.params.enddate")}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:n,onChange:m=>a(m.target.value)})]})]})},b1=i=>e.jsx(us,{requiresFurni:oe.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!1,save:null,maxItemSelectionCount:1}),C1=i=>{const[t,s]=o.useState(-1),{trigger:n=null,setIntParams:a=null}=Ee(),r=()=>a([t]);return o.useEffect(()=>{s(n.intData.length>0?n.intData[0]:0)},[n]),e.jsx(us,{requiresFurni:oe.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!0,save:r,children:e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("wiredfurni.params.requireall")}),[0,1].map(l=>e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"requireAll",id:`requireAll${l}`,checked:t===l,onChange:c=>s(l)}),e.jsx(C,{children:u("wiredfurni.params.requireall."+l)})]},l))]})})},N1=i=>{const[t,s]=o.useState(-1),{trigger:n=null,setIntParams:a=null}=Ee(),r=()=>a([t]);return o.useEffect(()=>{s(n.intData.length>0?n.intData[0]:0)},[n]),e.jsx(us,{requiresFurni:oe.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!0,save:r,children:e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("wiredfurni.params.not_requireall")}),[0,1].map(l=>e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"requireAll",id:`requireAll${l}`,checked:t===l,onChange:c=>s(l)}),e.jsx(C,{children:u(`wiredfurni.params.not_requireall.${l}`)})]},l))]})})},v1=i=>e.jsx(us,{requiresFurni:oe.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE,hasSpecialInput:!1,save:null}),_1=i=>{const[t,s]=o.useState(0),[n,a]=o.useState(0),[r,l]=o.useState(0),{trigger:c=null,setIntParams:m=null}=Ee(),h=()=>m([t,n,r]);return o.useEffect(()=>{s(c.getBoolean(0)?1:0),a(c.getBoolean(1)?1:0),l(c.getBoolean(2)?1:0)},[c]),e.jsx(us,{requiresFurni:oe.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!0,save:h,children:e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("wiredfurni.params.conditions")}),e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx("input",{className:"form-check-input",type:"checkbox",id:"stateFlag",checked:!!t,onChange:d=>s(d.target.checked?1:0)}),e.jsx(C,{children:u("wiredfurni.params.condition.state")})]}),e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx("input",{className:"form-check-input",type:"checkbox",id:"directionFlag",checked:!!n,onChange:d=>a(d.target.checked?1:0)}),e.jsx(C,{children:u("wiredfurni.params.condition.direction")})]}),e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx("input",{className:"form-check-input",type:"checkbox",id:"positionFlag",checked:!!r,onChange:d=>l(d.target.checked?1:0)}),e.jsx(C,{children:u("wiredfurni.params.condition.position")})]})]})})},S1=i=>{const[t,s]=o.useState(-1),{trigger:n=null,setIntParams:a=null}=Ee(),r=()=>a([t]);return o.useEffect(()=>{s(n.intData.length>0?n.intData[0]:0)},[n]),e.jsx(us,{requiresFurni:oe.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:r,children:e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("wiredfurni.params.allowbefore",["seconds"],[ci(t)])}),e.jsx(Ot,{min:1,max:1200,value:t,onChange:l=>s(l)})]})})},w1=i=>{const[t,s]=o.useState(-1),{trigger:n=null,setIntParams:a=null}=Ee(),r=()=>a([t]);return o.useEffect(()=>{s(n.intData.length>0?n.intData[0]:0)},[n]),e.jsx(us,{requiresFurni:oe.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:r,children:e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("wiredfurni.params.allowafter",["seconds"],[ci(t)])}),e.jsx(Ot,{min:1,max:1200,value:t,onChange:l=>s(l)})]})})},T1=i=>{const[t,s]=o.useState(1),[n,a]=o.useState(1),{trigger:r=null,setIntParams:l=null}=Ee(),c=()=>l([t,n]);return o.useEffect(()=>{r.intData.length>=2?(s(r.intData[0]),a(r.intData[1])):(s(1),a(1))},[r]),e.jsxs(us,{requiresFurni:oe.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:c,children:[e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("wiredfurni.params.usercountmin",["value"],[t.toString()])}),e.jsx(Ot,{min:1,max:50,value:t,onChange:m=>s(m)})]}),e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("wiredfurni.params.usercountmax",["value"],[n.toString()])}),e.jsx(Ot,{min:1,max:50,value:n,onChange:m=>a(m)})]})]})},R1=i=>{switch(i){case nt.ACTOR_HAS_HANDITEM:return e.jsx(h1,{});case nt.ACTOR_IS_GROUP_MEMBER:case nt.NOT_ACTOR_IN_GROUP:return e.jsx(g1,{});case nt.ACTOR_IS_ON_FURNI:case nt.NOT_ACTOR_ON_FURNI:return e.jsx(f1,{});case nt.ACTOR_IS_IN_TEAM:case nt.NOT_ACTOR_IN_TEAM:return e.jsx(x1,{});case nt.ACTOR_IS_WEARING_BADGE:case nt.NOT_ACTOR_WEARS_BADGE:return e.jsx(j1,{});case nt.ACTOR_IS_WEARING_EFFECT:case nt.NOT_ACTOR_WEARING_EFFECT:return e.jsx(I1,{});case nt.DATE_RANGE_ACTIVE:return e.jsx(E1,{});case nt.FURNIS_HAVE_AVATARS:case nt.FURNI_NOT_HAVE_HABBO:return e.jsx(b1,{});case nt.HAS_STACKED_FURNIS:return e.jsx(C1,{});case nt.NOT_HAS_STACKED_FURNIS:return e.jsx(N1,{});case nt.STUFF_TYPE_MATCHES:case nt.NOT_FURNI_IS_OF_TYPE:return e.jsx(v1,{});case nt.STATES_MATCH:case nt.NOT_STATES_MATCH:return e.jsx(_1,{});case nt.TIME_ELAPSED_LESS:return e.jsx(S1,{});case nt.TIME_ELAPSED_MORE:return e.jsx(w1,{});case nt.USER_COUNT_IN:case nt.NOT_USER_COUNT_IN:return e.jsx(T1,{})}return null},js=i=>{const{requiresFurni:t=oe.STUFF_SELECTION_OPTION_NONE,save:s=null,hasSpecialInput:n=!1,children:a=null}=i,r=()=>s&&s();return e.jsx(Gc,{wiredType:"trigger",requiresFurni:t,hasSpecialInput:n,save:r,children:a})},y1=i=>{const[t,s]=o.useState(""),[n,a]=o.useState(0),{trigger:r=null,setStringParam:l=null}=Ee(),c=()=>l(n===1?t:"");return o.useEffect(()=>{s(r.stringData),a(r.stringData?1:0)},[r]),e.jsx(js,{requiresFurni:oe.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:c,children:e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("wiredfurni.params.picktriggerer")}),e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"avatarMode",id:"avatarMode0",checked:n===0,onChange:m=>a(0)}),e.jsx(C,{children:u("wiredfurni.params.anyavatar")})]}),e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"avatarMode",id:"avatarMode1",checked:n===1,onChange:m=>a(1)}),e.jsx(C,{children:u("wiredfurni.params.certainavatar")})]}),n===1&&e.jsx("input",{type:"text",className:"form-control form-control-sm",value:t,onChange:m=>s(m.target.value)})]})})},O1=i=>{const[t,s]=o.useState(""),[n,a]=o.useState(-1),{trigger:r=null,setStringParam:l=null,setIntParams:c=null}=Ee(),m=()=>{l(t),c([n])};return o.useEffect(()=>{s(r.stringData),a(r.intData.length>0?r.intData[0]:0)},[r]),e.jsxs(js,{requiresFurni:oe.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:m,children:[e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("wiredfurni.params.whatissaid")}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:t,onChange:h=>s(h.target.value)})]}),e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("wiredfurni.params.picktriggerer")}),e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"triggererAvatar",id:"triggererAvatar0",checked:n===0,onChange:h=>a(0)}),e.jsx(C,{children:u("wiredfurni.params.anyavatar")})]}),e.jsxs(_,{alignItems:"center",gap:1,children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"triggererAvatar",id:"triggererAvatar1",checked:n===1,onChange:h=>a(1)}),e.jsx(C,{children:V().userName})]})]})]})},k1=i=>e.jsx(js,{requiresFurni:oe.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE,hasSpecialInput:!1,save:null}),A1=i=>e.jsx(js,{requiresFurni:oe.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE,hasSpecialInput:!1,save:null}),D1=i=>{const[t,s]=o.useState(""),{trigger:n=null,setStringParam:a=null}=Ee(),r=()=>a(t);return o.useEffect(()=>{s(n.stringData)},[n]),e.jsx(js,{requiresFurni:oe.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:r,children:e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("wiredfurni.params.bot.name")}),e.jsx("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:t,onChange:l=>s(l.target.value)})]})})},P1=i=>{const[t,s]=o.useState(""),{trigger:n=null,setStringParam:a=null}=Ee(),r=()=>a(t);return o.useEffect(()=>{s(n.stringData)},[n]),e.jsx(js,{requiresFurni:oe.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE,hasSpecialInput:!0,save:r,children:e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("wiredfurni.params.bot.name")}),e.jsx("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:t,onChange:l=>s(l.target.value)})]})})},L1=i=>e.jsx(js,{requiresFurni:oe.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!1,save:null}),M1=i=>{const[t,s]=o.useState(1),{trigger:n=null,setIntParams:a=null}=Ee(),r=()=>a([t]);return o.useEffect(()=>{s(n.intData.length>0?n.intData[0]:0)},[n]),e.jsx(js,{requiresFurni:oe.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:r,children:e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("wiredfurni.params.settime",["seconds"],[ci(t)])}),e.jsx(Ot,{min:1,max:1200,value:t,onChange:l=>s(l)})]})})},U1=i=>{const[t,s]=o.useState(1),{trigger:n=null,setIntParams:a=null}=Ee(),r=()=>a([t]);return o.useEffect(()=>{s(n.intData.length>0?n.intData[0]:0)},[n]),e.jsx(js,{requiresFurni:oe.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:r,children:e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("wiredfurni.params.setlongtime",["time"],[Xs.format(t*5).toString()])}),e.jsx(Ot,{min:1,max:120,value:t,onChange:l=>s(l)})]})})},F1=i=>{const[t,s]=o.useState(1),{trigger:n=null,setIntParams:a=null}=Ee(),r=()=>a([t]);return o.useEffect(()=>{s(n.intData.length>0?n.intData[0]:0)},[n]),e.jsx(js,{requiresFurni:oe.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:r,children:e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("wiredfurni.params.settime",["seconds"],[ci(t)])}),e.jsx(Ot,{min:1,max:60,value:t,onChange:l=>s(l)})]})})},V1=i=>e.jsx(js,{requiresFurni:oe.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!1,save:null}),G1=i=>e.jsx(js,{requiresFurni:oe.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!1,save:null}),B1=i=>{const[t,s]=o.useState(1),{trigger:n=null,setIntParams:a=null}=Ee(),r=()=>a([t]);return o.useEffect(()=>{s(n.intData.length>0?n.intData[0]:0)},[n]),e.jsx(js,{requiresFurni:oe.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:r,children:e.jsxs(N,{gap:1,children:[e.jsx(C,{bold:!0,children:u("wiredfurni.params.setscore",["points"],[t.toString()])}),e.jsx(Ot,{min:1,max:1e3,value:t,onChange:l=>s(l)})]})})},H1=i=>e.jsx(js,{requiresFurni:oe.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE,hasSpecialInput:!1,save:null}),W1=i=>{switch(i){case $t.AVATAR_ENTERS_ROOM:return e.jsx(y1,{});case $t.AVATAR_SAYS_SOMETHING:return e.jsx(O1,{});case $t.AVATAR_WALKS_OFF_FURNI:return e.jsx(k1,{});case $t.AVATAR_WALKS_ON_FURNI:return e.jsx(A1,{});case $t.BOT_REACHED_AVATAR:return e.jsx(D1,{});case $t.BOT_REACHED_STUFF:return e.jsx(P1,{});case $t.COLLISION:return e.jsx(L1,{});case $t.EXECUTE_ONCE:return e.jsx(M1,{});case $t.EXECUTE_PERIODICALLY:return e.jsx(F1,{});case $t.EXECUTE_PERIODICALLY_LONG:return e.jsx(U1,{});case $t.GAME_ENDS:return e.jsx(V1,{});case $t.GAME_STARTS:return e.jsx(G1,{});case $t.SCORE_ACHIEVED:return e.jsx(B1,{});case $t.TOGGLE_FURNI:return e.jsx(H1,{})}return null},q1=i=>{const{trigger:t=null}=Ee();return t?t instanceof um?d1(t.code):t instanceof dm?W1(t.code):t instanceof mm?R1(t.code):null:null},z1=i=>{o.useState(-1);const[t,s]=o.useState("");o.useState("");const[n,a]=o.useState(!1),r=()=>{a(!1)};o.useEffect(()=>{const c={linkReceived:m=>{const h=m.split("/");if(!(h.length<3))switch(h[1]){case"show":a(!0),s(h[2]);return}},eventUrlPrefix:"youtube-tv/"};return ct(c),()=>ut(c)},[]);const l=o.useMemo(()=>K("url.prefix"),[]);return n?e.jsxs(ne,{className:"youtube-tv-widget",children:[e.jsx(se,{headerText:"Tv Youtube",onCloseClick:r}),e.jsx(ee,{grow:!0,gap:0,children:e.jsx("div",{className:"youtube-video-container d-flex w-100 h-100",children:t&&t.length>0&&e.jsx("iframe",{allowFullScreen:!0,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",width:"100%",height:"100%",src:`https://www.youtube.com/embed/${t}?autoplay=1&mute=0&controls=1&origin=`+l+"&playsinline=1&showinfo=0&rel=0&iv_load_policy=3&modestbranding=1&disablekb=1&enablejsapi=1&widgetid=3"})})})]}):null},Y1=i=>{const[t,s]=o.useState(!1),[n,a]=o.useState(!0);return Ve(yt.CREATED,r=>a(!1)),Ve(yt.ENDED,r=>a(r.openLandingView)),o.useEffect(()=>{s(!0),Wa().connection.onReady()},[]),o.useEffect(()=>{const r={linkReceived:l=>{const c=l.split("/");if(!(c.length<2))switch(c[1]){case"open":if(c.length>2)switch(c[2]){case"credits":break;default:{const m=c[2];ni.openHabblet(m)}}return}},eventUrlPrefix:"habblet/"};return ct(r),()=>ut(r)},[]),e.jsxs(A,{fit:!0,children:[e.jsx(ca,{type:Zt.FADE_IN,inProp:n,timeout:300,children:e.jsx(ST,{})}),e.jsx(vO,{isInRoom:!n}),e.jsx(tR,{}),e.jsx(CO,{}),e.jsx(YS,{}),e.jsx(q1,{}),e.jsx(J_,{}),e.jsx(M_,{}),e.jsx(jR,{}),e.jsx(IR,{}),e.jsx(VT,{}),e.jsx(zS,{}),e.jsx(xw,{}),e.jsx(WR,{}),e.jsx(OO,{}),e.jsx(yO,{}),e.jsx(Dw,{}),e.jsx(aS,{}),e.jsx(uT,{}),e.jsx(bR,{}),e.jsx(qw,{}),e.jsx(zw,{}),e.jsx(lS,{}),e.jsx(bw,{}),e.jsx(rw,{}),e.jsx(z1,{})]})};Yd.UI_VERSION=zm();const $1=i=>{const[t,s]=o.useState(!1),[n,a]=o.useState(!1),[r,l]=o.useState("Getting Ready"),[c,m]=o.useState(0),[h,d]=o.useState(!0);if(!pe()){if(!NitroConfig)throw new Error("NitroConfig is not defined!");Gr.bootstrap()}const g=o.useCallback(async f=>{switch(f.type){case bi.LOADED:pe().localization.init(),m(j=>j+20);return;case bi.FAILED:a(!0),l("Configuration Failed");return;case Gr.WEBGL_UNAVAILABLE:a(!0),l("WebGL Required");return;case Gr.WEBGL_CONTEXT_LOST:a(!0),l("WebGL Context Lost - Reloading"),setTimeout(()=>window.location.reload(),1500);return;case Zs.CONNECTION_HANDSHAKING:m(j=>j+20);return;case Zs.CONNECTION_HANDSHAKE_FAILED:a(!0),l("Handshake Failed");return;case Zs.CONNECTION_AUTHENTICATED:m(j=>j+20),pe().init(),Ha.available&&Ha.call("legacyTrack","authentication","authok",[]);return;case Zs.CONNECTION_ERROR:a(!0),l("Connection Error");return;case Zs.CONNECTION_CLOSED:l("Connection Error"),ni.send(-1,"client.init.handshake.fail");return;case Ns.ENGINE_INITIALIZED:m(j=>j+20),setTimeout(()=>s(!0),300);return;case gu.LOADED:{const j=K("preload.assets.urls"),p=[];if(j&&j.length)for(const x of j)p.push(nc.interpolate(x));await $b().downloadAssets(p)?(Wa().init(),m(x=>x+20)):(a(!0),l("Assets Failed"));return}}},[]);return hr(Gr.WEBGL_UNAVAILABLE,g),hr(Gr.WEBGL_CONTEXT_LOST,g),hr(Zs.CONNECTION_HANDSHAKING,g),hr(Zs.CONNECTION_HANDSHAKE_FAILED,g),hr(Zs.CONNECTION_AUTHENTICATED,g),hr(Zs.CONNECTION_ERROR,g),hr(Zs.CONNECTION_CLOSED,g),Ie(Ns.ENGINE_INITIALIZED,g),vN(gu.LOADED,g),Uu(bi.LOADED,g),Uu(bi.FAILED,g),o.useEffect(()=>{pe().core.configuration.init();const f=j=>d(!(window.devicePixelRatio%1));return window.addEventListener("resize",f),f(),()=>{window.removeEventListener("resize",f)}},[]),e.jsxs(A,{fit:!0,overflow:"hidden",className:h&&"image-rendering-pixelated",children:[(!t||n)&&e.jsx(y_,{isError:n,message:r,percent:c}),e.jsx(ca,{type:Zt.FADE_IN,inProp:t,children:e.jsx(Y1,{})}),e.jsx(A,{id:"draggable-windows-container"})]})};Kb(document.getElementById("root")).render(e.jsx($1,{}));
